import{c as ee,a as c,f}from"../chunks/B-wedEgi.js";import{p as Ae,l as St,m as je,y as Fe,t as L,k as xt,a as Pe,z as r,A as e,B as i,D as Ne,F as N,n as t,G as Oe,o as Be,I as et,J as Se}from"../chunks/DXU5jnQ_.js";import{d as Le,s as W,e as de}from"../chunks/CKrhTcXd.js";import{i as k}from"../chunks/1UUrSLx-.js";import{e as ft,i as gt,s as ht,c as Te}from"../chunks/JHaZoCpa.js";import{r as Ct,a as Bt,b as De,t as Ue,c as F,d as qe,e as Rt,f as Ge,g as We}from"../chunks/CpFvtbVR.js";import{s as te}from"../chunks/BW5xtwr9.js";import{d as ve}from"../chunks/Ban-EeZC.js";import{b as pt,P as Ie}from"../chunks/jmEW5wUa.js";import{f as He}from"../chunks/BsCRBkET.js";import{T as ke}from"../chunks/wveo2xEP.js";import{G as Re,S as Ye,E as Ve,C as Je,L as Ke,a as Qe}from"../chunks/_bcvuuv8.js";import{S as Xe}from"../chunks/Cj4_WUF5.js";import{F as Ze,A as $e}from"../chunks/Df4ok_nb.js";import{L as tr}from"../chunks/DV5mb0O4.js";import{A as er}from"../chunks/QpLyY0R8.js";var rr=f("<option> </option>"),ar=f("<div></div>"),ir=f('<div class="flex items-center gap-2"><button type="button" class="text-zinc-400 hover:text-zinc-200"><!></button> <input type="text" placeholder="Item description..."/> <div class="flex items-center gap-1"><div role="button" tabindex="0" class="cursor-grab p-1 text-zinc-600 hover:text-zinc-400 active:cursor-grabbing" draggable="true"><!></div> <button type="button" class="p-1 text-zinc-500 hover:text-red-400"><!></button></div></div>'),nr=f('<div class="rounded-lg border border-zinc-800 bg-zinc-800/30 p-4"><div class="mb-3 flex items-center justify-between gap-2"><input type="text" placeholder="Checklist Title" class="w-full bg-transparent text-sm font-bold text-zinc-200 placeholder-zinc-600 focus:outline-none"/> <button type="button" class="text-zinc-600 hover:text-red-400" title="Remove Checklist"><!></button></div> <div class="space-y-2"><!> <button type="button" class="mt-2 flex items-center gap-1 text-xs text-zinc-500 hover:text-zinc-300"><!> Add Item</button></div></div>'),sr=f('<div class="space-y-6"></div>'),or=f('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No checklists yet</p></div>'),lr=f('<div class="flex items-center gap-2"><div class="grid flex-1 grid-cols-1 gap-2 md:grid-cols-2"><input type="text" placeholder="Label (optional)" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/> <input type="text" placeholder="URL" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <button type="button" class="p-2 text-zinc-400 hover:text-indigo-400" title="Open Link"><!></button> <button type="button" class="p-2 text-zinc-400 hover:text-red-400" title="Remove Link"><!></button></div>'),cr=f('<div class="space-y-2"></div>'),dr=f('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No links yet</p></div>'),vr=f('<button type="button" class="rounded-md bg-red-500/10 px-3.5 py-2.5 text-sm font-semibold text-red-400 shadow-sm ring-1 ring-red-500/20 transition-colors ring-inset hover:bg-red-500/20">Delete</button>'),ur=f('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div><label for="name" class="mb-1 block text-sm font-medium text-zinc-400">Name</label> <input type="text" id="name" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="description" class="mb-1 block text-sm font-medium text-zinc-400">Description</label> <textarea id="description" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="status" class="mb-1 block text-sm font-medium text-zinc-400">Status</label> <select id="status" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Not Started</option><option>In Progress</option><option>Postponed</option><option>Completed</option><option>Cancelled</option></select></div> <div><label for="funds" class="mb-1 block text-sm font-medium text-zinc-400">Funds (€)</label> <input type="number" id="funds" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div><label for="type" class="mb-1 block text-sm font-medium text-zinc-400">Type</label> <div class="flex items-center gap-2"><select id="type" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Select Type</option><!></select> <!></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="start_at" class="mb-1 block text-sm font-medium text-zinc-400">Start Date</label> <input type="date" id="start_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="end_at" class="mb-1 block text-sm font-medium text-zinc-400">End Date</label> <input type="date" id="end_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Checklists</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Checklist</button></div> <!></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Links</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Link</button></div> <!></div> <div class="sticky bottom-0 mt-6 flex justify-between gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><div><!></div> <div class="flex gap-3"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700">Cancel</button> <button type="submit" class="rounded-md px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm transition-all hover:brightness-110 focus-visible:outline-2 focus-visible:outline-offset-2">Save</button></div></div></form></div></div>');function fr(ue,g){Ae(g,!0);let n=St(je({name:"",description:"",funds:null,status:0,type:null,start_at:"",end_at:"",colour:"bg-indigo-600",checklist:[],links:[]})),J=St(null);Fe(()=>{g.isOpen&&(g.entry?L(n,{name:g.entry.name||"",description:g.entry.description||"",funds:g.entry.funds,status:g.entry.status??0,type:g.entry.type??null,start_at:g.entry.start_at?new Date(g.entry.start_at).toISOString().split("T")[0]:"",end_at:g.entry.end_at?new Date(g.entry.end_at).toISOString().split("T")[0]:"",colour:g.entry.colour||"bg-indigo-600",checklist:Array.isArray(g.entry.checklist)?g.entry.checklist:[],links:Array.isArray(g.entry.links)?g.entry.links:[]},!0):L(n,{name:"",description:"",funds:null,status:0,type:null,start_at:"",end_at:"",colour:"bg-indigo-600",checklist:[],links:[]},!0))});function Ut(){if(t(n).type){const l=Bt.getProjectType(t(n).type);l&&l.color&&(t(n).colour=l.color)}}function ot(l){l.preventDefault(),g.onSave(t(n))}function Tt(l){l.target===l.currentTarget&&g.onClose()}function At(l){l.key==="Escape"&&g.onClose()}function Pt(){t(n).checklist=[...t(n).checklist,{id:crypto.randomUUID(),title:"New Checklist",items:[]}]}function qt(l){t(n).checklist=t(n).checklist.filter((v,w)=>w!==l)}function re(l){const v=t(n).checklist[l];v.items=[...v.items,{text:"",completed:!1}],t(n).checklist[l]=v}function Gt(l,v){const w=t(n).checklist[l];w.items=w.items.filter((rt,lt)=>lt!==v),t(n).checklist[l]=w}function Yt(l,v){const w=t(n).checklist[l];w.items[v].completed=!w.items[v].completed,t(n).checklist[l]=w}function fe(l,v,w){L(J,{listIndex:v,itemIndex:w},!0),l.dataTransfer&&(l.dataTransfer.effectAllowed="move",l.dataTransfer.dropEffect="move")}function ae(l,v,w){if(l.preventDefault(),!t(J)||t(J).listIndex!==v||t(J).itemIndex===w)return;const rt=t(n).checklist[v],lt=t(J).itemIndex,Lt=w,Wt=rt.items[lt],ct=[...rt.items];ct.splice(lt,1),ct.splice(Lt,0,Wt),rt.items=ct,t(n).checklist[v]=rt,t(J).itemIndex=Lt}function ge(){L(J,null)}function I(){t(n).links=[...t(n).links,{url:"",label:""}]}function me(l){t(n).links=t(n).links.filter((v,w)=>w!==l)}function be(l){if(!l)return;let v=l;/^https?:\/\//i.test(v)||(v="https://"+v),window.open(v,"_blank","noopener,noreferrer")}var ie=ee(),_e=xt(ie);{var pe=l=>{var v=ur();v.__click=Tt,v.__keydown=At;var w=r(v),rt=r(w),lt=r(rt),Lt=r(lt,!0);e(lt);var Wt=i(lt,2);Wt.__click=function(...s){g.onClose?.apply(this,s)},e(rt);var ct=i(rt,2),Et=r(ct),ne=i(r(Et),2);Ct(ne),e(Et);var Vt=i(Et,2),se=i(r(Vt),2);Ne(se),e(Vt);var Jt=i(Vt,2),a=r(Jt),d=i(r(a),2),b=r(d);b.value=b.__value=0;var _=i(b);_.value=_.__value=1;var m=i(_);m.value=m.__value=2;var E=i(m);E.value=E.__value=3;var H=i(E);H.value=H.__value=4,e(d),e(a);var R=i(a,2),C=i(r(R),2);Ct(C),e(R),e(Jt);var It=i(Jt,2),Mt=i(r(It),2),mt=r(Mt);mt.__change=Ut;var Kt=r(mt);Kt.value=(Kt.__value=null)??"";var xe=i(Kt);ft(xe,17,()=>Bt.settings.project_types,gt,(s,u)=>{var y=rr(),A=r(y,!0);e(y);var q={};N(()=>{W(A,t(u).label),q!==(q=t(u).id)&&(y.value=(y.__value=t(u).id)??"")}),c(s,y)}),e(mt);var he=i(mt,2);{var oe=s=>{var u=ar();let y;N(A=>{y=F(u,1,"h-8 w-8 shrink-0 rounded-full border border-zinc-600 shadow-sm",null,y,{"bg-zinc-500":t(n).colour==="bg-zinc-500","bg-red-600":t(n).colour==="bg-red-600","bg-orange-600":t(n).colour==="bg-orange-600","bg-amber-500":t(n).colour==="bg-amber-500","bg-green-600":t(n).colour==="bg-green-600","bg-emerald-500":t(n).colour==="bg-emerald-500","bg-teal-500":t(n).colour==="bg-teal-500","bg-cyan-500":t(n).colour==="bg-cyan-500","bg-blue-600":t(n).colour==="bg-blue-600","bg-indigo-600":t(n).colour==="bg-indigo-600","bg-violet-600":t(n).colour==="bg-violet-600","bg-purple-600":t(n).colour==="bg-purple-600","bg-fuchsia-600":t(n).colour==="bg-fuchsia-600","bg-pink-600":t(n).colour==="bg-pink-600","bg-rose-600":t(n).colour==="bg-rose-600"}),ht(u,A)},[()=>t(n).colour.startsWith("#")?`background-color: ${t(n).colour}`:""]),c(s,u)};k(he,s=>{t(n).colour&&s(oe)})}e(Mt),e(It);var jt=i(It,2),Qt=r(jt),Xt=i(r(Qt),2);Ct(Xt),e(Qt);var zt=i(Qt,2),le=i(r(zt),2);Ct(le),e(zt),e(jt);var wt=i(jt,2),Zt=r(wt),ce=i(r(Zt),2);ce.__click=Pt,e(Zt);var ze=i(Zt,2);{var we=s=>{var u=sr();ft(u,21,()=>t(n).checklist,gt,(y,A,q)=>{var it=nr(),nt=r(it),vt=r(nt);Ct(vt);var bt=i(vt,2);bt.__click=()=>qt(q);var st=r(bt);ke(st,{class:"h-4 w-4"}),e(bt),e(nt);var kt=i(nt,2),Dt=r(kt);ft(Dt,17,()=>t(A).items,gt,(p,z,T)=>{var G=ir(),O=r(G);O.__click=()=>Yt(q,T);var V=r(O);{var X=P=>{Xe(P,{class:"h-5 w-5 text-emerald-500"})},ut=P=>{Ye(P,{class:"h-5 w-5"})};k(V,P=>{t(z).completed?P(X):P(ut,!1)})}e(O);var Z=i(O,2);Ct(Z);var Ht=i(Z,2),j=r(Ht),$=r(j);Re($,{class:"h-4 w-4"}),e(j);var tt=i(j,2);tt.__click=()=>Gt(q,T);var _t=r(tt);ke(_t,{class:"h-3 w-3"}),e(tt),e(Ht),e(G),N(()=>F(Z,1,`w-full rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 ${t(z).completed?"text-zinc-500 line-through":""}`)),pt(Z,()=>t(z).text,P=>t(z).text=P),de("dragstart",j,P=>fe(P,q,T)),de("dragover",j,P=>ae(P,q,T)),de("dragend",j,ge),c(p,G)});var Ft=i(Dt,2);Ft.__click=()=>re(q);var Nt=r(Ft);Ie(Nt,{class:"h-3 w-3"}),Oe(),e(Ft),e(kt),e(it),pt(vt,()=>t(A).title,p=>t(A).title=p),c(y,it)}),e(u),c(s,u)},S=s=>{var u=or();c(s,u)};k(ze,s=>{t(n).checklist&&t(n).checklist.length>0?s(we):s(S,!1)})}e(wt);var B=i(wt,2),U=r(B),K=i(r(U),2);K.__click=I,e(U);var dt=i(U,2);{var yt=s=>{var u=cr();ft(u,21,()=>t(n).links,gt,(y,A,q)=>{var it=lr(),nt=r(it),vt=r(nt);Ct(vt);var bt=i(vt,2);Ct(bt),e(nt);var st=i(nt,2);st.__click=()=>be(t(A).url);var kt=r(st);Ve(kt,{class:"h-4 w-4"}),e(st);var Dt=i(st,2);Dt.__click=()=>me(q);var Ft=r(Dt);ke(Ft,{class:"h-4 w-4"}),e(Dt),e(it),N(()=>st.disabled=!t(A).url),pt(vt,()=>t(A).label,Nt=>t(A).label=Nt),pt(bt,()=>t(A).url,Nt=>t(A).url=Nt),c(y,it)}),e(u),c(s,u)},Q=s=>{var u=dr();c(s,u)};k(dt,s=>{t(n).links&&t(n).links.length>0?s(yt):s(Q,!1)})}e(B);var o=i(B,2),x=r(o),at=r(x);{var M=s=>{var u=vr();u.__click=()=>g.onDelete(g.entry.id),c(s,u)};k(at,s=>{g.entry&&g.onDelete&&s(M)})}e(x);var h=i(x,2),D=r(h);D.__click=function(...s){g.onClose?.apply(this,s)};var Y=i(D,2);e(h),e(o),e(ct),e(w),e(v),N((s,u,y)=>{W(Lt,g.entry?"Edit Project":"New Project"),ht(ce,`color: ${s??""}`),ht(K,`color: ${u??""}`),ht(Y,`background-color: ${y??""}`)},[()=>Bt.getAccentLightHex(),()=>Bt.getAccentLightHex(),()=>Bt.getAccentHex()]),de("submit",ct,ot),pt(ne,()=>t(n).name,s=>t(n).name=s),pt(se,()=>t(n).description,s=>t(n).description=s),De(d,()=>t(n).status,s=>t(n).status=s),pt(C,()=>t(n).funds,s=>t(n).funds=s),De(mt,()=>t(n).type,s=>t(n).type=s),pt(Xt,()=>t(n).start_at,s=>t(n).start_at=s),pt(le,()=>t(n).end_at,s=>t(n).end_at=s),Ue(3,v,()=>He,()=>({duration:Bt.getTransitionDuration()})),c(l,v)};k(_e,l=>{g.isOpen&&l(pe)})}c(ue,ie),Pe()}Le(["click","keydown","change"]);var gr=f('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">Sign in to view projects.</div>'),mr=f('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">No projects yet.</div>'),br=f("<option> </option>"),_r=f("<p> </p>"),pr=f('<div class="flex items-center gap-2 text-xs text-zinc-500"><span> </span></div>'),xr=f('<div class="flex items-center gap-1"><!> <span> </span></div>'),hr=f('<div class="flex items-center gap-1"><!> <span> </span></div>'),zr=f('<div class="flex items-center gap-3 text-xs text-zinc-500"><!> <!></div>'),wr=f('<div class="flex w-full shrink-0 flex-col gap-2 md:w-56"><div class="flex justify-end"><span> </span></div> <div class="flex items-center justify-between"><span>Progress</span> <span> </span></div> <div class="h-2 w-full overflow-hidden rounded-full bg-zinc-800"><div></div></div></div>'),yr=f('<div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Dates</span> <span> </span></div>'),kr=f('<button type="button"><div class="flex flex-col gap-4 md:flex-row md:items-start md:justify-between"><div class="flex min-w-0 flex-1 flex-col gap-2"><h3> </h3> <!> <!></div> <!></div> <div class="flex flex-wrap items-end gap-4 border-t border-zinc-800/50 pt-3"><div class="flex items-center gap-6"><div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Funds</span> <span> </span></div> <!></div></div></button>'),Dr=f('<div class="my-8 flex items-center gap-4"><div class="h-px flex-1 bg-zinc-800"></div> <span class="text-sm font-medium tracking-wider text-zinc-500 uppercase">Archived</span> <div class="h-px flex-1 bg-zinc-800"></div></div> <div class="grid grid-cols-1 gap-4"></div>',1),Cr=f('<div class="grid grid-cols-1 gap-4"></div> <!>',1),Sr=f('<div class="absolute top-8 bottom-0 border-l border-dashed border-zinc-800"></div>'),Tr=f('<div class="absolute -translate-x-1/2 transform text-center"> </div>'),Ar=f('<div class="group relative h-10 w-full rounded transition-colors hover:bg-zinc-800/30"><div class="absolute top-1 flex flex-col gap-1"><div></div> <span class="px-0.5 text-[10px] font-medium whitespace-nowrap text-zinc-400"> </span></div></div>'),Pr=f('<div class="p-4 text-center text-zinc-500">No projects with dates to display.</div>'),Lr=f('<div class="w-full overflow-x-auto rounded-lg border border-zinc-800 bg-zinc-900/60 p-4"><div class="relative min-w-[800px]"><div class="pointer-events-none absolute inset-0"></div> <div class="relative z-10 mb-4 flex border-b border-zinc-800 pb-2 text-xs font-medium text-zinc-500"><div class="relative h-6 flex-1"></div></div> <div class="space-y-3"><!> <!></div></div></div>'),Er=f('<div class="mb-4 flex flex-wrap items-center justify-between gap-4 text-sm"><div class="flex flex-wrap items-center gap-4"><div class="flex items-center gap-2"><select class="cursor-pointer rounded-md border border-zinc-700 bg-zinc-800 px-3 py-1.5 text-sm text-zinc-100 shadow-sm outline-none focus:border-indigo-500 focus:ring-indigo-500"></select> <button class="flex items-center justify-center rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-zinc-400 shadow-sm transition-colors hover:bg-zinc-700 hover:text-zinc-100" aria-label="Toggle sort order"><!></button></div></div> <div class="flex items-center gap-4"><span class="text-xs text-zinc-500"> </span> <div class="flex items-center rounded-lg bg-zinc-800/50 p-1"><button aria-label="List View"><!></button> <button aria-label="Gantt View"><!></button></div></div></div> <!>',1),Mr=f('<!> <section><div class="flex flex-wrap items-center justify-between gap-4"><!></div> <!></section>',1);function Qr(ue,g){Ae(g,!0);const n={0:"Not Started",1:"In Progress",2:"Postponed",3:"Completed",4:"Cancelled"};let J=St(null),Ut=et(()=>ve.projects),ot=St(!1),Tt=St(null),At=St("list"),Pt=St("date"),qt=St("desc");function re(a){if(!a)return{total:0,completed:0};if(Array.isArray(a)&&a.length>0&&"items"in a[0]){let d=0,b=0;return a.forEach(_=>{_.items&&(d+=_.items.length,b+=_.items.filter(m=>m.completed).length)}),{total:d,completed:b}}return Array.isArray(a)&&a.length>0?{total:a.length,completed:a.filter(d=>d.completed).length}:{total:0,completed:0}}function Gt(a){const d=re(a);return d.total===0?0:Math.round(d.completed/d.total*100)}let Yt=et(()=>[...t(Ut)].sort((a,d)=>{const b=t(qt)==="asc"?1:-1;if(t(Pt)==="name")return a.name.localeCompare(d.name)*b;if(t(Pt)==="date"){const _=new Date(a.created_at).getTime(),m=new Date(d.created_at).getTime();return(_-m)*b}else if(t(Pt)==="progress"){const _=Gt(a.checklist),m=Gt(d.checklist);return(_-m)*b}return 0})),fe=et(()=>t(Yt).filter(a=>a.status!==3&&a.status!==4)),ae=et(()=>t(Yt).filter(a=>a.status===3||a.status===4)),ge=et(()=>t(Ut).filter(a=>a.status===3).length),I=et(()=>{const a=t(Yt).filter(C=>C.start_at&&C.end_at);if(a.length===0){const C=new Date;return{start:new Date(C.getFullYear(),0,1),end:new Date(C.getFullYear(),11,31),projects:[],months:[]}}const d=a.flatMap(C=>[new Date(C.start_at),new Date(C.end_at)]),b=new Date(Math.min(...d.map(C=>C.getTime()))),_=new Date(Math.max(...d.map(C=>C.getTime()))),m=new Date(b);m.setDate(m.getDate()-7);const E=new Date(_);E.setDate(E.getDate()+7);const H=[],R=new Date(m);for(R.setDate(1);R<=E;)H.push(new Date(R)),R.setMonth(R.getMonth()+1);return H.length===0&&H.push(new Date(m.getFullYear(),m.getMonth(),1)),{start:m,end:E,projects:a,months:H}});function me(a,d,b){if(!a.start_at||!a.end_at)return"";const _=b.getTime()-d.getTime(),m=new Date(a.start_at).getTime(),E=new Date(a.end_at).getTime(),H=(m-d.getTime())/_*100,R=(E-m)/_*100;return`left: ${Math.max(0,H)}%; width: ${Math.min(100,R)}%;`}Be(()=>{te.auth.getSession().then(({data:{session:d}})=>{L(J,d,!0)});const{data:{subscription:a}}=te.auth.onAuthStateChange((d,b)=>{L(J,b,!0)});return()=>a.unsubscribe()});function be(){L(Tt,null),L(ot,!0)}function ie(a){L(Tt,a,!0),L(ot,!0)}async function _e(a){if(!await qe("Are you sure you want to delete this project?","Delete Project",{confirmText:"Delete",isDestructive:!0}))return;const{error:b}=await te.from("projects").delete().eq("id",a);b?(console.error("Error deleting project:",b),Rt("Error deleting: "+b.message,"Error")):(Rt("Project deleted successfully!","Success"),L(ot,!1),ve.deleteProject(a))}async function pe(a){const{id:d,...b}=a;if(b.percentage=Gt(b.checklist),t(Tt)){const{data:_,error:m}=await te.from("projects").update(b).eq("id",t(Tt).id).select().single();m?(console.error("Error updating project:",m),Rt("Error updating: "+m.message,"Error")):(Rt("Project updated successfully!","Success"),L(ot,!1),_&&ve.updateProject(_))}else{const{data:_,error:m}=await te.from("projects").insert(b).select().single();m?(console.error("Error saving project:",m),Rt("Error saving: "+m.message,"Error")):(Rt("Project saved successfully!","Success"),L(ot,!1),_&&ve.addProject(_))}}const l=a=>a===null?"—":`€${a}`,v=a=>a?new Date(a).toLocaleDateString():"—";function w(a,d=50){return a?a.length>d?a.slice(0,d)+"...":a:""}const rt=a=>n[a]??"Unknown",lt=a=>{switch(a){case 1:return"bg-amber-500/10 text-amber-400";case 2:return"bg-purple-500/10 text-purple-400";case 3:return"bg-emerald-500/10 text-emerald-400";case 4:return"bg-red-500/10 text-red-400";default:return"bg-zinc-800 text-zinc-400"}};var Lt=Mr(),Wt=xt(Lt);fr(Wt,{get isOpen(){return t(ot)},get entry(){return t(Tt)},onClose:()=>L(ot,!1),onSave:pe,onDelete:_e});var ct=i(Wt,2),Et=r(ct),ne=r(Et);{let a=et(()=>!!(t(J)&&!t(ot)&&!Ge.isOpen));Ze(ne,{onclick:be,get visible(){return t(a)},ariaLabel:"New Project"})}e(Et);var Vt=i(Et,2);{var se=a=>{var d=gr();c(a,d)},Jt=a=>{var d=ee(),b=xt(d);{var _=E=>{var H=mr();c(E,H)},m=E=>{var H=Er(),R=xt(H),C=r(R),It=r(C),Mt=r(It);ft(Mt,20,()=>["name","date","progress"],gt,(S,B)=>{var U=br(),K=r(U,!0);e(U);var dt={};N(yt=>{W(K,yt),dt!==(dt=B)&&(U.value=(U.__value=B)??"")},[()=>B.charAt(0).toUpperCase()+B.slice(1)]),c(S,U)}),e(Mt);var mt=i(Mt,2);mt.__click=()=>L(qt,t(qt)==="asc"?"desc":"asc",!0);var Kt=r(mt);{var xe=S=>{$e(S,{class:"h-4 w-4"})},he=S=>{er(S,{class:"h-4 w-4"})};k(Kt,S=>{t(qt)==="asc"?S(xe):S(he,!1)})}e(mt),e(It),e(C);var oe=i(C,2),jt=r(oe),Qt=r(jt);e(jt);var Xt=i(jt,2),zt=r(Xt);zt.__click=()=>L(At,"list");var le=r(zt);tr(le,{class:"h-4 w-4"}),e(zt);var wt=i(zt,2);wt.__click=()=>L(At,"gantt");var Zt=r(wt);Je(Zt,{class:"h-4 w-4"}),e(wt),e(Xt),e(oe),e(R);var ce=i(R,2);{var ze=S=>{const B=(Q,o=Se,x=Se)=>{var at=kr();at.__click=()=>ie(o());var M=r(at),h=r(M),D=r(h),Y=r(D,!0);e(D);var s=i(D,2);{var u=p=>{var z=_r(),T=r(z,!0);e(z),N(G=>{F(z,1,`text-sm ${x()?"text-zinc-600":"text-zinc-400"}`),W(T,G)},[()=>w(o().description)]),c(p,z)};k(s,p=>{o().description&&p(u)})}var y=i(s,2);{var A=p=>{const z=et(()=>Bt.getProjectType(o().type));var T=ee(),G=xt(T);{var O=V=>{var X=pr(),ut=r(X),Z=r(ut,!0);e(ut),e(X),N(()=>{F(ut,1,`font-medium ${x()?"text-zinc-600":"text-zinc-400"}`),W(Z,t(z).label)}),c(V,X)};k(G,V=>{t(z)&&V(O)})}c(p,T)},q=p=>{var z=ee(),T=xt(z);{var G=O=>{var V=zr(),X=r(V);{var ut=j=>{const $=et(()=>re(o().checklist));var tt=ee(),_t=xt(tt);{var P=Ot=>{var $t=xr(),Ce=r($t);{let Me=et(()=>`h-3.5 w-3.5 ${x()?"text-zinc-600":"text-zinc-400"}`);Qe(Ce,{get class(){return t(Me)}})}var ye=i(Ce,2),Ee=r(ye);e(ye),e($t),N(()=>{F(ye,1,Te(x()?"text-zinc-600":"text-zinc-500")),W(Ee,`${t($).completed??""}/${t($).total??""}`)}),c(Ot,$t)};k(_t,Ot=>{t($).total>0&&Ot(P)})}c(j,tt)};k(X,j=>{o().checklist&&j(ut)})}var Z=i(X,2);{var Ht=j=>{var $=hr(),tt=r($);{let Ot=et(()=>`h-3.5 w-3.5 ${x()?"text-zinc-600":"text-zinc-400"}`);Ke(tt,{get class(){return t(Ot)}})}var _t=i(tt,2),P=r(_t,!0);e(_t),e($),N(()=>{F(_t,1,Te(x()?"text-zinc-600":"text-zinc-500")),W(P,o().links.length)}),c(j,$)};k(Z,j=>{o().links&&o().links.length>0&&j(Ht)})}e(V),c(O,V)};k(T,O=>{(o().checklist||o().links&&o().links.length>0)&&O(G)},!0)}c(p,z)};k(y,p=>{o().type?p(A):p(q,!1)})}e(h);var it=i(h,2);{var nt=p=>{const z=et(()=>Gt(o().checklist));var T=wr(),G=r(T),O=r(G),V=r(O,!0);e(O),e(G);var X=i(G,2),ut=r(X),Z=i(ut,2),Ht=r(Z);e(Z),e(X);var j=i(X,2),$=r(j);let tt;e(j),e(T),N((_t,P,Ot,$t)=>{F(O,1,_t),W(V,P),F(ut,1,`text-xs font-medium ${x()?"text-zinc-600":"text-zinc-400"}`),F(Z,1,`text-xs ${x()?"text-zinc-600":"text-zinc-500"}`),W(Ht,`${t(z)??""}%`),F($,1,`h-full rounded-full transition-all duration-500 ${Ot??""}`),tt=ht($,"",tt,$t)},[()=>`rounded-full px-2 py-0.5 text-xs ${lt(o().status)}`,()=>rt(o().status),()=>o().colour&&!o().colour.startsWith("#")?o().colour:"",()=>({width:`${t(z)??""}%`,"background-color":o().colour&&o().colour.startsWith("#")?o().colour:"",opacity:x()?.5:1})]),c(p,T)};k(it,p=>{p(nt)})}e(M);var vt=i(M,2),bt=r(vt),st=r(bt),kt=i(r(st),2),Dt=r(kt,!0);e(kt),e(st);var Ft=i(st,2);{var Nt=p=>{var z=yr(),T=i(r(z),2),G=r(T);e(T),e(z),N((O,V)=>{F(T,1,`text-sm ${x()?"text-zinc-500":"text-zinc-300"}`),W(G,`${O??""} - ${V??""}`)},[()=>v(o().start_at),()=>v(o().end_at)]),c(p,z)};k(Ft,p=>{(o().start_at||o().end_at)&&p(Nt)})}e(bt),e(vt),e(at),N(p=>{F(at,1,`group relative flex w-full cursor-pointer flex-col gap-4 rounded-lg border p-4 text-left transition-all ${x()?"border-zinc-800/60 bg-zinc-900/30 text-zinc-500 hover:border-zinc-700/60 hover:bg-zinc-900/40":"border-zinc-800 bg-zinc-900/60 hover:border-zinc-700 hover:bg-zinc-900/80"}`),F(D,1,`truncate text-base font-bold ${x()?"text-zinc-500":"text-zinc-100"}`),We(D,"title",o().name),W(Y,o().name),F(kt,1,`text-sm font-medium ${x()?"text-zinc-500":"text-emerald-400"}`),W(Dt,p)},[()=>l(o().funds)]),c(Q,at)};var U=Cr(),K=xt(U);ft(K,21,()=>t(fe),gt,(Q,o)=>{B(Q,()=>t(o),()=>!1)}),e(K);var dt=i(K,2);{var yt=Q=>{var o=Dr(),x=i(xt(o),2);ft(x,21,()=>t(ae),gt,(at,M)=>{B(at,()=>t(M),()=>!0)}),e(x),c(Q,o)};k(dt,Q=>{t(ae).length>0&&Q(yt)})}c(S,U)},we=S=>{var B=Lr(),U=r(B),K=r(U);ft(K,21,()=>t(I).months,gt,(M,h)=>{var D=Sr();let Y;N(s=>Y=ht(D,"",Y,s),[()=>({left:`${(t(h).getTime()-t(I).start.getTime())/(t(I).end.getTime()-t(I).start.getTime())*100}%`})]),c(M,D)}),e(K);var dt=i(K,2),yt=r(dt);ft(yt,21,()=>t(I).months,gt,(M,h)=>{var D=Tr();let Y;var s=r(D,!0);e(D),N((u,y)=>{Y=ht(D,"",Y,u),W(s,y)},[()=>({left:`${(t(h).getTime()-t(I).start.getTime())/(t(I).end.getTime()-t(I).start.getTime())*100}%`}),()=>t(h).toLocaleDateString("en-US",{month:"long"})]),c(M,D)}),e(yt),e(dt);var Q=i(dt,2),o=r(Q);ft(o,17,()=>t(I).projects,gt,(M,h)=>{var D=Ar(),Y=r(D),s=r(Y);let u;var y=i(s,2),A=r(y,!0);e(y),e(Y),e(D),N((q,it,nt)=>{ht(Y,q),F(s,1,`h-2 w-full rounded-full shadow-sm transition-all hover:brightness-110 ${it??""}`),u=ht(s,"",u,nt),W(A,t(h).name)},[()=>me(t(h),t(I).start,t(I).end),()=>t(h).colour&&!t(h).colour.startsWith("#")?t(h).colour:"bg-indigo-600",()=>({"background-color":t(h).colour&&t(h).colour.startsWith("#")?t(h).colour:void 0})]),c(M,D)});var x=i(o,2);{var at=M=>{var h=Pr();c(M,h)};k(x,M=>{t(I).projects.length===0&&M(at)})}e(Q),e(U),e(B),c(S,B)};k(ce,S=>{t(At)==="list"?S(ze):S(we,!1)})}N(()=>{W(Qt,`Completed ${t(ge)??""} / ${t(Ut).length??""}`),F(zt,1,`rounded-md p-1.5 transition-all ${t(At)==="list"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`),F(wt,1,`rounded-md p-1.5 transition-all ${t(At)==="gantt"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`)}),De(Mt,()=>t(Pt),S=>L(Pt,S)),c(E,H)};k(b,E=>{t(Ut).length===0?E(_):E(m,!1)},!0)}c(a,d)};k(Vt,a=>{t(J)?a(Jt,!1):a(se)})}e(ct),c(ue,Lt),Pe()}Le(["click"]);export{Qr as component};
