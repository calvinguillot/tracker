import{c as Oe,a as b,f as m}from"../chunks/BqEl5C80.js";import{p as dt,s as Y,c as vt,d as ht,g as y,f as U,a as ut,h as o,i as r,j as s,t as C,k as e,l as yt,n as zt,o as wt,m as nt,v as se}from"../chunks/DVg-wcBP.js";import{d as bt,s as j,e as kt}from"../chunks/Bj2CMk_O.js";import{i as w}from"../chunks/C66CeOwb.js";import{r as Ve,e as ne,i as le,a as ye,b as He,c as lt,g as A,d as Ct,f as xe,h as Tt,j as Dt,m as St}from"../chunks/DZ1IOtyI.js";import{s as he}from"../chunks/Bkout0r_.js";import{b as Be,P as gt,L as At}from"../chunks/CX2Dg3vE.js";import{T as ct}from"../chunks/BWQHzTPj.js";import{A as ft,a as pt}from"../chunks/DEyrxmCn.js";import{S as jt}from"../chunks/BhKNGBf3.js";import{S as Et,L as Lt}from"../chunks/BR_62rVb.js";var Mt=m("<option> </option>"),Bt=m("<div></div>"),Ot=m("<option> </option>"),Ht=m('<div class="flex items-center gap-2"><button type="button" class="text-zinc-400 hover:text-zinc-200"><!></button> <input type="text" placeholder="Item description..."/> <div class="flex items-center gap-1"><button type="button" class="p-1 text-zinc-500 hover:text-zinc-300 disabled:opacity-30"><!></button> <button type="button" class="p-1 text-zinc-500 hover:text-zinc-300 disabled:opacity-30"><!></button> <button type="button" class="p-1 text-zinc-500 hover:text-red-400"><!></button></div></div>'),Nt=m('<div class="rounded-lg border border-zinc-800 bg-zinc-800/30 p-4"><div class="mb-3 flex items-center justify-between gap-2"><input type="text" placeholder="Checklist Title" class="w-full bg-transparent text-sm font-bold text-zinc-200 placeholder-zinc-600 focus:outline-none"/> <button type="button" class="text-zinc-600 hover:text-red-400" title="Remove Checklist"><!></button></div> <div class="space-y-2"><!> <button type="button" class="mt-2 flex items-center gap-1 text-xs text-zinc-500 hover:text-zinc-300"><!> Add Item</button></div></div>'),Ut=m('<div class="space-y-6"></div>'),qt=m('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No checklists yet</p></div>'),Pt=m('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div><label for="title" class="mb-1 block text-sm font-medium text-zinc-400">Title</label> <input type="text" id="title" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="type" class="mb-1 block text-sm font-medium text-zinc-400">Type</label> <div class="flex items-center gap-2"><select id="type" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Select Type</option><!></select> <!></div></div> <div><label for="status" class="mb-1 block text-sm font-medium text-zinc-400">Status</label> <select id="status" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></select></div></div> <div><label for="body" class="mb-1 block text-sm font-medium text-zinc-400">Description</label> <textarea id="body" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Checklists</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Checklist</button></div> <!></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="deadline_at" class="mb-1 block text-sm font-medium text-zinc-400">Deadline</label> <input type="date" id="deadline_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div class="sticky bottom-0 mt-6 flex justify-end gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700">Cancel</button> <button type="submit" class="rounded-md px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm transition-all hover:brightness-110 focus-visible:outline-2 focus-visible:outline-offset-2">Save</button></div></form></div></div>');function Wt(Ge,g){dt(g,!0);let t=Y(vt({title:"",type:"",status:"todo",body:"",deadline_at:"",completed_at:null,color:"#000000",checklist:[]}));const Z=[{value:"todo",label:"To Do"},{value:"in_progress",label:"In Progress"},{value:"done",label:"Done"}];ht(()=>{g.isOpen&&(g.entry?y(t,{title:g.entry.title||"",type:g.entry.type||"",status:g.entry.status||"todo",body:g.entry.body||"",deadline_at:g.entry.deadline_at||"",completed_at:g.entry.completed_at||null,color:g.entry.color||"#000000",checklist:Array.isArray(g.entry.checklist)&&g.entry.checklist.length>0?"items"in g.entry.checklist[0]?g.entry.checklist:[{id:crypto.randomUUID(),title:"Checklist",items:g.entry.checklist}]:[]},!0):y(t,{title:"",type:"",status:"todo",body:"",deadline_at:"",completed_at:null,color:"#000000",checklist:[]},!0))});function I(c){c.preventDefault(),e(t).status==="done"?e(t).completed_at||(e(t).completed_at=new Date().toISOString()):e(t).completed_at=null;const f={...e(t),deadline_at:e(t).deadline_at||null};g.onSave(f)}function q(c){c.target===c.currentTarget&&g.onClose()}function $(c){c.key==="Escape"&&g.onClose()}function E(){e(t).checklist=[...e(t).checklist,{id:crypto.randomUUID(),title:"New Checklist",items:[]}]}function ee(c){e(t).checklist=e(t).checklist.filter((f,z)=>z!==c)}function Ne(c){const f=e(t).checklist[c];f.items=[...f.items,{text:"",completed:!1}],e(t).checklist[c]=f}function Je(c,f){const z=e(t).checklist[c];z.items=z.items.filter((D,L)=>L!==f),e(t).checklist[c]=z}function Ue(c,f){const z=e(t).checklist[c];z.items[f].completed=!z.items[f].completed,e(t).checklist[c]=z}function qe(c,f,z){const D=e(t).checklist[c],L=z==="up"?f-1:f+1;if(L<0||L>=D.items.length)return;const ze=D.items[f],V=[...D.items];V.splice(f,1),V.splice(L,0,ze),D.items=V,e(t).checklist[c]=D}function Qe(){if(e(t).type){const c=ye.getTaskType(e(t).type);c&&c.color&&(e(t).color=c.color)}}var R=Oe(),Xe=U(R);{var Ye=c=>{var f=Pt();f.__click=q,f.__keydown=$;var z=o(f),D=o(z),L=o(D),ze=o(L,!0);r(L);var V=s(L,2);V.__click=function(...l){g.onClose?.apply(this,l)},r(D);var ce=s(D,2),de=o(ce),ve=s(o(de),2);Ve(ve),r(de);var we=s(de,2),ke=o(we),Pe=s(o(ke),2),te=o(Pe);te.__change=Qe;var Ce=o(te);Ce.value=Ce.__value="";var a=s(Ce);ne(a,17,()=>ye.settings.task_types,le,(l,d)=>{var i=Mt(),v=o(i,!0);r(i);var _={};C(()=>{j(v,e(d).label),_!==(_=e(d).id)&&(i.value=(i.__value=e(d).id)??"")}),b(l,i)}),r(te);var n=s(te,2);{var u=l=>{var d=Bt();let i;C(v=>{i=A(d,1,"h-8 w-8 shrink-0 rounded-full border border-zinc-600 shadow-sm",null,i,{"bg-zinc-500":e(t).color==="bg-zinc-500","bg-red-600":e(t).color==="bg-red-600","bg-orange-600":e(t).color==="bg-orange-600","bg-amber-500":e(t).color==="bg-amber-500","bg-green-600":e(t).color==="bg-green-600","bg-emerald-500":e(t).color==="bg-emerald-500","bg-teal-500":e(t).color==="bg-teal-500","bg-cyan-500":e(t).color==="bg-cyan-500","bg-blue-600":e(t).color==="bg-blue-600","bg-indigo-600":e(t).color==="bg-indigo-600","bg-violet-600":e(t).color==="bg-violet-600","bg-purple-600":e(t).color==="bg-purple-600","bg-fuchsia-600":e(t).color==="bg-fuchsia-600","bg-pink-600":e(t).color==="bg-pink-600","bg-rose-600":e(t).color==="bg-rose-600"}),He(d,v)},[()=>e(t).color.startsWith("#")?`background-color: ${e(t).color}`:""]),b(l,d)};w(n,l=>{e(t).color&&l(u)})}r(Pe),r(ke);var p=s(ke,2),T=s(o(p),2);ne(T,21,()=>Z,le,(l,d)=>{var i=Ot(),v=o(i,!0);r(i);var _={};C(()=>{j(v,e(d).label),_!==(_=e(d).value)&&(i.value=(i.__value=e(d).value)??"")}),b(l,i)}),r(T),r(p),r(we);var B=s(we,2),re=s(o(B),2);yt(re),r(B);var Te=s(B,2),De=o(Te),We=s(o(De),2);We.__click=E,r(De);var G=s(De,2);{var ue=l=>{var d=Ut();ne(d,21,()=>e(t).checklist,le,(i,v,_)=>{var S=Nt(),J=o(S),P=o(J);Ve(P);var O=s(P,2);O.__click=()=>ee(_);var Q=o(O);ct(Q,{class:"h-4 w-4"}),r(O),r(J);var oe=s(J,2),ge=o(oe);ne(ge,17,()=>e(v).items,le,(fe,W,X)=>{var pe=Ht(),me=o(pe);me.__click=()=>Ue(_,X);var Ie=o(me);{var $e=M=>{jt(M,{class:"h-5 w-5 text-emerald-500"})},Re=M=>{Et(M,{class:"h-5 w-5"})};w(Ie,M=>{e(W).completed?M($e):M(Re,!1)})}r(me);var _e=s(me,2);Ve(_e);var je=s(_e,2),F=o(je);F.__click=()=>qe(_,X,"up"),F.disabled=X===0;var Ee=o(F);ft(Ee,{class:"h-3 w-3"}),r(F);var K=s(F,2);K.__click=()=>qe(_,X,"down");var et=o(K);pt(et,{class:"h-3 w-3"}),r(K);var Le=s(K,2);Le.__click=()=>Je(_,X);var tt=o(Le);ct(tt,{class:"h-3 w-3"}),r(Le),r(je),r(pe),C(()=>{A(_e,1,`w-full rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 ${e(W).completed?"text-zinc-500 line-through":""}`),K.disabled=X===e(v).items.length-1}),Be(_e,()=>e(W).text,M=>e(W).text=M),b(fe,pe)});var H=s(ge,2);H.__click=()=>Ne(_);var N=o(H);gt(N,{class:"h-3 w-3"}),zt(),r(H),r(oe),r(S),Be(P,()=>e(v).title,fe=>e(v).title=fe),b(i,S)}),r(d),b(l,d)},Fe=l=>{var d=qt();b(l,d)};w(G,l=>{e(t).checklist&&e(t).checklist.length>0?l(ue):l(Fe,!1)})}r(Te);var ae=s(Te,2),Se=o(ae),Ae=s(o(Se),2);Ve(Ae),r(Se),r(ae);var Ke=s(ae,2),be=o(Ke);be.__click=function(...l){g.onClose?.apply(this,l)};var Ze=s(be,2);r(Ke),r(ce),r(z),r(f),C((l,d)=>{j(ze,g.entry?"Edit Task":"New Task"),He(We,`color: ${l??""}`),He(Ze,`background-color: ${d??""}`)},[()=>ye.getAccentLightHex(),()=>ye.getAccentHex()]),kt("submit",ce,I),Be(ve,()=>e(t).title,l=>e(t).title=l),lt(te,()=>e(t).type,l=>e(t).type=l),lt(T,()=>e(t).status,l=>e(t).status=l),Be(re,()=>e(t).body,l=>e(t).body=l),Be(Ae,()=>e(t).deadline_at,l=>e(t).deadline_at=l),b(c,f)};w(Xe,c=>{g.isOpen&&c(Ye)})}b(Ge,R),ut()}bt(["click","keydown","change"]);var Ft=m('<button class="fixed right-8 bottom-8 z-50 rounded-full p-4 text-white shadow-lg transition-all hover:scale-105 hover:brightness-110" aria-label="New Task"><!></button>'),Kt=m('<div class="flex h-48 items-center justify-center"><!></div>'),Rt=m('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">Sign in to view tasks.</div>'),Vt=m('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">No tasks yet.</div>'),Gt=m('<div title="Task Color"></div>'),Jt=m('<span class="text-zinc-500">•</span> <span> </span>',1),Qt=m('<span class="text-zinc-500">•</span> <!> <span> </span>',1),Xt=m("<p> </p>"),Yt=m('<div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Completed</span> <span> </span></div>'),Zt=m('<li><div class="flex flex-col gap-3"><div class="flex items-start justify-between gap-3"><div class="min-w-0 flex-1"><div class="flex flex-wrap items-center gap-2"><!> <h3> </h3></div> <div class="mt-1 flex items-center gap-2 text-xs"><div> </div> <!> <!></div></div></div> <!> <div class="mt-2 flex items-center justify-between gap-4 border-t border-zinc-800/50 pt-3"><div class="flex gap-4"><div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Deadline</span> <span> </span></div> <!></div> <div class="flex items-center gap-2"><button class="rounded-md p-2 text-indigo-400 transition-colors hover:bg-zinc-800 hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="rounded-md p-2 text-red-400 transition-colors hover:bg-zinc-800 hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div></div></li>'),It=m('<button><span class="capitalize"> </span> <!></button>'),$t=m('<div class="my-8 flex items-center gap-4"><div class="h-px flex-1 bg-zinc-800"></div> <span class="text-sm font-medium tracking-wider text-zinc-500 uppercase">Archived</span> <div class="h-px flex-1 bg-zinc-800"></div></div> <ul class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"></ul>',1),er=m('<div class="mb-4 flex flex-wrap items-center gap-4 text-sm"><span class="text-zinc-500">Sort by:</span> <!> <span class="ml-auto text-xs text-zinc-500"> </span></div> <ul class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"></ul> <!>',1),tr=m('<!> <section class="space-y-6"><div class="flex flex-wrap items-center justify-between gap-4"><h2 class="text-lg font-bold text-zinc-100">Tasks</h2> <!></div> <!></section>',1);function br(Ge,g){dt(g,!0);let t=Y(null),Z=Y(!0),I=Y(vt([])),q=Y(!1),$=Y(null),E=Y("deadline"),ee=Y("asc"),Ne=se(()=>[...e(I)].sort((a,n)=>{const u=e(ee)==="asc"?1:-1;if(e(E)==="title")return(a.title||"").localeCompare(n.title||"")*u;if(e(E)==="deadline"){const p=a.deadline_at?new Date(a.deadline_at).getTime():u===1?1/0:-1/0,T=n.deadline_at?new Date(n.deadline_at).getTime():u===1?1/0:-1/0;return(p-T)*u}else if(e(E)==="completed"){const p=a.completed_at?new Date(a.completed_at).getTime():0,T=n.completed_at?new Date(n.completed_at).getTime():0;return(p-T)*u}else if(e(E)==="created"){const p=new Date(a.created_at).getTime(),T=new Date(n.created_at).getTime();return(p-T)*u}else if(e(E)==="status")return(a.status||"").localeCompare(n.status||"")*u;return 0})),Je=se(()=>e(Ne).filter(a=>a.status!=="done")),Ue=se(()=>e(Ne).filter(a=>a.status==="done")),qe=se(()=>e(I).filter(a=>a.status==="done").length);function Qe(a){e(E)===a?y(ee,e(ee)==="asc"?"desc":"asc",!0):(y(E,a,!0),y(ee,"asc"))}wt(()=>{he.auth.getSession().then(({data:{session:n}})=>{y(t,n,!0),n?R():y(Z,!1)});const{data:{subscription:a}}=he.auth.onAuthStateChange((n,u)=>{y(t,u,!0),u?R():y(Z,!1)});return()=>a.unsubscribe()});async function R(){y(Z,!0),console.log("Fetching tasks...");const{data:a,error:n}=await he.from("tasks").select("*").order("deadline_at",{ascending:!0});!n&&a?y(I,a,!0):n&&console.error("Error fetching tasks:",n),y(Z,!1)}function Xe(){y($,null),y(q,!0)}function Ye(a){y($,a,!0),y(q,!0)}async function c(a){if(!await Dt("Are you sure you want to delete this task?","Delete Task",{confirmText:"Delete",isDestructive:!0}))return;const{error:u}=await he.from("tasks").delete().eq("id",a);u?(console.error("Error deleting task:",u),xe("Error deleting: "+u.message,"Error")):(xe("Task deleted successfully!","Success"),R())}async function f(a){const{id:n,...u}=a;if(e($)){const{error:p}=await he.from("tasks").update(u).eq("id",e($).id);p?(console.error("Error updating task:",p),xe("Error updating: "+p.message,"Error")):(xe("Task updated successfully!","Success"),y(q,!1),R())}else{const{error:p}=await he.from("tasks").insert(u);p?(console.error("Error saving task:",p),xe("Error saving: "+p.message,"Error")):(xe("Task saved successfully!","Success"),y(q,!1),R())}}const z=a=>a?new Date(a).toLocaleDateString():"—";function D(a){switch(a){case"todo":return{bg:"bg-zinc-500/10",text:"text-zinc-400",border:"border-zinc-500/20"};case"in_progress":return{bg:"bg-indigo-500/10",text:"text-indigo-400",border:"border-indigo-500/20"};case"done":return{bg:"bg-emerald-500/10",text:"text-emerald-400",border:"border-emerald-500/20"};case"archived":return{bg:"bg-zinc-800",text:"text-zinc-500",border:"border-zinc-700"};default:return{bg:"bg-zinc-500/10",text:"text-zinc-400",border:"border-zinc-500/20"}}}function L(a){return a?a.split("_").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"Unknown"}function ze(a){if(!a)return{total:0,completed:0};if(Array.isArray(a)&&a.length>0&&"items"in a[0]){let n=0,u=0;return a.forEach(p=>{p.items&&(n+=p.items.length,u+=p.items.filter(T=>T.completed).length)}),{total:n,completed:u}}return Array.isArray(a)&&a.length>0?{total:a.length,completed:a.filter(n=>n.completed).length}:{total:0,completed:0}}var V=tr(),ce=U(V);Wt(ce,{get isOpen(){return e(q)},get entry(){return e($)},onClose:()=>y(q,!1),onSave:f});var de=s(ce,2),ve=o(de),we=s(o(ve),2);{var ke=a=>{var n=Ft();n.__click=Xe;var u=o(n);gt(u,{class:"h-6 w-6"}),r(n),C(p=>He(n,`background-color: ${p??""}`),[()=>ye.getAccentHex()]),b(a,n)};w(we,a=>{e(t)&&!e(q)&&!Ct.isOpen&&a(ke)})}r(ve);var Pe=s(ve,2);{var te=a=>{var n=Kt(),u=o(n);At(u,{class:"h-6 w-6 animate-spin text-indigo-400"}),r(n),b(a,n)},Ce=a=>{var n=Oe(),u=U(n);{var p=B=>{var re=Rt();b(B,re)},T=B=>{var re=Oe(),Te=U(re);{var De=G=>{var ue=Vt();b(G,ue)},We=G=>{var ue=er();const Fe=(d,i=nt,v=nt)=>{const _=se(()=>D(i().status));var S=Zt(),J=o(S),P=o(J),O=o(P),Q=o(O),oe=o(Q);{var ge=x=>{var h=Gt();C((k,ie)=>{A(h,1,k),He(h,ie)},[()=>`h-3 w-3 rounded-full ${v()?"opacity-50":""} ${i().color.startsWith("bg-")?i().color:""}`,()=>i().color.startsWith("bg-")?"":`background-color: ${i().color}`]),b(x,h)};w(oe,x=>{i().color&&x(ge)})}var H=s(oe,2),N=o(H,!0);r(H),r(Q);var fe=s(Q,2),W=o(fe),X=o(W,!0);r(W);var pe=s(W,2);{var me=x=>{var h=Jt(),k=s(U(h),2),ie=o(k,!0);r(k),C(Me=>{A(k,1,St(v()?"text-zinc-600":"text-zinc-400")),j(ie,Me)},[()=>ye.getTaskType(i().type)?.label??i().type]),b(x,h)};w(pe,x=>{i().type&&x(me)})}var Ie=s(pe,2);{var $e=x=>{const h=se(()=>ze(i().checklist));var k=Oe(),ie=U(k);{var Me=rt=>{var it=Qt(),st=s(U(it),2);{let xt=se(()=>`h-4 w-4 ${v()?"text-zinc-600":"text-zinc-400"}`);Lt(st,{get class(){return e(xt)}})}var at=s(st,2),_t=o(at);r(at),C(()=>{A(at,1,`text-xs ${v()?"text-zinc-600":"text-zinc-500"}`),j(_t,`${e(h).completed??""}/${e(h).total??""}`)}),b(rt,it)};w(ie,rt=>{e(h).total>0&&rt(Me)})}b(x,k)};w(Ie,x=>{i().checklist&&x($e)})}r(fe),r(O),r(P);var Re=s(P,2);{var _e=x=>{var h=Xt(),k=o(h,!0);r(h),C(()=>{A(h,1,`line-clamp-3 text-sm ${v()?"text-zinc-600":"text-zinc-400"}`),j(k,i().body)}),b(x,h)};w(Re,x=>{i().body&&x(_e)})}var je=s(Re,2),F=o(je),Ee=o(F),K=s(o(Ee),2),et=o(K,!0);r(K),r(Ee);var Le=s(Ee,2);{var tt=x=>{var h=Yt(),k=s(o(h),2),ie=o(k,!0);r(k),r(h),C(Me=>{A(k,1,`text-xs ${v()?"text-zinc-500":"text-emerald-400"}`),j(ie,Me)},[()=>z(i().completed_at)]),b(x,h)};w(Le,x=>{i().completed_at&&x(tt)})}r(F);var M=s(F,2),ot=o(M);ot.__click=()=>Ye(i());var mt=s(ot,2);mt.__click=()=>c(i().id),r(M),r(je),r(J),r(S),C((x,h)=>{A(S,1,`group relative flex flex-col justify-between rounded-lg border p-4 transition-all ${v()?"border-zinc-800/60 bg-zinc-900/30 text-zinc-500 hover:border-zinc-700/60 hover:bg-zinc-900/40":"border-zinc-800 bg-zinc-900/60 hover:border-zinc-700 hover:bg-zinc-900/80"}`),A(H,1,`truncate text-base font-bold ${v()?"text-zinc-500":"text-zinc-100"}`),Tt(H,"title",i().title),j(N,i().title),A(W,1,`shrink-0 rounded-full px-2 py-0.5 font-medium ${e(_).bg} ${e(_).text}`),j(X,x),A(K,1,`text-xs ${v()?"text-zinc-500":"text-zinc-300"}`),j(et,h)},[()=>L(i().status),()=>z(i().deadline_at)]),b(d,S)};var ae=U(ue),Se=s(o(ae),2);ne(Se,16,()=>["title","deadline","created","status","completed"],le,(d,i)=>{var v=It();v.__click=()=>Qe(i);var _=o(v),S=o(_,!0);r(_);var J=s(_,2);{var P=O=>{var Q=Oe(),oe=U(Q);{var ge=N=>{ft(N,{class:"h-3 w-3"})},H=N=>{pt(N,{class:"h-3 w-3"})};w(oe,N=>{e(ee)==="asc"?N(ge):N(H,!1)})}b(O,Q)};w(J,O=>{e(E)===i&&O(P)})}r(v),C(()=>{A(v,1,`flex items-center gap-1 rounded-md px-3 py-1.5 transition-colors ${e(E)===i?"bg-indigo-500/20 text-indigo-300":"bg-zinc-800/50 text-zinc-400 hover:bg-zinc-800"}`),j(S,i)}),b(d,v)});var Ae=s(Se,2),Ke=o(Ae);r(Ae),r(ae);var be=s(ae,2);ne(be,21,()=>e(Je),le,(d,i)=>{Fe(d,()=>e(i),()=>!1)}),r(be);var Ze=s(be,2);{var l=d=>{var i=$t(),v=s(U(i),2);ne(v,21,()=>e(Ue),le,(_,S)=>{Fe(_,()=>e(S),()=>!0)}),r(v),b(d,i)};w(Ze,d=>{e(Ue).length>0&&d(l)})}C(()=>j(Ke,`Completed ${e(qe)??""} / ${e(I).length??""}`)),b(G,ue)};w(Te,G=>{e(I).length===0?G(De):G(We,!1)},!0)}b(B,re)};w(u,B=>{e(t)?B(T,!1):B(p)},!0)}b(a,n)};w(Pe,a=>{e(Z)&&e(t)!==null?a(te):a(Ce,!1)})}r(de),b(Ge,V),ut()}bt(["click"]);export{br as component};
