import{c as me,a as m,f as x}from"../chunks/CQkslu6P.js";import{k as re,p as Ae,o as De,B as i,z as t,D as A,a as Le,m as n,v as Me,y as Ee,G as O,A as e,F as He}from"../chunks/CzM_H10X.js";import{d as Ie,s as Oe}from"../chunks/C_B3uCM3.js";import{l as fe,s as ge,i as Re}from"../chunks/DVrx_Uw8.js";import{s as $,e as T,i as j}from"../chunks/CGOCP0_5.js";import{I as _e,s as xe,a as o,c as be,f as L,P as ie,r as R,h as Ve}from"../chunks/BlwmmlO5.js";import{L as Be,b as V}from"../chunks/DzRLBAai.js";import{s as Ge}from"../chunks/BW5xtwr9.js";import"../chunks/CLX796lQ.js";import{P as oe}from"../chunks/BC-pPyRz.js";import{T as ne}from"../chunks/BiMU5MKp.js";function Je(M,N){const D=fe(N,["children","$$slots","$$events","$$legacy"]);const E=[["path",{d:"M12 15V3"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["path",{d:"m7 10 5 5 5-5"}]];_e(M,ge({name:"download"},()=>D,{get iconNode(){return E},children:(H,F)=>{var S=me(),I=re(S);xe(I,N,"default",{}),m(H,S)},$$slots:{default:!0}}))}function Ue(M,N){const D=fe(N,["children","$$slots","$$events","$$legacy"]);const E=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];_e(M,ge({name:"save"},()=>D,{get iconNode(){return E},children:(H,F)=>{var S=me(),I=re(S);xe(I,N,"default",{}),m(H,S)},$$slots:{default:!0}}))}var Fe=x('<div class="flex h-48 items-center justify-center"><!></div>'),qe=x('<button class="h-6 w-6 rounded-full border border-zinc-700 transition-transform hover:scale-110 focus:ring-2 focus:ring-white focus:outline-none"></button>'),Ke=x('<div class="flex items-center gap-3"><input type="text" class="flex-1 rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" placeholder="Type Name"/> <button class="text-zinc-500 hover:text-red-400" title="Remove"><!></button></div>'),Qe=x('<button class="h-4 w-4 rounded-full border border-transparent transition-all hover:scale-110"></button>'),We=x('<div class="flex flex-wrap items-center gap-3 sm:flex-nowrap"><div class="min-w-[200px] flex-1"><input type="text" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" placeholder="Type Name"/></div> <div class="flex flex-wrap items-center justify-center gap-1 rounded-lg border border-zinc-700/50 bg-zinc-800/50 p-1.5 sm:justify-start"></div> <button class="text-zinc-500 hover:text-red-400" title="Remove"><!></button></div>'),Xe=x('<button class="h-4 w-4 rounded-full border border-transparent transition-all hover:scale-110"></button>'),Ye=x('<div class="flex flex-wrap items-center gap-3 sm:flex-nowrap"><div class="min-w-[200px] flex-1"><input type="text" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" placeholder="Type Name"/></div> <div class="flex flex-wrap items-center justify-center gap-1 rounded-lg border border-zinc-700/50 bg-zinc-800/50 p-1.5 sm:justify-start"></div> <button class="text-zinc-500 hover:text-red-400" title="Remove"><!></button></div>'),Ze=x('<div><label class="mb-1 block text-sm font-medium text-zinc-400 capitalize"> </label> <textarea rows="2" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div>'),et=x('<label class="relative h-6 w-6 cursor-pointer rounded-full border border-zinc-700 transition-transform focus-within:ring-2 focus-within:ring-white hover:scale-110" title="Change Color"><input type="color" class="absolute inset-0 h-full w-full cursor-pointer opacity-0"/></label>'),tt=x('<section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><h3 class="mb-4 text-lg font-semibold text-zinc-100">Global Settings</h3> <div class="space-y-6"><div class="flex items-center gap-4"><span class="text-sm font-medium text-zinc-400">Accent Color</span> <div class="flex flex-wrap gap-2"></div></div> <div class="flex items-center gap-4"><label for="transition_duration" class="text-sm font-medium text-zinc-400">Transition Duration (ms)</label> <input type="number" id="transition_duration" class="w-24 rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" min="0" step="50"/></div></div></section> <section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-lg font-semibold text-zinc-100">Art Call Types</h3> <button class="flex items-center gap-1 text-xs transition-colors hover:brightness-125"><!> Add Type</button></div> <div class="space-y-3"></div></section> <section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-lg font-semibold text-zinc-100">Project Types</h3> <button class="flex items-center gap-1 text-xs transition-colors hover:brightness-125"><!> Add Type</button></div> <div class="space-y-3"></div></section> <section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-lg font-semibold text-zinc-100">Task Types</h3> <button class="flex items-center gap-1 text-xs transition-colors hover:brightness-125"><!> Add Type</button></div> <div class="space-y-3"></div></section> <section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-lg font-semibold text-zinc-100">Daily Activity Types</h3> <div class="text-xs text-zinc-500">Comma-separated values</div></div> <div class="space-y-4"></div></section> <section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><h3 class="mb-4 text-lg font-semibold text-zinc-100">Backup Database</h3> <p class="mb-4 text-sm text-zinc-400">Download CSV backups of daily tracking, projects, art calls, notes, and tasks.</p> <button class="flex items-center gap-2 rounded-lg bg-zinc-800 px-4 py-2 text-sm font-medium text-zinc-300 transition-colors hover:bg-zinc-700 hover:text-white"><!> Backup Database</button></section> <section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-lg font-semibold text-zinc-100">Note Colors (Palette)</h3> <div class="text-xs text-zinc-500">Edit available colors for notes</div></div> <div class="flex flex-wrap gap-2"></div></section>',1),st=x('<div class="space-y-8 pb-20"><div class="flex items-center justify-between"><h2 class="hidden text-2xl font-bold text-zinc-100 md:block">Settings</h2> <button class="flex items-center gap-2 rounded-md px-4 py-2 text-sm font-semibold text-white shadow-sm transition-all hover:brightness-110"><!> Save Changes</button></div> <!></div>');function bt(M,N){Ae(N,!0);let D=Me(!0);De(async()=>{await o.init(),o.settings.global_types.transition_duration===void 0&&(o.settings.global_types.transition_duration=200),Ee(D,!1)});async function E(){await o.saveSettings(),be("Settings saved successfully!","Success")}function H(){const a=Math.max(0,...o.settings.calls_types.map(r=>Number(r.id)))+1;o.settings.calls_types.push({id:a,label:"New Type"})}function F(a){o.settings.calls_types.splice(a,1)}function S(){const a=Math.max(0,...o.settings.project_types.map(r=>Number(r.id)))+1;o.settings.project_types.push({id:a,label:"New Project Type",color:"bg-zinc-500"})}function I(a){o.settings.project_types.splice(a,1)}function he(){const a=Math.max(0,...o.settings.task_types.map(r=>Number(r.id)))+1;o.settings.task_types.push({id:String(a),label:"New Task Type",color:"bg-zinc-500"})}function ye(a){o.settings.task_types.splice(a,1)}function we(a){if(!a||a.length===0)return"";const r=typeof a!="object"?JSON.parse(a):a,f=Object.keys(r[0]);let h=f.join(",")+`\r
`;for(let y=0;y<r.length;y++){let w="";for(const g of f){w!==""&&(w+=",");let l=r[y][g];l==null?l="":typeof l=="object"?(l=JSON.stringify(l).replace(/"/g,'""'),l=`"${l}"`):(l=String(l).replace(/"/g,'""'),l.search(/("|,|\n)/g)>=0&&(l=`"${l}"`)),w+=l}h+=w+`\r
`}return h}async function ze(){const a=["dailyTracking","projects","artCalls","notes","tasks"];for(const r of a){const{data:f,error:h}=await Ge.from(r).select("*");if(h){console.error(`Error fetching ${r}:`,h),be(`Error backing up ${r}: ${h.message}`,"Error");continue}if(!f||f.length===0)continue;const y=we(f),w=new Blob([y],{type:"text/csv;charset=utf-8;"}),g=document.createElement("a");g.setAttribute("href",URL.createObjectURL(w)),g.setAttribute("download",`${r}_backup_${new Date().toISOString().split("T")[0]}.csv`),g.style.visibility="hidden",document.body.appendChild(g),g.click(),document.body.removeChild(g),await new Promise(l=>setTimeout(l,500))}}var q=st(),K=t(q),B=i(t(K),2);B.__click=E;var ke=t(B);Ue(ke,{class:"h-4 w-4"}),O(),e(B),e(K);var $e=i(K,2);{var Te=a=>{var r=Fe(),f=t(r);Be(f,{class:"h-6 w-6 animate-spin text-indigo-400"}),e(r),m(a,r)},je=a=>{var r=tt(),f=re(r),h=i(t(f),2),y=t(h),w=i(t(y),2);T(w,21,()=>ie,j,(p,s)=>{var d=qe();d.__click=()=>o.settings.global_types.accent=n(s).class,A(()=>{$(d,`background-color: ${n(s).hex}; ${o.settings.global_types.accent===n(s).class?"border-color: white; transform: scale(1.1);":""}`),L(d,"title",n(s).name)}),m(p,d)}),e(w),e(y);var g=i(y,2),l=i(t(g),2);R(l),e(g),e(h),e(f);var Q=i(f,2),W=t(Q),G=i(t(W),2);G.__click=H;var Ne=t(G);oe(Ne,{class:"h-4 w-4"}),O(),e(G),e(W);var ce=i(W,2);T(ce,21,()=>o.settings.calls_types,j,(p,s,d)=>{var c=Ke(),u=t(c);R(u);var v=i(u,2);v.__click=()=>F(d);var b=t(v);ne(b,{class:"h-4 w-4"}),e(v),e(c),V(u,()=>n(s).label,_=>n(s).label=_),m(p,c)}),e(ce),e(Q);var X=i(Q,2),Y=t(X),J=i(t(Y),2);J.__click=S;var Se=t(J);oe(Se,{class:"h-4 w-4"}),O(),e(J),e(Y);var le=i(Y,2);T(le,21,()=>o.settings.project_types,j,(p,s,d)=>{var c=We(),u=t(c),v=t(u);R(v),e(u);var b=i(u,2);T(b,21,()=>ie,j,(P,z)=>{var k=Qe();k.__click=()=>n(s).color=n(z).class,A(()=>{$(k,`background-color: ${n(z).hex}; ${n(s).color===n(z).class?"border-color: white; transform: scale(1.2);":"opacity-60 hover:opacity-100"}`),L(k,"title",n(z).name)}),m(P,k)}),e(b);var _=i(b,2);_.__click=()=>I(d);var C=t(_);ne(C,{class:"h-4 w-4"}),e(_),e(c),V(v,()=>n(s).label,P=>n(s).label=P),m(p,c)}),e(le),e(X);var Z=i(X,2),ee=t(Z),U=i(t(ee),2);U.__click=he;var Ce=t(U);oe(Ce,{class:"h-4 w-4"}),O(),e(U),e(ee);var de=i(ee,2);T(de,21,()=>o.settings.task_types,j,(p,s,d)=>{var c=Ye(),u=t(c),v=t(u);R(v),e(u);var b=i(u,2);T(b,21,()=>ie,j,(P,z)=>{var k=Xe();k.__click=()=>n(s).color=n(z).class,A(()=>{$(k,`background-color: ${n(z).hex}; ${n(s).color===n(z).class?"border-color: white; transform: scale(1.2);":"opacity-60 hover:opacity-100"}`),L(k,"title",n(z).name)}),m(P,k)}),e(b);var _=i(b,2);_.__click=()=>ye(d);var C=t(_);ne(C,{class:"h-4 w-4"}),e(_),e(c),V(v,()=>n(s).label,P=>n(s).label=P),m(p,c)}),e(de),e(Z);var te=i(Z,2),ve=i(t(te),2);T(ve,20,()=>["work","study","culture","art","music","exercise","leisure"],j,(p,s)=>{var d=Ze(),c=t(d),u=t(c,!0);e(c);var v=i(c,2);He(v),v.__input=b=>{const _=b.target.value;o.settings.daily_type[s]=_.split(",").map(C=>C.trim()).filter(C=>C.length>0)},L(v,"placeholder","e.g. Type 1, Type 2"),e(d),A(b=>{L(c,"for",`daily_${s}`),Oe(u,s),L(v,"id",`daily_${s}`),Ve(v,b)},[()=>o.settings.daily_type[s]?.join(", ")||""]),m(p,d)}),e(ve),e(te);var se=i(te,2),ae=i(t(se),4);ae.__click=ze;var Pe=t(ae);Je(Pe,{class:"h-4 w-4"}),O(),e(ae),e(se);var ue=i(se,2),pe=i(t(ue),2);T(pe,21,()=>o.settings.notes_types,j,(p,s,d)=>{var c=et(),u=t(c);R(u),e(c),A(()=>$(c,`background-color: ${n(s).color};`)),V(u,()=>n(s).color,v=>n(s).color=v),m(p,c)}),e(pe),e(ue),A((p,s,d)=>{$(G,`color: ${p??""}`),$(J,`color: ${s??""}`),$(U,`color: ${d??""}`)},[()=>o.getAccentLightHex(),()=>o.getAccentLightHex(),()=>o.getAccentLightHex()]),V(l,()=>o.settings.global_types.transition_duration,p=>o.settings.global_types.transition_duration=p),m(a,r)};Re($e,a=>{n(D)?a(Te):a(je,!1)})}e(q),A(a=>$(B,`background-color: ${a??""}`),[()=>o.getAccentHex()]),m(M,q),Le()}Ie(["click","input"]);export{bt as component};
