import{c as Q,a as s,f as c,t as Le}from"../chunks/Bc-DLzly.js";import{f as q,p as Te,s as U,d as Be,g as d,h as r,j as n,i as t,t as h,a as Ne,k as e,c as et,u as tt,o as at,v as Ae}from"../chunks/TcqPTOvd.js";import{d as Ve,s as S,e as rt,r as it}from"../chunks/CPbHUipC.js";import{l as Ie,s as Oe,i as u}from"../chunks/1BkMwDz5.js";import{I as He,s as qe,h as Pe,g as Ce,e as se,i as ne,a as Fe,d as st,f as ge,b as nt,j as ot}from"../chunks/CwHnGXrS.js";import{s as J}from"../chunks/Bkout0r_.js";import"../chunks/DnkZn_FK.js";import{L as Ge,P as lt}from"../chunks/DbJAXTYk.js";import{E as dt}from"../chunks/DMQrO95B.js";import{t as ct,f as vt}from"../chunks/CXJ9GJ2i.js";import{L as ut}from"../chunks/BN7e0cLg.js";import{A as ft,a as gt}from"../chunks/Qcij765w.js";function xt(F,i){const b=Ie(i,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]];He(F,Oe({name:"eye"},()=>b,{get iconNode(){return f},children:(T,A)=>{var m=Q(),M=q(m);qe(M,i,"default",{}),s(T,m)},$$slots:{default:!0}}))}function _t(F,i){const b=Ie(i,["children","$$slots","$$events","$$legacy"]);const f=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}]];He(F,Oe({name:"layout-grid"},()=>b,{get iconNode(){return f},children:(T,A)=>{var m=Q(),M=q(m);qe(M,i,"default",{}),s(T,m)},$$slots:{default:!0}}))}var mt=c('<div class="absolute inset-0 z-10 flex items-center justify-center bg-zinc-900"><!></div>'),pt=c('<img alt="Daily entry"/>'),ht=c("<!> <!>",1),bt=c('<div class="flex h-full w-full flex-col items-center justify-center gap-2 text-zinc-700"><span class="text-xs">No Image</span> <span class="text-xs font-medium text-zinc-600"> </span></div>'),yt=c('<div class="group relative aspect-square overflow-hidden rounded-lg border border-zinc-800 bg-zinc-900"><!> <div class="absolute inset-0 flex flex-col items-center justify-center gap-3 bg-black/60 opacity-0 transition-opacity duration-300 group-hover:opacity-100"><span class="font-bold text-white shadow-black drop-shadow-md"> </span> <button class="rounded-full bg-white/20 p-3 text-white backdrop-blur-sm transition-all hover:scale-110 hover:bg-white/40" aria-label="View Details"><!></button></div></div>');function wt(F,i){Te(i,!0);let b=U(null),f=U(!!i.entry?.image);Be(()=>{i.entry?.image?(d(f,!0),T(i.entry.image)):(d(b,null),d(f,!1))});async function T(L){const{data:y,error:I}=await J.storage.from("dailyPicture").createSignedUrl(L,3600);y?d(b,y.signedUrl,!0):d(f,!1)}function A(){d(f,!1)}var m=yt(),M=r(m);{var G=L=>{var y=ht(),I=q(y);{var X=D=>{var C=mt(),le=r(C);Ge(le,{class:"h-6 w-6 animate-spin text-zinc-600"}),t(C),s(D,C)};u(I,D=>{e(f)&&D(X)})}var Z=n(I,2);{var $=D=>{var C=pt();h(()=>{Pe(C,"src",e(b)),Ce(C,1,`h-full w-full object-cover transition-all duration-700 ${e(f)?"scale-105 opacity-0":"scale-100 opacity-100"} group-hover:scale-110`)}),rt("load",C,A),it(C),s(D,C)};u(Z,D=>{e(b)&&D($)})}s(L,y)},g=L=>{var y=bt(),I=n(r(y),2),X=r(I,!0);t(I),t(y),h(()=>S(X,i.entry.created_at)),s(L,y)};u(M,L=>{i.entry.image?L(G):L(g,!1)})}var p=n(M,2),O=r(p),R=r(O,!0);t(O);var B=n(O,2);B.__click=()=>i.onView(i.entry);var oe=r(B);xt(oe,{class:"h-6 w-6"}),t(B),t(p),t(m),h(()=>S(R,i.entry.created_at)),s(F,m),Ne()}Ve(["click"]);var zt=c('<div><h3 class="text-sm font-medium text-zinc-400">Weight</h3> <p class="text-lg text-zinc-100"> </p></div>'),kt=c('<div class="rounded-lg border border-zinc-800 bg-zinc-800/50 p-3"><h3 class="mb-1 text-xs font-medium tracking-wider text-zinc-400 uppercase"> </h3> <p class="text-xl font-semibold text-indigo-400"> </p></div>'),Dt=c('<span class="inline-flex items-center rounded-full border border-red-900/50 bg-red-900/30 px-2.5 py-0.5 text-xs font-medium text-red-400">Sickness</span>'),Ct=c('<span class="inline-flex items-center rounded-full border border-indigo-900/50 bg-indigo-900/30 px-2.5 py-0.5 text-xs font-medium text-indigo-400">Calvin Day</span>'),jt=c('<span class="inline-flex items-center rounded-full border border-pink-900/50 bg-pink-900/30 px-2.5 py-0.5 text-xs font-medium text-pink-400">Ihana</span>'),Et=c('<span class="inline-flex items-center rounded-full border border-green-900/50 bg-green-900/30 px-2.5 py-0.5 text-xs font-medium text-green-400">Call Family</span>'),St=c('<span class="inline-flex items-center rounded-full border border-blue-900/50 bg-blue-900/30 px-2.5 py-0.5 text-xs font-medium text-blue-400">Cry</span>'),Mt=c('<span class="inline-flex items-center rounded-full border border-red-900/50 bg-red-900/30 px-2.5 py-0.5 text-xs font-medium text-red-400">Loving</span>'),Lt=c('<span class="inline-flex items-center rounded-full border border-purple-900/50 bg-purple-900/30 px-2.5 py-0.5 text-xs font-medium text-purple-400">Friends</span>'),At=c('<div><h3 class="mb-1 text-sm font-medium text-zinc-400 capitalize"> </h3> <p class="rounded-md border border-zinc-800/50 bg-zinc-800/30 p-2 text-zinc-200"> </p></div>'),Tt=c('<div class="border-t border-zinc-800 pt-4"><h3 class="mb-2 text-sm font-medium text-zinc-400">Notes</h3> <p class="rounded-lg border border-zinc-800/50 bg-zinc-800/30 p-4 whitespace-pre-wrap text-zinc-300"> </p></div>'),Nt=c('<div class="flex-1 lg:max-w-md"><div class="sticky top-24"><h3 class="mb-2 text-sm font-medium text-zinc-400">Daily Picture</h3> <div class="relative overflow-hidden rounded-lg border border-zinc-800 bg-zinc-950"><img alt="Daily entry" class="w-full object-contain"/></div></div></div>'),Vt=c('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-6xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100">Entry Details</h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex flex-col gap-6 p-4 md:p-6 lg:flex-row"><div class="flex-1 space-y-6"><div><h3 class="text-sm font-medium text-zinc-400">Date</h3> <p class="text-lg text-zinc-100"> </p></div> <!> <div class="grid grid-cols-2 gap-4 sm:grid-cols-3"></div> <div class="flex flex-wrap gap-2"><!> <!> <!> <!> <!> <!> <!></div> <div class="grid grid-cols-1 gap-6 sm:grid-cols-2"></div> <!></div> <!></div></div></div>');function Pt(F,i){Te(i,!0);let b=U(null);Be(()=>{i.isOpen&&i.entry?.image?f(i.entry.image):d(b,null)});async function f(g){const{data:p,error:O}=await J.storage.from("dailyPicture").createSignedUrl(g,3600);p&&d(b,p.signedUrl,!0)}function T(g){g.target===g.currentTarget&&i.onClose()}function A(g){g.key==="Escape"&&i.onClose()}var m=Q(),M=q(m);{var G=g=>{var p=Vt();p.__click=T,p.__keydown=A;var O=r(p),R=r(O),B=n(r(R),2);B.__click=function(...a){i.onClose?.apply(this,a)},t(R);var oe=n(R,2),L=r(oe),y=r(L),I=n(r(y),2),X=r(I,!0);t(I),t(y);var Z=n(y,2);{var $=a=>{var o=zt(),w=n(r(o),2),V=r(w);t(w),t(o),h(()=>S(V,`${i.entry.weight??""} kg`)),s(a,o)};u(Z,a=>{i.entry.weight&&a($)})}var D=n(Z,2);se(D,20,()=>["mood","energy","physical","sleep","meals"],ne,(a,o)=>{var w=Q(),V=q(w);{var ae=z=>{var _=kt(),k=r(_),j=r(k,!0);t(k);var P=n(k,2),re=r(P,!0);t(P),t(_),h(()=>{S(j,o),S(re,i.entry[o])}),s(z,_)};u(V,z=>{i.entry[o]!==null&&i.entry[o]!==void 0&&z(ae)})}s(a,w)}),t(D);var C=n(D,2),le=r(C);{var we=a=>{var o=Dt();s(a,o)};u(le,a=>{i.entry.sickness&&a(we)})}var ze=n(le,2);{var je=a=>{var o=Ct();s(a,o)};u(ze,a=>{i.entry.calvin_day&&a(je)})}var xe=n(ze,2);{var Ee=a=>{var o=jt();s(a,o)};u(xe,a=>{i.entry.ihana&&a(Ee)})}var l=n(xe,2);{var v=a=>{var o=Et();s(a,o)};u(l,a=>{i.entry.call_family&&a(v)})}var x=n(l,2);{var N=a=>{var o=St();s(a,o)};u(x,a=>{i.entry.cry&&a(N)})}var K=n(x,2);{var W=a=>{var o=Mt();s(a,o)};u(K,a=>{i.entry.loving&&a(W)})}var de=n(K,2);{var _e=a=>{var o=Lt();s(a,o)};u(de,a=>{i.entry.friends&&a(_e)})}t(C);var ee=n(C,2);se(ee,20,()=>["work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type"],ne,(a,o)=>{var w=Q(),V=q(w);{var ae=z=>{var _=At(),k=r(_),j=r(k,!0);t(k);var P=n(k,2),re=r(P,!0);t(P),t(_),h(ce=>{S(j,ce),S(re,i.entry[o])},[()=>o.replace("_type","")]),s(z,_)};u(V,z=>{i.entry[o]&&z(ae)})}s(a,w)}),t(ee);var Se=n(ee,2);{var ke=a=>{var o=Tt(),w=n(r(o),2),V=r(w,!0);t(w),t(o),h(()=>S(V,i.entry.notes)),s(a,o)};u(Se,a=>{i.entry.notes&&a(ke)})}t(L);var te=n(L,2);{var Me=a=>{var o=Nt(),w=r(o),V=n(r(w),2),ae=r(V);t(V),t(w),t(o),h(()=>Pe(ae,"src",e(b))),s(a,o)};u(te,a=>{e(b)&&a(Me)})}t(oe),t(O),t(p),h(()=>S(X,i.entry.created_at)),ct(3,p,()=>vt,()=>({duration:Fe.getTransitionDuration()})),s(g,p)};u(M,g=>{i.isOpen&&i.entry&&g(G)})}s(F,m),Ne()}Ve(["click","keydown"]);var Ut=c('<button class="fixed right-8 bottom-8 z-50 rounded-full p-4 text-white shadow-lg transition-all hover:scale-105 hover:brightness-110" aria-label="New Entry"><!></button>'),Bt=c('<div class="flex h-64 items-center justify-center"><!></div>'),It=c('<button><span class="capitalize"> </span> <!></button>'),Ot=c('<th class="hidden px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase md:table-cell"> </th>'),Ht=c('<td class="hidden max-w-xs truncate px-6 py-4 text-sm whitespace-nowrap text-zinc-400 md:table-cell"><!></td>'),qt=c('<tr class="transition-colors hover:bg-zinc-800/50"><td class="sticky left-0 z-10 bg-zinc-900 px-6 py-4 font-medium whitespace-nowrap text-zinc-200"> </td><td class="sticky left-[100px] z-10 space-x-2 border-r border-zinc-800 bg-zinc-900 px-6 py-4 whitespace-nowrap shadow-[4px_0_8px_-4px_rgba(0,0,0,0.3)]"><button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="View Details"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></button> <button class="text-indigo-400 transition-colors hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="text-red-400 transition-colors hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></td><!></tr>'),Ft=c('<div class="overflow-x-auto rounded-lg border border-zinc-800 shadow"><table class="min-w-full divide-y divide-zinc-800"><thead class="bg-zinc-800"><tr><th class="sticky left-0 z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Date</th><th class="sticky left-[100px] z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Actions</th><!></tr></thead><tbody class="divide-y divide-zinc-800 bg-zinc-900"></tbody></table></div>'),Gt=c('<div class="grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6"></div>'),Yt=c('<div class="mb-6 flex flex-wrap items-center justify-between gap-4 text-sm"><div class="flex flex-wrap items-center gap-4"><span class="text-zinc-500">Sort by:</span> <!></div> <div class="flex items-center rounded-lg bg-zinc-800/50 p-1"><button aria-label="List View"><!></button> <button aria-label="Grid View"><!></button></div></div> <!>',1),Kt=c('<p class="text-center text-zinc-500">Please sign in to view tracking data.</p>'),Wt=c('<div><div class="mb-6 flex items-center justify-between"><h2 class="text-lg font-bold text-zinc-100">Daily</h2> <!></div> <!> <!> <!></div>');function na(F,i){Te(i,!0);let b=U(et(tt(()=>i.data.dailyTracking))),f=U(!1),T=U(!1),A=U(null),m=U(null),M=U(!0),G=U("list"),g=U("created_at"),p=U("desc"),O=Ae(()=>[...e(b)].sort((l,v)=>{const x=e(p)==="asc"?1:-1;if(e(g)==="created_at"){const N=new Date(l.created_at).getTime(),K=new Date(v.created_at).getTime();return(N-K)*x}else{const N=l[e(g)]??-999,K=v[e(g)]??-999;return(N-K)*x}}));function R(l){e(g)===l?d(p,e(p)==="asc"?"desc":"asc",!0):(d(g,l,!0),d(p,"desc"))}at(()=>{J.auth.getSession().then(({data:{session:v}})=>{d(m,v,!0),v?B():d(M,!1)});const{data:{subscription:l}}=J.auth.onAuthStateChange((v,x)=>{d(m,x,!0),x?B():d(M,!1)});return()=>l.unsubscribe()});async function B(){d(M,!0);const{data:l,error:v}=await J.from("dailyTracking").select().order("created_at",{ascending:!1});!v&&l&&d(b,l,!0),d(M,!1)}function oe(){d(A,null),d(f,!0)}function L(l){d(A,l,!0),d(f,!0)}function y(l){d(A,l,!0),d(T,!0)}async function I(l){if(!await ot("Are you sure you want to delete this entry?","Delete Entry",{confirmText:"Delete",isDestructive:!0}))return;const{error:x}=await J.from("dailyTracking").delete().eq("id",l);x?ge(x.message,"Error"):(ge("Entry deleted successfully","Success"),B())}async function X(l){if(e(A)){const{id:v,...x}=l,{error:N}=await J.from("dailyTracking").update(x).eq("id",e(A).id);N?ge(N.message,"Error"):(ge("Entry updated successfully","Success"),d(f,!1),B())}else{const{error:v}=await J.from("dailyTracking").insert(l);v?ge(v.message,"Error"):(ge("Entry created successfully","Success"),d(f,!1),B())}}const Z=["mood","energy","physical","sleep","meals","weight","sickness","work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type","calvin_day","ihana","call_family","cry","loving","friends","notes","image"];var $=Wt(),D=r($),C=n(r(D),2);{var le=l=>{var v=Ut();v.__click=oe;var x=r(v);lt(x,{class:"h-6 w-6"}),t(v),h(N=>nt(v,`background-color: ${N??""}`),[()=>Fe.getAccentHex()]),s(l,v)};u(C,l=>{e(m)&&!e(f)&&!e(T)&&!st.isOpen&&l(le)})}t(D);var we=n(D,2);{var ze=l=>{var v=Bt(),x=r(v);Ge(x,{class:"h-8 w-8 animate-spin text-indigo-500"}),t(v),s(l,v)},je=l=>{var v=Q(),x=q(v);{var N=W=>{var de=Yt(),_e=q(de),ee=r(_e),Se=n(r(ee),2);se(Se,16,()=>["date","mood","energy","physical","sleep","meals","weight"],ne,(z,_)=>{const k=Ae(()=>_==="date"?"created_at":_);var j=It();j.__click=()=>R(e(k));var P=r(j),re=r(P,!0);t(P);var ce=n(P,2);{var me=E=>{var H=Q(),ie=q(H);{var pe=Y=>{ft(Y,{class:"h-3 w-3"})},he=Y=>{gt(Y,{class:"h-3 w-3"})};u(ie,Y=>{e(p)==="asc"?Y(pe):Y(he,!1)})}s(E,H)};u(ce,E=>{e(g)===e(k)&&E(me)})}t(j),h(()=>{Ce(j,1,`flex items-center gap-1 rounded-md px-3 py-1.5 transition-colors ${e(g)===e(k)?"bg-indigo-500/20 text-indigo-300":"bg-zinc-800/50 text-zinc-400 hover:bg-zinc-800"}`),S(re,_)}),s(z,j)}),t(ee);var ke=n(ee,2),te=r(ke);te.__click=()=>d(G,"list");var Me=r(te);ut(Me,{class:"h-4 w-4"}),t(te);var a=n(te,2);a.__click=()=>d(G,"grid");var o=r(a);_t(o,{class:"h-4 w-4"}),t(a),t(ke),t(_e);var w=n(_e,2);{var V=z=>{var _=Ft(),k=r(_),j=r(k),P=r(j),re=n(r(P),2);se(re,17,()=>Z,ne,(me,E)=>{var H=Ot(),ie=r(H,!0);t(H),h(pe=>S(ie,pe),[()=>e(E).replace("_"," ")]),s(me,H)}),t(P),t(j);var ce=n(j);se(ce,21,()=>e(O),ne,(me,E)=>{var H=qt(),ie=r(H),pe=r(ie,!0);t(ie);var he=n(ie),Y=r(he);Y.__click=()=>y(e(E));var Ue=n(Y,2);Ue.__click=()=>L(e(E));var Ye=n(Ue,2);Ye.__click=()=>I(e(E).id),t(he);var Ke=n(he);se(Ke,17,()=>Z,ne,(We,ve)=>{var De=Ht(),Je=r(De);{var Qe=ue=>{var be=Le();h(()=>S(be,e(E)[e(ve)]?"Yes":"No")),s(ue,be)},Re=ue=>{var be=Q(),Xe=q(be);{var Ze=fe=>{var ye=Le();h(()=>S(ye,e(E)[e(ve)]?"Yes":"No")),s(fe,ye)},$e=fe=>{var ye=Le();h(()=>S(ye,e(E)[e(ve)]??"-")),s(fe,ye)};u(Xe,fe=>{e(ve)==="image"?fe(Ze):fe($e,!1)},!0)}s(ue,be)};u(Je,ue=>{typeof e(E)[e(ve)]=="boolean"?ue(Qe):ue(Re,!1)})}t(De),h(()=>Pe(De,"title",e(E)[e(ve)])),s(We,De)}),t(H),h(()=>S(pe,e(E).created_at)),s(me,H)}),t(ce),t(k),t(_),s(z,_)},ae=z=>{var _=Gt();se(_,21,()=>e(O),ne,(k,j)=>{wt(k,{get entry(){return e(j)},onView:y})}),t(_),s(z,_)};u(w,z=>{e(G)==="list"?z(V):z(ae,!1)})}h(()=>{Ce(te,1,`rounded-md p-1.5 transition-all ${e(G)==="list"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`),Ce(a,1,`rounded-md p-1.5 transition-all ${e(G)==="grid"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`)}),s(W,de)},K=W=>{var de=Kt();s(W,de)};u(x,W=>{e(m)?W(N):W(K,!1)},!0)}s(l,v)};u(we,l=>{e(M)?l(ze):l(je,!1)})}var xe=n(we,2);{let l=Ae(()=>e(m)?.user?.id);dt(xe,{get isOpen(){return e(f)},get entry(){return e(A)},get userId(){return e(l)},onClose:()=>d(f,!1),onSave:X})}var Ee=n(xe,2);Pt(Ee,{get isOpen(){return e(T)},get entry(){return e(A)},onClose:()=>d(T,!1)}),t($),s(F,$),Ne()}Ve(["click"]);export{na as component};
