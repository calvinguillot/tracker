import{c as se,a as o,f as c,t as be}from"../chunks/BqEl5C80.js";import{p as he,d as Ee,g as v,f as oe,a as ye,s as q,h as a,j as n,i as r,t as m,k as i,c as je,u as Me,o as Se,v as Le}from"../chunks/DVg-wcBP.js";import{d as we,s as y}from"../chunks/Bj2CMk_O.js";import{i as u}from"../chunks/C66CeOwb.js";import{e as le,i as de,h as ke,d as Oe,f as W,a as Te,b as Ae,j as Be}from"../chunks/DZ1IOtyI.js";import{s as F}from"../chunks/Bkout0r_.js";import{E as Ne}from"../chunks/CoX2xn5x.js";import{P as Pe,L as Ve}from"../chunks/CX2Dg3vE.js";var He=c('<div><h3 class="text-sm font-medium text-zinc-400">Weight</h3> <p class="text-lg text-zinc-100"> </p></div>'),Ue=c('<div class="rounded-lg border border-zinc-800 bg-zinc-800/50 p-3"><h3 class="mb-1 text-xs font-medium tracking-wider text-zinc-400 uppercase"> </h3> <p class="text-xl font-semibold text-indigo-400"> </p></div>'),qe=c('<span class="inline-flex items-center rounded-full border border-red-900/50 bg-red-900/30 px-2.5 py-0.5 text-xs font-medium text-red-400">Sickness</span>'),Fe=c('<span class="inline-flex items-center rounded-full border border-indigo-900/50 bg-indigo-900/30 px-2.5 py-0.5 text-xs font-medium text-indigo-400">Calvin Day</span>'),Ie=c('<span class="inline-flex items-center rounded-full border border-pink-900/50 bg-pink-900/30 px-2.5 py-0.5 text-xs font-medium text-pink-400">Ihana</span>'),Ye=c('<span class="inline-flex items-center rounded-full border border-green-900/50 bg-green-900/30 px-2.5 py-0.5 text-xs font-medium text-green-400">Call Family</span>'),Ke=c('<span class="inline-flex items-center rounded-full border border-blue-900/50 bg-blue-900/30 px-2.5 py-0.5 text-xs font-medium text-blue-400">Cry</span>'),We=c('<span class="inline-flex items-center rounded-full border border-red-900/50 bg-red-900/30 px-2.5 py-0.5 text-xs font-medium text-red-400">Loving</span>'),Ge=c('<span class="inline-flex items-center rounded-full border border-purple-900/50 bg-purple-900/30 px-2.5 py-0.5 text-xs font-medium text-purple-400">Friends</span>'),Je=c('<div><h3 class="mb-1 text-sm font-medium text-zinc-400 capitalize"> </h3> <p class="rounded-md border border-zinc-800/50 bg-zinc-800/30 p-2 text-zinc-200"> </p></div>'),Qe=c('<div class="border-t border-zinc-800 pt-4"><h3 class="mb-2 text-sm font-medium text-zinc-400">Notes</h3> <p class="rounded-lg border border-zinc-800/50 bg-zinc-800/30 p-4 whitespace-pre-wrap text-zinc-300"> </p></div>'),Re=c('<div class="flex-1 lg:max-w-md"><div class="sticky top-24"><h3 class="mb-2 text-sm font-medium text-zinc-400">Daily Picture</h3> <div class="relative overflow-hidden rounded-lg border border-zinc-800 bg-zinc-950"><img alt="Daily entry" class="w-full object-contain"/></div></div></div>'),Xe=c('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-6xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100">Entry Details</h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex flex-col gap-6 p-4 md:p-6 lg:flex-row"><div class="flex-1 space-y-6"><div><h3 class="text-sm font-medium text-zinc-400">Date</h3> <p class="text-lg text-zinc-100"> </p></div> <!> <div class="grid grid-cols-2 gap-4 sm:grid-cols-3"></div> <div class="flex flex-wrap gap-2"><!> <!> <!> <!> <!> <!> <!></div> <div class="grid grid-cols-1 gap-6 sm:grid-cols-2"></div> <!></div> <!></div></div></div>');function Ze(fe,s){he(s,!0);let L=q(null);Ee(()=>{s.isOpen&&s.entry?.image?z(s.entry.image):v(L,null)});async function z(g){const{data:w,error:G}=await F.storage.from("dailyPicture").createSignedUrl(g,3600);w&&v(L,w.signedUrl,!0)}function I(g){g.target===g.currentTarget&&s.onClose()}function C(g){g.key==="Escape"&&s.onClose()}var S=se(),O=oe(S);{var T=g=>{var w=Xe();w.__click=I,w.__keydown=C;var G=a(w),J=a(G),xe=n(a(J),2);xe.__click=function(...e){s.onClose?.apply(this,e)},r(J);var Q=n(J,2),A=a(Q),B=a(A),ce=n(a(B),2),pe=a(ce,!0);r(ce),r(B);var R=n(B,2);{var _e=e=>{var t=He(),f=n(a(t),2),b=a(f);r(f),r(t),m(()=>y(b,`${s.entry.weight??""} kg`)),o(e,t)};u(R,e=>{s.entry.weight&&e(_e)})}var X=n(R,2);le(X,20,()=>["mood","energy","physical","sleep","meals"],de,(e,t)=>{var f=se(),b=oe(f);{var V=_=>{var h=Ue(),M=a(h),ie=a(M,!0);r(M);var H=n(M,2),k=a(H,!0);r(H),r(h),m(()=>{y(ie,t),y(k,s.entry[t])}),o(_,h)};u(b,_=>{s.entry[t]!==null&&s.entry[t]!==void 0&&_(V)})}o(e,f)}),r(X);var Y=n(X,2),ve=a(Y);{var l=e=>{var t=qe();o(e,t)};u(ve,e=>{s.entry.sickness&&e(l)})}var d=n(ve,2);{var x=e=>{var t=Fe();o(e,t)};u(d,e=>{s.entry.calvin_day&&e(x)})}var D=n(d,2);{var me=e=>{var t=Ie();o(e,t)};u(D,e=>{s.entry.ihana&&e(me)})}var E=n(D,2);{var N=e=>{var t=Ye();o(e,t)};u(E,e=>{s.entry.call_family&&e(N)})}var Z=n(E,2);{var $=e=>{var t=Ke();o(e,t)};u(Z,e=>{s.entry.cry&&e($)})}var ee=n(Z,2);{var ge=e=>{var t=We();o(e,t)};u(ee,e=>{s.entry.loving&&e(ge)})}var ue=n(ee,2);{var te=e=>{var t=Ge();o(e,t)};u(ue,e=>{s.entry.friends&&e(te)})}r(Y);var p=n(Y,2);le(p,20,()=>["work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type"],de,(e,t)=>{var f=se(),b=oe(f);{var V=_=>{var h=Je(),M=a(h),ie=a(M,!0);r(M);var H=n(M,2),k=a(H,!0);r(H),r(h),m(U=>{y(ie,U),y(k,s.entry[t])},[()=>t.replace("_type","")]),o(_,h)};u(b,_=>{s.entry[t]&&_(V)})}o(e,f)}),r(p);var j=n(p,2);{var P=e=>{var t=Qe(),f=n(a(t),2),b=a(f,!0);r(f),r(t),m(()=>y(b,s.entry.notes)),o(e,t)};u(j,e=>{s.entry.notes&&e(P)})}r(A);var re=n(A,2);{var ae=e=>{var t=Re(),f=a(t),b=n(a(f),2),V=a(b);r(b),r(f),r(t),m(()=>ke(V,"src",i(L))),o(e,t)};u(re,e=>{i(L)&&e(ae)})}r(Q),r(G),r(w),m(()=>y(pe,s.entry.created_at)),o(g,w)};u(O,g=>{s.isOpen&&s.entry&&g(T)})}o(fe,S),ye()}we(["click","keydown"]);var $e=c('<button class="fixed right-8 bottom-8 z-50 rounded-full p-4 text-white shadow-lg transition-all hover:scale-105 hover:brightness-110" aria-label="New Entry"><!></button>'),et=c('<div class="flex h-64 items-center justify-center"><!></div>'),tt=c('<th class="hidden px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase md:table-cell"> </th>'),rt=c('<td class="hidden max-w-xs truncate px-6 py-4 text-sm whitespace-nowrap text-zinc-400 md:table-cell"><!></td>'),at=c('<tr class="transition-colors hover:bg-zinc-800/50"><td class="sticky left-0 z-10 bg-zinc-900 px-6 py-4 font-medium whitespace-nowrap text-zinc-200"> </td><td class="sticky left-[100px] z-10 space-x-2 border-r border-zinc-800 bg-zinc-900 px-6 py-4 whitespace-nowrap shadow-[4px_0_8px_-4px_rgba(0,0,0,0.3)]"><button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="View Details"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></button> <button class="text-indigo-400 transition-colors hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="text-red-400 transition-colors hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></td><!></tr>'),it=c('<div class="overflow-x-auto rounded-lg border border-zinc-800 shadow"><table class="min-w-full divide-y divide-zinc-800"><thead class="bg-zinc-800"><tr><th class="sticky left-0 z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Date</th><th class="sticky left-[100px] z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Actions</th><!></tr></thead><tbody class="divide-y divide-zinc-800 bg-zinc-900"></tbody></table></div>'),nt=c('<p class="text-center text-zinc-500">Please sign in to view tracking data.</p>'),st=c('<div><div class="mb-6 flex items-center justify-between"><h2 class="text-lg font-bold text-zinc-100">Daily</h2> <!></div> <!> <!> <!></div>');function pt(fe,s){he(s,!0);let L=q(je(Me(()=>s.data.dailyTracking))),z=q(!1),I=q(!1),C=q(null),S=q(null),O=q(!0);Se(()=>{F.auth.getSession().then(({data:{session:d}})=>{v(S,d,!0),d?T():v(O,!1)});const{data:{subscription:l}}=F.auth.onAuthStateChange((d,x)=>{v(S,x,!0),x?T():v(O,!1)});return()=>l.unsubscribe()});async function T(){v(O,!0);const{data:l,error:d}=await F.from("dailyTracking").select().order("created_at",{ascending:!1});!d&&l&&v(L,l,!0),v(O,!1)}function g(){v(C,null),v(z,!0)}function w(l){v(C,l,!0),v(z,!0)}function G(l){v(C,l,!0),v(I,!0)}async function J(l){if(!await Be("Are you sure you want to delete this entry?","Delete Entry",{confirmText:"Delete",isDestructive:!0}))return;const{error:x}=await F.from("dailyTracking").delete().eq("id",l);x?W(x.message,"Error"):(W("Entry deleted successfully","Success"),T())}async function xe(l){if(i(C)){const{id:d,...x}=l,{error:D}=await F.from("dailyTracking").update(x).eq("id",i(C).id);D?W(D.message,"Error"):(W("Entry updated successfully","Success"),v(z,!1),T())}else{const{error:d}=await F.from("dailyTracking").insert(l);d?W(d.message,"Error"):(W("Entry created successfully","Success"),v(z,!1),T())}}const Q=["mood","energy","physical","sleep","meals","weight","sickness","work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type","calvin_day","ihana","call_family","cry","loving","friends","notes","image"];var A=st(),B=a(A),ce=n(a(B),2);{var pe=l=>{var d=$e();d.__click=g;var x=a(d);Pe(x,{class:"h-6 w-6"}),r(d),m(D=>Ae(d,`background-color: ${D??""}`),[()=>Te.getAccentHex()]),o(l,d)};u(ce,l=>{i(S)&&!i(z)&&!i(I)&&!Oe.isOpen&&l(pe)})}r(B);var R=n(B,2);{var _e=l=>{var d=et(),x=a(d);Ve(x,{class:"h-8 w-8 animate-spin text-indigo-500"}),r(d),o(l,d)},X=l=>{var d=se(),x=oe(d);{var D=E=>{var N=it(),Z=a(N),$=a(Z),ee=a($),ge=n(a(ee),2);le(ge,17,()=>Q,de,(te,p)=>{var j=tt(),P=a(j,!0);r(j),m(re=>y(P,re),[()=>i(p).replace("_"," ")]),o(te,j)}),r(ee),r($);var ue=n($);le(ue,21,()=>i(L),de,(te,p)=>{var j=at(),P=a(j),re=a(P,!0);r(P);var ae=n(P),e=a(ae);e.__click=()=>G(i(p));var t=n(e,2);t.__click=()=>w(i(p));var f=n(t,2);f.__click=()=>J(i(p).id),r(ae);var b=n(ae);le(b,17,()=>Q,de,(V,_)=>{var h=rt(),M=a(h);{var ie=k=>{var U=be();m(()=>y(U,i(p)[i(_)]?"Yes":"No")),o(k,U)},H=k=>{var U=se(),ze=oe(U);{var Ce=K=>{var ne=be();m(()=>y(ne,i(p)[i(_)]?"Yes":"No")),o(K,ne)},De=K=>{var ne=be();m(()=>y(ne,i(p)[i(_)]??"-")),o(K,ne)};u(ze,K=>{i(_)==="image"?K(Ce):K(De,!1)},!0)}o(k,U)};u(M,k=>{typeof i(p)[i(_)]=="boolean"?k(ie):k(H,!1)})}r(h),m(()=>ke(h,"title",i(p)[i(_)])),o(V,h)}),r(j),m(()=>y(re,i(p).created_at)),o(te,j)}),r(ue),r(Z),r(N),o(E,N)},me=E=>{var N=nt();o(E,N)};u(x,E=>{i(S)?E(D):E(me,!1)},!0)}o(l,d)};u(R,l=>{i(O)?l(_e):l(X,!1)})}var Y=n(R,2);{let l=Le(()=>i(S)?.user?.id);Ne(Y,{get isOpen(){return i(z)},get entry(){return i(C)},get userId(){return i(l)},onClose:()=>v(z,!1),onSave:xe})}var ve=n(Y,2);Ze(ve,{get isOpen(){return i(I)},get entry(){return i(C)},onClose:()=>v(I,!1)}),r(A),o(fe,A),ye()}we(["click"]);export{pt as component};
