import{c as kt,a as c,f as u}from"../chunks/CQkslu6P.js";import{k as Y,p as Ge,v as nt,w as Ue,x as Qe,y as w,a as We,z as r,A as e,B as n,F as Xe,D as A,m as t,G as Ze,o as $e,J as xt,I as Be}from"../chunks/CzM_H10X.js";import{d as Re,s as M,e as ye}from"../chunks/C_B3uCM3.js";import{l as tr,s as er,i as y}from"../chunks/DVrx_Uw8.js";import{e as it,i as st,s as ot,c as Ie}from"../chunks/CGOCP0_5.js";import{I as rr,s as ar,r as ht,a as Dt,b as qe,e as L,c as Vt,d as nr,f as ir,g as sr}from"../chunks/BlwmmlO5.js";import{s as Yt}from"../chunks/BW5xtwr9.js";import{t as or,f as lr}from"../chunks/BL1b-Wf3.js";import{b as at,L as cr}from"../chunks/DzRLBAai.js";import{T as Fe}from"../chunks/BiMU5MKp.js";import{G as dr,S as vr,E as ur,L as gr,a as fr}from"../chunks/BYr84kHp.js";import{P as Ve}from"../chunks/BC-pPyRz.js";import{S as mr}from"../chunks/BazncEnm.js";import{L as pr}from"../chunks/KmU_ywRP.js";import"../chunks/CLX796lQ.js";import{A as br,a as _r}from"../chunks/DafGPu0x.js";function xr(Jt,g){const i=tr(g,["children","$$slots","$$events","$$legacy"]);const N=[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}]];rr(Jt,er({name:"calendar"},()=>i,{get iconNode(){return N},children:(lt,wt)=>{var U=kt(),ct=Y(U);ar(ct,g,"default",{}),c(lt,U)},$$slots:{default:!0}}))}var hr=u("<option> </option>"),wr=u("<div></div>"),zr=u('<div class="flex items-center gap-2"><button type="button" class="text-zinc-400 hover:text-zinc-200"><!></button> <input type="text" placeholder="Item description..."/> <div class="flex items-center gap-1"><div role="button" tabindex="0" class="cursor-grab p-1 text-zinc-600 hover:text-zinc-400 active:cursor-grabbing" draggable="true"><!></div> <button type="button" class="p-1 text-zinc-500 hover:text-red-400"><!></button></div></div>'),yr=u('<div class="rounded-lg border border-zinc-800 bg-zinc-800/30 p-4"><div class="mb-3 flex items-center justify-between gap-2"><input type="text" placeholder="Checklist Title" class="w-full bg-transparent text-sm font-bold text-zinc-200 placeholder-zinc-600 focus:outline-none"/> <button type="button" class="text-zinc-600 hover:text-red-400" title="Remove Checklist"><!></button></div> <div class="space-y-2"><!> <button type="button" class="mt-2 flex items-center gap-1 text-xs text-zinc-500 hover:text-zinc-300"><!> Add Item</button></div></div>'),kr=u('<div class="space-y-6"></div>'),Dr=u('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No checklists yet</p></div>'),Cr=u('<div class="flex items-center gap-2"><div class="grid flex-1 grid-cols-1 gap-2 md:grid-cols-2"><input type="text" placeholder="Label (optional)" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/> <input type="text" placeholder="URL" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <button type="button" class="p-2 text-zinc-400 hover:text-indigo-400" title="Open Link"><!></button> <button type="button" class="p-2 text-zinc-400 hover:text-red-400" title="Remove Link"><!></button></div>'),Sr=u('<div class="space-y-2"></div>'),Tr=u('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No links yet</p></div>'),Lr=u('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div><label for="name" class="mb-1 block text-sm font-medium text-zinc-400">Name</label> <input type="text" id="name" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="description" class="mb-1 block text-sm font-medium text-zinc-400">Description</label> <textarea id="description" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="status" class="mb-1 block text-sm font-medium text-zinc-400">Status</label> <select id="status" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Not Started</option><option>In Progress</option><option>Postponed</option><option>Completed</option><option>Cancelled</option></select></div> <div><label for="funds" class="mb-1 block text-sm font-medium text-zinc-400">Funds (€)</label> <input type="number" id="funds" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="percentage" class="mb-1 block text-sm font-medium text-zinc-400"> </label> <input type="range" id="percentage" min="0" max="100" class="h-2 w-full cursor-pointer appearance-none rounded-lg bg-zinc-700 accent-indigo-500"/></div> <div><label for="type" class="mb-1 block text-sm font-medium text-zinc-400">Type</label> <div class="flex items-center gap-2"><select id="type" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Select Type</option><!></select> <!></div></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="start_at" class="mb-1 block text-sm font-medium text-zinc-400">Start Date</label> <input type="date" id="start_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="end_at" class="mb-1 block text-sm font-medium text-zinc-400">End Date</label> <input type="date" id="end_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Checklists</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Checklist</button></div> <!></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Links</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Link</button></div> <!></div> <div class="sticky bottom-0 mt-6 flex justify-end gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700">Cancel</button> <button type="submit" class="rounded-md px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm transition-all hover:brightness-110 focus-visible:outline-2 focus-visible:outline-offset-2">Save</button></div></form></div></div>');function Ar(Jt,g){Ge(g,!0);let i=nt(Ue({name:"",description:"",funds:null,status:0,type:null,percentage:0,start_at:"",end_at:"",colour:"bg-indigo-600",checklist:[],links:[]})),N=nt(null);Qe(()=>{g.isOpen&&(g.entry?w(i,{name:g.entry.name||"",description:g.entry.description||"",funds:g.entry.funds,status:g.entry.status??0,type:g.entry.type??null,percentage:g.entry.percentage??0,start_at:g.entry.start_at?new Date(g.entry.start_at).toISOString().split("T")[0]:"",end_at:g.entry.end_at?new Date(g.entry.end_at).toISOString().split("T")[0]:"",colour:g.entry.colour||"bg-indigo-600",checklist:Array.isArray(g.entry.checklist)?g.entry.checklist:[],links:Array.isArray(g.entry.links)?g.entry.links:[]},!0):w(i,{name:"",description:"",funds:null,status:0,type:null,percentage:0,start_at:"",end_at:"",colour:"bg-indigo-600",checklist:[],links:[]},!0))});function lt(){if(t(i).type){const d=Dt.getProjectType(t(i).type);d&&d.color&&(t(i).colour=d.color)}}function wt(d){d.preventDefault(),g.onSave(t(i))}function U(d){d.target===d.currentTarget&&g.onClose()}function ct(d){d.key==="Escape"&&g.onClose()}function Ct(){t(i).checklist=[...t(i).checklist,{id:crypto.randomUUID(),title:"New Checklist",items:[]}]}function dt(d){t(i).checklist=t(i).checklist.filter((f,z)=>z!==d)}function St(d){const f=t(i).checklist[d];f.items=[...f.items,{text:"",completed:!1}],t(i).checklist[d]=f}function Kt(d,f){const z=t(i).checklist[d];z.items=z.items.filter((J,$)=>$!==f),t(i).checklist[d]=z}function ke(d,f){const z=t(i).checklist[d];z.items[f].completed=!z.items[f].completed,t(i).checklist[d]=z}function fe(d,f,z){w(N,{listIndex:f,itemIndex:z},!0),d.dataTransfer&&(d.dataTransfer.effectAllowed="move",d.dataTransfer.dropEffect="move")}function De(d,f,z){if(d.preventDefault(),!t(N)||t(N).listIndex!==f||t(N).itemIndex===z)return;const J=t(i).checklist[f],$=t(N).itemIndex,Ft=z,Qt=J.items[$],tt=[...J.items];tt.splice($,1),tt.splice(Ft,0,Qt),J.items=tt,t(i).checklist[f]=J,t(N).itemIndex=Ft}function F(){w(N,null)}function Ce(){t(i).links=[...t(i).links,{url:"",label:""}]}function Se(d){t(i).links=t(i).links.filter((f,z)=>z!==d)}function Tt(d){if(!d)return;let f=d;/^https?:\/\//i.test(f)||(f="https://"+f),window.open(f,"_blank","noopener,noreferrer")}var me=kt(),Te=Y(me);{var Le=d=>{var f=Lr();f.__click=U,f.__keydown=ct;var z=r(f),J=r(z),$=r(J),Ft=r($,!0);e($);var Qt=n($,2);Qt.__click=function(...s){g.onClose?.apply(this,s)},e(J);var tt=n(J,2),Ht=r(tt),Xt=n(r(Ht),2);ht(Xt),e(Ht);var Lt=n(Ht,2),pe=n(r(Lt),2);Xe(pe),e(Lt);var Zt=n(Lt,2),$t=r(Zt),te=n(r($t),2),ee=r(te);ee.value=ee.__value=0;var a=n(ee);a.value=a.__value=1;var l=n(a);l.value=l.__value=2;var m=n(l);m.value=m.__value=3;var b=n(m);b.value=b.__value=4,e(te),e($t);var C=n($t,2),P=n(r(C),2);ht(P),e(C),e(Zt);var j=n(Zt,2),B=r(j),S=r(B),Ae=r(S);e(S);var vt=n(S,2);ht(vt),e(B);var At=n(B,2),Bt=n(r(At),2),ut=r(Bt);ut.__change=lt;var re=r(ut);re.value=(re.__value=null)??"";var be=n(re);it(be,17,()=>Dt.settings.project_types,st,(s,v)=>{var _=hr(),k=r(_,!0);e(_);var T={};A(()=>{M(k,t(v).label),T!==(T=t(v).id)&&(_.value=(_.__value=t(v).id)??"")}),c(s,_)}),e(ut);var ae=n(ut,2);{var Pe=s=>{var v=wr();let _;A(k=>{_=L(v,1,"h-8 w-8 flex-shrink-0 rounded-full border border-zinc-600 shadow-sm",null,_,{"bg-zinc-500":t(i).colour==="bg-zinc-500","bg-red-600":t(i).colour==="bg-red-600","bg-orange-600":t(i).colour==="bg-orange-600","bg-amber-500":t(i).colour==="bg-amber-500","bg-green-600":t(i).colour==="bg-green-600","bg-emerald-500":t(i).colour==="bg-emerald-500","bg-teal-500":t(i).colour==="bg-teal-500","bg-cyan-500":t(i).colour==="bg-cyan-500","bg-blue-600":t(i).colour==="bg-blue-600","bg-indigo-600":t(i).colour==="bg-indigo-600","bg-violet-600":t(i).colour==="bg-violet-600","bg-purple-600":t(i).colour==="bg-purple-600","bg-fuchsia-600":t(i).colour==="bg-fuchsia-600","bg-pink-600":t(i).colour==="bg-pink-600","bg-rose-600":t(i).colour==="bg-rose-600"}),ot(v,k)},[()=>t(i).colour.startsWith("#")?`background-color: ${t(i).colour}`:""]),c(s,v)};y(ae,s=>{t(i).colour&&s(Pe)})}e(Bt),e(At),e(j);var It=n(j,2),gt=r(It),_e=n(r(gt),2);ht(_e),e(gt);var Pt=n(gt,2),xe=n(r(Pt),2);ht(xe),e(Pt),e(It);var ne=n(It,2),ie=r(ne),he=n(r(ie),2);he.__click=Ct,e(ie);var et=n(ie,2);{var I=s=>{var v=kr();it(v,21,()=>t(i).checklist,st,(_,k,T)=>{var Q=yr(),X=r(Q),W=r(X);ht(W);var R=n(W,2);R.__click=()=>dt(T);var Z=r(R);Fe(Z,{class:"h-4 w-4"}),e(R),e(X);var qt=n(X,2),rt=r(qt);it(rt,17,()=>t(k).items,st,(se,Et,Mt)=>{var Gt=zr(),Nt=r(Gt);Nt.__click=()=>ke(T,Mt);var oe=r(Nt);{var le=p=>{mr(p,{class:"h-5 w-5 text-emerald-500"})},ce=p=>{vr(p,{class:"h-5 w-5"})};y(oe,p=>{t(Et).completed?p(le):p(ce,!1)})}e(Nt);var Ut=n(Nt,2);ht(Ut);var we=n(Ut,2),yt=r(we),ze=r(yt);dr(ze,{class:"h-4 w-4"}),e(yt);var Wt=n(yt,2);Wt.__click=()=>Kt(T,Mt);var Ee=r(Wt);Fe(Ee,{class:"h-3 w-3"}),e(Wt),e(we),e(Gt),A(()=>L(Ut,1,`w-full rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 ${t(Et).completed?"text-zinc-500 line-through":""}`)),at(Ut,()=>t(Et).text,p=>t(Et).text=p),ye("dragstart",yt,p=>fe(p,T,Mt)),ye("dragover",yt,p=>De(p,T,Mt)),ye("dragend",yt,F),c(se,Gt)});var zt=n(rt,2);zt.__click=()=>St(T);var mt=r(zt);Ve(mt,{class:"h-3 w-3"}),Ze(),e(zt),e(qt),e(Q),at(W,()=>t(k).title,se=>t(k).title=se),c(_,Q)}),e(v),c(s,v)},q=s=>{var v=Dr();c(s,v)};y(et,s=>{t(i).checklist&&t(i).checklist.length>0?s(I):s(q,!1)})}e(ne);var O=n(ne,2),K=r(O),ft=n(r(K),2);ft.__click=Ce,e(K);var H=n(K,2);{var o=s=>{var v=Sr();it(v,21,()=>t(i).links,st,(_,k,T)=>{var Q=Cr(),X=r(Q),W=r(X);ht(W);var R=n(W,2);ht(R),e(X);var Z=n(X,2);Z.__click=()=>Tt(t(k).url);var qt=r(Z);ur(qt,{class:"h-4 w-4"}),e(Z);var rt=n(Z,2);rt.__click=()=>Se(T);var zt=r(rt);Fe(zt,{class:"h-4 w-4"}),e(rt),e(Q),A(()=>Z.disabled=!t(k).url),at(W,()=>t(k).label,mt=>t(k).label=mt),at(R,()=>t(k).url,mt=>t(k).url=mt),c(_,Q)}),e(v),c(s,v)},x=s=>{var v=Tr();c(s,v)};y(H,s=>{t(i).links&&t(i).links.length>0?s(o):s(x,!1)})}e(O);var G=n(O,2),D=r(G);D.__click=function(...s){g.onClose?.apply(this,s)};var h=n(D,2);e(G),e(tt),e(z),e(f),A((s,v,_)=>{M(Ft,g.entry?"Edit Project":"New Project"),M(Ae,`Progress (${t(i).percentage??""}%)`),ot(he,`color: ${s??""}`),ot(ft,`color: ${v??""}`),ot(h,`background-color: ${_??""}`)},[()=>Dt.getAccentLightHex(),()=>Dt.getAccentLightHex(),()=>Dt.getAccentHex()]),ye("submit",tt,wt),at(Xt,()=>t(i).name,s=>t(i).name=s),at(pe,()=>t(i).description,s=>t(i).description=s),qe(te,()=>t(i).status,s=>t(i).status=s),at(P,()=>t(i).funds,s=>t(i).funds=s),at(vt,()=>t(i).percentage,s=>t(i).percentage=s),qe(ut,()=>t(i).type,s=>t(i).type=s),at(_e,()=>t(i).start_at,s=>t(i).start_at=s),at(xe,()=>t(i).end_at,s=>t(i).end_at=s),or(3,f,()=>lr,()=>({duration:Dt.getTransitionDuration()})),c(d,f)};y(Te,d=>{g.isOpen&&d(Le)})}c(Jt,me),We()}Re(["click","keydown","change"]);var Pr=u('<button class="fixed right-8 bottom-8 z-50 rounded-full p-4 text-white shadow-lg transition-all hover:scale-105 hover:brightness-110" aria-label="New Project"><!></button>'),Er=u('<div class="flex h-48 items-center justify-center"><!></div>'),Mr=u('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">Sign in to view projects.</div>'),Nr=u('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">No projects yet.</div>'),jr=u('<button><span class="capitalize"> </span> <!></button>'),Or=u("<p> </p>"),Fr=u('<div class="flex items-center gap-2 text-xs text-zinc-500"><span> </span></div>'),Hr=u('<div class="flex items-center gap-1"><!> <span> </span></div>'),Br=u('<div class="flex items-center gap-1"><!> <span> </span></div>'),Ir=u('<div class="flex items-center gap-3 text-xs text-zinc-500"><!> <!></div>'),qr=u('<div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Dates</span> <span> </span></div>'),Gr=u('<li><div class="flex flex-col gap-4 md:flex-row md:items-start md:justify-between"><div class="flex min-w-0 flex-1 flex-col gap-2"><h3> </h3> <!> <!></div> <div class="flex w-full shrink-0 flex-col gap-2 md:w-56"><div class="flex justify-end"><span> </span></div> <div class="flex items-center justify-between"><span>Progress</span> <span> </span></div> <div class="h-2 w-full overflow-hidden rounded-full bg-zinc-800"><div></div></div></div></div> <div class="flex flex-wrap items-end justify-between gap-4 border-t border-zinc-800/50 pt-3"><div class="flex items-center gap-6"><div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Funds</span> <span> </span></div> <!></div> <div class="flex items-center gap-2"><button class="rounded-md p-2 text-indigo-400 transition-colors hover:bg-zinc-800 hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="rounded-md p-2 text-red-400 transition-colors hover:bg-zinc-800 hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div></li>'),Ur=u('<div class="my-8 flex items-center gap-4"><div class="h-px flex-1 bg-zinc-800"></div> <span class="text-sm font-medium tracking-wider text-zinc-500 uppercase">Archived</span> <div class="h-px flex-1 bg-zinc-800"></div></div> <ul class="grid grid-cols-1 gap-4"></ul>',1),Wr=u('<ul class="grid grid-cols-1 gap-4"></ul> <!>',1),Rr=u('<div class="absolute top-8 bottom-0 border-l border-dashed border-zinc-800"></div>'),Vr=u('<div class="absolute -translate-x-1/2 transform text-center"> </div>'),Yr=u('<div class="group relative h-10 w-full rounded transition-colors hover:bg-zinc-800/30"><div class="absolute top-1 flex flex-col gap-1"><div></div> <span class="px-0.5 text-[10px] font-medium whitespace-nowrap text-zinc-400"> </span></div></div>'),Jr=u('<div class="p-4 text-center text-zinc-500">No projects with dates to display.</div>'),Kr=u('<div class="w-full overflow-x-auto rounded-lg border border-zinc-800 bg-zinc-900/60 p-4"><div class="relative min-w-[800px]"><div class="pointer-events-none absolute inset-0"></div> <div class="relative z-10 mb-4 flex border-b border-zinc-800 pb-2 text-xs font-medium text-zinc-500"><div class="relative h-6 flex-1"></div></div> <div class="space-y-3"><!> <!></div></div></div>'),Qr=u('<div class="mb-4 flex flex-wrap items-center justify-between gap-4 text-sm"><div class="flex flex-wrap items-center gap-4"><span class="text-zinc-500">Sort by:</span> <!></div> <div class="flex items-center gap-4"><span class="text-xs text-zinc-500"> </span> <div class="flex items-center rounded-lg bg-zinc-800/50 p-1"><button aria-label="List View"><!></button> <button aria-label="Gantt View"><!></button></div></div></div> <!>',1),Xr=u('<!> <section class="space-y-6"><div class="flex flex-wrap items-center justify-between gap-4"><h2 class="hidden text-lg font-bold text-zinc-100 md:block">Projects</h2> <!></div> <!></section>',1);function fa(Jt,g){Ge(g,!0);const i={0:"Not Started",1:"In Progress",2:"Postponed",3:"Completed",4:"Cancelled"};let N=nt(null),lt=nt(!0),wt=nt(Ue([])),U=nt(!1),ct=nt(null),Ct=nt("list"),dt=nt("date"),St=nt("desc"),Kt=xt(()=>[...t(wt)].sort((a,l)=>{const m=t(St)==="asc"?1:-1;if(t(dt)==="name")return a.name.localeCompare(l.name)*m;if(t(dt)==="date"){const b=new Date(a.created_at).getTime(),C=new Date(l.created_at).getTime();return(b-C)*m}else if(t(dt)==="progress")return((a.percentage||0)-(l.percentage||0))*m;return 0})),ke=xt(()=>t(Kt).filter(a=>a.status!==3&&a.status!==4)),fe=xt(()=>t(Kt).filter(a=>a.status===3||a.status===4)),De=xt(()=>t(wt).filter(a=>a.status===3).length),F=xt(()=>{const a=t(Kt).filter(S=>S.start_at&&S.end_at);if(a.length===0){const S=new Date;return{start:new Date(S.getFullYear(),0,1),end:new Date(S.getFullYear(),11,31),projects:[],months:[]}}const l=a.flatMap(S=>[new Date(S.start_at),new Date(S.end_at)]),m=new Date(Math.min(...l.map(S=>S.getTime()))),b=new Date(Math.max(...l.map(S=>S.getTime()))),C=new Date(m);C.setDate(C.getDate()-7);const P=new Date(b);P.setDate(P.getDate()+7);const j=[],B=new Date(C);for(B.setDate(1);B<=P;)j.push(new Date(B)),B.setMonth(B.getMonth()+1);return j.length===0&&j.push(new Date(C.getFullYear(),C.getMonth(),1)),{start:C,end:P,projects:a,months:j}});function Ce(a,l,m){if(!a.start_at||!a.end_at)return"";const b=m.getTime()-l.getTime(),C=new Date(a.start_at).getTime(),P=new Date(a.end_at).getTime(),j=(C-l.getTime())/b*100,B=(P-C)/b*100;return`left: ${Math.max(0,j)}%; width: ${Math.min(100,B)}%;`}function Se(a){t(dt)===a?w(St,t(St)==="asc"?"desc":"asc",!0):(w(dt,a,!0),w(St,"asc"))}$e(()=>{Yt.auth.getSession().then(({data:{session:l}})=>{w(N,l,!0),l?Tt():w(lt,!1)});const{data:{subscription:a}}=Yt.auth.onAuthStateChange((l,m)=>{w(N,m,!0),m?Tt():w(lt,!1)});return()=>a.unsubscribe()});async function Tt(){w(lt,!0);const{data:a,error:l}=await Yt.from("projects").select("*").order("created_at",{ascending:!1});!l&&a?w(wt,a,!0):l&&console.error("Error fetching projects:",l),w(lt,!1)}function me(){w(ct,null),w(U,!0)}function Te(a){w(ct,a,!0),w(U,!0)}async function Le(a){if(!await sr("Are you sure you want to delete this project?","Delete Project",{confirmText:"Delete",isDestructive:!0}))return;const{error:m}=await Yt.from("projects").delete().eq("id",a);m?(console.error("Error deleting project:",m),Vt("Error deleting: "+m.message,"Error")):(Vt("Project deleted successfully!","Success"),Tt())}async function d(a){const{id:l,...m}=a;if(t(ct)){const{error:b}=await Yt.from("projects").update(m).eq("id",t(ct).id);b?(console.error("Error updating project:",b),Vt("Error updating: "+b.message,"Error")):(Vt("Project updated successfully!","Success"),w(U,!1),Tt())}else{const{error:b}=await Yt.from("projects").insert(m);b?(console.error("Error saving project:",b),Vt("Error saving: "+b.message,"Error")):(Vt("Project saved successfully!","Success"),w(U,!1),Tt())}}const f=a=>a===null?"—":`€${a}`,z=a=>a?new Date(a).toLocaleDateString():"—";function J(a,l=50){return a?a.length>l?a.slice(0,l)+"...":a:""}const $=a=>i[a]??"Unknown",Ft=a=>{switch(a){case 1:return"bg-amber-500/10 text-amber-400";case 2:return"bg-purple-500/10 text-purple-400";case 3:return"bg-emerald-500/10 text-emerald-400";case 4:return"bg-red-500/10 text-red-400";default:return"bg-zinc-800 text-zinc-400"}};function Qt(a){if(!a)return{total:0,completed:0};if(Array.isArray(a)&&a.length>0&&"items"in a[0]){let l=0,m=0;return a.forEach(b=>{b.items&&(l+=b.items.length,m+=b.items.filter(C=>C.completed).length)}),{total:l,completed:m}}return Array.isArray(a)&&a.length>0?{total:a.length,completed:a.filter(l=>l.completed).length}:{total:0,completed:0}}var tt=Xr(),Ht=Y(tt);Ar(Ht,{get isOpen(){return t(U)},get entry(){return t(ct)},onClose:()=>w(U,!1),onSave:d});var Xt=n(Ht,2),Lt=r(Xt),pe=n(r(Lt),2);{var Zt=a=>{var l=Pr();l.__click=me;var m=r(l);Ve(m,{class:"h-6 w-6"}),e(l),A(b=>ot(l,`background-color: ${b??""}`),[()=>Dt.getAccentHex()]),c(a,l)};y(pe,a=>{t(N)&&!t(U)&&!nr.isOpen&&a(Zt)})}e(Lt);var $t=n(Lt,2);{var te=a=>{var l=Er(),m=r(l);cr(m,{class:"h-6 w-6 animate-spin text-indigo-400"}),e(l),c(a,l)},ee=a=>{var l=kt(),m=Y(l);{var b=P=>{var j=Mr();c(P,j)},C=P=>{var j=kt(),B=Y(j);{var S=vt=>{var At=Nr();c(vt,At)},Ae=vt=>{var At=Qr(),Bt=Y(At),ut=r(Bt),re=n(r(ut),2);it(re,16,()=>["name","date","progress"],st,(et,I)=>{var q=jr();q.__click=()=>Se(I);var O=r(q),K=r(O,!0);e(O);var ft=n(O,2);{var H=o=>{var x=kt(),G=Y(x);{var D=s=>{br(s,{class:"h-3 w-3"})},h=s=>{_r(s,{class:"h-3 w-3"})};y(G,s=>{t(St)==="asc"?s(D):s(h,!1)})}c(o,x)};y(ft,o=>{t(dt)===I&&o(H)})}e(q),A(()=>{L(q,1,`flex items-center gap-1 rounded-md px-3 py-1.5 transition-colors ${t(dt)===I?"bg-indigo-500/20 text-indigo-300":"bg-zinc-800/50 text-zinc-400 hover:bg-zinc-800"}`),M(K,I)}),c(et,q)}),e(ut);var be=n(ut,2),ae=r(be),Pe=r(ae);e(ae);var It=n(ae,2),gt=r(It);gt.__click=()=>w(Ct,"list");var _e=r(gt);pr(_e,{class:"h-4 w-4"}),e(gt);var Pt=n(gt,2);Pt.__click=()=>w(Ct,"gantt");var xe=r(Pt);xr(xe,{class:"h-4 w-4"}),e(Pt),e(It),e(be),e(Bt);var ne=n(Bt,2);{var ie=et=>{const I=(H,o=Be,x=Be)=>{var G=Gr(),D=r(G),h=r(D),s=r(h),v=r(s,!0);e(s);var _=n(s,2);{var k=p=>{var E=Or(),V=r(E,!0);e(E),A(pt=>{L(E,1,`text-sm ${x()?"text-zinc-600":"text-zinc-400"}`),M(V,pt)},[()=>J(o().description)]),c(p,E)};y(_,p=>{o().description&&p(k)})}var T=n(_,2);{var Q=p=>{const E=xt(()=>Dt.getProjectType(o().type));var V=kt(),pt=Y(V);{var bt=_t=>{var Rt=Fr(),de=r(Rt),Me=r(de,!0);e(de),e(Rt),A(()=>{L(de,1,`font-medium ${x()?"text-zinc-600":"text-zinc-400"}`),M(Me,t(E).label)}),c(_t,Rt)};y(pt,_t=>{t(E)&&_t(bt)})}c(p,V)},X=p=>{var E=kt(),V=Y(E);{var pt=bt=>{var _t=Ir(),Rt=r(_t);{var de=jt=>{const Ot=xt(()=>Qt(o().checklist));var ve=kt(),ue=Y(ve);{var Ne=ge=>{var je=Hr(),He=r(je);{let Ke=xt(()=>`h-3.5 w-3.5 ${x()?"text-zinc-600":"text-zinc-400"}`);fr(He,{get class(){return t(Ke)}})}var Oe=n(He,2),Je=r(Oe);e(Oe),e(je),A(()=>{L(Oe,1,Ie(x()?"text-zinc-600":"text-zinc-500")),M(Je,`${t(Ot).completed??""}/${t(Ot).total??""}`)}),c(ge,je)};y(ue,ge=>{t(Ot).total>0&&ge(Ne)})}c(jt,ve)};y(Rt,jt=>{o().checklist&&jt(de)})}var Me=n(Rt,2);{var Ye=jt=>{var Ot=Br(),ve=r(Ot);{let ge=xt(()=>`h-3.5 w-3.5 ${x()?"text-zinc-600":"text-zinc-400"}`);gr(ve,{get class(){return t(ge)}})}var ue=n(ve,2),Ne=r(ue,!0);e(ue),e(Ot),A(()=>{L(ue,1,Ie(x()?"text-zinc-600":"text-zinc-500")),M(Ne,o().links.length)}),c(jt,Ot)};y(Me,jt=>{o().links&&o().links.length>0&&jt(Ye)})}e(_t),c(bt,_t)};y(V,bt=>{(o().checklist||o().links&&o().links.length>0)&&bt(pt)},!0)}c(p,E)};y(T,p=>{o().type?p(Q):p(X,!1)})}e(h);var W=n(h,2),R=r(W),Z=r(R),qt=r(Z,!0);e(Z),e(R);var rt=n(R,2),zt=r(rt),mt=n(zt,2),se=r(mt);e(mt),e(rt);var Et=n(rt,2),Mt=r(Et);let Gt;e(Et),e(W),e(D);var Nt=n(D,2),oe=r(Nt),le=r(oe),ce=n(r(le),2),Ut=r(ce,!0);e(ce),e(le);var we=n(le,2);{var yt=p=>{var E=qr(),V=n(r(E),2),pt=r(V);e(V),e(E),A((bt,_t)=>{L(V,1,`text-sm ${x()?"text-zinc-500":"text-zinc-300"}`),M(pt,`${bt??""} - ${_t??""}`)},[()=>z(o().start_at),()=>z(o().end_at)]),c(p,E)};y(we,p=>{(o().start_at||o().end_at)&&p(yt)})}e(oe);var ze=n(oe,2),Wt=r(ze);Wt.__click=()=>Te(o());var Ee=n(Wt,2);Ee.__click=()=>Le(o().id),e(ze),e(Nt),e(G),A((p,E,V,pt,bt)=>{L(G,1,`group relative flex flex-col gap-4 rounded-lg border p-4 transition-all ${x()?"border-zinc-800/60 bg-zinc-900/30 text-zinc-500 hover:border-zinc-700/60 hover:bg-zinc-900/40":"border-zinc-800 bg-zinc-900/60 hover:border-zinc-700 hover:bg-zinc-900/80"}`),L(s,1,`truncate text-base font-bold ${x()?"text-zinc-500":"text-zinc-100"}`),ir(s,"title",o().name),M(v,o().name),L(Z,1,p),M(qt,E),L(zt,1,`text-xs font-medium ${x()?"text-zinc-600":"text-zinc-400"}`),L(mt,1,`text-xs ${x()?"text-zinc-600":"text-zinc-500"}`),M(se,`${(o().percentage||0)??""}%`),L(Mt,1,`h-full rounded-full transition-all duration-500 ${V??""}`),Gt=ot(Mt,"",Gt,pt),L(ce,1,`text-sm font-medium ${x()?"text-zinc-500":"text-emerald-400"}`),M(Ut,bt)},[()=>`rounded-full px-2 py-0.5 text-xs ${Ft(o().status)}`,()=>$(o().status),()=>o().colour&&!o().colour.startsWith("#")?o().colour:"",()=>({width:`${(o().percentage||0)??""}%`,"background-color":o().colour&&o().colour.startsWith("#")?o().colour:"",opacity:x()?.5:1}),()=>f(o().funds)]),c(H,G)};var q=Wr(),O=Y(q);it(O,21,()=>t(ke),st,(H,o)=>{I(H,()=>t(o),()=>!1)}),e(O);var K=n(O,2);{var ft=H=>{var o=Ur(),x=n(Y(o),2);it(x,21,()=>t(fe),st,(G,D)=>{I(G,()=>t(D),()=>!0)}),e(x),c(H,o)};y(K,H=>{t(fe).length>0&&H(ft)})}c(et,q)},he=et=>{var I=Kr(),q=r(I),O=r(q);it(O,21,()=>t(F).months,st,(D,h)=>{var s=Rr();let v;A(_=>v=ot(s,"",v,_),[()=>({left:`${(t(h).getTime()-t(F).start.getTime())/(t(F).end.getTime()-t(F).start.getTime())*100}%`})]),c(D,s)}),e(O);var K=n(O,2),ft=r(K);it(ft,21,()=>t(F).months,st,(D,h)=>{var s=Vr();let v;var _=r(s,!0);e(s),A((k,T)=>{v=ot(s,"",v,k),M(_,T)},[()=>({left:`${(t(h).getTime()-t(F).start.getTime())/(t(F).end.getTime()-t(F).start.getTime())*100}%`}),()=>t(h).toLocaleDateString("en-US",{month:"long"})]),c(D,s)}),e(ft),e(K);var H=n(K,2),o=r(H);it(o,17,()=>t(F).projects,st,(D,h)=>{var s=Yr(),v=r(s),_=r(v);let k;var T=n(_,2),Q=r(T,!0);e(T),e(v),e(s),A((X,W,R)=>{ot(v,X),L(_,1,`h-2 w-full rounded-full shadow-sm transition-all hover:brightness-110 ${W??""}`),k=ot(_,"",k,R),M(Q,t(h).name)},[()=>Ce(t(h),t(F).start,t(F).end),()=>t(h).colour&&!t(h).colour.startsWith("#")?t(h).colour:"bg-indigo-600",()=>({"background-color":t(h).colour&&t(h).colour.startsWith("#")?t(h).colour:void 0})]),c(D,s)});var x=n(o,2);{var G=D=>{var h=Jr();c(D,h)};y(x,D=>{t(F).projects.length===0&&D(G)})}e(H),e(q),e(I),c(et,I)};y(ne,et=>{t(Ct)==="list"?et(ie):et(he,!1)})}A(()=>{M(Pe,`Completed ${t(De)??""} / ${t(wt).length??""}`),L(gt,1,`rounded-md p-1.5 transition-all ${t(Ct)==="list"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`),L(Pt,1,`rounded-md p-1.5 transition-all ${t(Ct)==="gantt"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`)}),c(vt,At)};y(B,vt=>{t(wt).length===0?vt(S):vt(Ae,!1)},!0)}c(P,j)};y(m,P=>{t(N)?P(C,!1):P(b)},!0)}c(a,l)};y($t,a=>{t(lt)&&t(N)!==null?a(te):a(ee,!1)})}e(Xt),c(Jt,tt),We()}Re(["click"]);export{fa as component};
