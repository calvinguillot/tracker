import{c as De,a as u,f as g}from"../chunks/CBL0ReU-.js";import{p as Ne,s as X,c as Oe,d as Ve,f as v,g as Se,a as Ae,h as o,i as a,j as e,l as Le,n as We,t as be,k as t,o as Ge}from"../chunks/DZENMWVZ.js";import{d as Be,s as w,e as Ke}from"../chunks/C73i8PqL.js";import{i as k}from"../chunks/CcH4pQ61.js";import{r as me,c as Me,a as Z,e as Qe,s as Ue,d as Ze,f as Je,i as Xe,b as Ye}from"../chunks/CQul3BK8.js";import{s as J}from"../chunks/Bkout0r_.js";import{b as I,P as $e,L as et}from"../chunks/DLg1bkk4.js";var tt=g('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div><label for="name" class="mb-1 block text-sm font-medium text-zinc-400">Name</label> <input type="text" id="name" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="description" class="mb-1 block text-sm font-medium text-zinc-400">Description</label> <textarea id="description" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div><label for="requirements" class="mb-1 block text-sm font-medium text-zinc-400">Requirements</label> <textarea id="requirements" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="status" class="mb-1 block text-sm font-medium text-zinc-400">Status</label> <select id="status" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Not Started</option><option>In Progress</option><option>Postponed</option><option>Completed</option><option>Cancelled</option></select></div> <div><label for="funds" class="mb-1 block text-sm font-medium text-zinc-400">Funds (€)</label> <input type="number" id="funds" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="percentage" class="mb-1 block text-sm font-medium text-zinc-400"> </label> <input type="range" id="percentage" min="0" max="100" class="h-2 w-full cursor-pointer appearance-none rounded-lg bg-zinc-700 accent-indigo-500"/></div> <div><label for="colour" class="mb-1 block text-sm font-medium text-zinc-400">Color</label> <select id="colour" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Zinc</option><option>Red</option><option>Orange</option><option>Amber</option><option>Green</option><option>Emerald</option><option>Teal</option><option>Cyan</option><option>Blue</option><option>Indigo</option><option>Violet</option><option>Purple</option><option>Fuchsia</option><option>Pink</option><option>Rose</option></select></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="start_at" class="mb-1 block text-sm font-medium text-zinc-400">Start Date</label> <input type="date" id="start_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="end_at" class="mb-1 block text-sm font-medium text-zinc-400">End Date</label> <input type="date" id="end_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div class="sticky bottom-0 mt-6 flex justify-end gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700">Cancel</button> <button type="submit" class="rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Save</button></div></form></div></div>');function at(Ce,l){Ne(l,!0);let s=X(Oe({name:"",description:"",requirements:"",funds:null,status:0,percentage:0,start_at:"",end_at:"",colour:"bg-indigo-600"}));Ve(()=>{l.isOpen&&(l.entry?v(s,{name:l.entry.name||"",description:l.entry.description||"",requirements:l.entry.requirements||"",funds:l.entry.funds,status:l.entry.status??0,percentage:l.entry.percentage??0,start_at:l.entry.start_at?new Date(l.entry.start_at).toISOString().split("T")[0]:"",end_at:l.entry.end_at?new Date(l.entry.end_at).toISOString().split("T")[0]:"",colour:l.entry.colour||"bg-indigo-600"},!0):v(s,{name:"",description:"",requirements:"",funds:null,status:0,percentage:0,start_at:"",end_at:"",colour:"bg-indigo-600"},!0))});function S(b){b.preventDefault(),l.onSave(t(s))}function C(b){b.target===b.currentTarget&&l.onClose()}function Y(b){b.key==="Escape"&&l.onClose()}var x=De(),P=Se(x);{var E=b=>{var D=tt();D.__click=C,D.__keydown=Y;var ge=o(D),$=o(ge),ee=o($),_e=o(ee,!0);a(ee);var Pe=e(ee,2);Pe.__click=function(...d){l.onClose?.apply(this,d)},a($);var T=e($,2),F=o(T),te=e(o(F),2);me(te),a(F);var q=e(F,2),xe=e(o(q),2);Le(xe),a(q);var ae=e(q,2),he=e(o(ae),2);Le(he),a(ae);var oe=e(ae,2),re=o(oe),r=e(o(re),2),i=o(r);i.value=i.__value=0;var c=e(i);c.value=c.__value=1;var f=e(c);f.value=f.__value=2;var ie=e(f);ie.value=ie.__value=3;var h=e(ie);h.value=h.__value=4,a(r),a(re);var j=e(re,2),we=e(o(j),2);me(we),a(j),a(oe);var ne=e(oe,2),se=o(ne),_=o(se),L=o(_);a(_);var ze=e(_,2);me(ze),a(se);var n=e(se,2),M=e(o(n),2),N=o(M);N.value=N.__value="bg-zinc-500";var O=e(N);O.value=O.__value="bg-red-600";var z=e(O);z.value=z.__value="bg-orange-600";var le=e(z);le.value=le.__value="bg-amber-500";var R=e(le);R.value=R.__value="bg-green-600";var de=e(R);de.value=de.__value="bg-emerald-500";var ce=e(de);ce.value=ce.__value="bg-teal-500";var ve=e(ce);ve.value=ve.__value="bg-cyan-500";var H=e(ve);H.value=H.__value="bg-blue-600";var A=e(H);A.value=A.__value="bg-indigo-600";var V=e(A);V.value=V.__value="bg-violet-600";var ue=e(V);ue.value=ue.__value="bg-purple-600";var B=e(ue);B.value=B.__value="bg-fuchsia-600";var W=e(B);W.value=W.__value="bg-pink-600";var ye=e(W);ye.value=ye.__value="bg-rose-600",a(M),a(n),a(ne);var G=e(ne,2),K=o(G),fe=e(o(K),2);me(fe),a(K);var pe=e(K,2),Q=e(o(pe),2);me(Q),a(pe),a(G);var U=e(G,2),ke=o(U);ke.__click=function(...d){l.onClose?.apply(this,d)},We(2),a(U),a(T),a(ge),a(D),be(()=>{w(_e,l.entry?"Edit Project":"New Project"),w(L,`Progress (${t(s).percentage??""}%)`)}),Ke("submit",T,S),I(te,()=>t(s).name,d=>t(s).name=d),I(xe,()=>t(s).description,d=>t(s).description=d),I(he,()=>t(s).requirements,d=>t(s).requirements=d),Me(r,()=>t(s).status,d=>t(s).status=d),I(we,()=>t(s).funds,d=>t(s).funds=d),I(ze,()=>t(s).percentage,d=>t(s).percentage=d),Me(M,()=>t(s).colour,d=>t(s).colour=d),I(fe,()=>t(s).start_at,d=>t(s).start_at=d),I(Q,()=>t(s).end_at,d=>t(s).end_at=d),u(b,D)};k(P,b=>{l.isOpen&&b(E)})}u(Ce,x),Ae()}Be(["click","keydown"]);var ot=g('<button class="fixed right-8 bottom-8 z-50 rounded-full bg-indigo-600 p-4 text-white shadow-lg transition-transform hover:scale-105 hover:bg-indigo-500" aria-label="New Project"><!></button>'),rt=g('<div class="flex h-48 items-center justify-center"><!></div>'),it=g('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">Sign in to view projects.</div>'),nt=g('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">No projects yet.</div>'),st=g('<p class="text-sm text-zinc-400"> </p>'),lt=g('<p class="mt-1 font-mono text-xs break-words whitespace-normal text-zinc-500 md:max-w-[50%]"><span class="font-bold text-zinc-600">REQ:</span> </p>'),dt=g('<div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Dates</span> <span class="text-sm text-zinc-300"> </span></div>'),ct=g('<li class="group relative flex flex-col gap-4 rounded-lg border border-zinc-800 bg-zinc-900/60 p-4 transition-all hover:border-zinc-700 hover:bg-zinc-900/80"><div class="flex flex-col gap-4 md:flex-row md:items-start md:justify-between"><div class="flex min-w-0 flex-1 flex-col gap-2"><h3 class="truncate text-base font-bold text-zinc-100"> </h3> <!> <!></div> <div class="flex w-full shrink-0 flex-col gap-2 md:w-56"><div class="flex justify-end"><span class="rounded-full bg-zinc-800 px-2 py-0.5 text-xs text-zinc-400"> </span></div> <div class="flex items-center justify-between"><span class="text-xs font-medium text-zinc-400">Progress</span> <span class="text-xs text-zinc-500"> </span></div> <div class="h-2 w-full overflow-hidden rounded-full bg-zinc-800"><div></div></div></div></div> <div class="flex flex-wrap items-end justify-between gap-4 border-t border-zinc-800/50 pt-3"><div class="flex items-center gap-6"><div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Funds</span> <span class="text-sm font-medium text-emerald-400"> </span></div> <!></div> <div class="flex items-center gap-2"><button class="rounded-md p-2 text-indigo-400 transition-colors hover:bg-zinc-800 hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="rounded-md p-2 text-red-400 transition-colors hover:bg-zinc-800 hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div></li>'),vt=g('<ul class="grid grid-cols-1 gap-4"></ul>'),ut=g('<!> <section class="space-y-6"><div class="flex flex-wrap items-center justify-between gap-4"><h2 class="text-lg font-bold text-zinc-100">Projects</h2> <!></div> <!></section>',1);function ht(Ce,l){Ne(l,!0);const s={0:"Not Started",1:"In Progress",2:"Postponed",3:"Completed",4:"Cancelled"};let S=X(null),C=X(!0),Y=X(Oe([])),x=X(!1),P=X(null);Ge(()=>{J.auth.getSession().then(({data:{session:i}})=>{v(S,i,!0),i?E():v(C,!1)});const{data:{subscription:r}}=J.auth.onAuthStateChange((i,c)=>{v(S,c,!0),c?E():v(C,!1)});return()=>r.unsubscribe()});async function E(){v(C,!0);const{data:r,error:i}=await J.from("projects").select("*").order("created_at",{ascending:!1});!i&&r?v(Y,r,!0):i&&console.error("Error fetching projects:",i),v(C,!1)}function b(){v(P,null),v(x,!0)}function D(r){v(P,r,!0),v(x,!0)}async function ge(r){if(!await Ye("Are you sure you want to delete this project?","Delete Project",{confirmText:"Delete",isDestructive:!0}))return;const{error:c}=await J.from("projects").delete().eq("id",r);c?(console.error("Error deleting project:",c),Z("Error deleting: "+c.message,"Error")):(Z("Project deleted successfully!","Success"),E())}async function $(r){const{id:i,...c}=r;if(t(P)){const{error:f}=await J.from("projects").update(c).eq("id",t(P).id);f?(console.error("Error updating project:",f),Z("Error updating: "+f.message,"Error")):(Z("Project updated successfully!","Success"),v(x,!1),E())}else{const{error:f}=await J.from("projects").insert(c);f?(console.error("Error saving project:",f),Z("Error saving: "+f.message,"Error")):(Z("Project saved successfully!","Success"),v(x,!1),E())}}const ee=r=>r===null?"—":`€${r}`,_e=r=>r?new Date(r).toLocaleDateString():"—",Pe=r=>s[r]??"Unknown";var T=ut(),F=Se(T);at(F,{get isOpen(){return t(x)},get entry(){return t(P)},onClose:()=>v(x,!1),onSave:$});var te=e(F,2),q=o(te),xe=e(o(q),2);{var ae=r=>{var i=ot();i.__click=b;var c=o(i);$e(c,{class:"h-6 w-6"}),a(i),u(r,i)};k(xe,r=>{t(S)&&r(ae)})}a(q);var he=e(q,2);{var oe=r=>{var i=rt(),c=o(i);et(c,{class:"h-6 w-6 animate-spin text-indigo-400"}),a(i),u(r,i)},re=r=>{var i=De(),c=Se(i);{var f=h=>{var j=it();u(h,j)},ie=h=>{var j=De(),we=Se(j);{var ne=_=>{var L=nt();u(_,L)},se=_=>{var L=vt();Qe(L,21,()=>t(Y),Xe,(ze,n)=>{var M=ct(),N=o(M),O=o(N),z=o(O),le=o(z,!0);a(z);var R=e(z,2);{var de=p=>{var m=st(),y=o(m,!0);a(m),be(()=>w(y,t(n).description)),u(p,m)};k(R,p=>{t(n).description&&p(de)})}var ce=e(R,2);{var ve=p=>{var m=lt(),y=e(o(m));a(m),be(()=>w(y,` ${t(n).requirements??""}`)),u(p,m)};k(ce,p=>{t(n).requirements&&p(ve)})}a(O);var H=e(O,2),A=o(H),V=o(A),ue=o(V,!0);a(V),a(A);var B=e(A,2),W=e(o(B),2),ye=o(W);a(W),a(B);var G=e(B,2),K=o(G);let fe;a(G),a(H),a(N);var pe=e(N,2),Q=o(pe),U=o(Q),ke=e(o(U),2),d=o(ke,!0);a(ke),a(U);var Ie=e(U,2);{var Te=p=>{var m=dt(),y=e(o(m),2),Ee=o(y);a(y),a(m),be((Re,He)=>w(Ee,`${Re??""} - ${He??""}`),[()=>_e(t(n).start_at),()=>_e(t(n).end_at)]),u(p,m)};k(Ie,p=>{(t(n).start_at||t(n).end_at)&&p(Te)})}a(Q);var qe=e(Q,2),je=o(qe);je.__click=()=>D(t(n));var Fe=e(je,2);Fe.__click=()=>ge(t(n).id),a(qe),a(pe),a(M),be((p,m,y,Ee)=>{Ue(z,"title",t(n).name),w(le,t(n).name),w(ue,p),w(ye,`${(t(n).percentage||0)??""}%`),Ze(K,1,`h-full rounded-full transition-all duration-500 ${m??""}`),fe=Je(K,"",fe,y),w(d,Ee)},[()=>Pe(t(n).status),()=>t(n).colour&&!t(n).colour.startsWith("#")?t(n).colour:"",()=>({width:`${(t(n).percentage||0)??""}%`,"background-color":t(n).colour&&t(n).colour.startsWith("#")?t(n).colour:""}),()=>ee(t(n).funds)]),u(ze,M)}),a(L),u(_,L)};k(we,_=>{t(Y).length===0?_(ne):_(se,!1)},!0)}u(h,j)};k(c,h=>{t(S)?h(ie,!1):h(f)},!0)}u(r,i)};k(he,r=>{t(C)&&t(S)!==null?r(oe):r(re,!1)})}a(te),u(Ce,T),Ae()}Be(["click"]);export{ht as component};
