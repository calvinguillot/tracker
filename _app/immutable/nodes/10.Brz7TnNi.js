import{c as at,a as c,f as u}from"../chunks/B-wedEgi.js";import{k as Q,p as pr,l as X,m as Cr,y as Sr,t as w,a as br,z as r,A as t,B as n,F as S,n as e,D as Ar,G as Er,o as Lr,I as B,J as dr,aV as vr}from"../chunks/DXU5jnQ_.js";import{d as mr,s as I,e as ze}from"../chunks/CKrhTcXd.js";import{l as rr,s as ar,i as k}from"../chunks/1UUrSLx-.js";import{e as ae,i as ye,s as Le,c as jr}from"../chunks/JHaZoCpa.js";import{I as ir,s as nr,r as rt,a as K,b as Nt,t as er,c as T,d as $r,e as Ae,f as Ir,i as ur,g as Ot}from"../chunks/CpFvtbVR.js";import{s as He}from"../chunks/BW5xtwr9.js";import{f as gr}from"../chunks/BviiYr3T.js";import{f as tr}from"../chunks/BsCRBkET.js";import{b as Ue,P as xr}from"../chunks/jmEW5wUa.js";import{T as Zt}from"../chunks/wveo2xEP.js";import{G as Or,S as Nr,E as Mr,C as fr,L as Pr,a as Wr}from"../chunks/_bcvuuv8.js";import{S as Hr}from"../chunks/Cj4_WUF5.js";import{d as Ee}from"../chunks/Ban-EeZC.js";import{L as _r}from"../chunks/DV5mb0O4.js";import{A as Ur}from"../chunks/bmutvh7m.js";import{A as qr}from"../chunks/QpLyY0R8.js";import{C as Br,a as Fr}from"../chunks/Dt1jwsDb.js";import"../chunks/B3vO68tZ.js";function Rr(de,g){const i=rr(g,["children","$$slots","$$events","$$legacy"]);const M=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m9 12 2 2 4-4"}]];ir(de,ar({name:"circle-check"},()=>i,{get iconNode(){return M},children:(F,V)=>{var U=at(),O=Q(U);nr(O,g,"default",{}),c(F,U)},$$slots:{default:!0}}))}function Vr(de,g){const i=rr(g,["children","$$slots","$$events","$$legacy"]);const M=[["circle",{cx:"12",cy:"12",r:"10"}],["circle",{cx:"12",cy:"12",r:"1"}]];ir(de,ar({name:"circle-dot"},()=>i,{get iconNode(){return M},children:(F,V)=>{var U=at(),O=Q(U);nr(O,g,"default",{}),c(F,U)},$$slots:{default:!0}}))}function Yr(de,g){const i=rr(g,["children","$$slots","$$events","$$legacy"]);const M=[["circle",{cx:"12",cy:"12",r:"10"}]];ir(de,ar({name:"circle"},()=>i,{get iconNode(){return M},children:(F,V)=>{var U=at(),O=Q(U);nr(O,g,"default",{}),c(F,U)},$$slots:{default:!0}}))}var Gr=u("<option> </option>"),Jr=u("<div></div>"),Kr=u("<option> </option>"),Xr=u('<div class="flex items-center gap-2"><button type="button" class="text-zinc-400 hover:text-zinc-200"><!></button> <input type="text" placeholder="Item description..."/> <div class="flex items-center gap-1"><div role="button" tabindex="0" class="cursor-grab p-1 text-zinc-600 hover:text-zinc-400 active:cursor-grabbing" draggable="true"><!></div> <button type="button" class="p-1 text-zinc-500 hover:text-red-400"><!></button></div></div>'),Qr=u('<div class="rounded-lg border border-zinc-800 bg-zinc-800/30 p-4"><div class="mb-3 flex items-center justify-between gap-2"><input type="text" placeholder="Checklist Title" class="w-full bg-transparent text-sm font-bold text-zinc-200 placeholder-zinc-600 focus:outline-none"/> <button type="button" class="text-zinc-600 hover:text-red-400" title="Remove Checklist"><!></button></div> <div class="space-y-2"><!> <button type="button" class="mt-2 flex items-center gap-1 text-xs text-zinc-500 hover:text-zinc-300"><!> Add Item</button></div></div>'),Zr=u('<div class="space-y-6"></div>'),ea=u('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No checklists yet</p></div>'),ta=u('<div class="flex items-center gap-2"><div class="grid flex-1 grid-cols-1 gap-2 md:grid-cols-2"><input type="text" placeholder="Label (optional)" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/> <input type="text" placeholder="URL" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <button type="button" class="p-2 text-zinc-400 hover:text-indigo-400" title="Open Link"><!></button> <button type="button" class="p-2 text-zinc-400 hover:text-red-400" title="Remove Link"><!></button></div>'),ra=u('<div class="space-y-2"></div>'),aa=u('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No links yet</p></div>'),ia=u('<button type="button" class="rounded-md bg-red-500/10 px-3.5 py-2.5 text-sm font-semibold text-red-400 shadow-sm ring-1 ring-red-500/20 transition-colors ring-inset hover:bg-red-500/20">Delete</button>'),na=u('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div><label for="title" class="mb-1 block text-sm font-medium text-zinc-400">Title</label> <input type="text" id="title" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="type" class="mb-1 block text-sm font-medium text-zinc-400">Type</label> <div class="flex items-center gap-2"><select id="type" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Select Type</option><!></select> <!></div></div> <div><label for="status" class="mb-1 block text-sm font-medium text-zinc-400">Status</label> <select id="status" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></select></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="deadline_at" class="mb-1 block text-sm font-medium text-zinc-400">Deadline</label> <input type="date" id="deadline_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div><label for="body" class="mb-1 block text-sm font-medium text-zinc-400">Description</label> <textarea id="body" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Checklists</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Checklist</button></div> <!></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Links</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Link</button></div> <!></div> <div class="sticky bottom-0 mt-6 flex justify-between gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><div><!></div> <div class="flex gap-3"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700">Cancel</button> <button type="submit" class="rounded-md px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm transition-all hover:brightness-110 focus-visible:outline-2 focus-visible:outline-offset-2">Save</button></div></div></form></div></div>');function oa(de,g){pr(g,!0);let i=X(Cr({title:"",type:"",status:"todo",body:"",deadline_at:"",completed_at:null,color:"#000000",checklist:[],links:[]})),M=X(null);const F=[{value:"todo",label:"To Do"},{value:"in_progress",label:"In Progress"},{value:"done",label:"Done"}];Sr(()=>{g.isOpen&&(g.entry?w(i,{title:g.entry.title||"",type:g.entry.type||"",status:g.entry.status||"todo",body:g.entry.body||"",deadline_at:g.entry.deadline_at||"",completed_at:g.entry.completed_at||null,color:g.entry.color||"#000000",checklist:Array.isArray(g.entry.checklist)&&g.entry.checklist.length>0?"items"in g.entry.checklist[0]?g.entry.checklist:[{id:crypto.randomUUID(),title:"Checklist",items:g.entry.checklist}]:[],links:Array.isArray(g.entry.links)?g.entry.links:[]},!0):w(i,{title:"",type:"",status:"todo",body:"",deadline_at:"",completed_at:null,color:"#000000",checklist:[],links:[]},!0))});function V(_){_.preventDefault(),e(i).status==="done"?e(i).completed_at||(e(i).completed_at=new Date().toISOString()):e(i).completed_at=null;const p={...e(i),deadline_at:e(i).deadline_at||null};g.onSave(p)}function U(_){_.target===_.currentTarget&&g.onClose()}function O(_){_.key==="Escape"&&g.onClose()}function Mt(){e(i).checklist=[...e(i).checklist,{id:crypto.randomUUID(),title:"New Checklist",items:[]}]}function ve(_){e(i).checklist=e(i).checklist.filter((p,A)=>A!==_)}function qe(_){const p=e(i).checklist[_];p.items=[...p.items,{text:"",completed:!1}],e(i).checklist[_]=p}function Be(_,p){const A=e(i).checklist[_];A.items=A.items.filter((Z,ie)=>ie!==p),e(i).checklist[_]=A}function it(_,p){const A=e(i).checklist[_];A.items[p].completed=!A.items[p].completed,e(i).checklist[_]=A}function ue(_,p,A){w(M,{listIndex:p,itemIndex:A},!0),_.dataTransfer&&(_.dataTransfer.effectAllowed="move",_.dataTransfer.dropEffect="move")}function je(_,p,A){if(_.preventDefault(),!e(M)||e(M).listIndex!==p||e(M).itemIndex===A)return;const Z=e(i).checklist[p],ie=e(M).itemIndex,Fe=A,nt=Z.items[ie],ge=[...Z.items];ge.splice(ie,1),ge.splice(Fe,0,nt),Z.items=ge,e(i).checklist[p]=Z,e(M).itemIndex=Fe}function Pt(){w(M,null)}function xt(){if(e(i).type){const _=K.getTaskType(e(i).type);_&&_.color&&(e(i).color=_.color)}}function ht(){e(i).links=[...e(i).links,{url:"",label:""}]}function zt(_){e(i).links=e(i).links.filter((p,A)=>A!==_)}function yt(_){if(!_)return;let p=_;/^https?:\/\//i.test(p)||(p="https://"+p),window.open(p,"_blank","noopener,noreferrer")}var $e=at(),Wt=Q($e);{var Ht=_=>{var p=na();p.__click=U,p.__keydown=O;var A=r(p),Z=r(A),ie=r(Z),Fe=r(ie,!0);t(ie);var nt=n(ie,2);nt.__click=function(...d){g.onClose?.apply(this,d)},t(Z);var ge=n(Z,2),ot=r(ge),Re=n(r(ot),2);rt(Re),t(ot);var st=n(ot,2),lt=r(st),Ve=n(r(lt),2),we=r(Ve);we.__change=xt;var ct=r(we);ct.value=ct.__value="";var wt=n(ct);ae(wt,17,()=>K.settings.task_types,ye,(d,x)=>{var D=Gr(),j=r(D,!0);t(D);var q={};S(()=>{I(j,e(x).label),q!==(q=e(x).id)&&(D.value=(D.__value=e(x).id)??"")}),c(d,D)}),t(we);var kt=n(we,2);{var Dt=d=>{var x=Jr();let D;S(j=>{D=T(x,1,"h-8 w-8 shrink-0 rounded-full border border-zinc-600 shadow-sm",null,D,{"bg-zinc-500":e(i).color==="bg-zinc-500","bg-red-600":e(i).color==="bg-red-600","bg-orange-600":e(i).color==="bg-orange-600","bg-amber-500":e(i).color==="bg-amber-500","bg-green-600":e(i).color==="bg-green-600","bg-emerald-500":e(i).color==="bg-emerald-500","bg-teal-500":e(i).color==="bg-teal-500","bg-cyan-500":e(i).color==="bg-cyan-500","bg-blue-600":e(i).color==="bg-blue-600","bg-indigo-600":e(i).color==="bg-indigo-600","bg-violet-600":e(i).color==="bg-violet-600","bg-purple-600":e(i).color==="bg-purple-600","bg-fuchsia-600":e(i).color==="bg-fuchsia-600","bg-pink-600":e(i).color==="bg-pink-600","bg-rose-600":e(i).color==="bg-rose-600"}),Le(x,j)},[()=>e(i).color.startsWith("#")?`background-color: ${e(i).color}`:""]),c(d,x)};k(kt,d=>{e(i).color&&d(Dt)})}t(Ve),t(lt);var dt=n(lt,2),Ie=n(r(dt),2);ae(Ie,21,()=>F,ye,(d,x)=>{var D=Kr(),j=r(D,!0);t(D);var q={};S(()=>{I(j,e(x).label),q!==(q=e(x).value)&&(D.value=(D.__value=e(x).value)??"")}),c(d,D)}),t(Ie),t(dt),t(st);var vt=n(st,2),Tt=r(vt),Ct=n(r(Tt),2);rt(Ct),t(Tt),t(vt);var ut=n(vt,2),St=n(r(ut),2);Ar(St),t(ut);var a=n(ut,2),o=r(a),s=n(r(o),2);s.__click=Mt,t(o);var v=n(o,2);{var m=d=>{var x=Zr();ae(x,21,()=>e(i).checklist,ye,(D,j,q)=>{var oe=Qr(),Y=r(oe),_e=r(Y);rt(_e);var ee=n(_e,2);ee.__click=()=>ve(q);var pe=r(ee);Zt(pe,{class:"h-4 w-4"}),t(ee),t(Y);var Te=n(Y,2),se=r(Te);ae(se,17,()=>e(j).items,ye,(be,Je,me)=>{var _t=Xr(),Ne=r(_t);Ne.__click=()=>it(q,me);var Bt=r(Ne);{var Ft=$=>{Hr($,{class:"h-5 w-5 text-emerald-500"})},Rt=$=>{Nr($,{class:"h-5 w-5"})};k(Bt,$=>{e(Je).completed?$(Ft):$(Rt,!1)})}t(Ne);var Ke=n(Ne,2);rt(Ke);var b=n(Ke,2),h=r(b),C=r(h);Or(C,{class:"h-4 w-4"}),t(h);var N=n(h,2);N.__click=()=>Be(q,me);var te=r(N);Zt(te,{class:"h-3 w-3"}),t(N),t(b),t(_t),S(()=>T(Ke,1,`w-full rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 ${e(Je).completed?"text-zinc-500 line-through":""}`)),Ue(Ke,()=>e(Je).text,$=>e(Je).text=$),ze("dragstart",h,$=>ue($,q,me)),ze("dragover",h,$=>je($,q,me)),ze("dragend",h,Pt),c(be,_t)});var Oe=n(se,2);Oe.__click=()=>qe(q);var Ce=r(Oe);xr(Ce,{class:"h-3 w-3"}),Er(),t(Oe),t(Te),t(oe),Ue(_e,()=>e(j).title,be=>e(j).title=be),c(D,oe)}),t(x),c(d,x)},E=d=>{var x=ea();c(d,x)};k(v,d=>{e(i).checklist&&e(i).checklist.length>0?d(m):d(E,!1)})}t(a);var L=n(a,2),ne=r(L),ke=n(r(ne),2);ke.__click=ht,t(ne);var fe=n(ne,2);{var De=d=>{var x=ra();ae(x,21,()=>e(i).links,ye,(D,j,q)=>{var oe=ta(),Y=r(oe),_e=r(Y);rt(_e);var ee=n(_e,2);rt(ee),t(Y);var pe=n(Y,2);pe.__click=()=>yt(e(j).url);var Te=r(pe);Mr(Te,{class:"h-4 w-4"}),t(pe);var se=n(pe,2);se.__click=()=>zt(q);var Oe=r(se);Zt(Oe,{class:"h-4 w-4"}),t(se),t(oe),S(()=>pe.disabled=!e(j).url),Ue(_e,()=>e(j).label,Ce=>e(j).label=Ce),Ue(ee,()=>e(j).url,Ce=>e(j).url=Ce),c(D,oe)}),t(x),c(d,x)},gt=d=>{var x=aa();c(d,x)};k(fe,d=>{e(i).links&&e(i).links.length>0?d(De):d(gt,!1)})}t(L);var At=n(L,2),ft=r(At),Ut=r(ft);{var Et=d=>{var x=ia();x.__click=()=>g.onDelete(g.entry.id),c(d,x)};k(Ut,d=>{g.entry&&g.onDelete&&d(Et)})}t(ft);var Ye=n(ft,2),Ge=r(Ye);Ge.__click=function(...d){g.onClose?.apply(this,d)};var qt=n(Ge,2);t(Ye),t(At),t(ge),t(A),t(p),S((d,x,D)=>{I(Fe,g.entry?"Edit Task":"New Task"),Le(s,`color: ${d??""}`),Le(ke,`color: ${x??""}`),Le(qt,`background-color: ${D??""}`)},[()=>K.getAccentLightHex(),()=>K.getAccentLightHex(),()=>K.getAccentHex()]),ze("submit",ge,V),Ue(Re,()=>e(i).title,d=>e(i).title=d),Nt(we,()=>e(i).type,d=>e(i).type=d),Nt(Ie,()=>e(i).status,d=>e(i).status=d),Ue(Ct,()=>e(i).deadline_at,d=>e(i).deadline_at=d),Ue(St,()=>e(i).body,d=>e(i).body=d),er(3,p,()=>tr,()=>({duration:K.getTransitionDuration()})),c(_,p)};k(Wt,_=>{g.isOpen&&_(Ht)})}c(de,$e),br()}mr(["click","keydown","change"]);var sa=u('<div class="flex items-center gap-2"><button aria-label="Previous week" class="flex items-center justify-center rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-zinc-400 shadow-sm transition-colors hover:bg-zinc-700 hover:text-zinc-100"><!></button> <div class="text-center"><span class="text-sm font-medium text-zinc-300"> </span> <span class="ml-1 text-xs text-zinc-500"> </span></div> <button aria-label="Next week" class="flex items-center justify-center rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-zinc-400 shadow-sm transition-colors hover:bg-zinc-700 hover:text-zinc-100"><!></button></div>'),la=u('<button class="fixed right-8 bottom-24 z-50 rounded-full p-4 shadow-lg/30 drop-shadow-lg backdrop-blur-md transition-all hover:scale-105 hover:brightness-110 md:right-16 md:bottom-16" aria-label="New Task"><!></button>'),ca=u('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">Sign in to view tasks.</div>'),da=u('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">No tasks yet.</div>'),va=u("<option> </option>"),ua=u("<option> </option>"),ga=u('<div class="hidden flex-1 md:flex md:justify-center"><!></div>'),fa=u('<div class="mb-4 flex items-center justify-center md:hidden"><!></div>'),_a=u('<div title="Task Color"></div>'),pa=u("<span> </span>"),ba=u('<span class="text-zinc-500">•</span>'),ma=u("<!> <!> <span> </span>",1),xa=u('<span class="text-zinc-500">•</span>'),ha=u("<!> <!> <span> </span>",1),za=u("<p> </p>"),ya=u('<div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Completed</span> <span> </span></div>'),wa=u('<div role="button"><div class="flex flex-col gap-3"><div class="flex items-start justify-between gap-3"><div class="min-w-0 flex-1"><div class="flex flex-wrap items-center gap-2"><!> <h3> </h3></div> <div class="mt-1 flex items-center gap-2 text-xs"><!> <!> <!></div></div> <div class="flex items-center gap-0.5 rounded-lg bg-zinc-800/60 p-0.5"><button type="button" title="To Do" aria-label="Set status to To Do"><!></button> <button type="button" title="In Progress" aria-label="Set status to In Progress"><!></button> <button type="button" title="Done" aria-label="Set status to Done"><!></button></div></div> <!> <div class="mt-2 flex items-center gap-4 border-t border-zinc-800/50 pt-3"><div class="flex gap-4"><div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Deadline</span> <span> </span></div> <!></div></div></div></div>'),ka=u("<div><!></div>"),Da=u("<div><!></div>"),Ta=u('<div class="my-8 flex items-center gap-4"><div class="h-px flex-1 bg-zinc-800"></div> <span class="text-sm font-medium tracking-wider text-zinc-500 uppercase">Archived</span> <div class="h-px flex-1 bg-zinc-800"></div></div> <div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"></div>',1),Ca=u('<div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"></div> <!>',1),Sa=u("<div></div>"),Aa=u('<span class="text-[10px] text-zinc-500 uppercase"> </span>'),Ea=u('<button><div class="flex items-center gap-2"><!> <span class="truncate text-xs font-medium text-zinc-300"> </span></div> <div class="flex items-center gap-2"><!></div></button>'),La=u('<div><div class="flex items-center justify-between border-b border-zinc-800 pb-2"><span> </span> <span> </span></div> <div class="flex flex-1 flex-col gap-2"></div></div>'),ja=u('<div class="flex flex-col gap-4 md:grid md:grid-cols-7"></div>'),$a=u('<div class="mb-4 flex flex-col gap-3 text-sm md:flex-row md:items-center"><div class="flex flex-wrap items-center justify-between gap-2 md:gap-2"><div class="flex flex-wrap items-center gap-2"><select class="cursor-pointer rounded-md border border-zinc-700 bg-zinc-800 px-3 py-1.5 text-sm text-zinc-100 shadow-sm outline-none focus:border-indigo-500 focus:ring-indigo-500"></select> <button class="flex items-center justify-center rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-zinc-400 shadow-sm transition-colors hover:bg-zinc-700 hover:text-zinc-100" aria-label="Toggle sort order"><!></button></div> <div class="flex items-center gap-2"><select class="cursor-pointer rounded-md border border-zinc-700 bg-zinc-800 px-3 py-1.5 text-sm text-zinc-100 shadow-sm outline-none focus:border-indigo-500 focus:ring-indigo-500"><option>All Tasks</option><!></select></div></div> <!> <div class="hidden md:ml-auto md:flex md:items-center md:gap-4"><span class="text-xs text-zinc-500"> </span> <div class="flex items-center rounded-lg bg-zinc-800/50 p-1"><button aria-label="List View"><!></button> <button aria-label="Week View"><!></button></div></div></div> <div class="mb-4 flex items-center justify-between md:hidden"><span class="text-xs text-zinc-500"> </span> <div class="flex items-center rounded-lg bg-zinc-800/50 p-1"><button aria-label="List View"><!></button> <button aria-label="Week View"><!></button></div></div> <!> <!>',1),Ia=u('<!> <section><div class="flex flex-wrap items-center justify-between gap-4"><!></div> <!></section>',1);function ei(de,g){pr(g,!0);const i=a=>{var o=sa(),s=r(o);s.__click=_;var v=r(s);Br(v,{class:"h-4 w-4"}),t(s);var m=n(s,2),E=r(m),L=r(E);t(E);var ne=n(E,2),ke=r(ne,!0);t(ne),t(m);var fe=n(m,2);fe.__click=p;var De=r(fe);Fr(De,{class:"h-4 w-4"}),t(fe),t(o),S(()=>{I(L,`Week ${e(Wt)??""}`),I(ke,e(Ht))}),c(a,o)};let M=X(null),F=B(()=>Ee.tasks),V=X(!1),U=X(null),O=X("list");const Mt=40;let ve=X("deadline"),qe=X("asc"),Be=X("all"),it=X(0),ue=X(null),je=X(null),Pt=B(()=>e(Be)==="all"?e(F):e(F).filter(a=>a.type===e(Be))),xt=B(()=>[...e(Pt)].sort((a,o)=>{const s=e(qe)==="asc"?1:-1;if(e(ve)==="title")return(a.title||"").localeCompare(o.title||"")*s;if(e(ve)==="deadline"){const v=a.deadline_at?new Date(a.deadline_at).getTime():s===1?1/0:-1/0,m=o.deadline_at?new Date(o.deadline_at).getTime():s===1?1/0:-1/0;return(v-m)*s}else if(e(ve)==="completed"){const v=a.completed_at?new Date(a.completed_at).getTime():0,m=o.completed_at?new Date(o.completed_at).getTime():0;return(v-m)*s}else if(e(ve)==="created"){const v=new Date(a.created_at).getTime(),m=new Date(o.created_at).getTime();return(v-m)*s}else if(e(ve)==="status")return(a.status||"").localeCompare(o.status||"")*s;return 0})),ht=B(()=>e(xt).filter(a=>a.status!=="done")),zt=B(()=>e(xt).filter(a=>a.status==="done")),yt=B(()=>e(F).filter(a=>a.status==="done").length),$e=B(()=>{const a=new Date,o=a.getDay(),s=a.getDate()-o+(o===0?-6:1),v=new Date(a);v.setDate(s+e(it)*7),v.setHours(0,0,0,0);const m=[];for(let E=0;E<7;E++){const L=new Date(v);L.setDate(v.getDate()+E),m.push(L)}return m}),Wt=B(()=>{const a=e($e)[0],o=new Date(a.getFullYear(),0,1),s=Math.floor((a.getTime()-o.getTime())/864e5);return Math.ceil((s+o.getDay()+1)/7)}),Ht=B(()=>{const a=e($e)[0],o=e($e)[6],s={month:"short",day:"numeric"};return`${a.toLocaleDateString("en-US",s)} - ${o.toLocaleDateString("en-US",s)}`});function _(){vr(it,-1)}function p(){vr(it)}function A(a){return e(ht).filter(o=>{if(!o.deadline_at)return!1;const s=new Date(o.deadline_at);return s.getFullYear()===a.getFullYear()&&s.getMonth()===a.getMonth()&&s.getDate()===a.getDate()})}function Z(a,o){w(ue,o.id,!0),a.dataTransfer&&(a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("text/plain",o.id.toString()))}function ie(a){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="move")}function Fe(a,o){a.preventDefault(),w(je,o,!0)}function nt(a){const o=a.currentTarget.getBoundingClientRect(),s=a.clientX,v=a.clientY;(s<o.left||s>o.right||v<o.top||v>o.bottom)&&w(je,null)}async function ge(a,o){if(a.preventDefault(),w(je,null),e(ue)===null)return;const s=e(F).find(L=>L.id===e(ue));if(!s){w(ue,null);return}let v;if(s.deadline_at){const L=new Date(s.deadline_at);v=new Date(o),v.setHours(L.getHours(),L.getMinutes(),L.getSeconds(),L.getMilliseconds())}else v=new Date(o);const m=v.toISOString();Ee.updateTask({...s,deadline_at:m});const{error:E}=await He.from("tasks").update({deadline_at:m}).eq("id",e(ue));E&&(console.error("Error updating task deadline:",E),Ae("Error updating deadline: "+E.message,"Error"),Ee.updateTask(s)),w(ue,null)}Lr(()=>{He.auth.getSession().then(({data:{session:o}})=>{w(M,o,!0)});const{data:{subscription:a}}=He.auth.onAuthStateChange((o,s)=>{w(M,s,!0)});return()=>a.unsubscribe()});function ot(){w(U,null),w(V,!0)}function Re(a){w(U,a,!0),w(V,!0)}async function st(a){if(!await $r("Are you sure you want to delete this task?","Delete Task",{confirmText:"Delete",isDestructive:!0}))return;const{error:s}=await He.from("tasks").delete().eq("id",a);s?(console.error("Error deleting task:",s),Ae("Error deleting: "+s.message,"Error")):(Ae("Task deleted successfully!","Success"),w(V,!1),Ee.deleteTask(a))}async function lt(a){const{id:o,...s}=a;if(e(U)){const{data:v,error:m}=await He.from("tasks").update(s).eq("id",e(U).id).select().single();m?(console.error("Error updating task:",m),Ae("Error updating: "+m.message,"Error")):(Ae("Task updated successfully!","Success"),w(V,!1),v&&Ee.updateTask(v))}else{const{data:v,error:m}=await He.from("tasks").insert(s).select().single();m?(console.error("Error saving task:",m),Ae("Error saving: "+m.message,"Error")):(Ae("Task saved successfully!","Success"),w(V,!1),v&&Ee.addTask(v))}}async function Ve(a,o){const s={status:o};o==="done"?s.completed_at=new Date().toISOString():s.completed_at=null,Ee.updateTask({...a,status:o,completed_at:s.completed_at});const{error:v}=await He.from("tasks").update(s).eq("id",a.id);v&&(console.error("Error updating task status:",v),Ae("Error updating status: "+v.message,"Error"),Ee.updateTask(a))}const we=a=>a?new Date(a).toLocaleDateString():"—";function ct(a,o=Mt){return a?a.length>o?a.slice(0,o)+"...":a:""}function wt(a){if(!a)return{total:0,completed:0};if(Array.isArray(a)&&a.length>0&&"items"in a[0]){let o=0,s=0;return a.forEach(v=>{v.items&&(o+=v.items.length,s+=v.items.filter(m=>m.completed).length)}),{total:o,completed:s}}return Array.isArray(a)&&a.length>0?{total:a.length,completed:a.filter(o=>o.completed).length}:{total:0,completed:0}}var kt=Ia(),Dt=Q(kt);oa(Dt,{get isOpen(){return e(V)},get entry(){return e(U)},onClose:()=>w(V,!1),onSave:lt,onDelete:st});var dt=n(Dt,2),Ie=r(dt),vt=r(Ie);{var Tt=a=>{var o=la();o.__click=ot;var s=r(o);xr(s,{class:"h-6 w-6 text-(--accent-color)"}),t(o),S((v,m)=>Le(o,`--accent-color: ${v??""}; background-color: ${m??""}/50`),[()=>K.getAccentLightHex(),()=>K.getAccentHex()]),c(a,o)};k(vt,a=>{e(M)&&!e(V)&&!Ir.isOpen&&a(Tt)})}t(Ie);var Ct=n(Ie,2);{var ut=a=>{var o=ca();c(a,o)},St=a=>{var o=at(),s=Q(o);{var v=E=>{var L=da();c(E,L)},m=E=>{var L=$a(),ne=Q(L),ke=r(ne),fe=r(ke),De=r(fe);ae(De,20,()=>["title","deadline","created","status","completed"],ye,(b,h)=>{var C=va(),N=r(C,!0);t(C);var te={};S($=>{I(N,$),te!==(te=h)&&(C.value=(C.__value=h)??"")},[()=>h.charAt(0).toUpperCase()+h.slice(1)]),c(b,C)}),t(De);var gt=n(De,2);gt.__click=()=>w(qe,e(qe)==="asc"?"desc":"asc",!0);var At=r(gt);{var ft=b=>{Ur(b,{class:"h-4 w-4"})},Ut=b=>{qr(b,{class:"h-4 w-4"})};k(At,b=>{e(qe)==="asc"?b(ft):b(Ut,!1)})}t(gt),t(fe);var Et=n(fe,2),Ye=r(Et),Ge=r(Ye);Ge.value=Ge.__value="all";var qt=n(Ge);ae(qt,17,()=>K.settings.task_types,ye,(b,h)=>{var C=ua(),N=r(C,!0);t(C);var te={};S(()=>{I(N,e(h).label),te!==(te=e(h).id)&&(C.value=(C.__value=e(h).id)??"")}),c(b,C)}),t(Ye),t(Et),t(ke);var d=n(ke,2);{var x=b=>{var h=ga(),C=r(h);i(C),t(h),c(b,h)};k(d,b=>{e(O)==="week"&&b(x)})}var D=n(d,2),j=r(D),q=r(j);t(j);var oe=n(j,2),Y=r(oe);Y.__click=()=>w(O,"list");var _e=r(Y);_r(_e,{class:"h-4 w-4"}),t(Y);var ee=n(Y,2);ee.__click=()=>w(O,"week");var pe=r(ee);fr(pe,{class:"h-4 w-4"}),t(ee),t(oe),t(D),t(ne);var Te=n(ne,2),se=r(Te),Oe=r(se);t(se);var Ce=n(se,2),be=r(Ce);be.__click=()=>w(O,"list");var Je=r(be);_r(Je,{class:"h-4 w-4"}),t(be);var me=n(be,2);me.__click=()=>w(O,"week");var _t=r(me);fr(_t,{class:"h-4 w-4"}),t(me),t(Ce),t(Te);var Ne=n(Te,2);{var Bt=b=>{var h=fa(),C=r(h);i(C),t(h),c(b,h)};k(Ne,b=>{e(O)==="week"&&b(Bt)})}var Ft=n(Ne,2);{var Rt=b=>{const h=(re,l=dr,y=dr)=>{var P=wa();P.__click=()=>Re(l()),Ot(P,"tabindex",0),P.__keydown=f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),Re(l()))};var Xe=r(P),G=r(Xe),Me=r(G),Qe=r(Me),le=r(Qe);{var W=f=>{var z=_a();S((H,J)=>{T(z,1,H),Le(z,J)},[()=>`h-3 w-3 rounded-full ${y()?"opacity-50":""} ${l().color.startsWith("bg-")?l().color:""}`,()=>l().color.startsWith("bg-")?"":`background-color: ${l().color}`]),c(f,z)};k(le,f=>{l().color&&f(W)})}var Pe=n(le,2),xe=r(Pe,!0);t(Pe),t(Qe);var Ze=n(Qe,2),pt=r(Ze);{var Vt=f=>{var z=pa(),H=r(z,!0);t(z),S(J=>{T(z,1,jr(y()?"text-zinc-600":"text-zinc-400")),I(H,J)},[()=>K.getTaskType(l().type)?.label??l().type]),c(f,z)};k(pt,f=>{l().type&&f(Vt)})}var et=n(pt,2);{var Yt=f=>{const z=B(()=>wt(l().checklist));var H=at(),J=Q(H);{var tt=We=>{var It=ma(),Se=Q(It);{var Xt=mt=>{var Tr=ba();c(mt,Tr)};k(Se,mt=>{l().type&&mt(Xt)})}var cr=n(Se,2);{let mt=B(()=>`h-4 w-4 ${y()?"text-zinc-600":"text-zinc-400"}`);Wr(cr,{get class(){return e(mt)}})}var Qt=n(cr,2),Dr=r(Qt);t(Qt),S(()=>{T(Qt,1,`text-xs ${y()?"text-zinc-600":"text-zinc-500"}`),I(Dr,`${e(z).completed??""}/${e(z).total??""}`)}),c(We,It)};k(J,We=>{e(z).total>0&&We(tt)})}c(f,H)};k(et,f=>{l().checklist&&f(Yt)})}var Lt=n(et,2);{var Gt=f=>{var z=ha(),H=Q(z);{var J=Se=>{var Xt=xa();c(Se,Xt)};k(H,Se=>{(l().type||l().checklist&&wt(l().checklist).total>0)&&Se(J)})}var tt=n(H,2);{let Se=B(()=>`h-4 w-4 ${y()?"text-zinc-600":"text-zinc-400"}`);Pr(tt,{get class(){return e(Se)}})}var We=n(tt,2),It=r(We,!0);t(We),S(()=>{T(We,1,`text-xs ${y()?"text-zinc-600":"text-zinc-500"}`),I(It,l().links.length)}),c(f,z)};k(Lt,f=>{l().links&&l().links.length>0&&f(Gt)})}t(Ze),t(Me);var jt=n(Me,2),R=r(jt);R.__click=f=>{f.stopPropagation(),Ve(l(),"todo")};var he=r(R);Yr(he,{class:"h-3.5 w-3.5"}),t(R);var ce=n(R,2);ce.__click=f=>{f.stopPropagation(),Ve(l(),"in_progress")};var bt=r(ce);Vr(bt,{class:"h-3.5 w-3.5"}),t(ce);var $t=n(ce,2);$t.__click=f=>{f.stopPropagation(),Ve(l(),"done")};var hr=r($t);Rr(hr,{class:"h-3.5 w-3.5"}),t($t),t(jt),t(G);var or=n(G,2);{var zr=f=>{var z=za(),H=r(z,!0);t(z),S(J=>{T(z,1,`text-sm ${y()?"text-zinc-600":"text-zinc-400"}`),I(H,J)},[()=>ct(l().body)]),c(f,z)};k(or,f=>{l().body&&f(zr)})}var sr=n(or,2),lr=r(sr),Jt=r(lr),Kt=n(r(Jt),2),yr=r(Kt,!0);t(Kt),t(Jt);var wr=n(Jt,2);{var kr=f=>{var z=ya(),H=n(r(z),2),J=r(H,!0);t(H),t(z),S(tt=>{T(H,1,`text-xs ${y()?"text-zinc-500":"text-emerald-400"}`),I(J,tt)},[()=>we(l().completed_at)]),c(f,z)};k(wr,f=>{l().completed_at&&f(kr)})}t(lr),t(sr),t(Xe),t(P),S((f,z)=>{T(P,1,`group relative flex w-full cursor-pointer flex-col justify-between rounded-lg border p-4 text-left transition-all ${y()?"border-zinc-800/60 bg-zinc-900/30 text-zinc-500 hover:border-zinc-700/60 hover:bg-zinc-900/40":"border-zinc-800 bg-zinc-900/60 hover:border-zinc-700 hover:bg-zinc-900/80"}`),T(Pe,1,`truncate text-base font-bold ${y()?"text-zinc-500":"text-zinc-100"}`),Ot(Pe,"title",l().title),I(xe,l().title),T(R,1,`flex items-center justify-center rounded px-1.5 py-1 transition-all ${l().status==="todo"?"bg-zinc-700 text-zinc-100 shadow-sm":y()?"text-zinc-600 hover:text-zinc-500":"text-zinc-400 hover:text-zinc-300"}`),T(ce,1,`flex items-center justify-center rounded px-1.5 py-1 shadow-sm transition-all ${l().status==="in_progress"?"":y()?"text-zinc-600 hover:text-zinc-500":"text-zinc-400 hover:text-zinc-300"}`),Le(ce,f),T($t,1,`flex items-center justify-center rounded px-1.5 py-1 transition-all ${l().status==="done"?"bg-emerald-500/20 text-emerald-400 shadow-sm":y()?"text-zinc-600 hover:text-zinc-500":"text-zinc-400 hover:text-zinc-300"}`),T(Kt,1,`text-xs ${y()?"text-zinc-500":"text-zinc-300"}`),I(yr,z)},[()=>l().status==="in_progress"?(()=>{const f=K.getAccentHex(),z=parseInt(f.slice(1,3),16),H=parseInt(f.slice(3,5),16),J=parseInt(f.slice(5,7),16);return`background-color: rgba(${z}, ${H}, ${J}, 0.2); color: ${K.getAccentLightHex()}`})():"",()=>we(l().deadline_at)]),c(re,P)};var C=Ca(),N=Q(C);ae(N,29,()=>e(ht),re=>re.id,(re,l)=>{var y=ka(),P=r(y);h(P,()=>e(l),()=>!1),t(y),ur(y,()=>gr,()=>({duration:300})),er(3,y,()=>tr,()=>({duration:200})),c(re,y)}),t(N);var te=n(N,2);{var $=re=>{var l=Ta(),y=n(Q(l),2);ae(y,29,()=>e(zt),P=>P.id,(P,Xe)=>{var G=Da(),Me=r(G);h(Me,()=>e(Xe),()=>!0),t(G),ur(G,()=>gr,()=>({duration:300})),er(3,G,()=>tr,()=>({duration:200})),c(P,G)}),t(y),c(re,l)};k(te,re=>{e(zt).length>0&&re($)})}c(b,C)},Ke=b=>{var h=ja();ae(h,21,()=>e($e),ye,(C,N)=>{const te=B(()=>A(e(N))),$=B(()=>new Date().toDateString()===e(N).toDateString()),re=B(()=>e(je)&&e(je).toDateString()===e(N).toDateString());var l=La(),y=r(l),P=r(y),Xe=r(P,!0);t(P);var G=n(P,2),Me=r(G,!0);t(G),t(y);var Qe=n(y,2);ae(Qe,21,()=>e(te),ye,(le,W)=>{const Pe=B(()=>e(ue)===e(W).id);var xe=Ea();Ot(xe,"draggable",!0),xe.__click=()=>{e(Pe)||Re(e(W))};var Ze=r(xe),pt=r(Ze);{var Vt=R=>{var he=Sa();S((ce,bt)=>{T(he,1,ce),Le(he,bt)},[()=>`h-2 w-2 shrink-0 rounded-full ${e(W).color.startsWith("bg-")?e(W).color:""}`,()=>e(W).color.startsWith("bg-")?"":`background-color: ${e(W).color}`]),c(R,he)};k(pt,R=>{e(W).color&&R(Vt)})}var et=n(pt,2),Yt=r(et,!0);t(et),t(Ze);var Lt=n(Ze,2),Gt=r(Lt);{var jt=R=>{var he=Aa(),ce=r(he,!0);t(he),S(bt=>I(ce,bt),[()=>K.getTaskType(e(W).type)?.label??e(W).type]),c(R,he)};k(Gt,R=>{e(W).type&&R(jt)})}t(Lt),t(xe),S(()=>{T(xe,1,`group flex flex-col gap-1 rounded border border-zinc-800 bg-zinc-900/60 p-2 text-left transition-all ${e(Pe)?"cursor-grabbing opacity-50":"cursor-grab hover:bg-zinc-800/80"}`),Ot(et,"title",e(W).title),I(Yt,e(W).title)}),ze("dragstart",xe,R=>Z(R,e(W))),c(le,xe)}),t(Qe),t(l),S((le,W)=>{T(l,1,`flex min-h-[200px] flex-col gap-2 rounded-lg border p-2 transition-colors ${e($)?"border-zinc-700 bg-zinc-900/40":e(re)?"border-indigo-500/50 bg-zinc-800/50":"border-transparent"}`),T(P,1,`text-sm font-medium ${e($)?"text-indigo-400":"text-zinc-400"}`),I(Xe,le),T(G,1,`text-xs ${e($)?"text-indigo-400":"text-zinc-600"}`),I(Me,W)},[()=>e(N).toLocaleDateString("en-US",{weekday:"short"}),()=>e(N).getDate()]),ze("dragover",l,ie),ze("dragenter",l,le=>Fe(le,e(N))),ze("dragleave",l,nt),ze("drop",l,le=>ge(le,e(N))),c(C,l)}),t(h),c(b,h)};k(Ft,b=>{e(O)==="list"?b(Rt):b(Ke,!1)})}S(()=>{I(q,`Completed ${e(yt)??""} / ${e(F).length??""}`),T(Y,1,`rounded-md p-1.5 transition-all ${e(O)==="list"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`),T(ee,1,`rounded-md p-1.5 transition-all ${e(O)==="week"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`),I(Oe,`Completed ${e(yt)??""} / ${e(F).length??""}`),T(be,1,`rounded-md p-1.5 transition-all ${e(O)==="list"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`),T(me,1,`rounded-md p-1.5 transition-all ${e(O)==="week"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`)}),Nt(De,()=>e(ve),b=>w(ve,b)),Nt(Ye,()=>e(Be),b=>w(Be,b)),c(E,L)};k(s,E=>{e(F).length===0?E(v):E(m,!1)},!0)}c(a,o)};k(Ct,a=>{e(M)?a(St,!1):a(ut)})}t(dt),c(de,kt),br()}mr(["click","keydown"]);export{ei as component};
