import{c as ie,a as d,f as v,t as ue}from"../chunks/CBL0ReU-.js";import{p as fe,g as ne,a as pe,h as r,j as n,i as t,t as k,s as N,c as ye,u as we,o as ke,k as l,f as c}from"../chunks/DZENMWVZ.js";import{d as xe,s as w}from"../chunks/C73i8PqL.js";import{i as g}from"../chunks/CcH4pQ61.js";import{e as X,i as Z,a as H,s as ze,b as Ce}from"../chunks/CQul3BK8.js";import{s as P}from"../chunks/Bkout0r_.js";import{E as Ee}from"../chunks/Cj_KDs-o.js";import{P as De,L as Me}from"../chunks/DLg1bkk4.js";var je=v('<div><h3 class="text-sm font-medium text-zinc-400">Weight</h3> <p class="text-lg text-zinc-100"> </p></div>'),Se=v('<div class="rounded-lg border border-zinc-800 bg-zinc-800/50 p-3"><h3 class="mb-1 text-xs font-medium tracking-wider text-zinc-400 uppercase"> </h3> <p class="text-xl font-semibold text-indigo-400"> </p></div>'),Te=v('<span class="inline-flex items-center rounded-full border border-red-900/50 bg-red-900/30 px-2.5 py-0.5 text-xs font-medium text-red-400">Sickness</span>'),Le=v('<span class="inline-flex items-center rounded-full border border-indigo-900/50 bg-indigo-900/30 px-2.5 py-0.5 text-xs font-medium text-indigo-400">Calvin Day</span>'),Ae=v('<span class="inline-flex items-center rounded-full border border-pink-900/50 bg-pink-900/30 px-2.5 py-0.5 text-xs font-medium text-pink-400">Ihana</span>'),Be=v('<span class="inline-flex items-center rounded-full border border-green-900/50 bg-green-900/30 px-2.5 py-0.5 text-xs font-medium text-green-400">Call Family</span>'),Oe=v('<div><h3 class="mb-1 text-sm font-medium text-zinc-400 capitalize"> </h3> <p class="rounded-md border border-zinc-800/50 bg-zinc-800/30 p-2 text-zinc-200"> </p></div>'),Ve=v('<div class="border-t border-zinc-800 pt-4"><h3 class="mb-2 text-sm font-medium text-zinc-400">Notes</h3> <p class="rounded-lg border border-zinc-800/50 bg-zinc-800/30 p-4 whitespace-pre-wrap text-zinc-300"> </p></div>'),Ne=v('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100">Entry Details</h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="space-y-6 p-4 md:p-6"><div><h3 class="text-sm font-medium text-zinc-400">Date</h3> <p class="text-lg text-zinc-100"> </p></div> <!> <div class="grid grid-cols-2 gap-4 sm:grid-cols-3"></div> <div class="flex flex-wrap gap-2"><!> <!> <!> <!></div> <div class="grid grid-cols-1 gap-6 sm:grid-cols-2"></div> <!></div> <div class="sticky bottom-0 rounded-b-xl border-t border-zinc-800 bg-zinc-900 p-4 md:p-6"><button class="w-full rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 transition-colors ring-inset hover:bg-zinc-700">Close</button></div></div></div>');function He(se,s){fe(s,!0);function $(p){p.target===p.currentTarget&&s.onClose()}function C(p){p.key==="Escape"&&s.onClose()}var S=ie(),z=ne(S);{var T=p=>{var h=Ne();h.__click=$,h.__keydown=C;var ee=r(h),q=r(ee),oe=n(r(q),2);oe.__click=function(...e){s.onClose?.apply(this,e)},t(q);var F=n(q,2),I=r(F),K=n(r(I),2),W=r(K,!0);t(K),t(I);var L=n(I,2);{var le=e=>{var i=je(),x=n(r(i),2),b=r(x);t(x),t(i),k(()=>w(b,`${s.entry.weight??""} kg`)),d(e,i)};g(L,e=>{s.entry.weight&&e(le)})}var Y=n(L,2);X(Y,20,()=>["mood","energy","physical","sleep","meals"],Z,(e,i)=>{var x=ie(),b=ne(x);{var _=f=>{var m=Se(),y=r(m),j=r(y,!0);t(y);var D=n(y,2),O=r(D,!0);t(D),t(m),k(()=>{w(j,i),w(O,s.entry[i])}),d(f,m)};g(b,f=>{s.entry[i]!==null&&s.entry[i]!==void 0&&f(_)})}d(e,x)}),t(Y);var A=n(Y,2),te=r(A);{var de=e=>{var i=Te();d(e,i)};g(te,e=>{s.entry.sickness&&e(de)})}var G=n(te,2);{var ce=e=>{var i=Le();d(e,i)};g(G,e=>{s.entry.calvin_day&&e(ce)})}var a=n(G,2);{var o=e=>{var i=Ae();d(e,i)};g(a,e=>{s.entry.ihana&&e(o)})}var u=n(a,2);{var B=e=>{var i=Be();d(e,i)};g(u,e=>{s.entry.call_family&&e(B)})}t(A);var J=n(A,2);X(J,20,()=>["work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type","dreams_type"],Z,(e,i)=>{var x=ie(),b=ne(x);{var _=f=>{var m=Oe(),y=r(m),j=r(y,!0);t(y);var D=n(y,2),O=r(D,!0);t(D),t(m),k(ve=>{w(j,ve),w(O,s.entry[i])},[()=>i.replace("_type","")]),d(f,m)};g(b,f=>{s.entry[i]&&f(_)})}d(e,x)}),t(J);var E=n(J,2);{var M=e=>{var i=Ve(),x=n(r(i),2),b=r(x,!0);t(x),t(i),k(()=>w(b,s.entry.notes)),d(e,i)};g(E,e=>{s.entry.notes&&e(M)})}t(F);var Q=n(F,2),R=r(Q);R.__click=function(...e){s.onClose?.apply(this,e)},t(Q),t(ee),t(h),k(()=>w(W,s.entry.created_at)),d(p,h)};g(z,p=>{s.isOpen&&s.entry&&p(T)})}d(se,S),pe()}xe(["click","keydown"]);var Pe=v('<button class="fixed right-8 bottom-8 z-50 rounded-full bg-indigo-600 p-4 text-white shadow-lg transition-transform hover:scale-105 hover:bg-indigo-500" aria-label="New Entry"><!></button>'),qe=v('<div class="flex h-64 items-center justify-center"><!></div>'),Fe=v('<th class="hidden px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase md:table-cell"> </th>'),Ie=v('<td class="hidden max-w-xs truncate px-6 py-4 text-sm whitespace-nowrap text-zinc-400 md:table-cell"><!></td>'),Ke=v('<tr class="transition-colors hover:bg-zinc-800/50"><td class="sticky left-0 z-10 bg-zinc-900 px-6 py-4 font-medium whitespace-nowrap text-zinc-200"> </td><td class="sticky left-[100px] z-10 space-x-2 border-r border-zinc-800 bg-zinc-900 px-6 py-4 whitespace-nowrap shadow-[4px_0_8px_-4px_rgba(0,0,0,0.3)]"><button class="text-zinc-400 transition-colors hover:text-zinc-200 md:hidden" aria-label="View Details"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></button> <button class="text-indigo-400 transition-colors hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="text-red-400 transition-colors hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></td><!></tr>'),We=v('<div class="overflow-x-auto rounded-lg border border-zinc-800 shadow"><table class="min-w-full divide-y divide-zinc-800"><thead class="bg-zinc-800"><tr><th class="sticky left-0 z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Date</th><th class="sticky left-[100px] z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Actions</th><!></tr></thead><tbody class="divide-y divide-zinc-800 bg-zinc-900"></tbody></table></div>'),Ye=v('<p class="text-center text-zinc-500">Please sign in to view tracking data.</p>'),Ge=v('<div><div class="mb-6 flex items-center justify-between"><h2 class="text-lg font-bold text-zinc-100">Full Table</h2> <!></div> <!> <!> <!></div>');function tt(se,s){fe(s,!0);let $=N(ye(we(()=>s.data.dailyTracking))),C=N(!1),S=N(!1),z=N(null),T=N(null),p=N(!0);ke(()=>{P.auth.getSession().then(({data:{session:o}})=>{c(T,o,!0),o?h():c(p,!1)});const{data:{subscription:a}}=P.auth.onAuthStateChange((o,u)=>{c(T,u,!0),u?h():c(p,!1)});return()=>a.unsubscribe()});async function h(){c(p,!0);const{data:a,error:o}=await P.from("dailyTracking").select().order("created_at",{ascending:!1});!o&&a&&c($,a,!0),c(p,!1)}function ee(){c(z,null),c(C,!0)}function q(a){c(z,a,!0),c(C,!0)}function oe(a){c(z,a,!0),c(S,!0)}async function F(a){if(!await Ce("Are you sure you want to delete this entry?","Delete Entry",{confirmText:"Delete",isDestructive:!0}))return;const{error:u}=await P.from("dailyTracking").delete().eq("id",a);u?H(u.message,"Error"):(H("Entry deleted successfully","Success"),h())}async function I(a){if(l(z)){const{id:o,...u}=a,{error:B}=await P.from("dailyTracking").update(u).eq("id",l(z).id);B?H(B.message,"Error"):(H("Entry updated successfully","Success"),c(C,!1),h())}else{const{error:o}=await P.from("dailyTracking").insert(a);o?H(o.message,"Error"):(H("Entry created successfully","Success"),c(C,!1),h())}}const K=["mood","energy","physical","sleep","meals","weight","sickness","work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type","calvin_day","ihana","call_family","dreams_type","notes"];var W=Ge(),L=r(W),le=n(r(L),2);{var Y=a=>{var o=Pe();o.__click=ee;var u=r(o);De(u,{class:"h-6 w-6"}),t(o),d(a,o)};g(le,a=>{l(T)&&a(Y)})}t(L);var A=n(L,2);{var te=a=>{var o=qe(),u=r(o);Me(u,{class:"h-8 w-8 animate-spin text-indigo-500"}),t(o),d(a,o)},de=a=>{var o=ie(),u=ne(o);{var B=E=>{var M=We(),Q=r(M),R=r(Q),e=r(R),i=n(r(e),2);X(i,17,()=>K,Z,(b,_)=>{var f=Fe(),m=r(f,!0);t(f),k(y=>w(m,y),[()=>l(_).replace("_"," ")]),d(b,f)}),t(e),t(R);var x=n(R);X(x,21,()=>l($),Z,(b,_)=>{var f=Ke(),m=r(f),y=r(m,!0);t(m);var j=n(m),D=r(j);D.__click=()=>oe(l(_));var O=n(D,2);O.__click=()=>q(l(_));var ve=n(O,2);ve.__click=()=>F(l(_).id),t(j);var _e=n(j);X(_e,17,()=>K,Z,(me,re)=>{var ae=Ie(),ge=r(ae);{var he=V=>{var U=ue();k(()=>w(U,l(_)[l(re)]?"Yes":"No")),d(V,U)},be=V=>{var U=ue();k(()=>w(U,l(_)[l(re)]??"-")),d(V,U)};g(ge,V=>{typeof l(_)[l(re)]=="boolean"?V(he):V(be,!1)})}t(ae),k(()=>ze(ae,"title",l(_)[l(re)])),d(me,ae)}),t(f),k(()=>w(y,l(_).created_at)),d(b,f)}),t(x),t(Q),t(M),d(E,M)},J=E=>{var M=Ye();d(E,M)};g(u,E=>{l(T)?E(B):E(J,!1)},!0)}d(a,o)};g(A,a=>{l(p)?a(te):a(de,!1)})}var G=n(A,2);Ee(G,{get isOpen(){return l(C)},get entry(){return l(z)},onClose:()=>c(C,!1),onSave:I});var ce=n(G,2);He(ce,{get isOpen(){return l(S)},get entry(){return l(z)},onClose:()=>c(S,!1)}),t(W),d(se,W),pe()}xe(["click"]);export{tt as component};
