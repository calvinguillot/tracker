import{c as ee,a as d,f as u}from"../chunks/B-wedEgi.js";import{p as Pe,l as St,m as Fe,y as Oe,t as E,k as ht,a as Le,z as r,A as e,B as i,D as Ue,F as M,n as t,G as qe,o as Be,I as it,J as Te}from"../chunks/DXU5jnQ_.js";import{d as Ee,s as q,e as ce}from"../chunks/CKrhTcXd.js";import{i as z}from"../chunks/1UUrSLx-.js";import{e as mt,i as bt,s as _t,c as Ae}from"../chunks/JHaZoCpa.js";import{r as Ct,a as zt,b as Ce,t as Ge,c as j,d as He,e as Wt,f as We,g as Ie}from"../chunks/CpFvtbVR.js";import{s as te}from"../chunks/BW5xtwr9.js";import{d as de}from"../chunks/Ban-EeZC.js";import{b as xt,P as Me}from"../chunks/jmEW5wUa.js";import{f as Re}from"../chunks/BsCRBkET.js";import{T as De}from"../chunks/wveo2xEP.js";import{G as Ye,S as Ve,E as Je,C as Ke,L as Qe,a as Xe}from"../chunks/_bcvuuv8.js";import{S as Ze}from"../chunks/Cj4_WUF5.js";import{L as $e}from"../chunks/DV5mb0O4.js";import{A as tr}from"../chunks/bmutvh7m.js";import{A as er}from"../chunks/QpLyY0R8.js";var rr=u("<option> </option>"),ar=u("<div></div>"),ir=u('<div class="flex items-center gap-2"><button type="button" class="text-zinc-400 hover:text-zinc-200"><!></button> <input type="text" placeholder="Item description..."/> <div class="flex items-center gap-1"><div role="button" tabindex="0" class="cursor-grab p-1 text-zinc-600 hover:text-zinc-400 active:cursor-grabbing" draggable="true"><!></div> <button type="button" class="p-1 text-zinc-500 hover:text-red-400"><!></button></div></div>'),nr=u('<div class="rounded-lg border border-zinc-800 bg-zinc-800/30 p-4"><div class="mb-3 flex items-center justify-between gap-2"><input type="text" placeholder="Checklist Title" class="w-full bg-transparent text-sm font-bold text-zinc-200 placeholder-zinc-600 focus:outline-none"/> <button type="button" class="text-zinc-600 hover:text-red-400" title="Remove Checklist"><!></button></div> <div class="space-y-2"><!> <button type="button" class="mt-2 flex items-center gap-1 text-xs text-zinc-500 hover:text-zinc-300"><!> Add Item</button></div></div>'),sr=u('<div class="space-y-6"></div>'),or=u('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No checklists yet</p></div>'),lr=u('<div class="flex items-center gap-2"><div class="grid flex-1 grid-cols-1 gap-2 md:grid-cols-2"><input type="text" placeholder="Label (optional)" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/> <input type="text" placeholder="URL" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <button type="button" class="p-2 text-zinc-400 hover:text-indigo-400" title="Open Link"><!></button> <button type="button" class="p-2 text-zinc-400 hover:text-red-400" title="Remove Link"><!></button></div>'),cr=u('<div class="space-y-2"></div>'),dr=u('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No links yet</p></div>'),vr=u('<button type="button" class="rounded-md bg-red-500/10 px-3.5 py-2.5 text-sm font-semibold text-red-400 shadow-sm ring-1 ring-red-500/20 transition-colors ring-inset hover:bg-red-500/20">Delete</button>'),ur=u('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div><label for="name" class="mb-1 block text-sm font-medium text-zinc-400">Name</label> <input type="text" id="name" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="description" class="mb-1 block text-sm font-medium text-zinc-400">Description</label> <textarea id="description" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="status" class="mb-1 block text-sm font-medium text-zinc-400">Status</label> <select id="status" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Not Started</option><option>In Progress</option><option>Postponed</option><option>Completed</option><option>Cancelled</option></select></div> <div><label for="funds" class="mb-1 block text-sm font-medium text-zinc-400">Funds (€)</label> <input type="number" id="funds" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div><label for="type" class="mb-1 block text-sm font-medium text-zinc-400">Type</label> <div class="flex items-center gap-2"><select id="type" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Select Type</option><!></select> <!></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="start_at" class="mb-1 block text-sm font-medium text-zinc-400">Start Date</label> <input type="date" id="start_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="end_at" class="mb-1 block text-sm font-medium text-zinc-400">End Date</label> <input type="date" id="end_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Checklists</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Checklist</button></div> <!></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Links</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Link</button></div> <!></div> <div class="sticky bottom-0 mt-6 flex justify-between gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><div><!></div> <div class="flex gap-3"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700">Cancel</button> <button type="submit" class="rounded-md px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm transition-all hover:brightness-110 focus-visible:outline-2 focus-visible:outline-offset-2">Save</button></div></div></form></div></div>');function fr(ve,m){Pe(m,!0);let n=St(Fe({name:"",description:"",funds:null,status:0,type:null,start_at:"",end_at:"",colour:"bg-indigo-600",checklist:[],links:[]})),K=St(null);Oe(()=>{m.isOpen&&(m.entry?E(n,{name:m.entry.name||"",description:m.entry.description||"",funds:m.entry.funds,status:m.entry.status??0,type:m.entry.type??null,start_at:m.entry.start_at?new Date(m.entry.start_at).toISOString().split("T")[0]:"",end_at:m.entry.end_at?new Date(m.entry.end_at).toISOString().split("T")[0]:"",colour:m.entry.colour||"bg-indigo-600",checklist:Array.isArray(m.entry.checklist)?m.entry.checklist:[],links:Array.isArray(m.entry.links)?m.entry.links:[]},!0):E(n,{name:"",description:"",funds:null,status:0,type:null,start_at:"",end_at:"",colour:"bg-indigo-600",checklist:[],links:[]},!0))});function Ut(){if(t(n).type){const c=zt.getProjectType(t(n).type);c&&c.color&&(t(n).colour=c.color)}}function nt(c){c.preventDefault(),m.onSave(t(n))}function Tt(c){c.target===c.currentTarget&&m.onClose()}function At(c){c.key==="Escape"&&m.onClose()}function Pt(){t(n).checklist=[...t(n).checklist,{id:crypto.randomUUID(),title:"New Checklist",items:[]}]}function qt(c){t(n).checklist=t(n).checklist.filter((f,w)=>w!==c)}function re(c){const f=t(n).checklist[c];f.items=[...f.items,{text:"",completed:!1}],t(n).checklist[c]=f}function Bt(c,f){const w=t(n).checklist[c];w.items=w.items.filter((Z,st)=>st!==f),t(n).checklist[c]=w}function It(c,f){const w=t(n).checklist[c];w.items[f].completed=!w.items[f].completed,t(n).checklist[c]=w}function ue(c,f,w){E(K,{listIndex:f,itemIndex:w},!0),c.dataTransfer&&(c.dataTransfer.effectAllowed="move",c.dataTransfer.dropEffect="move")}function ae(c,f,w){if(c.preventDefault(),!t(K)||t(K).listIndex!==f||t(K).itemIndex===w)return;const Z=t(n).checklist[f],st=t(K).itemIndex,Lt=w,Gt=Z.items[st],ot=[...Z.items];ot.splice(st,1),ot.splice(Lt,0,Gt),Z.items=ot,t(n).checklist[f]=Z,t(K).itemIndex=Lt}function fe(){E(K,null)}function B(){t(n).links=[...t(n).links,{url:"",label:""}]}function ge(c){t(n).links=t(n).links.filter((f,w)=>w!==c)}function me(c){if(!c)return;let f=c;/^https?:\/\//i.test(f)||(f="https://"+f),window.open(f,"_blank","noopener,noreferrer")}var ie=ee(),be=ht(ie);{var _e=c=>{var f=ur();f.__click=Tt,f.__keydown=At;var w=r(f),Z=r(w),st=r(Z),Lt=r(st,!0);e(st);var Gt=i(st,2);Gt.__click=function(...s){m.onClose?.apply(this,s)},e(Z);var ot=i(Z,2),Et=r(ot),ne=i(r(Et),2);Ct(ne),e(Et);var Rt=i(Et,2),se=i(r(Rt),2);Ue(se),e(Rt);var Yt=i(Rt,2),Vt=r(Yt),a=i(r(Vt),2),o=r(a);o.value=o.__value=0;var b=i(o);b.value=b.__value=1;var _=i(b);_.value=_.__value=2;var g=i(_);g.value=g.__value=3;var N=i(g);N.value=N.__value=4,e(a),e(Vt);var G=i(Vt,2),H=i(r(G),2);Ct(H),e(G),e(Yt);var C=i(Yt,2),Jt=i(r(C),2),lt=r(Jt);lt.__change=Ut;var Mt=r(lt);Mt.value=(Mt.__value=null)??"";var pe=i(Mt);mt(pe,17,()=>zt.settings.project_types,bt,(s,v)=>{var k=rr(),D=r(k,!0);e(k);var U={};M(()=>{q(D,t(v).label),U!==(U=t(v).id)&&(k.value=(k.__value=t(v).id)??"")}),d(s,k)}),e(lt);var xe=i(lt,2);{var he=s=>{var v=ar();let k;M(D=>{k=j(v,1,"h-8 w-8 shrink-0 rounded-full border border-zinc-600 shadow-sm",null,k,{"bg-zinc-500":t(n).colour==="bg-zinc-500","bg-red-600":t(n).colour==="bg-red-600","bg-orange-600":t(n).colour==="bg-orange-600","bg-amber-500":t(n).colour==="bg-amber-500","bg-green-600":t(n).colour==="bg-green-600","bg-emerald-500":t(n).colour==="bg-emerald-500","bg-teal-500":t(n).colour==="bg-teal-500","bg-cyan-500":t(n).colour==="bg-cyan-500","bg-blue-600":t(n).colour==="bg-blue-600","bg-indigo-600":t(n).colour==="bg-indigo-600","bg-violet-600":t(n).colour==="bg-violet-600","bg-purple-600":t(n).colour==="bg-purple-600","bg-fuchsia-600":t(n).colour==="bg-fuchsia-600","bg-pink-600":t(n).colour==="bg-pink-600","bg-rose-600":t(n).colour==="bg-rose-600"}),_t(v,D)},[()=>t(n).colour.startsWith("#")?`background-color: ${t(n).colour}`:""]),d(s,v)};z(xe,s=>{t(n).colour&&s(he)})}e(Jt),e(C);var Ht=i(C,2),jt=r(Ht),oe=i(r(jt),2);Ct(oe),e(jt);var Kt=i(jt,2),wt=i(r(Kt),2);Ct(wt),e(Kt),e(Ht);var Qt=i(Ht,2),yt=r(Qt),le=i(r(yt),2);le.__click=Pt,e(yt);var ze=i(yt,2);{var we=s=>{var v=sr();mt(v,21,()=>t(n).checklist,bt,(k,D,U)=>{var et=nr(),rt=r(et),at=r(rt);Ct(at);var pt=i(at,2);pt.__click=()=>qt(U);var dt=r(pt);De(dt,{class:"h-4 w-4"}),e(pt),e(rt);var Dt=i(rt,2),vt=r(Dt);mt(vt,17,()=>t(D).items,bt,(Xt,p,h)=>{var L=ir(),F=r(L);F.__click=()=>It(U,h);var Y=r(F);{var V=T=>{Ze(T,{class:"h-5 w-5 text-emerald-500"})},Q=T=>{Ve(T,{class:"h-5 w-5"})};z(Y,T=>{t(p).completed?T(V):T(Q,!1)})}e(F);var J=i(F,2);Ct(J);var ut=i(J,2),ft=r(ut),X=r(ft);Ye(X,{class:"h-4 w-4"}),e(ft);var I=i(ft,2);I.__click=()=>Bt(U,h);var gt=r(I);De(gt,{class:"h-3 w-3"}),e(I),e(ut),e(L),M(()=>j(J,1,`w-full rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 ${t(p).completed?"text-zinc-500 line-through":""}`)),xt(J,()=>t(p).text,T=>t(p).text=T),ce("dragstart",ft,T=>ue(T,U,h)),ce("dragover",ft,T=>ae(T,U,h)),ce("dragend",ft,fe),d(Xt,L)});var Nt=i(vt,2);Nt.__click=()=>re(U);var Ft=r(Nt);Me(Ft,{class:"h-3 w-3"}),qe(),e(Nt),e(Dt),e(et),xt(at,()=>t(D).title,Xt=>t(D).title=Xt),d(k,et)}),e(v),d(s,v)},ye=s=>{var v=or();d(s,v)};z(ze,s=>{t(n).checklist&&t(n).checklist.length>0?s(we):s(ye,!1)})}e(Qt);var y=i(Qt,2),O=r(y),W=i(r(O),2);W.__click=B,e(O);var $=i(O,2);{var ct=s=>{var v=cr();mt(v,21,()=>t(n).links,bt,(k,D,U)=>{var et=lr(),rt=r(et),at=r(rt);Ct(at);var pt=i(at,2);Ct(pt),e(rt);var dt=i(rt,2);dt.__click=()=>me(t(D).url);var Dt=r(dt);Je(Dt,{class:"h-4 w-4"}),e(dt);var vt=i(dt,2);vt.__click=()=>ge(U);var Nt=r(vt);De(Nt,{class:"h-4 w-4"}),e(vt),e(et),M(()=>dt.disabled=!t(D).url),xt(at,()=>t(D).label,Ft=>t(D).label=Ft),xt(pt,()=>t(D).url,Ft=>t(D).url=Ft),d(k,et)}),e(v),d(s,v)},kt=s=>{var v=dr();d(s,v)};z($,s=>{t(n).links&&t(n).links.length>0?s(ct):s(kt,!1)})}e(y);var R=i(y,2),l=r(R),S=r(l);{var tt=s=>{var v=vr();v.__click=()=>m.onDelete(m.entry.id),d(s,v)};z(S,s=>{m.entry&&m.onDelete&&s(tt)})}e(l);var P=i(l,2),x=r(P);x.__click=function(...s){m.onClose?.apply(this,s)};var A=i(x,2);e(P),e(R),e(ot),e(w),e(f),M((s,v,k)=>{q(Lt,m.entry?"Edit Project":"New Project"),_t(le,`color: ${s??""}`),_t(W,`color: ${v??""}`),_t(A,`background-color: ${k??""}`)},[()=>zt.getAccentLightHex(),()=>zt.getAccentLightHex(),()=>zt.getAccentHex()]),ce("submit",ot,nt),xt(ne,()=>t(n).name,s=>t(n).name=s),xt(se,()=>t(n).description,s=>t(n).description=s),Ce(a,()=>t(n).status,s=>t(n).status=s),xt(H,()=>t(n).funds,s=>t(n).funds=s),Ce(lt,()=>t(n).type,s=>t(n).type=s),xt(oe,()=>t(n).start_at,s=>t(n).start_at=s),xt(wt,()=>t(n).end_at,s=>t(n).end_at=s),Ge(3,f,()=>Re,()=>({duration:zt.getTransitionDuration()})),d(c,f)};z(be,c=>{m.isOpen&&c(_e)})}d(ve,ie),Le()}Ee(["click","keydown","change"]);var gr=u('<button class="fixed right-8 bottom-24 z-50 rounded-full p-4 shadow-lg/30 drop-shadow-lg backdrop-blur-md transition-all hover:scale-105 hover:brightness-110 md:right-16 md:bottom-16" aria-label="New Project"><!></button>'),mr=u('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">Sign in to view projects.</div>'),br=u('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">No projects yet.</div>'),_r=u("<option> </option>"),pr=u("<p> </p>"),xr=u('<div class="flex items-center gap-2 text-xs text-zinc-500"><span> </span></div>'),hr=u('<div class="flex items-center gap-1"><!> <span> </span></div>'),zr=u('<div class="flex items-center gap-1"><!> <span> </span></div>'),wr=u('<div class="flex items-center gap-3 text-xs text-zinc-500"><!> <!></div>'),yr=u('<div class="flex w-full shrink-0 flex-col gap-2 md:w-56"><div class="flex justify-end"><span> </span></div> <div class="flex items-center justify-between"><span>Progress</span> <span> </span></div> <div class="h-2 w-full overflow-hidden rounded-full bg-zinc-800"><div></div></div></div>'),kr=u('<div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Dates</span> <span> </span></div>'),Dr=u('<button type="button"><div class="flex flex-col gap-4 md:flex-row md:items-start md:justify-between"><div class="flex min-w-0 flex-1 flex-col gap-2"><h3> </h3> <!> <!></div> <!></div> <div class="flex flex-wrap items-end gap-4 border-t border-zinc-800/50 pt-3"><div class="flex items-center gap-6"><div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Funds</span> <span> </span></div> <!></div></div></button>'),Cr=u('<div class="my-8 flex items-center gap-4"><div class="h-px flex-1 bg-zinc-800"></div> <span class="text-sm font-medium tracking-wider text-zinc-500 uppercase">Archived</span> <div class="h-px flex-1 bg-zinc-800"></div></div> <div class="grid grid-cols-1 gap-4"></div>',1),Sr=u('<div class="grid grid-cols-1 gap-4"></div> <!>',1),Tr=u('<div class="absolute top-8 bottom-0 border-l border-dashed border-zinc-800"></div>'),Ar=u('<div class="absolute -translate-x-1/2 transform text-center"> </div>'),Pr=u('<div class="group relative h-10 w-full rounded transition-colors hover:bg-zinc-800/30"><div class="absolute top-1 flex flex-col gap-1"><div></div> <span class="px-0.5 text-[10px] font-medium whitespace-nowrap text-zinc-400"> </span></div></div>'),Lr=u('<div class="p-4 text-center text-zinc-500">No projects with dates to display.</div>'),Er=u('<div class="w-full overflow-x-auto rounded-lg border border-zinc-800 bg-zinc-900/60 p-4"><div class="relative min-w-[800px]"><div class="pointer-events-none absolute inset-0"></div> <div class="relative z-10 mb-4 flex border-b border-zinc-800 pb-2 text-xs font-medium text-zinc-500"><div class="relative h-6 flex-1"></div></div> <div class="space-y-3"><!> <!></div></div></div>'),Mr=u('<div class="mb-4 flex flex-wrap items-center justify-between gap-4 text-sm"><div class="flex flex-wrap items-center gap-4"><div class="flex items-center gap-2"><select class="cursor-pointer rounded-md border border-zinc-700 bg-zinc-800 px-3 py-1.5 text-sm text-zinc-100 shadow-sm outline-none focus:border-indigo-500 focus:ring-indigo-500"></select> <button class="flex items-center justify-center rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-zinc-400 shadow-sm transition-colors hover:bg-zinc-700 hover:text-zinc-100" aria-label="Toggle sort order"><!></button></div></div> <div class="flex items-center gap-4"><span class="text-xs text-zinc-500"> </span> <div class="flex items-center rounded-lg bg-zinc-800/50 p-1"><button aria-label="List View"><!></button> <button aria-label="Gantt View"><!></button></div></div></div> <!>',1),jr=u('<!> <section><div class="flex flex-wrap items-center justify-between gap-4"><!></div> <!></section>',1);function Xr(ve,m){Pe(m,!0);const n={0:"Not Started",1:"In Progress",2:"Postponed",3:"Completed",4:"Cancelled"};let K=St(null),Ut=it(()=>de.projects),nt=St(!1),Tt=St(null),At=St("list"),Pt=St("date"),qt=St("desc");function re(a){if(!a)return{total:0,completed:0};if(Array.isArray(a)&&a.length>0&&"items"in a[0]){let o=0,b=0;return a.forEach(_=>{_.items&&(o+=_.items.length,b+=_.items.filter(g=>g.completed).length)}),{total:o,completed:b}}return Array.isArray(a)&&a.length>0?{total:a.length,completed:a.filter(o=>o.completed).length}:{total:0,completed:0}}function Bt(a){const o=re(a);return o.total===0?0:Math.round(o.completed/o.total*100)}let It=it(()=>[...t(Ut)].sort((a,o)=>{const b=t(qt)==="asc"?1:-1;if(t(Pt)==="name")return a.name.localeCompare(o.name)*b;if(t(Pt)==="date"){const _=new Date(a.created_at).getTime(),g=new Date(o.created_at).getTime();return(_-g)*b}else if(t(Pt)==="progress"){const _=Bt(a.checklist),g=Bt(o.checklist);return(_-g)*b}return 0})),ue=it(()=>t(It).filter(a=>a.status!==3&&a.status!==4)),ae=it(()=>t(It).filter(a=>a.status===3||a.status===4)),fe=it(()=>t(Ut).filter(a=>a.status===3).length),B=it(()=>{const a=t(It).filter(C=>C.start_at&&C.end_at);if(a.length===0){const C=new Date;return{start:new Date(C.getFullYear(),0,1),end:new Date(C.getFullYear(),11,31),projects:[],months:[]}}const o=a.flatMap(C=>[new Date(C.start_at),new Date(C.end_at)]),b=new Date(Math.min(...o.map(C=>C.getTime()))),_=new Date(Math.max(...o.map(C=>C.getTime()))),g=new Date(b);g.setDate(g.getDate()-7);const N=new Date(_);N.setDate(N.getDate()+7);const G=[],H=new Date(g);for(H.setDate(1);H<=N;)G.push(new Date(H)),H.setMonth(H.getMonth()+1);return G.length===0&&G.push(new Date(g.getFullYear(),g.getMonth(),1)),{start:g,end:N,projects:a,months:G}});function ge(a,o,b){if(!a.start_at||!a.end_at)return"";const _=b.getTime()-o.getTime(),g=new Date(a.start_at).getTime(),N=new Date(a.end_at).getTime(),G=(g-o.getTime())/_*100,H=(N-g)/_*100;return`left: ${Math.max(0,G)}%; width: ${Math.min(100,H)}%;`}Be(()=>{te.auth.getSession().then(({data:{session:o}})=>{E(K,o,!0)});const{data:{subscription:a}}=te.auth.onAuthStateChange((o,b)=>{E(K,b,!0)});return()=>a.unsubscribe()});function me(){E(Tt,null),E(nt,!0)}function ie(a){E(Tt,a,!0),E(nt,!0)}async function be(a){if(!await He("Are you sure you want to delete this project?","Delete Project",{confirmText:"Delete",isDestructive:!0}))return;const{error:b}=await te.from("projects").delete().eq("id",a);b?(console.error("Error deleting project:",b),Wt("Error deleting: "+b.message,"Error")):(Wt("Project deleted successfully!","Success"),E(nt,!1),de.deleteProject(a))}async function _e(a){const{id:o,...b}=a;if(b.percentage=Bt(b.checklist),t(Tt)){const{data:_,error:g}=await te.from("projects").update(b).eq("id",t(Tt).id).select().single();g?(console.error("Error updating project:",g),Wt("Error updating: "+g.message,"Error")):(Wt("Project updated successfully!","Success"),E(nt,!1),_&&de.updateProject(_))}else{const{data:_,error:g}=await te.from("projects").insert(b).select().single();g?(console.error("Error saving project:",g),Wt("Error saving: "+g.message,"Error")):(Wt("Project saved successfully!","Success"),E(nt,!1),_&&de.addProject(_))}}const c=a=>a===null?"—":`€${a}`,f=a=>a?new Date(a).toLocaleDateString():"—";function w(a,o=50){return a?a.length>o?a.slice(0,o)+"...":a:""}const Z=a=>n[a]??"Unknown",st=a=>{switch(a){case 1:return"bg-amber-500/10 text-amber-400";case 2:return"bg-purple-500/10 text-purple-400";case 3:return"bg-emerald-500/10 text-emerald-400";case 4:return"bg-red-500/10 text-red-400";default:return"bg-zinc-800 text-zinc-400"}};var Lt=jr(),Gt=ht(Lt);fr(Gt,{get isOpen(){return t(nt)},get entry(){return t(Tt)},onClose:()=>E(nt,!1),onSave:_e,onDelete:be});var ot=i(Gt,2),Et=r(ot),ne=r(Et);{var Rt=a=>{var o=gr();o.__click=me;var b=r(o);Me(b,{class:"h-6 w-6 text-(--accent-color)"}),e(o),M((_,g)=>_t(o,`--accent-color: ${_??""}; background-color: ${g??""}/50`),[()=>zt.getAccentLightHex(),()=>zt.getAccentHex()]),d(a,o)};z(ne,a=>{t(K)&&!t(nt)&&!We.isOpen&&a(Rt)})}e(Et);var se=i(Et,2);{var Yt=a=>{var o=mr();d(a,o)},Vt=a=>{var o=ee(),b=ht(o);{var _=N=>{var G=br();d(N,G)},g=N=>{var G=Mr(),H=ht(G),C=r(H),Jt=r(C),lt=r(Jt);mt(lt,20,()=>["name","date","progress"],bt,(y,O)=>{var W=_r(),$=r(W,!0);e(W);var ct={};M(kt=>{q($,kt),ct!==(ct=O)&&(W.value=(W.__value=O)??"")},[()=>O.charAt(0).toUpperCase()+O.slice(1)]),d(y,W)}),e(lt);var Mt=i(lt,2);Mt.__click=()=>E(qt,t(qt)==="asc"?"desc":"asc",!0);var pe=r(Mt);{var xe=y=>{tr(y,{class:"h-4 w-4"})},he=y=>{er(y,{class:"h-4 w-4"})};z(pe,y=>{t(qt)==="asc"?y(xe):y(he,!1)})}e(Mt),e(Jt),e(C);var Ht=i(C,2),jt=r(Ht),oe=r(jt);e(jt);var Kt=i(jt,2),wt=r(Kt);wt.__click=()=>E(At,"list");var Qt=r(wt);$e(Qt,{class:"h-4 w-4"}),e(wt);var yt=i(wt,2);yt.__click=()=>E(At,"gantt");var le=r(yt);Ke(le,{class:"h-4 w-4"}),e(yt),e(Kt),e(Ht),e(H);var ze=i(H,2);{var we=y=>{const O=(R,l=Te,S=Te)=>{var tt=Dr();tt.__click=()=>ie(l());var P=r(tt),x=r(P),A=r(x),s=r(A,!0);e(A);var v=i(A,2);{var k=p=>{var h=pr(),L=r(h,!0);e(h),M(F=>{j(h,1,`text-sm ${S()?"text-zinc-600":"text-zinc-400"}`),q(L,F)},[()=>w(l().description)]),d(p,h)};z(v,p=>{l().description&&p(k)})}var D=i(v,2);{var U=p=>{const h=it(()=>zt.getProjectType(l().type));var L=ee(),F=ht(L);{var Y=V=>{var Q=xr(),J=r(Q),ut=r(J,!0);e(J),e(Q),M(()=>{j(J,1,`font-medium ${S()?"text-zinc-600":"text-zinc-400"}`),q(ut,t(h).label)}),d(V,Q)};z(F,V=>{t(h)&&V(Y)})}d(p,L)},et=p=>{var h=ee(),L=ht(h);{var F=Y=>{var V=wr(),Q=r(V);{var J=X=>{const I=it(()=>re(l().checklist));var gt=ee(),T=ht(gt);{var Zt=Ot=>{var $t=hr(),Se=r($t);{let Ne=it(()=>`h-3.5 w-3.5 ${S()?"text-zinc-600":"text-zinc-400"}`);Xe(Se,{get class(){return t(Ne)}})}var ke=i(Se,2),je=r(ke);e(ke),e($t),M(()=>{j(ke,1,Ae(S()?"text-zinc-600":"text-zinc-500")),q(je,`${t(I).completed??""}/${t(I).total??""}`)}),d(Ot,$t)};z(T,Ot=>{t(I).total>0&&Ot(Zt)})}d(X,gt)};z(Q,X=>{l().checklist&&X(J)})}var ut=i(Q,2);{var ft=X=>{var I=zr(),gt=r(I);{let Ot=it(()=>`h-3.5 w-3.5 ${S()?"text-zinc-600":"text-zinc-400"}`);Qe(gt,{get class(){return t(Ot)}})}var T=i(gt,2),Zt=r(T,!0);e(T),e(I),M(()=>{j(T,1,Ae(S()?"text-zinc-600":"text-zinc-500")),q(Zt,l().links.length)}),d(X,I)};z(ut,X=>{l().links&&l().links.length>0&&X(ft)})}e(V),d(Y,V)};z(L,Y=>{(l().checklist||l().links&&l().links.length>0)&&Y(F)},!0)}d(p,h)};z(D,p=>{l().type?p(U):p(et,!1)})}e(x);var rt=i(x,2);{var at=p=>{const h=it(()=>Bt(l().checklist));var L=yr(),F=r(L),Y=r(F),V=r(Y,!0);e(Y),e(F);var Q=i(F,2),J=r(Q),ut=i(J,2),ft=r(ut);e(ut),e(Q);var X=i(Q,2),I=r(X);let gt;e(X),e(L),M((T,Zt,Ot,$t)=>{j(Y,1,T),q(V,Zt),j(J,1,`text-xs font-medium ${S()?"text-zinc-600":"text-zinc-400"}`),j(ut,1,`text-xs ${S()?"text-zinc-600":"text-zinc-500"}`),q(ft,`${t(h)??""}%`),j(I,1,`h-full rounded-full transition-all duration-500 ${Ot??""}`),gt=_t(I,"",gt,$t)},[()=>`rounded-full px-2 py-0.5 text-xs ${st(l().status)}`,()=>Z(l().status),()=>l().colour&&!l().colour.startsWith("#")?l().colour:"",()=>({width:`${t(h)??""}%`,"background-color":l().colour&&l().colour.startsWith("#")?l().colour:"",opacity:S()?.5:1})]),d(p,L)};z(rt,p=>{p(at)})}e(P);var pt=i(P,2),dt=r(pt),Dt=r(dt),vt=i(r(Dt),2),Nt=r(vt,!0);e(vt),e(Dt);var Ft=i(Dt,2);{var Xt=p=>{var h=kr(),L=i(r(h),2),F=r(L);e(L),e(h),M((Y,V)=>{j(L,1,`text-sm ${S()?"text-zinc-500":"text-zinc-300"}`),q(F,`${Y??""} - ${V??""}`)},[()=>f(l().start_at),()=>f(l().end_at)]),d(p,h)};z(Ft,p=>{(l().start_at||l().end_at)&&p(Xt)})}e(dt),e(pt),e(tt),M(p=>{j(tt,1,`group relative flex w-full cursor-pointer flex-col gap-4 rounded-lg border p-4 text-left transition-all ${S()?"border-zinc-800/60 bg-zinc-900/30 text-zinc-500 hover:border-zinc-700/60 hover:bg-zinc-900/40":"border-zinc-800 bg-zinc-900/60 hover:border-zinc-700 hover:bg-zinc-900/80"}`),j(A,1,`truncate text-base font-bold ${S()?"text-zinc-500":"text-zinc-100"}`),Ie(A,"title",l().name),q(s,l().name),j(vt,1,`text-sm font-medium ${S()?"text-zinc-500":"text-emerald-400"}`),q(Nt,p)},[()=>c(l().funds)]),d(R,tt)};var W=Sr(),$=ht(W);mt($,21,()=>t(ue),bt,(R,l)=>{O(R,()=>t(l),()=>!1)}),e($);var ct=i($,2);{var kt=R=>{var l=Cr(),S=i(ht(l),2);mt(S,21,()=>t(ae),bt,(tt,P)=>{O(tt,()=>t(P),()=>!0)}),e(S),d(R,l)};z(ct,R=>{t(ae).length>0&&R(kt)})}d(y,W)},ye=y=>{var O=Er(),W=r(O),$=r(W);mt($,21,()=>t(B).months,bt,(P,x)=>{var A=Tr();let s;M(v=>s=_t(A,"",s,v),[()=>({left:`${(t(x).getTime()-t(B).start.getTime())/(t(B).end.getTime()-t(B).start.getTime())*100}%`})]),d(P,A)}),e($);var ct=i($,2),kt=r(ct);mt(kt,21,()=>t(B).months,bt,(P,x)=>{var A=Ar();let s;var v=r(A,!0);e(A),M((k,D)=>{s=_t(A,"",s,k),q(v,D)},[()=>({left:`${(t(x).getTime()-t(B).start.getTime())/(t(B).end.getTime()-t(B).start.getTime())*100}%`}),()=>t(x).toLocaleDateString("en-US",{month:"long"})]),d(P,A)}),e(kt),e(ct);var R=i(ct,2),l=r(R);mt(l,17,()=>t(B).projects,bt,(P,x)=>{var A=Pr(),s=r(A),v=r(s);let k;var D=i(v,2),U=r(D,!0);e(D),e(s),e(A),M((et,rt,at)=>{_t(s,et),j(v,1,`h-2 w-full rounded-full shadow-sm transition-all hover:brightness-110 ${rt??""}`),k=_t(v,"",k,at),q(U,t(x).name)},[()=>ge(t(x),t(B).start,t(B).end),()=>t(x).colour&&!t(x).colour.startsWith("#")?t(x).colour:"bg-indigo-600",()=>({"background-color":t(x).colour&&t(x).colour.startsWith("#")?t(x).colour:void 0})]),d(P,A)});var S=i(l,2);{var tt=P=>{var x=Lr();d(P,x)};z(S,P=>{t(B).projects.length===0&&P(tt)})}e(R),e(W),e(O),d(y,O)};z(ze,y=>{t(At)==="list"?y(we):y(ye,!1)})}M(()=>{q(oe,`Completed ${t(fe)??""} / ${t(Ut).length??""}`),j(wt,1,`rounded-md p-1.5 transition-all ${t(At)==="list"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`),j(yt,1,`rounded-md p-1.5 transition-all ${t(At)==="gantt"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`)}),Ce(lt,()=>t(Pt),y=>E(Pt,y)),d(N,G)};z(b,N=>{t(Ut).length===0?N(_):N(g,!1)},!0)}d(a,o)};z(se,a=>{t(K)?a(Vt,!1):a(Yt)})}e(ot),d(ve,Lt),Le()}Ee(["click"]);export{Xr as component};
