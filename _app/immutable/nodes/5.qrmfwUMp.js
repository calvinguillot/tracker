import{c as W,a as n,f as c,t as Me}from"../chunks/BqEl5C80.js";import{f as q,p as Ne,d as Be,g as v,s as V,h as a,k as e,j as s,i as t,t as _,a as Te,c as Ze,u as $e,o as et,v as Ae}from"../chunks/DVg-wcBP.js";import{d as Ve,s as j}from"../chunks/Bj2CMk_O.js";import{l as Oe,s as Ie,i as f}from"../chunks/C66CeOwb.js";import{I as He,s as qe,h as Pe,e as te,i as re,d as tt,f as le,a as rt,b as at,g as Le,j as it}from"../chunks/DZ1IOtyI.js";import{s as K}from"../chunks/Bkout0r_.js";import"../chunks/DyB6Jsl2.js";import{E as st}from"../chunks/CoX2xn5x.js";import{P as nt,L as ot}from"../chunks/CX2Dg3vE.js";import{L as lt}from"../chunks/BzdIDQeg.js";import{A as dt,a as ct}from"../chunks/DEyrxmCn.js";function vt(O,i){const z=Oe(i,["children","$$slots","$$events","$$legacy"]);const k=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]];He(O,Ie({name:"eye"},()=>z,{get iconNode(){return k},children:(E,S)=>{var p=W(),A=q(p);qe(A,i,"default",{}),n(E,p)},$$slots:{default:!0}}))}function ut(O,i){const z=Oe(i,["children","$$slots","$$events","$$legacy"]);const k=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}]];He(O,Ie({name:"layout-grid"},()=>z,{get iconNode(){return k},children:(E,S)=>{var p=W(),A=q(p);qe(A,i,"default",{}),n(E,p)},$$slots:{default:!0}}))}var ft=c('<img alt="Daily entry" class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-110"/>'),gt=c('<div class="flex h-full w-full flex-col items-center justify-center gap-2 text-zinc-700"><span class="text-xs">No Image</span> <span class="text-xs font-medium text-zinc-600"> </span></div>'),xt=c('<div class="group relative aspect-square overflow-hidden rounded-lg border border-zinc-800 bg-zinc-900"><!> <div class="absolute inset-0 flex flex-col items-center justify-center gap-3 bg-black/60 opacity-0 transition-opacity duration-300 group-hover:opacity-100"><span class="font-bold text-white shadow-black drop-shadow-md"> </span> <button class="rounded-full bg-white/20 p-3 text-white backdrop-blur-sm transition-all hover:scale-110 hover:bg-white/40" aria-label="View Details"><!></button></div></div>');function _t(O,i){Ne(i,!0);let z=V(null);Be(()=>{i.entry?.image&&k(i.entry.image)});async function k(h){const{data:M,error:I}=await K.storage.from("dailyPicture").createSignedUrl(h,3600);M&&v(z,M.signedUrl,!0)}var E=xt(),S=a(E);{var p=h=>{var M=ft();_(()=>Pe(M,"src",e(z))),n(h,M)},A=h=>{var M=gt(),I=s(a(M),2),F=a(I,!0);t(I),t(M),_(()=>j(F,i.entry.created_at)),n(h,M)};f(S,h=>{e(z)?h(p):h(A,!1)})}var P=s(S,2),u=a(P),m=a(u,!0);t(u);var U=s(u,2);U.__click=()=>i.onView(i.entry);var J=a(U);vt(J,{class:"h-6 w-6"}),t(U),t(P),t(E),_(()=>j(m,i.entry.created_at)),n(O,E),Te()}Ve(["click"]);var pt=c('<div><h3 class="text-sm font-medium text-zinc-400">Weight</h3> <p class="text-lg text-zinc-100"> </p></div>'),mt=c('<div class="rounded-lg border border-zinc-800 bg-zinc-800/50 p-3"><h3 class="mb-1 text-xs font-medium tracking-wider text-zinc-400 uppercase"> </h3> <p class="text-xl font-semibold text-indigo-400"> </p></div>'),ht=c('<span class="inline-flex items-center rounded-full border border-red-900/50 bg-red-900/30 px-2.5 py-0.5 text-xs font-medium text-red-400">Sickness</span>'),bt=c('<span class="inline-flex items-center rounded-full border border-indigo-900/50 bg-indigo-900/30 px-2.5 py-0.5 text-xs font-medium text-indigo-400">Calvin Day</span>'),yt=c('<span class="inline-flex items-center rounded-full border border-pink-900/50 bg-pink-900/30 px-2.5 py-0.5 text-xs font-medium text-pink-400">Ihana</span>'),wt=c('<span class="inline-flex items-center rounded-full border border-green-900/50 bg-green-900/30 px-2.5 py-0.5 text-xs font-medium text-green-400">Call Family</span>'),zt=c('<span class="inline-flex items-center rounded-full border border-blue-900/50 bg-blue-900/30 px-2.5 py-0.5 text-xs font-medium text-blue-400">Cry</span>'),kt=c('<span class="inline-flex items-center rounded-full border border-red-900/50 bg-red-900/30 px-2.5 py-0.5 text-xs font-medium text-red-400">Loving</span>'),Dt=c('<span class="inline-flex items-center rounded-full border border-purple-900/50 bg-purple-900/30 px-2.5 py-0.5 text-xs font-medium text-purple-400">Friends</span>'),Ct=c('<div><h3 class="mb-1 text-sm font-medium text-zinc-400 capitalize"> </h3> <p class="rounded-md border border-zinc-800/50 bg-zinc-800/30 p-2 text-zinc-200"> </p></div>'),jt=c('<div class="border-t border-zinc-800 pt-4"><h3 class="mb-2 text-sm font-medium text-zinc-400">Notes</h3> <p class="rounded-lg border border-zinc-800/50 bg-zinc-800/30 p-4 whitespace-pre-wrap text-zinc-300"> </p></div>'),Et=c('<div class="flex-1 lg:max-w-md"><div class="sticky top-24"><h3 class="mb-2 text-sm font-medium text-zinc-400">Daily Picture</h3> <div class="relative overflow-hidden rounded-lg border border-zinc-800 bg-zinc-950"><img alt="Daily entry" class="w-full object-contain"/></div></div></div>'),St=c('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-6xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100">Entry Details</h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex flex-col gap-6 p-4 md:p-6 lg:flex-row"><div class="flex-1 space-y-6"><div><h3 class="text-sm font-medium text-zinc-400">Date</h3> <p class="text-lg text-zinc-100"> </p></div> <!> <div class="grid grid-cols-2 gap-4 sm:grid-cols-3"></div> <div class="flex flex-wrap gap-2"><!> <!> <!> <!> <!> <!> <!></div> <div class="grid grid-cols-1 gap-6 sm:grid-cols-2"></div> <!></div> <!></div></div></div>');function Mt(O,i){Ne(i,!0);let z=V(null);Be(()=>{i.isOpen&&i.entry?.image?k(i.entry.image):v(z,null)});async function k(u){const{data:m,error:U}=await K.storage.from("dailyPicture").createSignedUrl(u,3600);m&&v(z,m.signedUrl,!0)}function E(u){u.target===u.currentTarget&&i.onClose()}function S(u){u.key==="Escape"&&i.onClose()}var p=W(),A=q(p);{var P=u=>{var m=St();m.__click=E,m.__keydown=S;var U=a(m),J=a(U),h=s(a(J),2);h.__click=function(...r){i.onClose?.apply(this,r)},t(J);var M=s(J,2),I=a(M),F=a(I),he=s(a(F),2),De=a(he,!0);t(he),t(F);var de=s(F,2);{var ce=r=>{var o=pt(),b=s(a(o),2),N=a(b);t(b),t(o),_(()=>j(N,`${i.entry.weight??""} kg`)),n(r,o)};f(de,r=>{i.entry.weight&&r(ce)})}var Q=s(de,2);te(Q,20,()=>["mood","energy","physical","sleep","meals"],re,(r,o)=>{var b=W(),N=q(b);{var Z=y=>{var x=mt(),w=a(x),D=a(w,!0);t(w);var T=s(w,2),$=a(T,!0);t(T),t(x),_(()=>{j(D,o),j($,i.entry[o])}),n(y,x)};f(N,y=>{i.entry[o]!==null&&i.entry[o]!==void 0&&y(Z)})}n(r,b)}),t(Q);var ve=s(Q,2),be=a(ve);{var ye=r=>{var o=ht();n(r,o)};f(be,r=>{i.entry.sickness&&r(ye)})}var we=s(be,2);{var Ce=r=>{var o=bt();n(r,o)};f(we,r=>{i.entry.calvin_day&&r(Ce)})}var ue=s(we,2);{var je=r=>{var o=yt();n(r,o)};f(ue,r=>{i.entry.ihana&&r(je)})}var l=s(ue,2);{var d=r=>{var o=wt();n(r,o)};f(l,r=>{i.entry.call_family&&r(d)})}var g=s(l,2);{var L=r=>{var o=zt();n(r,o)};f(g,r=>{i.entry.cry&&r(L)})}var G=s(g,2);{var Y=r=>{var o=kt();n(r,o)};f(G,r=>{i.entry.loving&&r(Y)})}var ae=s(G,2);{var fe=r=>{var o=Dt();n(r,o)};f(ae,r=>{i.entry.friends&&r(fe)})}t(ve);var R=s(ve,2);te(R,20,()=>["work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type"],re,(r,o)=>{var b=W(),N=q(b);{var Z=y=>{var x=Ct(),w=a(x),D=a(w,!0);t(w);var T=s(w,2),$=a(T,!0);t(T),t(x),_(ie=>{j(D,ie),j($,i.entry[o])},[()=>o.replace("_type","")]),n(y,x)};f(N,y=>{i.entry[o]&&y(Z)})}n(r,b)}),t(R);var Ee=s(R,2);{var ze=r=>{var o=jt(),b=s(a(o),2),N=a(b,!0);t(b),t(o),_(()=>j(N,i.entry.notes)),n(r,o)};f(Ee,r=>{i.entry.notes&&r(ze)})}t(I);var X=s(I,2);{var Se=r=>{var o=Et(),b=a(o),N=s(a(b),2),Z=a(N);t(N),t(b),t(o),_(()=>Pe(Z,"src",e(z))),n(r,o)};f(X,r=>{e(z)&&r(Se)})}t(M),t(U),t(m),_(()=>j(De,i.entry.created_at)),n(u,m)};f(A,u=>{i.isOpen&&i.entry&&u(P)})}n(O,p),Te()}Ve(["click","keydown"]);var At=c('<button class="fixed right-8 bottom-8 z-50 rounded-full p-4 text-white shadow-lg transition-all hover:scale-105 hover:brightness-110" aria-label="New Entry"><!></button>'),Lt=c('<div class="flex h-64 items-center justify-center"><!></div>'),Nt=c('<button><span class="capitalize"> </span> <!></button>'),Tt=c('<th class="hidden px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase md:table-cell"> </th>'),Vt=c('<td class="hidden max-w-xs truncate px-6 py-4 text-sm whitespace-nowrap text-zinc-400 md:table-cell"><!></td>'),Pt=c('<tr class="transition-colors hover:bg-zinc-800/50"><td class="sticky left-0 z-10 bg-zinc-900 px-6 py-4 font-medium whitespace-nowrap text-zinc-200"> </td><td class="sticky left-[100px] z-10 space-x-2 border-r border-zinc-800 bg-zinc-900 px-6 py-4 whitespace-nowrap shadow-[4px_0_8px_-4px_rgba(0,0,0,0.3)]"><button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="View Details"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></button> <button class="text-indigo-400 transition-colors hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="text-red-400 transition-colors hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></td><!></tr>'),Ut=c('<div class="overflow-x-auto rounded-lg border border-zinc-800 shadow"><table class="min-w-full divide-y divide-zinc-800"><thead class="bg-zinc-800"><tr><th class="sticky left-0 z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Date</th><th class="sticky left-[100px] z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Actions</th><!></tr></thead><tbody class="divide-y divide-zinc-800 bg-zinc-900"></tbody></table></div>'),Bt=c('<div class="grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6"></div>'),Ot=c('<div class="mb-6 flex flex-wrap items-center justify-between gap-4 text-sm"><div class="flex flex-wrap items-center gap-4"><span class="text-zinc-500">Sort by:</span> <!></div> <div class="flex items-center rounded-lg bg-zinc-800/50 p-1"><button aria-label="List View"><!></button> <button aria-label="Grid View"><!></button></div></div> <!>',1),It=c('<p class="text-center text-zinc-500">Please sign in to view tracking data.</p>'),Ht=c('<div><div class="mb-6 flex items-center justify-between"><h2 class="text-lg font-bold text-zinc-100">Daily</h2> <!></div> <!> <!> <!></div>');function $t(O,i){Ne(i,!0);let z=V(Ze($e(()=>i.data.dailyTracking))),k=V(!1),E=V(!1),S=V(null),p=V(null),A=V(!0),P=V("list"),u=V("created_at"),m=V("desc"),U=Ae(()=>[...e(z)].sort((l,d)=>{const g=e(m)==="asc"?1:-1;if(e(u)==="created_at"){const L=new Date(l.created_at).getTime(),G=new Date(d.created_at).getTime();return(L-G)*g}else{const L=l[e(u)]??-999,G=d[e(u)]??-999;return(L-G)*g}}));function J(l){e(u)===l?v(m,e(m)==="asc"?"desc":"asc",!0):(v(u,l,!0),v(m,"desc"))}et(()=>{K.auth.getSession().then(({data:{session:d}})=>{v(p,d,!0),d?h():v(A,!1)});const{data:{subscription:l}}=K.auth.onAuthStateChange((d,g)=>{v(p,g,!0),g?h():v(A,!1)});return()=>l.unsubscribe()});async function h(){v(A,!0);const{data:l,error:d}=await K.from("dailyTracking").select().order("created_at",{ascending:!1});!d&&l&&v(z,l,!0),v(A,!1)}function M(){v(S,null),v(k,!0)}function I(l){v(S,l,!0),v(k,!0)}function F(l){v(S,l,!0),v(E,!0)}async function he(l){if(!await it("Are you sure you want to delete this entry?","Delete Entry",{confirmText:"Delete",isDestructive:!0}))return;const{error:g}=await K.from("dailyTracking").delete().eq("id",l);g?le(g.message,"Error"):(le("Entry deleted successfully","Success"),h())}async function De(l){if(e(S)){const{id:d,...g}=l,{error:L}=await K.from("dailyTracking").update(g).eq("id",e(S).id);L?le(L.message,"Error"):(le("Entry updated successfully","Success"),v(k,!1),h())}else{const{error:d}=await K.from("dailyTracking").insert(l);d?le(d.message,"Error"):(le("Entry created successfully","Success"),v(k,!1),h())}}const de=["mood","energy","physical","sleep","meals","weight","sickness","work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type","calvin_day","ihana","call_family","cry","loving","friends","notes","image"];var ce=Ht(),Q=a(ce),ve=s(a(Q),2);{var be=l=>{var d=At();d.__click=M;var g=a(d);nt(g,{class:"h-6 w-6"}),t(d),_(L=>at(d,`background-color: ${L??""}`),[()=>rt.getAccentHex()]),n(l,d)};f(ve,l=>{e(p)&&!e(k)&&!e(E)&&!tt.isOpen&&l(be)})}t(Q);var ye=s(Q,2);{var we=l=>{var d=Lt(),g=a(d);ot(g,{class:"h-8 w-8 animate-spin text-indigo-500"}),t(d),n(l,d)},Ce=l=>{var d=W(),g=q(d);{var L=Y=>{var ae=Ot(),fe=q(ae),R=a(fe),Ee=s(a(R),2);te(Ee,16,()=>["date","mood","energy","physical","sleep","meals","weight"],re,(y,x)=>{const w=Ae(()=>x==="date"?"created_at":x);var D=Nt();D.__click=()=>J(e(w));var T=a(D),$=a(T,!0);t(T);var ie=s(T,2);{var ge=C=>{var B=W(),ee=q(B);{var xe=H=>{dt(H,{class:"h-3 w-3"})},_e=H=>{ct(H,{class:"h-3 w-3"})};f(ee,H=>{e(m)==="asc"?H(xe):H(_e,!1)})}n(C,B)};f(ie,C=>{e(u)===e(w)&&C(ge)})}t(D),_(()=>{Le(D,1,`flex items-center gap-1 rounded-md px-3 py-1.5 transition-colors ${e(u)===e(w)?"bg-indigo-500/20 text-indigo-300":"bg-zinc-800/50 text-zinc-400 hover:bg-zinc-800"}`),j($,x)}),n(y,D)}),t(R);var ze=s(R,2),X=a(ze);X.__click=()=>v(P,"list");var Se=a(X);lt(Se,{class:"h-4 w-4"}),t(X);var r=s(X,2);r.__click=()=>v(P,"grid");var o=a(r);ut(o,{class:"h-4 w-4"}),t(r),t(ze),t(fe);var b=s(fe,2);{var N=y=>{var x=Ut(),w=a(x),D=a(w),T=a(D),$=s(a(T),2);te($,17,()=>de,re,(ge,C)=>{var B=Tt(),ee=a(B,!0);t(B),_(xe=>j(ee,xe),[()=>e(C).replace("_"," ")]),n(ge,B)}),t(T),t(D);var ie=s(D);te(ie,21,()=>e(U),re,(ge,C)=>{var B=Pt(),ee=a(B),xe=a(ee,!0);t(ee);var _e=s(ee),H=a(_e);H.__click=()=>F(e(C));var Ue=s(H,2);Ue.__click=()=>I(e(C));var Fe=s(Ue,2);Fe.__click=()=>he(e(C).id),t(_e);var Ge=s(_e);te(Ge,17,()=>de,re,(Ye,se)=>{var ke=Vt(),Ke=a(ke);{var We=ne=>{var pe=Me();_(()=>j(pe,e(C)[e(se)]?"Yes":"No")),n(ne,pe)},Je=ne=>{var pe=W(),Qe=q(pe);{var Re=oe=>{var me=Me();_(()=>j(me,e(C)[e(se)]?"Yes":"No")),n(oe,me)},Xe=oe=>{var me=Me();_(()=>j(me,e(C)[e(se)]??"-")),n(oe,me)};f(Qe,oe=>{e(se)==="image"?oe(Re):oe(Xe,!1)},!0)}n(ne,pe)};f(Ke,ne=>{typeof e(C)[e(se)]=="boolean"?ne(We):ne(Je,!1)})}t(ke),_(()=>Pe(ke,"title",e(C)[e(se)])),n(Ye,ke)}),t(B),_(()=>j(xe,e(C).created_at)),n(ge,B)}),t(ie),t(w),t(x),n(y,x)},Z=y=>{var x=Bt();te(x,21,()=>e(U),re,(w,D)=>{_t(w,{get entry(){return e(D)},onView:F})}),t(x),n(y,x)};f(b,y=>{e(P)==="list"?y(N):y(Z,!1)})}_(()=>{Le(X,1,`rounded-md p-1.5 transition-all ${e(P)==="list"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`),Le(r,1,`rounded-md p-1.5 transition-all ${e(P)==="grid"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`)}),n(Y,ae)},G=Y=>{var ae=It();n(Y,ae)};f(g,Y=>{e(p)?Y(L):Y(G,!1)},!0)}n(l,d)};f(ye,l=>{e(A)?l(we):l(Ce,!1)})}var ue=s(ye,2);{let l=Ae(()=>e(p)?.user?.id);st(ue,{get isOpen(){return e(k)},get entry(){return e(S)},get userId(){return e(l)},onClose:()=>v(k,!1),onSave:De})}var je=s(ue,2);Mt(je,{get isOpen(){return e(E)},get entry(){return e(S)},onClose:()=>v(E,!1)}),t(ce),n(O,ce),Te()}Ve(["click"]);export{$t as component};
