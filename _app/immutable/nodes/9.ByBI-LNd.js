import{c as me,a as m,f as h}from"../chunks/Blua9Muq.js";import{k as ne,p as Pe,o as De,z as t,D as P,a as Le,B as r,m as o,v as Me,y as He,G as O,A as e,I as Ee,F as Ie}from"../chunks/BWAAnFQE.js";import{d as Oe,s as Re}from"../chunks/B5UJqv3b.js";import{l as fe,s as ge,i as Ve}from"../chunks/hg7ngHtp.js";import{s as $,e as T,i as j}from"../chunks/wCmp37z_.js";import{I as _e,s as xe,a as i,d as be,L as Be,g as L,P as ie,r as R,h as Ge}from"../chunks/FJNRq2ku.js";import{P as oe,b as V}from"../chunks/DWGvfTVC.js";import{s as Je}from"../chunks/BW5xtwr9.js";import"../chunks/B5eWTv3U.js";import{T as re}from"../chunks/CEwrSky2.js";function Ue(M,N){const D=fe(N,["children","$$slots","$$events","$$legacy"]);const H=[["path",{d:"M12 15V3"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["path",{d:"m7 10 5 5 5-5"}]];_e(M,ge({name:"download"},()=>D,{get iconNode(){return H},children:(E,F)=>{var S=me(),I=ne(S);xe(I,N,"default",{}),m(E,S)},$$slots:{default:!0}}))}function Fe(M,N){const D=fe(N,["children","$$slots","$$events","$$legacy"]);const H=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];_e(M,ge({name:"save"},()=>D,{get iconNode(){return H},children:(E,F)=>{var S=me(),I=ne(S);xe(I,N,"default",{}),m(E,S)},$$slots:{default:!0}}))}var qe=h('<div class="flex h-48 items-center justify-center"><!></div>'),Ke=h('<button class="h-6 w-6 rounded-full border border-zinc-700 transition-transform hover:scale-110 focus:ring-2 focus:ring-white focus:outline-none"></button>'),Qe=h('<div class="flex items-center gap-3"><input type="text" class="flex-1 rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" placeholder="Type Name"/> <button class="text-zinc-500 hover:text-red-400" title="Remove"><!></button></div>'),We=h('<button class="h-4 w-4 rounded-full border border-transparent transition-all hover:scale-110"></button>'),Xe=h('<div class="flex flex-wrap items-center gap-3 sm:flex-nowrap"><div class="min-w-[200px] flex-1"><input type="text" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" placeholder="Type Name"/></div> <div class="flex flex-wrap items-center justify-center gap-1 rounded-lg border border-zinc-700/50 bg-zinc-800/50 p-1.5 sm:justify-start"></div> <button class="text-zinc-500 hover:text-red-400" title="Remove"><!></button></div>'),Ye=h('<button class="h-4 w-4 rounded-full border border-transparent transition-all hover:scale-110"></button>'),Ze=h('<div class="flex flex-wrap items-center gap-3 sm:flex-nowrap"><div class="min-w-[200px] flex-1"><input type="text" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" placeholder="Type Name"/></div> <div class="flex flex-wrap items-center justify-center gap-1 rounded-lg border border-zinc-700/50 bg-zinc-800/50 p-1.5 sm:justify-start"></div> <button class="text-zinc-500 hover:text-red-400" title="Remove"><!></button></div>'),et=h('<div><label class="mb-1 block text-sm font-medium text-zinc-400 capitalize"> </label> <textarea rows="2" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div>'),tt=h('<label class="relative h-6 w-6 cursor-pointer rounded-full border border-zinc-700 transition-transform focus-within:ring-2 focus-within:ring-white hover:scale-110" title="Change Color"><input type="color" class="absolute inset-0 h-full w-full cursor-pointer opacity-0"/></label>'),st=h('<section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><h3 class="mb-4 text-lg font-semibold text-zinc-100">Global Settings</h3> <div class="space-y-6"><div class="flex items-center gap-4"><span class="text-sm font-medium text-zinc-400">Accent Color</span> <div class="flex flex-wrap gap-2"></div></div> <div class="flex items-center gap-4"><label for="transition_duration" class="text-sm font-medium text-zinc-400">Transition Duration (ms)</label> <input type="number" id="transition_duration" class="w-24 rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" min="0" step="50"/></div></div></section> <section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-lg font-semibold text-zinc-100">Art Call Types</h3> <button class="flex items-center gap-1 text-xs transition-colors hover:brightness-125"><!> Add Type</button></div> <div class="space-y-3"></div></section> <section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-lg font-semibold text-zinc-100">Project Types</h3> <button class="flex items-center gap-1 text-xs transition-colors hover:brightness-125"><!> Add Type</button></div> <div class="space-y-3"></div></section> <section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-lg font-semibold text-zinc-100">Task Types</h3> <button class="flex items-center gap-1 text-xs transition-colors hover:brightness-125"><!> Add Type</button></div> <div class="space-y-3"></div></section> <section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-lg font-semibold text-zinc-100">Daily Activity Types</h3> <div class="text-xs text-zinc-500">Comma-separated values</div></div> <div class="space-y-4"></div></section> <section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><h3 class="mb-4 text-lg font-semibold text-zinc-100">Backup Database</h3> <p class="mb-4 text-sm text-zinc-400">Download CSV backups of daily tracking, projects, art calls, notes, and tasks.</p> <button class="flex items-center gap-2 rounded-lg bg-zinc-800 px-4 py-2 text-sm font-medium text-zinc-300 transition-colors hover:bg-zinc-700 hover:text-white"><!> Backup Database</button></section> <section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-lg font-semibold text-zinc-100">Note Colors (Palette)</h3> <div class="text-xs text-zinc-500">Edit available colors for notes</div></div> <div class="flex flex-wrap gap-2"></div></section>',1),at=h('<div class="space-y-8 pb-20"><div class="flex items-center justify-between"><button class="flex items-center gap-2 rounded-md px-4 py-2 text-sm font-semibold text-white shadow-sm transition-all hover:brightness-110"><!> Save Changes</button></div> <!></div>');function bt(M,N){Pe(N,!0);let D=Me(!0);De(async()=>{await i.init(),i.settings.global_types.transition_duration===void 0&&(i.settings.global_types.transition_duration=200),He(D,!1)});async function H(){await i.saveSettings(),be("Settings saved successfully!","Success")}function E(){const a=Math.max(0,...i.settings.calls_types.map(n=>Number(n.id)))+1;i.settings.calls_types.push({id:a,label:"New Type"})}function F(a){i.settings.calls_types.splice(a,1)}function S(){const a=Math.max(0,...i.settings.project_types.map(n=>Number(n.id)))+1;i.settings.project_types.push({id:a,label:"New Project Type",color:"bg-zinc-500"})}function I(a){i.settings.project_types.splice(a,1)}function he(){const a=Math.max(0,...i.settings.task_types.map(n=>Number(n.id)))+1;i.settings.task_types.push({id:String(a),label:"New Task Type",color:"bg-zinc-500"})}function ye(a){i.settings.task_types.splice(a,1)}function we(a){if(!a||a.length===0)return"";const n=typeof a!="object"?JSON.parse(a):a,f=Object.keys(n[0]);let g=f.join(",")+`\r
`;for(let y=0;y<n.length;y++){let w="";for(const _ of f){w!==""&&(w+=",");let l=n[y][_];l==null?l="":typeof l=="object"?(l=JSON.stringify(l).replace(/"/g,'""'),l=`"${l}"`):(l=String(l).replace(/"/g,'""'),l.search(/("|,|\n)/g)>=0&&(l=`"${l}"`)),w+=l}g+=w+`\r
`}return g}async function ze(){const a=["dailyTracking","projects","artCalls","notes","tasks"];for(const n of a){const{data:f,error:g}=await Je.from(n).select("*");if(g){console.error(`Error fetching ${n}:`,g),be(`Error backing up ${n}: ${g.message}`,"Error");continue}if(!f||f.length===0)continue;const y=we(f),w=new Blob([y],{type:"text/csv;charset=utf-8;"}),_=document.createElement("a");_.setAttribute("href",URL.createObjectURL(w)),_.setAttribute("download",`${n}_backup_${new Date().toISOString().split("T")[0]}.csv`),_.style.visibility="hidden",document.body.appendChild(_),_.click(),document.body.removeChild(_),await new Promise(l=>setTimeout(l,500))}}var q=at(),K=t(q),B=t(K);B.__click=H;var ke=t(B);Fe(ke,{class:"h-4 w-4"}),O(),e(B),e(K);var $e=r(K,2);{var Te=a=>{var n=qe(),f=t(n);{let g=Ee(()=>i.getAccentHex());Be(f,{class:"h-6 w-6 animate-spin",get style(){return`color: ${o(g)??""}`}})}e(n),m(a,n)},je=a=>{var n=st(),f=ne(n),g=r(t(f),2),y=t(g),w=r(t(y),2);T(w,21,()=>ie,j,(p,s)=>{var d=Ke();d.__click=()=>i.settings.global_types.accent=o(s).class,P(()=>{$(d,`background-color: ${o(s).hex}; ${i.settings.global_types.accent===o(s).class?"border-color: white; transform: scale(1.1);":""}`),L(d,"title",o(s).name)}),m(p,d)}),e(w),e(y);var _=r(y,2),l=r(t(_),2);R(l),e(_),e(g),e(f);var Q=r(f,2),W=t(Q),G=r(t(W),2);G.__click=E;var Ne=t(G);oe(Ne,{class:"h-4 w-4"}),O(),e(G),e(W);var ce=r(W,2);T(ce,21,()=>i.settings.calls_types,j,(p,s,d)=>{var c=Qe(),u=t(c);R(u);var v=r(u,2);v.__click=()=>F(d);var b=t(v);re(b,{class:"h-4 w-4"}),e(v),e(c),V(u,()=>o(s).label,x=>o(s).label=x),m(p,c)}),e(ce),e(Q);var X=r(Q,2),Y=t(X),J=r(t(Y),2);J.__click=S;var Se=t(J);oe(Se,{class:"h-4 w-4"}),O(),e(J),e(Y);var le=r(Y,2);T(le,21,()=>i.settings.project_types,j,(p,s,d)=>{var c=Xe(),u=t(c),v=t(u);R(v),e(u);var b=r(u,2);T(b,21,()=>ie,j,(A,z)=>{var k=We();k.__click=()=>o(s).color=o(z).class,P(()=>{$(k,`background-color: ${o(z).hex}; ${o(s).color===o(z).class?"border-color: white; transform: scale(1.2);":"opacity-60 hover:opacity-100"}`),L(k,"title",o(z).name)}),m(A,k)}),e(b);var x=r(b,2);x.__click=()=>I(d);var C=t(x);re(C,{class:"h-4 w-4"}),e(x),e(c),V(v,()=>o(s).label,A=>o(s).label=A),m(p,c)}),e(le),e(X);var Z=r(X,2),ee=t(Z),U=r(t(ee),2);U.__click=he;var Ce=t(U);oe(Ce,{class:"h-4 w-4"}),O(),e(U),e(ee);var de=r(ee,2);T(de,21,()=>i.settings.task_types,j,(p,s,d)=>{var c=Ze(),u=t(c),v=t(u);R(v),e(u);var b=r(u,2);T(b,21,()=>ie,j,(A,z)=>{var k=Ye();k.__click=()=>o(s).color=o(z).class,P(()=>{$(k,`background-color: ${o(z).hex}; ${o(s).color===o(z).class?"border-color: white; transform: scale(1.2);":"opacity-60 hover:opacity-100"}`),L(k,"title",o(z).name)}),m(A,k)}),e(b);var x=r(b,2);x.__click=()=>ye(d);var C=t(x);re(C,{class:"h-4 w-4"}),e(x),e(c),V(v,()=>o(s).label,A=>o(s).label=A),m(p,c)}),e(de),e(Z);var te=r(Z,2),ve=r(t(te),2);T(ve,20,()=>["work","study","culture","art","music","exercise","leisure"],j,(p,s)=>{var d=et(),c=t(d),u=t(c,!0);e(c);var v=r(c,2);Ie(v),v.__input=b=>{const x=b.target.value;i.settings.daily_type[s]=x.split(",").map(C=>C.trim()).filter(C=>C.length>0)},L(v,"placeholder","e.g. Type 1, Type 2"),e(d),P(b=>{L(c,"for",`daily_${s}`),Re(u,s),L(v,"id",`daily_${s}`),Ge(v,b)},[()=>i.settings.daily_type[s]?.join(", ")||""]),m(p,d)}),e(ve),e(te);var se=r(te,2),ae=r(t(se),4);ae.__click=ze;var Ae=t(ae);Ue(Ae,{class:"h-4 w-4"}),O(),e(ae),e(se);var ue=r(se,2),pe=r(t(ue),2);T(pe,21,()=>i.settings.notes_types,j,(p,s,d)=>{var c=tt(),u=t(c);R(u),e(c),P(()=>$(c,`background-color: ${o(s).color};`)),V(u,()=>o(s).color,v=>o(s).color=v),m(p,c)}),e(pe),e(ue),P((p,s,d)=>{$(G,`color: ${p??""}`),$(J,`color: ${s??""}`),$(U,`color: ${d??""}`)},[()=>i.getAccentLightHex(),()=>i.getAccentLightHex(),()=>i.getAccentLightHex()]),V(l,()=>i.settings.global_types.transition_duration,p=>i.settings.global_types.transition_duration=p),m(a,n)};Ve($e,a=>{o(D)?a(Te):a(je,!1)})}e(q),P(a=>$(B,`background-color: ${a??""}`),[()=>i.getAccentHex()]),m(M,q),Le()}Oe(["click","input"]);export{bt as component};
