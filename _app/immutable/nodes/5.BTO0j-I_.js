import{c as xe,a as l,f,t as rt}from"../chunks/CQkslu6P.js";import{k as ae,p as Ye,v as V,x as it,y as o,z as r,B as i,A as a,D as z,a as Je,m as e,w as st,G as Me,J as Ne,F as _t,u as xt,o as yt}from"../chunks/CzM_H10X.js";import{d as Qe,s as D,e as lt,r as pt}from"../chunks/C_B3uCM3.js";import{l as ot,s as dt,i as y}from"../chunks/DVrx_Uw8.js";import{e as oe,i as de,s as ct}from"../chunks/CGOCP0_5.js";import{I as vt,s as ut,f as qe,e as Ve,r as te,a as He,i as nt,c as me,d as bt,g as ht}from"../chunks/BlwmmlO5.js";import{s as _e}from"../chunks/BW5xtwr9.js";import"../chunks/CLX796lQ.js";import{L as ft,b as Ke,a as Be}from"../chunks/DzRLBAai.js";import{t as gt,f as mt}from"../chunks/BL1b-Wf3.js";import{P as wt}from"../chunks/BC-pPyRz.js";import{L as zt}from"../chunks/KmU_ywRP.js";import{A as kt,a as Ct}from"../chunks/DafGPu0x.js";function Dt(K,t){const p=ot(t,["children","$$slots","$$events","$$legacy"]);const g=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]];vt(K,dt({name:"eye"},()=>p,{get iconNode(){return g},children:(b,n)=>{var m=xe(),k=ae(m);ut(k,t,"default",{}),l(b,m)},$$slots:{default:!0}}))}function Et(K,t){const p=ot(t,["children","$$slots","$$events","$$legacy"]);const g=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}]];vt(K,dt({name:"layout-grid"},()=>p,{get iconNode(){return g},children:(b,n)=>{var m=xe(),k=ae(m);ut(k,t,"default",{}),l(b,m)},$$slots:{default:!0}}))}var St=f('<div class="absolute inset-0 z-10 flex items-center justify-center bg-zinc-900"><!></div>'),jt=f('<img alt="Daily entry"/>'),It=f("<!> <!>",1),Tt=f('<div class="flex h-full w-full flex-col items-center justify-center gap-2 text-zinc-700"><span class="text-xs">No Image</span> <span class="text-xs font-medium text-zinc-600"> </span></div>'),Lt=f('<div class="group relative aspect-square overflow-hidden rounded-lg border border-zinc-800 bg-zinc-900"><!> <div class="absolute inset-0 flex flex-col items-center justify-center gap-3 bg-black/60 opacity-0 transition-opacity duration-300 group-hover:opacity-100"><span class="font-bold text-white shadow-black drop-shadow-md"> </span> <button class="rounded-full bg-white/20 p-3 text-white backdrop-blur-sm transition-all hover:scale-110 hover:bg-white/40" aria-label="View Details"><!></button></div></div>');function Mt(K,t){Ye(t,!0);let p=V(null),g=V(!!t.entry?.image);it(()=>{t.entry?.image?(o(g,!0),b(t.entry.image)):(o(p,null),o(g,!1))});async function b(O){const{data:c,error:x}=await _e.storage.from("dailyPicture").createSignedUrl(O,3600);c?o(p,c.signedUrl,!0):o(g,!1)}function n(){o(g,!1)}var m=Lt(),k=r(m);{var Y=O=>{var c=It(),x=ae(c);{var P=j=>{var S=St(),ce=r(S);ft(ce,{class:"h-6 w-6 animate-spin text-zinc-600"}),a(S),l(j,S)};y(x,j=>{e(g)&&j(P)})}var U=i(x,2);{var X=j=>{var S=jt();z(()=>{qe(S,"src",e(p)),Ve(S,1,`h-full w-full object-cover transition-all duration-700 ${e(g)?"scale-105 opacity-0":"scale-100 opacity-100"} group-hover:scale-110`)}),lt("load",S,n),pt(S),l(j,S)};y(U,j=>{e(p)&&j(X)})}l(O,c)},h=O=>{var c=Tt(),x=i(r(c),2),P=r(x,!0);a(x),a(c),z(()=>D(P,t.entry.created_at)),l(O,c)};y(k,O=>{t.entry.image?O(Y):O(h,!1)})}var E=i(k,2),$=r(E),ye=r($,!0);a($);var J=i($,2);J.__click=()=>t.onView(t.entry);var ze=r(J);Dt(ze,{class:"h-6 w-6"}),a(J),a(E),a(m),z(()=>D(ye,t.entry.created_at)),l(K,m),Je()}Qe(["click"]);async function Nt(K,t=1200){return new Promise((p,g)=>{if(!K){g(new Error("No file provided"));return}const b=new Image;b.onload=()=>{const n=document.createElement("canvas");let m=b.width,k=b.height;m>t&&(k=Math.round(k*t/m),m=t),n.width=m,n.height=k;const Y=n.getContext("2d");if(!Y){g(new Error("Could not get canvas context"));return}Y.drawImage(b,0,0,m,k),n.toBlob(h=>{h?p(h):g(new Error("Canvas to Blob conversion failed"))},"image/webp",.8)},b.onerror=()=>{g(new Error("Failed to load image"))},b.src=URL.createObjectURL(K)})}var At=f('<div><label class="mb-1 block text-sm font-medium text-zinc-400 capitalize"> </label> <input type="number" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div>'),Ut=f('<label><input type="checkbox" class="sr-only"/> <span> </span> <span class="text-xs text-amber-400">(current)</span></label>'),Bt=f('<label><input type="checkbox" class="sr-only"/> <span> </span></label>'),Ot=f('<div class="flex flex-wrap gap-2"><!> <!></div>'),Pt=f('<p class="text-sm text-zinc-500 italic">No options configured in settings</p>'),Ft=f('<div><span class="mb-2 block text-sm font-medium text-zinc-400 capitalize"> </span> <!></div>'),Vt=f('<p class="text-sm text-green-400">New image selected</p>'),Rt=f('<div class="flex items-center gap-2"><p class="text-sm text-zinc-400">Current image set</p> <button type="button" class="text-xs text-red-400 hover:text-red-300">Remove</button></div>'),Ht=f('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-4xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="created_at" class="mb-1 block text-sm font-medium text-zinc-400">Date</label> <input type="date" id="created_at" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="weight" class="mb-1 block text-sm font-medium text-zinc-400">Weight (kg)</label> <input type="number" step="0.1" id="weight" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div class="grid grid-cols-2 gap-4 md:grid-cols-5"></div> <div class="flex flex-wrap gap-6"><div class="flex items-center"><input type="checkbox" id="calvin_day" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"/> <label for="calvin_day" class="ml-2 block text-sm text-zinc-300">Calvin Day</label></div> <div class="flex items-center"><input type="checkbox" id="ihana" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"/> <label for="ihana" class="ml-2 block text-sm text-zinc-300">Ihana</label></div> <div class="flex items-center"><input type="checkbox" id="call_family" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"/> <label for="call_family" class="ml-2 block text-sm text-zinc-300">Call Family</label></div> <div class="flex items-center"><input type="checkbox" id="cry" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"/> <label for="cry" class="ml-2 block text-sm text-zinc-300">Cry</label></div> <div class="flex items-center"><input type="checkbox" id="loving" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"/> <label for="loving" class="ml-2 block text-sm text-zinc-300">Loving</label></div> <div class="flex items-center"><input type="checkbox" id="friends" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"/> <label for="friends" class="ml-2 block text-sm text-zinc-300">Friends</label></div> <div class="flex items-center"><input type="checkbox" id="sickness" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"/> <label for="sickness" class="ml-2 block text-sm text-zinc-300">Sickness</label></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"></div> <div><label for="image" class="mb-1 block text-sm font-medium text-zinc-400">Image</label> <div class="flex items-center gap-4"><input type="file" id="image" accept="image/*" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/> <!></div></div> <div><label for="notes" class="mb-1 block text-sm font-medium text-zinc-400">Notes</label> <textarea id="notes" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div class="sticky bottom-0 mt-6 flex justify-end gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700 disabled:opacity-50">Cancel</button> <button type="submit" class="rounded-md px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm transition-all hover:brightness-110 focus-visible:outline-2 focus-visible:outline-offset-2 disabled:opacity-50"> </button></div></form></div></div>');function qt(K,t){Ye(t,!0);let p=V(!1),g=V(null),b=V(null),n=V(st({created_at:new Date().toISOString().split("T")[0],mood:null,energy:null,physical:null,sleep:null,meals:null,weight:null,sickness:!1,work_type:[],study_type:[],culture_type:[],art_type:[],music_type:[],exercise_type:[],leisure_type:[],calvin_day:!1,ihana:!1,call_family:!1,cry:!1,loving:!1,friends:!1,notes:"",image:null}));function m(c){return c?Array.isArray(c)?c:c.split(",").map(x=>x.trim()).filter(Boolean):[]}function k(c,x){const P=e(n)[c];P.includes(x)?e(n)[c]=P.filter(U=>U!==x):e(n)[c]=[...P,x]}it(()=>{t.isOpen&&(t.entry?(o(n,{created_at:t.entry.created_at||new Date().toISOString().split("T")[0],mood:t.entry.mood,energy:t.entry.energy,physical:t.entry.physical,sleep:t.entry.sleep,meals:t.entry.meals,weight:t.entry.weight,sickness:t.entry.sickness??!1,work_type:m(t.entry.work_type),study_type:m(t.entry.study_type),culture_type:m(t.entry.culture_type),art_type:m(t.entry.art_type),music_type:m(t.entry.music_type),exercise_type:m(t.entry.exercise_type),leisure_type:m(t.entry.leisure_type),calvin_day:t.entry.calvin_day??!1,ihana:t.entry.ihana??!1,call_family:t.entry.call_family??!1,cry:t.entry.cry??!1,loving:t.entry.loving??!1,friends:t.entry.friends??!1,notes:t.entry.notes??"",image:t.entry.image??null},!0),o(g,null),o(b,null)):(o(n,{created_at:new Date().toISOString().split("T")[0],mood:null,energy:null,physical:null,sleep:null,meals:null,weight:null,sickness:!1,work_type:[],study_type:[],culture_type:[],art_type:[],music_type:[],exercise_type:[],leisure_type:[],calvin_day:!1,ihana:!1,call_family:!1,cry:!1,loving:!1,friends:!1,notes:"",image:null},!0),o(g,null),o(b,null)))});async function Y(c){const x=c.target;x.files&&x.files.length>0&&(o(g,x.files[0],!0),o(b,URL.createObjectURL(e(g)),!0))}async function h(){if(e(n).image){const{error:c}=await _e.storage.from("dailyPicture").remove([e(n).image]);if(c){me("Failed to delete image: "+c.message,"Error");return}e(n).image=null,o(g,null),o(b,null),me("Image deleted successfully","Success")}}async function E(c){c.preventDefault();let x=e(n).image;if(e(g)){if(!t.userId){me("User ID is missing, cannot upload image","Error");return}o(p,!0);try{const U=await Nt(e(g)),X=`${t.userId}/${e(n).created_at}.webp`,{data:j,error:S}=await _e.storage.from("dailyPicture").upload(X,U,{contentType:"image/webp",upsert:!0});if(S)throw S;x=j.path}catch(U){me(`Image upload failed: ${U.message}`,"Error"),o(p,!1);return}o(p,!1)}const P={...e(n),image:x,work_type:e(n).work_type.join(", "),study_type:e(n).study_type.join(", "),culture_type:e(n).culture_type.join(", "),art_type:e(n).art_type.join(", "),music_type:e(n).music_type.join(", "),exercise_type:e(n).exercise_type.join(", "),leisure_type:e(n).leisure_type.join(", ")};t.onSave(P)}function $(c){c.target===c.currentTarget&&t.onClose()}function ye(c){c.key==="Escape"&&t.onClose()}var J=xe(),ze=ae(J);{var O=c=>{var x=Ht();x.__click=$,x.__keydown=ye;var P=r(x),U=r(P),X=r(U),j=r(X,!0);a(X);var S=i(X,2);S.__click=function(...d){t.onClose?.apply(this,d)},a(U);var ce=i(U,2),ke=r(ce),Ce=r(ke),Oe=i(r(Ce),2);te(Oe),a(Ce);var De=i(Ce,2),Pe=i(r(De),2);te(Pe),a(De),a(ke);var v=i(ke,2);oe(v,20,()=>["mood","energy","physical","sleep","meals"],de,(d,M)=>{var A=At(),Z=r(A),le=r(Z,!0);a(Z);var q=i(Z,2);te(q),a(A),z(()=>{qe(Z,"for",M),D(le,M),qe(q,"id",M)}),Ke(q,()=>e(n)[M],Ie=>e(n)[M]=Ie),l(d,A)}),a(v);var _=i(v,2),w=r(_),R=r(w);te(R),Me(2),a(w);var ee=i(w,2),re=r(ee);te(re),Me(2),a(ee);var ve=i(ee,2),Ee=r(ve);te(Ee),Me(2),a(ve);var ie=i(ve,2),Fe=r(ie);te(Fe),Me(2),a(ie);var Se=i(ie,2),ue=r(Se);te(ue),Me(2),a(Se);var Ae=i(Se,2),s=r(Ae);te(s),Me(2),a(Ae);var u=i(Ae,2),I=r(u);te(I),Me(2),a(u),a(_);var F=i(_,2);oe(F,20,()=>["work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type"],de,(d,M)=>{const A=Ne(()=>M.replace("_type","")),Z=Ne(()=>He.settings.daily_type[e(A)]||[]),le=Ne(()=>M),q=Ne(()=>e(n)[e(le)]),Ie=Ne(()=>e(q).filter(W=>!e(Z).includes(W)));var fe=Ft(),Te=r(fe),We=r(Te,!0);a(Te);var Xe=i(Te,2);{var Ze=W=>{var Ue=Ot(),Ge=r(Ue);oe(Ge,17,()=>e(Ie),de,(ge,G)=>{var he=Ut(),we=r(he);te(we),we.__change=()=>k(e(le),e(G));var Re=i(we,2),et=r(Re,!0);a(Re),Me(2),a(he),z((tt,at)=>{Ve(he,1,`flex cursor-pointer items-center gap-1.5 rounded-md border px-2.5 py-1.5 text-sm transition-colors ${tt??""}`),nt(we,at),D(et,e(G))},[()=>e(q).includes(e(G))?"border-amber-500 bg-amber-500/20 text-amber-300":"border-zinc-600 bg-zinc-800 text-zinc-300 hover:border-zinc-500",()=>e(q).includes(e(G))]),l(ge,he)});var $e=i(Ge,2);oe($e,17,()=>e(Z),de,(ge,G)=>{var he=Bt(),we=r(he);te(we),we.__change=()=>k(e(le),e(G));var Re=i(we,2),et=r(Re,!0);a(Re),a(he),z((tt,at)=>{Ve(he,1,`flex cursor-pointer items-center gap-1.5 rounded-md border px-2.5 py-1.5 text-sm transition-colors ${tt??""}`),nt(we,at),D(et,e(G))},[()=>e(q).includes(e(G))?"border-indigo-500 bg-indigo-500/20 text-indigo-300":"border-zinc-600 bg-zinc-800 text-zinc-300 hover:border-zinc-500",()=>e(q).includes(e(G))]),l(ge,he)}),a(Ue),l(W,Ue)},Le=W=>{var Ue=Pt();l(W,Ue)};y(Xe,W=>{e(Z).length>0||e(Ie).length>0?W(Ze):W(Le,!1)})}a(fe),z(()=>D(We,e(A))),l(d,fe)}),a(F);var ne=i(F,2),T=i(r(ne),2),C=r(T);C.__change=Y;var N=i(C,2);{var B=d=>{var M=Vt();l(d,M)},Q=d=>{var M=xe(),A=ae(M);{var Z=le=>{var q=Rt(),Ie=i(r(q),2);Ie.__click=h,a(q),l(le,q)};y(A,le=>{e(n).image&&le(Z)},!0)}l(d,M)};y(N,d=>{e(b)?d(B):d(Q,!1)})}a(T),a(ne);var se=i(ne,2),pe=i(r(se),2);_t(pe),a(se);var je=i(se,2),L=r(je);L.__click=function(...d){t.onClose?.apply(this,d)};var H=i(L,2),be=r(H,!0);a(H),a(je),a(ce),a(P),a(x),z(d=>{D(j,t.entry?"Edit Entry":"New Entry"),L.disabled=e(p),H.disabled=e(p),ct(H,`background-color: ${d??""}`),D(be,e(p)?"Uploading...":"Save")},[()=>He.getAccentHex()]),lt("submit",ce,E),Ke(Oe,()=>e(n).created_at,d=>e(n).created_at=d),Ke(Pe,()=>e(n).weight,d=>e(n).weight=d),Be(R,()=>e(n).calvin_day,d=>e(n).calvin_day=d),Be(re,()=>e(n).ihana,d=>e(n).ihana=d),Be(Ee,()=>e(n).call_family,d=>e(n).call_family=d),Be(Fe,()=>e(n).cry,d=>e(n).cry=d),Be(ue,()=>e(n).loving,d=>e(n).loving=d),Be(s,()=>e(n).friends,d=>e(n).friends=d),Be(I,()=>e(n).sickness,d=>e(n).sickness=d),Ke(pe,()=>e(n).notes,d=>e(n).notes=d),gt(3,x,()=>mt,()=>({duration:He.getTransitionDuration()})),l(c,x)};y(ze,c=>{t.isOpen&&c(O)})}l(K,J),Je()}Qe(["click","keydown","change"]);var Gt=f('<div><h3 class="text-sm font-medium text-zinc-400">Weight</h3> <p class="text-lg text-zinc-100"> </p></div>'),Kt=f('<div class="rounded-lg border border-zinc-800 bg-zinc-800/50 p-3"><h3 class="mb-1 text-xs font-medium tracking-wider text-zinc-400 uppercase"> </h3> <p class="text-xl font-semibold text-indigo-400"> </p></div>'),Yt=f('<span class="inline-flex items-center rounded-full border border-red-900/50 bg-red-900/30 px-2.5 py-0.5 text-xs font-medium text-red-400">Sickness</span>'),Jt=f('<span class="inline-flex items-center rounded-full border border-indigo-900/50 bg-indigo-900/30 px-2.5 py-0.5 text-xs font-medium text-indigo-400">Calvin Day</span>'),Qt=f('<span class="inline-flex items-center rounded-full border border-pink-900/50 bg-pink-900/30 px-2.5 py-0.5 text-xs font-medium text-pink-400">Ihana</span>'),Wt=f('<span class="inline-flex items-center rounded-full border border-green-900/50 bg-green-900/30 px-2.5 py-0.5 text-xs font-medium text-green-400">Call Family</span>'),Xt=f('<span class="inline-flex items-center rounded-full border border-blue-900/50 bg-blue-900/30 px-2.5 py-0.5 text-xs font-medium text-blue-400">Cry</span>'),Zt=f('<span class="inline-flex items-center rounded-full border border-red-900/50 bg-red-900/30 px-2.5 py-0.5 text-xs font-medium text-red-400">Loving</span>'),$t=f('<span class="inline-flex items-center rounded-full border border-purple-900/50 bg-purple-900/30 px-2.5 py-0.5 text-xs font-medium text-purple-400">Friends</span>'),ea=f('<div><h3 class="mb-1 text-sm font-medium text-zinc-400 capitalize"> </h3> <p class="rounded-md border border-zinc-800/50 bg-zinc-800/30 p-2 text-zinc-200"> </p></div>'),ta=f('<div class="border-t border-zinc-800 pt-4"><h3 class="mb-2 text-sm font-medium text-zinc-400">Notes</h3> <p class="rounded-lg border border-zinc-800/50 bg-zinc-800/30 p-4 whitespace-pre-wrap text-zinc-300"> </p></div>'),aa=f('<div class="flex-1 lg:max-w-md"><div class="sticky top-24"><h3 class="mb-2 text-sm font-medium text-zinc-400">Daily Picture</h3> <div class="relative overflow-hidden rounded-lg border border-zinc-800 bg-zinc-950"><img alt="Daily entry" class="w-full object-contain"/></div></div></div>'),ra=f('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-6xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100">Entry Details</h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex flex-col gap-6 p-4 md:p-6 lg:flex-row"><div class="flex-1 space-y-6"><div><h3 class="text-sm font-medium text-zinc-400">Date</h3> <p class="text-lg text-zinc-100"> </p></div> <!> <div class="grid grid-cols-2 gap-4 sm:grid-cols-3"></div> <div class="flex flex-wrap gap-2"><!> <!> <!> <!> <!> <!> <!></div> <div class="grid grid-cols-1 gap-6 sm:grid-cols-2"></div> <!></div> <!></div></div></div>');function ia(K,t){Ye(t,!0);let p=V(null);it(()=>{t.isOpen&&t.entry?.image?g(t.entry.image):o(p,null)});async function g(h){const{data:E,error:$}=await _e.storage.from("dailyPicture").createSignedUrl(h,3600);E&&o(p,E.signedUrl,!0)}function b(h){h.target===h.currentTarget&&t.onClose()}function n(h){h.key==="Escape"&&t.onClose()}var m=xe(),k=ae(m);{var Y=h=>{var E=ra();E.__click=b,E.__keydown=n;var $=r(E),ye=r($),J=i(r(ye),2);J.__click=function(...s){t.onClose?.apply(this,s)},a(ye);var ze=i(ye,2),O=r(ze),c=r(O),x=i(r(c),2),P=r(x,!0);a(x),a(c);var U=i(c,2);{var X=s=>{var u=Gt(),I=i(r(u),2),F=r(I);a(I),a(u),z(()=>D(F,`${t.entry.weight??""} kg`)),l(s,u)};y(U,s=>{t.entry.weight&&s(X)})}var j=i(U,2);oe(j,20,()=>["mood","energy","physical","sleep","meals"],de,(s,u)=>{var I=xe(),F=ae(I);{var ne=T=>{var C=Kt(),N=r(C),B=r(N,!0);a(N);var Q=i(N,2),se=r(Q,!0);a(Q),a(C),z(()=>{D(B,u),D(se,t.entry[u])}),l(T,C)};y(F,T=>{t.entry[u]!==null&&t.entry[u]!==void 0&&T(ne)})}l(s,I)}),a(j);var S=i(j,2),ce=r(S);{var ke=s=>{var u=Yt();l(s,u)};y(ce,s=>{t.entry.sickness&&s(ke)})}var Ce=i(ce,2);{var Oe=s=>{var u=Jt();l(s,u)};y(Ce,s=>{t.entry.calvin_day&&s(Oe)})}var De=i(Ce,2);{var Pe=s=>{var u=Qt();l(s,u)};y(De,s=>{t.entry.ihana&&s(Pe)})}var v=i(De,2);{var _=s=>{var u=Wt();l(s,u)};y(v,s=>{t.entry.call_family&&s(_)})}var w=i(v,2);{var R=s=>{var u=Xt();l(s,u)};y(w,s=>{t.entry.cry&&s(R)})}var ee=i(w,2);{var re=s=>{var u=Zt();l(s,u)};y(ee,s=>{t.entry.loving&&s(re)})}var ve=i(ee,2);{var Ee=s=>{var u=$t();l(s,u)};y(ve,s=>{t.entry.friends&&s(Ee)})}a(S);var ie=i(S,2);oe(ie,20,()=>["work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type"],de,(s,u)=>{var I=xe(),F=ae(I);{var ne=T=>{var C=ea(),N=r(C),B=r(N,!0);a(N);var Q=i(N,2),se=r(Q,!0);a(Q),a(C),z(pe=>{D(B,pe),D(se,t.entry[u])},[()=>u.replace("_type","")]),l(T,C)};y(F,T=>{t.entry[u]&&T(ne)})}l(s,I)}),a(ie);var Fe=i(ie,2);{var Se=s=>{var u=ta(),I=i(r(u),2),F=r(I,!0);a(I),a(u),z(()=>D(F,t.entry.notes)),l(s,u)};y(Fe,s=>{t.entry.notes&&s(Se)})}a(O);var ue=i(O,2);{var Ae=s=>{var u=aa(),I=r(u),F=i(r(I),2),ne=r(F);a(F),a(I),a(u),z(()=>qe(ne,"src",e(p))),l(s,u)};y(ue,s=>{e(p)&&s(Ae)})}a(ze),a($),a(E),z(()=>D(P,t.entry.created_at)),gt(3,E,()=>mt,()=>({duration:He.getTransitionDuration()})),l(h,E)};y(k,h=>{t.isOpen&&t.entry&&h(Y)})}l(K,m),Je()}Qe(["click","keydown"]);var na=f('<button class="fixed right-8 bottom-8 z-50 rounded-full p-4 text-white shadow-lg transition-all hover:scale-105 hover:brightness-110" aria-label="New Entry"><!></button>'),sa=f('<div class="flex h-64 items-center justify-center"><!></div>'),la=f('<button><span class="capitalize"> </span> <!></button>'),oa=f('<th class="hidden px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase md:table-cell"> </th>'),da=f('<td class="hidden max-w-xs truncate px-6 py-4 text-sm whitespace-nowrap text-zinc-400 md:table-cell"><!></td>'),ca=f('<tr class="transition-colors hover:bg-zinc-800/50"><td class="sticky left-0 z-10 bg-zinc-900 px-6 py-4 font-medium whitespace-nowrap text-zinc-200"> </td><td class="sticky left-[100px] z-10 space-x-2 border-r border-zinc-800 bg-zinc-900 px-6 py-4 whitespace-nowrap shadow-[4px_0_8px_-4px_rgba(0,0,0,0.3)]"><button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="View Details"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></button> <button class="text-indigo-400 transition-colors hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="text-red-400 transition-colors hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></td><!></tr>'),va=f('<div class="overflow-x-auto rounded-lg border border-zinc-800 shadow"><table class="min-w-full divide-y divide-zinc-800"><thead class="bg-zinc-800"><tr><th class="sticky left-0 z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Date</th><th class="sticky left-[100px] z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Actions</th><!></tr></thead><tbody class="divide-y divide-zinc-800 bg-zinc-900"></tbody></table></div>'),ua=f('<div class="grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6"></div>'),fa=f('<div class="mb-6 flex flex-wrap items-center justify-between gap-4 text-sm"><div class="flex flex-wrap items-center gap-4"><span class="text-zinc-500">Sort by:</span> <!></div> <div class="flex items-center rounded-lg bg-zinc-800/50 p-1"><button aria-label="List View"><!></button> <button aria-label="Grid View"><!></button></div></div> <!>',1),ga=f('<p class="text-center text-zinc-500">Please sign in to view tracking data.</p>'),ma=f('<div><div class="mb-6 flex items-center justify-between"><h2 class="hidden text-lg font-bold text-zinc-100 md:block">Daily</h2> <!></div> <!> <!> <!></div>');function ja(K,t){Ye(t,!0);let p=V(st(xt(()=>t.data.dailyTracking))),g=V(!1),b=V(!1),n=V(null),m=V(null),k=V(!0),Y=V("list"),h=V("created_at"),E=V("desc"),$=Ne(()=>[...e(p)].sort((v,_)=>{const w=e(E)==="asc"?1:-1;if(e(h)==="created_at"){const R=new Date(v.created_at).getTime(),ee=new Date(_.created_at).getTime();return(R-ee)*w}else{const R=v[e(h)]??-999,ee=_[e(h)]??-999;return(R-ee)*w}}));function ye(v){e(h)===v?o(E,e(E)==="asc"?"desc":"asc",!0):(o(h,v,!0),o(E,"desc"))}yt(()=>{_e.auth.getSession().then(({data:{session:_}})=>{o(m,_,!0),_?J():o(k,!1)});const{data:{subscription:v}}=_e.auth.onAuthStateChange((_,w)=>{o(m,w,!0),w?J():o(k,!1)});return()=>v.unsubscribe()});async function J(){o(k,!0);const{data:v,error:_}=await _e.from("dailyTracking").select().order("created_at",{ascending:!1});!_&&v&&o(p,v,!0),o(k,!1)}function ze(){o(n,null),o(g,!0)}function O(v){o(n,v,!0),o(g,!0)}function c(v){o(n,v,!0),o(b,!0)}async function x(v){if(!await ht("Are you sure you want to delete this entry?","Delete Entry",{confirmText:"Delete",isDestructive:!0}))return;const{error:w}=await _e.from("dailyTracking").delete().eq("id",v);w?me(w.message,"Error"):(me("Entry deleted successfully","Success"),J())}async function P(v){if(e(n)){const{id:_,...w}=v,{error:R}=await _e.from("dailyTracking").update(w).eq("id",e(n).id);R?me(R.message,"Error"):(me("Entry updated successfully","Success"),o(g,!1),J())}else{const{error:_}=await _e.from("dailyTracking").insert(v);_?me(_.message,"Error"):(me("Entry created successfully","Success"),o(g,!1),J())}}const U=["mood","energy","physical","sleep","meals","weight","sickness","work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type","calvin_day","ihana","call_family","cry","loving","friends","notes","image"];var X=ma(),j=r(X),S=i(r(j),2);{var ce=v=>{var _=na();_.__click=ze;var w=r(_);wt(w,{class:"h-6 w-6"}),a(_),z(R=>ct(_,`background-color: ${R??""}`),[()=>He.getAccentHex()]),l(v,_)};y(S,v=>{e(m)&&!e(g)&&!e(b)&&!bt.isOpen&&v(ce)})}a(j);var ke=i(j,2);{var Ce=v=>{var _=sa(),w=r(_);ft(w,{class:"h-8 w-8 animate-spin text-indigo-500"}),a(_),l(v,_)},Oe=v=>{var _=xe(),w=ae(_);{var R=re=>{var ve=fa(),Ee=ae(ve),ie=r(Ee),Fe=i(r(ie),2);oe(Fe,16,()=>["date","mood","energy","physical","sleep","meals","weight"],de,(T,C)=>{const N=Ne(()=>C==="date"?"created_at":C);var B=la();B.__click=()=>ye(e(N));var Q=r(B),se=r(Q,!0);a(Q);var pe=i(Q,2);{var je=L=>{var H=xe(),be=ae(H);{var d=A=>{kt(A,{class:"h-3 w-3"})},M=A=>{Ct(A,{class:"h-3 w-3"})};y(be,A=>{e(E)==="asc"?A(d):A(M,!1)})}l(L,H)};y(pe,L=>{e(h)===e(N)&&L(je)})}a(B),z(()=>{Ve(B,1,`flex items-center gap-1 rounded-md px-3 py-1.5 transition-colors ${e(h)===e(N)?"bg-indigo-500/20 text-indigo-300":"bg-zinc-800/50 text-zinc-400 hover:bg-zinc-800"}`),D(se,C)}),l(T,B)}),a(ie);var Se=i(ie,2),ue=r(Se);ue.__click=()=>o(Y,"list");var Ae=r(ue);zt(Ae,{class:"h-4 w-4"}),a(ue);var s=i(ue,2);s.__click=()=>o(Y,"grid");var u=r(s);Et(u,{class:"h-4 w-4"}),a(s),a(Se),a(Ee);var I=i(Ee,2);{var F=T=>{var C=va(),N=r(C),B=r(N),Q=r(B),se=i(r(Q),2);oe(se,17,()=>U,de,(je,L)=>{var H=oa(),be=r(H,!0);a(H),z(d=>D(be,d),[()=>e(L).replace("_"," ")]),l(je,H)}),a(Q),a(B);var pe=i(B);oe(pe,21,()=>e($),de,(je,L)=>{var H=ca(),be=r(H),d=r(be,!0);a(be);var M=i(be),A=r(M);A.__click=()=>c(e(L));var Z=i(A,2);Z.__click=()=>O(e(L));var le=i(Z,2);le.__click=()=>x(e(L).id),a(M);var q=i(M);oe(q,17,()=>U,de,(Ie,fe)=>{var Te=da(),We=r(Te);{var Xe=Le=>{var W=rt();z(()=>D(W,e(L)[e(fe)]?"Yes":"No")),l(Le,W)},Ze=Le=>{var W=xe(),Ue=ae(W);{var Ge=ge=>{var G=rt();z(()=>D(G,e(L)[e(fe)]?"Yes":"No")),l(ge,G)},$e=ge=>{var G=rt();z(()=>D(G,e(L)[e(fe)]??"-")),l(ge,G)};y(Ue,ge=>{e(fe)==="image"?ge(Ge):ge($e,!1)},!0)}l(Le,W)};y(We,Le=>{typeof e(L)[e(fe)]=="boolean"?Le(Xe):Le(Ze,!1)})}a(Te),z(()=>qe(Te,"title",e(L)[e(fe)])),l(Ie,Te)}),a(H),z(()=>D(d,e(L).created_at)),l(je,H)}),a(pe),a(N),a(C),l(T,C)},ne=T=>{var C=ua();oe(C,21,()=>e($),de,(N,B)=>{Mt(N,{get entry(){return e(B)},onView:c})}),a(C),l(T,C)};y(I,T=>{e(Y)==="list"?T(F):T(ne,!1)})}z(()=>{Ve(ue,1,`rounded-md p-1.5 transition-all ${e(Y)==="list"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`),Ve(s,1,`rounded-md p-1.5 transition-all ${e(Y)==="grid"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`)}),l(re,ve)},ee=re=>{var ve=ga();l(re,ve)};y(w,re=>{e(m)?re(R):re(ee,!1)},!0)}l(v,_)};y(ke,v=>{e(k)?v(Ce):v(Oe,!1)})}var De=i(ke,2);{let v=Ne(()=>e(m)?.user?.id);qt(De,{get isOpen(){return e(g)},get entry(){return e(n)},get userId(){return e(v)},onClose:()=>o(g,!1),onSave:P})}var Pe=i(De,2);ia(Pe,{get isOpen(){return e(b)},get entry(){return e(n)},onClose:()=>o(b,!1)}),a(X),l(K,X),Je()}Qe(["click"]);export{ja as component};
