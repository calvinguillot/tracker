import{c as se,a as l,f as c,t as fe}from"../chunks/wK1Vbmlk.js";import{p as pe,g as oe,a as _e,h as a,j as i,i as r,t as y,s as H,c as ye,u as we,o as ke,k as o,f as u}from"../chunks/BYhnerF1.js";import{d as me,s as g}from"../chunks/DJuLYhV6.js";import{i as f}from"../chunks/D8lGRnAB.js";import{e as Z,i as $,c as ze,d as P,s as Ce,g as Ee}from"../chunks/Bwlg0huN.js";import{s as q}from"../chunks/Bkout0r_.js";import{E as De}from"../chunks/B05VaxIH.js";import{P as Me,L as je}from"../chunks/Kn-75_P5.js";var Se=c('<div><h3 class="text-sm font-medium text-zinc-400">Weight</h3> <p class="text-lg text-zinc-100"> </p></div>'),Te=c('<div class="rounded-lg border border-zinc-800 bg-zinc-800/50 p-3"><h3 class="mb-1 text-xs font-medium tracking-wider text-zinc-400 uppercase"> </h3> <p class="text-xl font-semibold text-indigo-400"> </p></div>'),Le=c('<span class="inline-flex items-center rounded-full border border-red-900/50 bg-red-900/30 px-2.5 py-0.5 text-xs font-medium text-red-400">Sickness</span>'),Oe=c('<span class="inline-flex items-center rounded-full border border-indigo-900/50 bg-indigo-900/30 px-2.5 py-0.5 text-xs font-medium text-indigo-400">Calvin Day</span>'),Ae=c('<span class="inline-flex items-center rounded-full border border-pink-900/50 bg-pink-900/30 px-2.5 py-0.5 text-xs font-medium text-pink-400">Ihana</span>'),Be=c('<span class="inline-flex items-center rounded-full border border-green-900/50 bg-green-900/30 px-2.5 py-0.5 text-xs font-medium text-green-400">Call Family</span>'),Ve=c('<span class="inline-flex items-center rounded-full border border-blue-900/50 bg-blue-900/30 px-2.5 py-0.5 text-xs font-medium text-blue-400">Cry</span>'),Ne=c('<span class="inline-flex items-center rounded-full border border-red-900/50 bg-red-900/30 px-2.5 py-0.5 text-xs font-medium text-red-400">Sex</span>'),He=c('<div><h3 class="mb-1 text-sm font-medium text-zinc-400 capitalize"> </h3> <p class="rounded-md border border-zinc-800/50 bg-zinc-800/30 p-2 text-zinc-200"> </p></div>'),Pe=c('<div class="border-t border-zinc-800 pt-4"><h3 class="mb-2 text-sm font-medium text-zinc-400">Notes</h3> <p class="rounded-lg border border-zinc-800/50 bg-zinc-800/30 p-4 whitespace-pre-wrap text-zinc-300"> </p></div>'),qe=c('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100">Entry Details</h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="space-y-6 p-4 md:p-6"><div><h3 class="text-sm font-medium text-zinc-400">Date</h3> <p class="text-lg text-zinc-100"> </p></div> <!> <div class="grid grid-cols-2 gap-4 sm:grid-cols-3"></div> <div class="flex flex-wrap gap-2"><!> <!> <!> <!> <!> <!></div> <div class="grid grid-cols-1 gap-6 sm:grid-cols-2"></div> <!></div> <div class="sticky bottom-0 rounded-b-xl border-t border-zinc-800 bg-zinc-900 p-4 md:p-6"><button class="w-full rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 transition-colors ring-inset hover:bg-zinc-700">Close</button></div></div></div>');function Fe(le,s){pe(s,!0);function ee(p){p.target===p.currentTarget&&s.onClose()}function w(p){p.key==="Escape"&&s.onClose()}var D=se(),k=oe(D);{var L=p=>{var _=qe();_.__click=ee,_.__keydown=w;var te=a(_),F=a(te),de=i(a(F),2);de.__click=function(...e){s.onClose?.apply(this,e)},r(F);var I=i(F,2),K=a(I),W=i(a(K),2),Y=a(W,!0);r(W),r(K);var O=i(K,2);{var ce=e=>{var t=Se(),v=i(a(t),2),m=a(v);r(v),r(t),y(()=>g(m,`${s.entry.weight??""} kg`)),l(e,t)};f(O,e=>{s.entry.weight&&e(ce)})}var G=i(O,2);Z(G,20,()=>["mood","energy","physical","sleep","meals"],$,(e,t)=>{var v=se(),m=oe(v);{var S=b=>{var h=Te(),z=a(h),U=a(z,!0);r(z);var T=i(z,2),E=a(T,!0);r(T),r(h),y(()=>{g(U,t),g(E,s.entry[t])}),l(b,h)};f(m,b=>{s.entry[t]!==null&&s.entry[t]!==void 0&&b(S)})}l(e,v)}),r(G);var A=i(G,2),re=a(A);{var ve=e=>{var t=Le();l(e,t)};f(re,e=>{s.entry.sickness&&e(ve)})}var J=i(re,2);{var ue=e=>{var t=Oe();l(e,t)};f(J,e=>{s.entry.calvin_day&&e(ue)})}var n=i(J,2);{var d=e=>{var t=Ae();l(e,t)};f(n,e=>{s.entry.ihana&&e(d)})}var x=i(n,2);{var B=e=>{var t=Be();l(e,t)};f(x,e=>{s.entry.call_family&&e(B)})}var ae=i(x,2);{var C=e=>{var t=Ve();l(e,t)};f(ae,e=>{s.entry.cry&&e(C)})}var M=i(ae,2);{var ie=e=>{var t=Ne();l(e,t)};f(M,e=>{s.entry.sex&&e(ie)})}r(A);var j=i(A,2);Z(j,20,()=>["work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type"],$,(e,t)=>{var v=se(),m=oe(v);{var S=b=>{var h=He(),z=a(h),U=a(z,!0);r(z);var T=i(z,2),E=a(T,!0);r(T),r(h),y(V=>{g(U,V),g(E,s.entry[t])},[()=>t.replace("_type","")]),l(b,h)};f(m,b=>{s.entry[t]&&b(S)})}l(e,v)}),r(j);var ne=i(j,2);{var xe=e=>{var t=Pe(),v=i(a(t),2),m=a(v,!0);r(v),r(t),y(()=>g(m,s.entry.notes)),l(e,t)};f(ne,e=>{s.entry.notes&&e(xe)})}r(I);var Q=i(I,2),R=a(Q);R.__click=function(...e){s.onClose?.apply(this,e)},r(Q),r(te),r(_),y(()=>g(Y,s.entry.created_at)),l(p,_)};f(k,p=>{s.isOpen&&s.entry&&p(L)})}l(le,D),_e()}me(["click","keydown"]);var Ie=c('<button class="fixed right-8 bottom-8 z-50 rounded-full bg-indigo-600 p-4 text-white shadow-lg transition-transform hover:scale-105 hover:bg-indigo-500" aria-label="New Entry"><!></button>'),Ke=c('<div class="flex h-64 items-center justify-center"><!></div>'),We=c('<th class="hidden px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase md:table-cell"> </th>'),Ye=c('<td class="hidden max-w-xs truncate px-6 py-4 text-sm whitespace-nowrap text-zinc-400 md:table-cell"><!></td>'),Ge=c('<tr class="transition-colors hover:bg-zinc-800/50"><td class="sticky left-0 z-10 bg-zinc-900 px-6 py-4 font-medium whitespace-nowrap text-zinc-200"> </td><td class="sticky left-[100px] z-10 space-x-2 border-r border-zinc-800 bg-zinc-900 px-6 py-4 whitespace-nowrap shadow-[4px_0_8px_-4px_rgba(0,0,0,0.3)]"><button class="text-zinc-400 transition-colors hover:text-zinc-200 md:hidden" aria-label="View Details"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></button> <button class="text-indigo-400 transition-colors hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="text-red-400 transition-colors hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></td><!></tr>'),Je=c('<div class="overflow-x-auto rounded-lg border border-zinc-800 shadow"><table class="min-w-full divide-y divide-zinc-800"><thead class="bg-zinc-800"><tr><th class="sticky left-0 z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Date</th><th class="sticky left-[100px] z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Actions</th><!></tr></thead><tbody class="divide-y divide-zinc-800 bg-zinc-900"></tbody></table></div>'),Qe=c('<p class="text-center text-zinc-500">Please sign in to view tracking data.</p>'),Re=c('<div><div class="mb-6 flex items-center justify-between"><h2 class="text-lg font-bold text-zinc-100">Daily</h2> <!></div> <!> <!> <!></div>');function it(le,s){pe(s,!0);let ee=H(ye(we(()=>s.data.dailyTracking))),w=H(!1),D=H(!1),k=H(null),L=H(null),p=H(!0);ke(()=>{q.auth.getSession().then(({data:{session:d}})=>{u(L,d,!0),d?_():u(p,!1)});const{data:{subscription:n}}=q.auth.onAuthStateChange((d,x)=>{u(L,x,!0),x?_():u(p,!1)});return()=>n.unsubscribe()});async function _(){u(p,!0);const{data:n,error:d}=await q.from("dailyTracking").select().order("created_at",{ascending:!1});!d&&n&&u(ee,n,!0),u(p,!1)}function te(){u(k,null),u(w,!0)}function F(n){u(k,n,!0),u(w,!0)}function de(n){u(k,n,!0),u(D,!0)}async function I(n){if(!await Ee("Are you sure you want to delete this entry?","Delete Entry",{confirmText:"Delete",isDestructive:!0}))return;const{error:x}=await q.from("dailyTracking").delete().eq("id",n);x?P(x.message,"Error"):(P("Entry deleted successfully","Success"),_())}async function K(n){if(o(k)){const{id:d,...x}=n,{error:B}=await q.from("dailyTracking").update(x).eq("id",o(k).id);B?P(B.message,"Error"):(P("Entry updated successfully","Success"),u(w,!1),_())}else{const{error:d}=await q.from("dailyTracking").insert(n);d?P(d.message,"Error"):(P("Entry created successfully","Success"),u(w,!1),_())}}const W=["mood","energy","physical","sleep","meals","weight","sickness","work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type","calvin_day","ihana","call_family","cry","sex","notes"];var Y=Re(),O=a(Y),ce=i(a(O),2);{var G=n=>{var d=Ie();d.__click=te;var x=a(d);Me(x,{class:"h-6 w-6"}),r(d),l(n,d)};f(ce,n=>{o(L)&&!o(w)&&!o(D)&&!ze.isOpen&&n(G)})}r(O);var A=i(O,2);{var re=n=>{var d=Ke(),x=a(d);je(x,{class:"h-8 w-8 animate-spin text-indigo-500"}),r(d),l(n,d)},ve=n=>{var d=se(),x=oe(d);{var B=C=>{var M=Je(),ie=a(M),j=a(ie),ne=a(j),xe=i(a(ne),2);Z(xe,17,()=>W,$,(R,e)=>{var t=We(),v=a(t,!0);r(t),y(m=>g(v,m),[()=>o(e).replace("_"," ")]),l(R,t)}),r(ne),r(j);var Q=i(j);Z(Q,21,()=>o(ee),$,(R,e)=>{var t=Ge(),v=a(t),m=a(v,!0);r(v);var S=i(v),b=a(S);b.__click=()=>de(o(e));var h=i(b,2);h.__click=()=>F(o(e));var z=i(h,2);z.__click=()=>I(o(e).id),r(S);var U=i(S);Z(U,17,()=>W,$,(T,E)=>{var V=Ye(),ge=a(V);{var be=N=>{var X=fe();y(()=>g(X,o(e)[o(E)]?"Yes":"No")),l(N,X)},he=N=>{var X=fe();y(()=>g(X,o(e)[o(E)]??"-")),l(N,X)};f(ge,N=>{typeof o(e)[o(E)]=="boolean"?N(be):N(he,!1)})}r(V),y(()=>Ce(V,"title",o(e)[o(E)])),l(T,V)}),r(t),y(()=>g(m,o(e).created_at)),l(R,t)}),r(Q),r(ie),r(M),l(C,M)},ae=C=>{var M=Qe();l(C,M)};f(x,C=>{o(L)?C(B):C(ae,!1)},!0)}l(n,d)};f(A,n=>{o(p)?n(re):n(ve,!1)})}var J=i(A,2);De(J,{get isOpen(){return o(w)},get entry(){return o(k)},onClose:()=>u(w,!1),onSave:K});var ue=i(J,2);Fe(ue,{get isOpen(){return o(D)},get entry(){return o(k)},onClose:()=>u(D,!1)}),r(Y),l(le,Y),_e()}me(["click"]);export{it as component};
