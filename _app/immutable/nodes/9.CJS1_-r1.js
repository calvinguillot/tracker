import{c as Pe,a as u,f as p}from"../chunks/Bc-DLzly.js";import{p as ht,s as G,c as zt,d as Dt,g as k,f as W,a as yt,h as a,i as t,j as o,t as D,k as e,l as At,n as St,o as Lt,m as xt,v as Y}from"../chunks/TcqPTOvd.js";import{d as kt,s as j,e as tt}from"../chunks/CPbHUipC.js";import{i as T}from"../chunks/1BkMwDz5.js";import{r as Ae,e as $,i as ee,a as Z,b as Ee,c as pt,g as H,d as Et,f as Se,h as jt,j as Ot,m as Mt}from"../chunks/CwHnGXrS.js";import{s as Le}from"../chunks/Bkout0r_.js";import{t as Bt,f as Ht}from"../chunks/CXJ9GJ2i.js";import{b as pe,P as wt,L as Nt}from"../chunks/DbJAXTYk.js";import{T as ft}from"../chunks/Noc-KJwY.js";import{G as Ut,S as It,E as qt,L as Ft,a as Pt}from"../chunks/ChstQr8I.js";import{S as Rt}from"../chunks/_IP_SENc.js";import{A as Wt,a as Gt}from"../chunks/Qcij765w.js";var Kt=p("<option> </option>"),Vt=p("<div></div>"),Jt=p("<option> </option>"),Qt=p('<div class="flex items-center gap-2"><button type="button" class="text-zinc-400 hover:text-zinc-200"><!></button> <input type="text" placeholder="Item description..."/> <div class="flex items-center gap-1"><div role="button" tabindex="0" class="cursor-grab p-1 text-zinc-600 hover:text-zinc-400 active:cursor-grabbing" draggable="true"><!></div> <button type="button" class="p-1 text-zinc-500 hover:text-red-400"><!></button></div></div>'),Xt=p('<div class="rounded-lg border border-zinc-800 bg-zinc-800/30 p-4"><div class="mb-3 flex items-center justify-between gap-2"><input type="text" placeholder="Checklist Title" class="w-full bg-transparent text-sm font-bold text-zinc-200 placeholder-zinc-600 focus:outline-none"/> <button type="button" class="text-zinc-600 hover:text-red-400" title="Remove Checklist"><!></button></div> <div class="space-y-2"><!> <button type="button" class="mt-2 flex items-center gap-1 text-xs text-zinc-500 hover:text-zinc-300"><!> Add Item</button></div></div>'),Yt=p('<div class="space-y-6"></div>'),Zt=p('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No checklists yet</p></div>'),$t=p('<div class="flex items-center gap-2"><div class="grid flex-1 grid-cols-1 gap-2 md:grid-cols-2"><input type="text" placeholder="Label (optional)" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/> <input type="text" placeholder="URL" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <button type="button" class="p-2 text-zinc-400 hover:text-indigo-400" title="Open Link"><!></button> <button type="button" class="p-2 text-zinc-400 hover:text-red-400" title="Remove Link"><!></button></div>'),er=p('<div class="space-y-2"></div>'),tr=p('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No links yet</p></div>'),rr=p('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div><label for="title" class="mb-1 block text-sm font-medium text-zinc-400">Title</label> <input type="text" id="title" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="type" class="mb-1 block text-sm font-medium text-zinc-400">Type</label> <div class="flex items-center gap-2"><select id="type" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Select Type</option><!></select> <!></div></div> <div><label for="status" class="mb-1 block text-sm font-medium text-zinc-400">Status</label> <select id="status" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></select></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="deadline_at" class="mb-1 block text-sm font-medium text-zinc-400">Deadline</label> <input type="date" id="deadline_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div><label for="body" class="mb-1 block text-sm font-medium text-zinc-400">Description</label> <textarea id="body" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Checklists</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Checklist</button></div> <!></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Links</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Link</button></div> <!></div> <div class="sticky bottom-0 mt-6 flex justify-end gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700">Cancel</button> <button type="submit" class="rounded-md px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm transition-all hover:brightness-110 focus-visible:outline-2 focus-visible:outline-offset-2">Save</button></div></form></div></div>');function ar(rt,_){ht(_,!0);let r=G(zt({title:"",type:"",status:"todo",body:"",deadline_at:"",completed_at:null,color:"#000000",checklist:[],links:[]})),O=G(null);const te=[{value:"todo",label:"To Do"},{value:"in_progress",label:"In Progress"},{value:"done",label:"Done"}];Dt(()=>{_.isOpen&&(_.entry?k(r,{title:_.entry.title||"",type:_.entry.type||"",status:_.entry.status||"todo",body:_.entry.body||"",deadline_at:_.entry.deadline_at||"",completed_at:_.entry.completed_at||null,color:_.entry.color||"#000000",checklist:Array.isArray(_.entry.checklist)&&_.entry.checklist.length>0?"items"in _.entry.checklist[0]?_.entry.checklist:[{id:crypto.randomUUID(),title:"Checklist",items:_.entry.checklist}]:[],links:Array.isArray(_.entry.links)?_.entry.links:[]},!0):k(r,{title:"",type:"",status:"todo",body:"",deadline_at:"",completed_at:null,color:"#000000",checklist:[],links:[]},!0))});function K(c){c.preventDefault(),e(r).status==="done"?e(r).completed_at||(e(r).completed_at=new Date().toISOString()):e(r).completed_at=null;const d={...e(r),deadline_at:e(r).deadline_at||null};_.onSave(d)}function ne(c){c.target===c.currentTarget&&_.onClose()}function I(c){c.key==="Escape"&&_.onClose()}function le(){e(r).checklist=[...e(r).checklist,{id:crypto.randomUUID(),title:"New Checklist",items:[]}]}function _e(c){e(r).checklist=e(r).checklist.filter((d,y)=>y!==c)}function at(c){const d=e(r).checklist[c];d.items=[...d.items,{text:"",completed:!1}],e(r).checklist[c]=d}function Re(c,d){const y=e(r).checklist[c];y.items=y.items.filter((N,q)=>q!==d),e(r).checklist[c]=y}function it(c,d){const y=e(r).checklist[c];y.items[d].completed=!y.items[d].completed,e(r).checklist[c]=y}function We(c,d,y){k(O,{listIndex:d,itemIndex:y},!0),c.dataTransfer&&(c.dataTransfer.effectAllowed="move",c.dataTransfer.dropEffect="move")}function ot(c,d,y){if(c.preventDefault(),!e(O)||e(O).listIndex!==d||e(O).itemIndex===y)return;const N=e(r).checklist[d],q=e(O).itemIndex,re=y,je=N.items[q],V=[...N.items];V.splice(q,1),V.splice(re,0,je),N.items=V,e(r).checklist[d]=N,e(O).itemIndex=re}function st(){k(O,null)}function ce(){if(e(r).type){const c=Z.getTaskType(e(r).type);c&&c.color&&(e(r).color=c.color)}}function nt(){e(r).links=[...e(r).links,{url:"",label:""}]}function lt(c){e(r).links=e(r).links.filter((d,y)=>y!==c)}function ct(c){if(!c)return;let d=c;/^https?:\/\//i.test(d)||(d="https://"+d),window.open(d,"_blank","noopener,noreferrer")}var Ge=Pe(),Ke=W(Ge);{var dt=c=>{var d=rr();d.__click=ne,d.__keydown=I;var y=a(d),N=a(y),q=a(N),re=a(q,!0);t(q);var je=o(q,2);je.__click=function(...s){_.onClose?.apply(this,s)},t(N);var V=o(N,2),Oe=a(V),Ve=o(a(Oe),2);Ae(Ve),t(Oe);var Me=o(Oe,2),i=a(Me),n=o(a(i),2),v=a(n);v.__change=ce;var m=a(v);m.value=m.__value="";var F=o(m);$(F,17,()=>Z.settings.task_types,ee,(s,g)=>{var f=Kt(),z=a(f,!0);t(f);var w={};D(()=>{j(z,e(g).label),w!==(w=e(g).id)&&(f.value=(f.__value=e(g).id)??"")}),u(s,f)}),t(v);var ae=o(v,2);{var me=s=>{var g=Vt();let f;D(z=>{f=H(g,1,"h-8 w-8 shrink-0 rounded-full border border-zinc-600 shadow-sm",null,f,{"bg-zinc-500":e(r).color==="bg-zinc-500","bg-red-600":e(r).color==="bg-red-600","bg-orange-600":e(r).color==="bg-orange-600","bg-amber-500":e(r).color==="bg-amber-500","bg-green-600":e(r).color==="bg-green-600","bg-emerald-500":e(r).color==="bg-emerald-500","bg-teal-500":e(r).color==="bg-teal-500","bg-cyan-500":e(r).color==="bg-cyan-500","bg-blue-600":e(r).color==="bg-blue-600","bg-indigo-600":e(r).color==="bg-indigo-600","bg-violet-600":e(r).color==="bg-violet-600","bg-purple-600":e(r).color==="bg-purple-600","bg-fuchsia-600":e(r).color==="bg-fuchsia-600","bg-pink-600":e(r).color==="bg-pink-600","bg-rose-600":e(r).color==="bg-rose-600"}),Ee(g,z)},[()=>e(r).color.startsWith("#")?`background-color: ${e(r).color}`:""]),u(s,g)};T(ae,s=>{e(r).color&&s(me)})}t(n),t(i);var Je=o(i,2),Be=o(a(Je),2);$(Be,21,()=>te,ee,(s,g)=>{var f=Jt(),z=a(f,!0);t(f);var w={};D(()=>{j(z,e(g).label),w!==(w=e(g).value)&&(f.value=(f.__value=e(g).value)??"")}),u(s,f)}),t(Be),t(Je),t(Me);var He=o(Me,2),J=a(He),de=o(a(J),2);Ae(de),t(J),t(He);var xe=o(He,2),he=o(a(xe),2);At(he),t(xe);var ve=o(xe,2),ue=a(ve),ze=o(a(ue),2);ze.__click=le,t(ue);var vt=o(ue,2);{var Qe=s=>{var g=Yt();$(g,21,()=>e(r).checklist,ee,(f,z,w)=>{var P=Xt(),L=a(P),A=a(L);Ae(A);var Q=o(A,2);Q.__click=()=>_e(w);var U=a(Q);ft(U,{class:"h-4 w-4"}),t(Q),t(L);var ye=o(L,2),X=a(ye);$(X,17,()=>e(z).items,ee,(Ue,ke,we)=>{var Te=Qt(),Ce=a(Te);Ce.__click=()=>it(w,we);var Ze=a(Ce);{var Ie=E=>{Rt(E,{class:"h-5 w-5 text-emerald-500"})},qe=E=>{It(E,{class:"h-5 w-5"})};T(Ze,E=>{e(ke).completed?E(Ie):E(qe,!1)})}t(Ce);var oe=o(Ce,2);Ae(oe);var $e=o(oe,2),se=a($e),gt=a(se);Ut(gt,{class:"h-4 w-4"}),t(se);var De=o(se,2);De.__click=()=>Re(w,we);var et=a(De);ft(et,{class:"h-3 w-3"}),t(De),t($e),t(Te),D(()=>H(oe,1,`w-full rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 ${e(ke).completed?"text-zinc-500 line-through":""}`)),pe(oe,()=>e(ke).text,E=>e(ke).text=E),tt("dragstart",se,E=>We(E,w,we)),tt("dragover",se,E=>ot(E,w,we)),tt("dragend",se,st),u(Ue,Te)});var be=o(X,2);be.__click=()=>at(w);var ie=a(be);wt(ie,{class:"h-3 w-3"}),St(),t(be),t(ye),t(P),pe(A,()=>e(z).title,Ue=>e(z).title=Ue),u(f,P)}),t(g),u(s,g)},Xe=s=>{var g=Zt();u(s,g)};T(vt,s=>{e(r).checklist&&e(r).checklist.length>0?s(Qe):s(Xe,!1)})}t(ve);var Ne=o(ve,2),ge=a(Ne),Ye=o(a(ge),2);Ye.__click=nt,t(ge);var ut=o(ge,2);{var S=s=>{var g=er();$(g,21,()=>e(r).links,ee,(f,z,w)=>{var P=$t(),L=a(P),A=a(L);Ae(A);var Q=o(A,2);Ae(Q),t(L);var U=o(L,2);U.__click=()=>ct(e(z).url);var ye=a(U);qt(ye,{class:"h-4 w-4"}),t(U);var X=o(U,2);X.__click=()=>lt(w);var be=a(X);ft(be,{class:"h-4 w-4"}),t(X),t(P),D(()=>U.disabled=!e(z).url),pe(A,()=>e(z).label,ie=>e(z).label=ie),pe(Q,()=>e(z).url,ie=>e(z).url=ie),u(f,P)}),t(g),u(s,g)},l=s=>{var g=tr();u(s,g)};T(ut,s=>{e(r).links&&e(r).links.length>0?s(S):s(l,!1)})}t(Ne);var b=o(Ne,2),M=a(b);M.__click=function(...s){_.onClose?.apply(this,s)};var B=o(M,2);t(b),t(V),t(y),t(d),D((s,g,f)=>{j(re,_.entry?"Edit Task":"New Task"),Ee(ze,`color: ${s??""}`),Ee(Ye,`color: ${g??""}`),Ee(B,`background-color: ${f??""}`)},[()=>Z.getAccentLightHex(),()=>Z.getAccentLightHex(),()=>Z.getAccentHex()]),tt("submit",V,K),pe(Ve,()=>e(r).title,s=>e(r).title=s),pt(v,()=>e(r).type,s=>e(r).type=s),pt(Be,()=>e(r).status,s=>e(r).status=s),pe(de,()=>e(r).deadline_at,s=>e(r).deadline_at=s),pe(he,()=>e(r).body,s=>e(r).body=s),Bt(3,d,()=>Ht,()=>({duration:Z.getTransitionDuration()})),u(c,d)};T(Ke,c=>{_.isOpen&&c(dt)})}u(rt,Ge),yt()}kt(["click","keydown","change"]);var ir=p('<button class="fixed right-8 bottom-8 z-50 rounded-full p-4 text-white shadow-lg transition-all hover:scale-105 hover:brightness-110" aria-label="New Task"><!></button>'),or=p('<div class="flex h-48 items-center justify-center"><!></div>'),sr=p('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">Sign in to view tasks.</div>'),nr=p('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">No tasks yet.</div>'),lr=p('<div title="Task Color"></div>'),cr=p('<span class="text-zinc-500">•</span> <span> </span>',1),dr=p('<span class="text-zinc-500">•</span> <!> <span> </span>',1),vr=p('<span class="text-zinc-500">•</span> <!> <span> </span>',1),ur=p("<p> </p>"),gr=p('<div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Completed</span> <span> </span></div>'),br=p('<li><div class="flex flex-col gap-3"><div class="flex items-start justify-between gap-3"><div class="min-w-0 flex-1"><div class="flex flex-wrap items-center gap-2"><!> <h3> </h3></div> <div class="mt-1 flex items-center gap-2 text-xs"><div> </div> <!> <!> <!></div></div></div> <!> <div class="mt-2 flex items-center justify-between gap-4 border-t border-zinc-800/50 pt-3"><div class="flex gap-4"><div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Deadline</span> <span> </span></div> <!></div> <div class="flex items-center gap-2"><button class="rounded-md p-2 text-indigo-400 transition-colors hover:bg-zinc-800 hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="rounded-md p-2 text-red-400 transition-colors hover:bg-zinc-800 hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div></div></li>'),fr=p("<option> </option>"),pr=p('<button><span class="capitalize"> </span> <!></button>'),_r=p('<div class="my-8 flex items-center gap-4"><div class="h-px flex-1 bg-zinc-800"></div> <span class="text-sm font-medium tracking-wider text-zinc-500 uppercase">Archived</span> <div class="h-px flex-1 bg-zinc-800"></div></div> <ul class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"></ul>',1),mr=p('<div class="mb-4 flex flex-wrap items-center gap-4 text-sm"><div class="flex items-center gap-2"><span class="text-zinc-500">Filter:</span> <select class="cursor-pointer rounded-md border border-zinc-700 bg-zinc-800 px-3 py-1.5 text-sm text-zinc-100 shadow-sm outline-none focus:border-indigo-500 focus:ring-indigo-500"><option>All Tasks</option><!></select></div> <div class="h-4 w-px bg-zinc-800"></div> <span class="text-zinc-500">Sort by:</span> <!> <span class="ml-auto text-xs text-zinc-500"> </span></div> <ul class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"></ul> <!>',1),xr=p('<!> <section class="space-y-6"><div class="flex flex-wrap items-center justify-between gap-4"><h2 class="text-lg font-bold text-zinc-100">Tasks</h2> <!></div> <!></section>',1);function jr(rt,_){ht(_,!0);let r=G(null),O=G(!0),te=G(zt([])),K=G(!1),ne=G(null),I=G("deadline"),le=G("asc"),_e=G("all"),at=Y(()=>e(_e)==="all"?e(te):e(te).filter(i=>i.type===e(_e))),Re=Y(()=>[...e(at)].sort((i,n)=>{const v=e(le)==="asc"?1:-1;if(e(I)==="title")return(i.title||"").localeCompare(n.title||"")*v;if(e(I)==="deadline"){const m=i.deadline_at?new Date(i.deadline_at).getTime():v===1?1/0:-1/0,F=n.deadline_at?new Date(n.deadline_at).getTime():v===1?1/0:-1/0;return(m-F)*v}else if(e(I)==="completed"){const m=i.completed_at?new Date(i.completed_at).getTime():0,F=n.completed_at?new Date(n.completed_at).getTime():0;return(m-F)*v}else if(e(I)==="created"){const m=new Date(i.created_at).getTime(),F=new Date(n.created_at).getTime();return(m-F)*v}else if(e(I)==="status")return(i.status||"").localeCompare(n.status||"")*v;return 0})),it=Y(()=>e(Re).filter(i=>i.status!=="done")),We=Y(()=>e(Re).filter(i=>i.status==="done")),ot=Y(()=>e(te).filter(i=>i.status==="done").length);function st(i){e(I)===i?k(le,e(le)==="asc"?"desc":"asc",!0):(k(I,i,!0),k(le,"asc"))}Lt(()=>{Le.auth.getSession().then(({data:{session:n}})=>{k(r,n,!0),n?ce():k(O,!1)});const{data:{subscription:i}}=Le.auth.onAuthStateChange((n,v)=>{k(r,v,!0),v?ce():k(O,!1)});return()=>i.unsubscribe()});async function ce(){k(O,!0),console.log("Fetching tasks...");const{data:i,error:n}=await Le.from("tasks").select("*").order("deadline_at",{ascending:!0});!n&&i?k(te,i,!0):n&&console.error("Error fetching tasks:",n),k(O,!1)}function nt(){k(ne,null),k(K,!0)}function lt(i){k(ne,i,!0),k(K,!0)}async function ct(i){if(!await Ot("Are you sure you want to delete this task?","Delete Task",{confirmText:"Delete",isDestructive:!0}))return;const{error:v}=await Le.from("tasks").delete().eq("id",i);v?(console.error("Error deleting task:",v),Se("Error deleting: "+v.message,"Error")):(Se("Task deleted successfully!","Success"),ce())}async function Ge(i){const{id:n,...v}=i;if(e(ne)){const{error:m}=await Le.from("tasks").update(v).eq("id",e(ne).id);m?(console.error("Error updating task:",m),Se("Error updating: "+m.message,"Error")):(Se("Task updated successfully!","Success"),k(K,!1),ce())}else{const{error:m}=await Le.from("tasks").insert(v);m?(console.error("Error saving task:",m),Se("Error saving: "+m.message,"Error")):(Se("Task saved successfully!","Success"),k(K,!1),ce())}}const Ke=i=>i?new Date(i).toLocaleDateString():"—";function dt(i){switch(i){case"todo":return{bg:"bg-zinc-500/10",text:"text-zinc-400",border:"border-zinc-500/20"};case"in_progress":return{bg:"bg-indigo-500/10",text:"text-indigo-400",border:"border-indigo-500/20"};case"done":return{bg:"bg-emerald-500/10",text:"text-emerald-400",border:"border-emerald-500/20"};case"archived":return{bg:"bg-zinc-800",text:"text-zinc-500",border:"border-zinc-700"};default:return{bg:"bg-zinc-500/10",text:"text-zinc-400",border:"border-zinc-500/20"}}}function c(i){return i?i.split("_").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"Unknown"}function d(i){if(!i)return{total:0,completed:0};if(Array.isArray(i)&&i.length>0&&"items"in i[0]){let n=0,v=0;return i.forEach(m=>{m.items&&(n+=m.items.length,v+=m.items.filter(F=>F.completed).length)}),{total:n,completed:v}}return Array.isArray(i)&&i.length>0?{total:i.length,completed:i.filter(n=>n.completed).length}:{total:0,completed:0}}var y=xr(),N=W(y);ar(N,{get isOpen(){return e(K)},get entry(){return e(ne)},onClose:()=>k(K,!1),onSave:Ge});var q=o(N,2),re=a(q),je=o(a(re),2);{var V=i=>{var n=ir();n.__click=nt;var v=a(n);wt(v,{class:"h-6 w-6"}),t(n),D(m=>Ee(n,`background-color: ${m??""}`),[()=>Z.getAccentHex()]),u(i,n)};T(je,i=>{e(r)&&!e(K)&&!Et.isOpen&&i(V)})}t(re);var Oe=o(re,2);{var Ve=i=>{var n=or(),v=a(n);Nt(v,{class:"h-6 w-6 animate-spin text-indigo-400"}),t(n),u(i,n)},Me=i=>{var n=Pe(),v=W(n);{var m=ae=>{var me=sr();u(ae,me)},F=ae=>{var me=Pe(),Je=W(me);{var Be=J=>{var de=nr();u(J,de)},He=J=>{var de=mr();const xe=(S,l=xt,b=xt)=>{const M=Y(()=>dt(l().status));var B=br(),s=a(B),g=a(s),f=a(g),z=a(f),w=a(z);{var P=x=>{var h=lr();D((C,R)=>{H(h,1,C),Ee(h,R)},[()=>`h-3 w-3 rounded-full ${b()?"opacity-50":""} ${l().color.startsWith("bg-")?l().color:""}`,()=>l().color.startsWith("bg-")?"":`background-color: ${l().color}`]),u(x,h)};T(w,x=>{l().color&&x(P)})}var L=o(w,2),A=a(L,!0);t(L),t(z);var Q=o(z,2),U=a(Q),ye=a(U,!0);t(U);var X=o(U,2);{var be=x=>{var h=cr(),C=o(W(h),2),R=a(C,!0);t(C),D(fe=>{H(C,1,Mt(b()?"text-zinc-600":"text-zinc-400")),j(R,fe)},[()=>Z.getTaskType(l().type)?.label??l().type]),u(x,h)};T(X,x=>{l().type&&x(be)})}var ie=o(X,2);{var Ue=x=>{const h=Y(()=>d(l().checklist));var C=Pe(),R=W(C);{var fe=Fe=>{var _t=dr(),mt=o(W(_t),2);{let Ct=Y(()=>`h-4 w-4 ${b()?"text-zinc-600":"text-zinc-400"}`);Pt(mt,{get class(){return e(Ct)}})}var bt=o(mt,2),Tt=a(bt);t(bt),D(()=>{H(bt,1,`text-xs ${b()?"text-zinc-600":"text-zinc-500"}`),j(Tt,`${e(h).completed??""}/${e(h).total??""}`)}),u(Fe,_t)};T(R,Fe=>{e(h).total>0&&Fe(fe)})}u(x,C)};T(ie,x=>{l().checklist&&x(Ue)})}var ke=o(ie,2);{var we=x=>{var h=vr(),C=o(W(h),2);{let Fe=Y(()=>`h-4 w-4 ${b()?"text-zinc-600":"text-zinc-400"}`);Ft(C,{get class(){return e(Fe)}})}var R=o(C,2),fe=a(R,!0);t(R),D(()=>{H(R,1,`text-xs ${b()?"text-zinc-600":"text-zinc-500"}`),j(fe,l().links.length)}),u(x,h)};T(ke,x=>{l().links&&l().links.length>0&&x(we)})}t(Q),t(f),t(g);var Te=o(g,2);{var Ce=x=>{var h=ur(),C=a(h,!0);t(h),D(()=>{H(h,1,`line-clamp-3 text-sm ${b()?"text-zinc-600":"text-zinc-400"}`),j(C,l().body)}),u(x,h)};T(Te,x=>{l().body&&x(Ce)})}var Ze=o(Te,2),Ie=a(Ze),qe=a(Ie),oe=o(a(qe),2),$e=a(oe,!0);t(oe),t(qe);var se=o(qe,2);{var gt=x=>{var h=gr(),C=o(a(h),2),R=a(C,!0);t(C),t(h),D(fe=>{H(C,1,`text-xs ${b()?"text-zinc-500":"text-emerald-400"}`),j(R,fe)},[()=>Ke(l().completed_at)]),u(x,h)};T(se,x=>{l().completed_at&&x(gt)})}t(Ie);var De=o(Ie,2),et=a(De);et.__click=()=>lt(l());var E=o(et,2);E.__click=()=>ct(l().id),t(De),t(Ze),t(s),t(B),D((x,h)=>{H(B,1,`group relative flex flex-col justify-between rounded-lg border p-4 transition-all ${b()?"border-zinc-800/60 bg-zinc-900/30 text-zinc-500 hover:border-zinc-700/60 hover:bg-zinc-900/40":"border-zinc-800 bg-zinc-900/60 hover:border-zinc-700 hover:bg-zinc-900/80"}`),H(L,1,`truncate text-base font-bold ${b()?"text-zinc-500":"text-zinc-100"}`),jt(L,"title",l().title),j(A,l().title),H(U,1,`shrink-0 rounded-full px-2 py-0.5 font-medium ${e(M).bg} ${e(M).text}`),j(ye,x),H(oe,1,`text-xs ${b()?"text-zinc-500":"text-zinc-300"}`),j($e,h)},[()=>c(l().status),()=>Ke(l().deadline_at)]),u(S,B)};var he=W(de),ve=a(he),ue=o(a(ve),2),ze=a(ue);ze.value=ze.__value="all";var vt=o(ze);$(vt,17,()=>Z.settings.task_types,ee,(S,l)=>{var b=fr(),M=a(b,!0);t(b);var B={};D(()=>{j(M,e(l).label),B!==(B=e(l).id)&&(b.value=(b.__value=e(l).id)??"")}),u(S,b)}),t(ue),t(ve);var Qe=o(ve,6);$(Qe,16,()=>["title","deadline","created","status","completed"],ee,(S,l)=>{var b=pr();b.__click=()=>st(l);var M=a(b),B=a(M,!0);t(M);var s=o(M,2);{var g=f=>{var z=Pe(),w=W(z);{var P=A=>{Wt(A,{class:"h-3 w-3"})},L=A=>{Gt(A,{class:"h-3 w-3"})};T(w,A=>{e(le)==="asc"?A(P):A(L,!1)})}u(f,z)};T(s,f=>{e(I)===l&&f(g)})}t(b),D(()=>{H(b,1,`flex items-center gap-1 rounded-md px-3 py-1.5 transition-colors ${e(I)===l?"bg-indigo-500/20 text-indigo-300":"bg-zinc-800/50 text-zinc-400 hover:bg-zinc-800"}`),j(B,l)}),u(S,b)});var Xe=o(Qe,2),Ne=a(Xe);t(Xe),t(he);var ge=o(he,2);$(ge,21,()=>e(it),ee,(S,l)=>{xe(S,()=>e(l),()=>!1)}),t(ge);var Ye=o(ge,2);{var ut=S=>{var l=_r(),b=o(W(l),2);$(b,21,()=>e(We),ee,(M,B)=>{xe(M,()=>e(B),()=>!0)}),t(b),u(S,l)};T(Ye,S=>{e(We).length>0&&S(ut)})}D(()=>j(Ne,`Completed ${e(ot)??""} / ${e(te).length??""}`)),pt(ue,()=>e(_e),S=>k(_e,S)),u(J,de)};T(Je,J=>{e(te).length===0?J(Be):J(He,!1)},!0)}u(ae,me)};T(v,ae=>{e(r)?ae(F,!1):ae(m)},!0)}u(i,n)};T(Oe,i=>{e(O)&&e(r)!==null?i(Ve):i(Me,!1)})}t(q),u(rt,y),yt()}kt(["click"]);export{jr as component};
