import{c as mt,a as m,f as x}from"../chunks/DfBUW2EX.js";import{k as nt,p as At,o as Dt,D as i,A as e,F as A,a as Lt,n as r,l as Mt,t as Et,I as O,B as t,G as Ht}from"../chunks/CWKX6I-G.js";import{d as It,s as Ot}from"../chunks/CYGYm-mD.js";import{l as ft,s as gt,i as Rt}from"../chunks/dtqBgZjR.js";import{s as $,e as T,c as L,i as j,r as R,f as Vt}from"../chunks/KZ_UlTxQ.js";import{b as V}from"../chunks/BTcorzso.js";import{s as o,P as it}from"../chunks/DK3I1aua.js";import{I as _t,s as xt,a as bt}from"../chunks/CTvbdkQS.js";import{s as Bt}from"../chunks/Bkout0r_.js";import"../chunks/C4eGRuLY.js";import{L as Gt}from"../chunks/bHIvvzCn.js";import{P as ot}from"../chunks/D54pIDuW.js";import{T as rt}from"../chunks/BgaTYqli.js";function Jt(M,N){const D=ft(N,["children","$$slots","$$events","$$legacy"]);const E=[["path",{d:"M12 15V3"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["path",{d:"m7 10 5 5 5-5"}]];_t(M,gt({name:"download"},()=>D,{get iconNode(){return E},children:(H,F)=>{var S=mt(),I=nt(S);xt(I,N,"default",{}),m(H,S)},$$slots:{default:!0}}))}function Ut(M,N){const D=ft(N,["children","$$slots","$$events","$$legacy"]);const E=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];_t(M,gt({name:"save"},()=>D,{get iconNode(){return E},children:(H,F)=>{var S=mt(),I=nt(S);xt(I,N,"default",{}),m(H,S)},$$slots:{default:!0}}))}var Ft=x('<div class="flex h-48 items-center justify-center"><!></div>'),qt=x('<button class="h-6 w-6 rounded-full border border-zinc-700 transition-transform hover:scale-110 focus:ring-2 focus:ring-white focus:outline-none"></button>'),Kt=x('<div class="flex items-center gap-3"><input type="text" class="flex-1 rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" placeholder="Type Name"/> <button class="text-zinc-500 hover:text-red-400" title="Remove"><!></button></div>'),Qt=x('<button class="h-4 w-4 rounded-full border border-transparent transition-all hover:scale-110"></button>'),Wt=x('<div class="flex flex-wrap items-center gap-3 sm:flex-nowrap"><div class="min-w-[200px] flex-1"><input type="text" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" placeholder="Type Name"/></div> <div class="flex flex-wrap items-center justify-center gap-1 rounded-lg border border-zinc-700/50 bg-zinc-800/50 p-1.5 sm:justify-start"></div> <button class="text-zinc-500 hover:text-red-400" title="Remove"><!></button></div>'),Xt=x('<button class="h-4 w-4 rounded-full border border-transparent transition-all hover:scale-110"></button>'),Yt=x('<div class="flex flex-wrap items-center gap-3 sm:flex-nowrap"><div class="min-w-[200px] flex-1"><input type="text" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" placeholder="Type Name"/></div> <div class="flex flex-wrap items-center justify-center gap-1 rounded-lg border border-zinc-700/50 bg-zinc-800/50 p-1.5 sm:justify-start"></div> <button class="text-zinc-500 hover:text-red-400" title="Remove"><!></button></div>'),Zt=x('<div><label class="mb-1 block text-sm font-medium text-zinc-400 capitalize"> </label> <textarea rows="2" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div>'),te=x('<label class="relative h-6 w-6 cursor-pointer rounded-full border border-zinc-700 transition-transform focus-within:ring-2 focus-within:ring-white hover:scale-110" title="Change Color"><input type="color" class="absolute inset-0 h-full w-full cursor-pointer opacity-0"/></label>'),ee=x('<section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><h3 class="mb-4 text-lg font-semibold text-zinc-100">Global Settings</h3> <div class="space-y-6"><div class="flex items-center gap-4"><span class="text-sm font-medium text-zinc-400">Accent Color</span> <div class="flex flex-wrap gap-2"></div></div> <div class="flex items-center gap-4"><label for="transition_duration" class="text-sm font-medium text-zinc-400">Transition Duration (ms)</label> <input type="number" id="transition_duration" class="w-24 rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" min="0" step="50"/></div></div></section> <section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-lg font-semibold text-zinc-100">Art Call Types</h3> <button class="flex items-center gap-1 text-xs transition-colors hover:brightness-125"><!> Add Type</button></div> <div class="space-y-3"></div></section> <section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-lg font-semibold text-zinc-100">Project Types</h3> <button class="flex items-center gap-1 text-xs transition-colors hover:brightness-125"><!> Add Type</button></div> <div class="space-y-3"></div></section> <section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-lg font-semibold text-zinc-100">Task Types</h3> <button class="flex items-center gap-1 text-xs transition-colors hover:brightness-125"><!> Add Type</button></div> <div class="space-y-3"></div></section> <section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-lg font-semibold text-zinc-100">Daily Activity Types</h3> <div class="text-xs text-zinc-500">Comma-separated values</div></div> <div class="space-y-4"></div></section> <section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><h3 class="mb-4 text-lg font-semibold text-zinc-100">Backup Database</h3> <p class="mb-4 text-sm text-zinc-400">Download CSV backups of daily tracking, projects, art calls, notes, and tasks.</p> <button class="flex items-center gap-2 rounded-lg bg-zinc-800 px-4 py-2 text-sm font-medium text-zinc-300 transition-colors hover:bg-zinc-700 hover:text-white"><!> Backup Database</button></section> <section class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6"><div class="mb-4 flex items-center justify-between"><h3 class="text-lg font-semibold text-zinc-100">Note Colors (Palette)</h3> <div class="text-xs text-zinc-500">Edit available colors for notes</div></div> <div class="flex flex-wrap gap-2"></div></section>',1),se=x('<div class="space-y-8 pb-20"><div class="flex items-center justify-between"><h2 class="text-2xl font-bold text-zinc-100">Settings</h2> <button class="flex items-center gap-2 rounded-md px-4 py-2 text-sm font-semibold text-white shadow-sm transition-all hover:brightness-110"><!> Save Changes</button></div> <!></div>');function fe(M,N){At(N,!0);let D=Mt(!0);Dt(async()=>{await o.init(),o.settings.global_types.transition_duration===void 0&&(o.settings.global_types.transition_duration=200),Et(D,!1)});async function E(){await o.saveSettings(),bt("Settings saved successfully!","Success")}function H(){const a=Math.max(0,...o.settings.calls_types.map(n=>Number(n.id)))+1;o.settings.calls_types.push({id:a,label:"New Type"})}function F(a){o.settings.calls_types.splice(a,1)}function S(){const a=Math.max(0,...o.settings.project_types.map(n=>Number(n.id)))+1;o.settings.project_types.push({id:a,label:"New Project Type",color:"bg-zinc-500"})}function I(a){o.settings.project_types.splice(a,1)}function ht(){const a=Math.max(0,...o.settings.task_types.map(n=>Number(n.id)))+1;o.settings.task_types.push({id:String(a),label:"New Task Type",color:"bg-zinc-500"})}function yt(a){o.settings.task_types.splice(a,1)}function wt(a){if(!a||a.length===0)return"";const n=typeof a!="object"?JSON.parse(a):a,f=Object.keys(n[0]);let h=f.join(",")+`\r
`;for(let y=0;y<n.length;y++){let w="";for(const g of f){w!==""&&(w+=",");let l=n[y][g];l==null?l="":typeof l=="object"?(l=JSON.stringify(l).replace(/"/g,'""'),l=`"${l}"`):(l=String(l).replace(/"/g,'""'),l.search(/("|,|\n)/g)>=0&&(l=`"${l}"`)),w+=l}h+=w+`\r
`}return h}async function zt(){const a=["dailyTracking","projects","artCalls","notes","tasks"];for(const n of a){const{data:f,error:h}=await Bt.from(n).select("*");if(h){console.error(`Error fetching ${n}:`,h),bt(`Error backing up ${n}: ${h.message}`,"Error");continue}if(!f||f.length===0)continue;const y=wt(f),w=new Blob([y],{type:"text/csv;charset=utf-8;"}),g=document.createElement("a");g.setAttribute("href",URL.createObjectURL(w)),g.setAttribute("download",`${n}_backup_${new Date().toISOString().split("T")[0]}.csv`),g.style.visibility="hidden",document.body.appendChild(g),g.click(),document.body.removeChild(g),await new Promise(l=>setTimeout(l,500))}}var q=se(),K=e(q),B=i(e(K),2);B.__click=E;var kt=e(B);Ut(kt,{class:"h-4 w-4"}),O(),t(B),t(K);var $t=i(K,2);{var Tt=a=>{var n=Ft(),f=e(n);Gt(f,{class:"h-6 w-6 animate-spin text-indigo-400"}),t(n),m(a,n)},jt=a=>{var n=ee(),f=nt(n),h=i(e(f),2),y=e(h),w=i(e(y),2);T(w,21,()=>it,j,(u,s)=>{var d=qt();d.__click=()=>o.settings.global_types.accent=r(s).class,A(()=>{$(d,`background-color: ${r(s).hex}; ${o.settings.global_types.accent===r(s).class?"border-color: white; transform: scale(1.1);":""}`),L(d,"title",r(s).name)}),m(u,d)}),t(w),t(y);var g=i(y,2),l=i(e(g),2);R(l),t(g),t(h),t(f);var Q=i(f,2),W=e(Q),G=i(e(W),2);G.__click=H;var Nt=e(G);ot(Nt,{class:"h-4 w-4"}),O(),t(G),t(W);var ct=i(W,2);T(ct,21,()=>o.settings.calls_types,j,(u,s,d)=>{var c=Kt(),p=e(c);R(p);var v=i(p,2);v.__click=()=>F(d);var b=e(v);rt(b,{class:"h-4 w-4"}),t(v),t(c),V(p,()=>r(s).label,_=>r(s).label=_),m(u,c)}),t(ct),t(Q);var X=i(Q,2),Y=e(X),J=i(e(Y),2);J.__click=S;var St=e(J);ot(St,{class:"h-4 w-4"}),O(),t(J),t(Y);var lt=i(Y,2);T(lt,21,()=>o.settings.project_types,j,(u,s,d)=>{var c=Wt(),p=e(c),v=e(p);R(v),t(p);var b=i(p,2);T(b,21,()=>it,j,(P,z)=>{var k=Qt();k.__click=()=>r(s).color=r(z).class,A(()=>{$(k,`background-color: ${r(z).hex}; ${r(s).color===r(z).class?"border-color: white; transform: scale(1.2);":"opacity-60 hover:opacity-100"}`),L(k,"title",r(z).name)}),m(P,k)}),t(b);var _=i(b,2);_.__click=()=>I(d);var C=e(_);rt(C,{class:"h-4 w-4"}),t(_),t(c),V(v,()=>r(s).label,P=>r(s).label=P),m(u,c)}),t(lt),t(X);var Z=i(X,2),tt=e(Z),U=i(e(tt),2);U.__click=ht;var Ct=e(U);ot(Ct,{class:"h-4 w-4"}),O(),t(U),t(tt);var dt=i(tt,2);T(dt,21,()=>o.settings.task_types,j,(u,s,d)=>{var c=Yt(),p=e(c),v=e(p);R(v),t(p);var b=i(p,2);T(b,21,()=>it,j,(P,z)=>{var k=Xt();k.__click=()=>r(s).color=r(z).class,A(()=>{$(k,`background-color: ${r(z).hex}; ${r(s).color===r(z).class?"border-color: white; transform: scale(1.2);":"opacity-60 hover:opacity-100"}`),L(k,"title",r(z).name)}),m(P,k)}),t(b);var _=i(b,2);_.__click=()=>yt(d);var C=e(_);rt(C,{class:"h-4 w-4"}),t(_),t(c),V(v,()=>r(s).label,P=>r(s).label=P),m(u,c)}),t(dt),t(Z);var et=i(Z,2),vt=i(e(et),2);T(vt,20,()=>["work","study","culture","art","music","exercise","leisure"],j,(u,s)=>{var d=Zt(),c=e(d),p=e(c,!0);t(c);var v=i(c,2);Ht(v),v.__input=b=>{const _=b.target.value;o.settings.daily_type[s]=_.split(",").map(C=>C.trim()).filter(C=>C.length>0)},L(v,"placeholder","e.g. Type 1, Type 2"),t(d),A(b=>{L(c,"for",`daily_${s}`),Ot(p,s),L(v,"id",`daily_${s}`),Vt(v,b)},[()=>o.settings.daily_type[s]?.join(", ")||""]),m(u,d)}),t(vt),t(et);var st=i(et,2),at=i(e(st),4);at.__click=zt;var Pt=e(at);Jt(Pt,{class:"h-4 w-4"}),O(),t(at),t(st);var pt=i(st,2),ut=i(e(pt),2);T(ut,21,()=>o.settings.notes_types,j,(u,s,d)=>{var c=te(),p=e(c);R(p),t(c),A(()=>$(c,`background-color: ${r(s).color};`)),V(p,()=>r(s).color,v=>r(s).color=v),m(u,c)}),t(ut),t(pt),A((u,s,d)=>{$(G,`color: ${u??""}`),$(J,`color: ${s??""}`),$(U,`color: ${d??""}`)},[()=>o.getAccentLightHex(),()=>o.getAccentLightHex(),()=>o.getAccentLightHex()]),V(l,()=>o.settings.global_types.transition_duration,u=>o.settings.global_types.transition_duration=u),m(a,n)};Rt($t,a=>{r(D)?a(Tt):a(jt,!1)})}t(q),A(a=>$(B,`background-color: ${a??""}`),[()=>o.getAccentHex()]),m(M,q),Lt()}It(["click","input"]);export{fe as component};
