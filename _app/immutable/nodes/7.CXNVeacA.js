import{b as pe,d as Me,c as fe,a as g,f as z}from"../chunks/B-wedEgi.js";import{F as D,h as xe,b as we,W as Oe,X as Te,i as ye,C as je,e as Be,Y as He,Z as Le,f as Re,g as te,p as Ne,l as j,m as qe,y as Pe,t as b,k as X,a as Ce,z as s,A as o,B as n,D as Fe,n as e,o as Ie,I as ze}from"../chunks/DXU5jnQ_.js";import{d as Ee,s as Z,e as Ye}from"../chunks/CKrhTcXd.js";import{i as S}from"../chunks/1UUrSLx-.js";import{e as be,s as oe,i as me}from"../chunks/JHaZoCpa.js";import{r as ke,g as Ke,a as G,t as Ve,e as T,f as We,c as Xe,d as Ze}from"../chunks/CpFvtbVR.js";import{s as W}from"../chunks/BW5xtwr9.js";import{b as ue,P as Ge}from"../chunks/jmEW5wUa.js";import{f as Je}from"../chunks/BsCRBkET.js";import{d as re}from"../chunks/Ban-EeZC.js";import{A as Qe}from"../chunks/bmutvh7m.js";import{A as Ue}from"../chunks/QpLyY0R8.js";function $e(B,c,i=!1,k=!1,w=!1){var x=B,u="";D(()=>{var _=Oe;if(u===(u=c()??"")){xe&&we();return}if(_.nodes!==null&&(Te(_.nodes.start,_.nodes.end),_.nodes=null),u!==""){if(xe){ye.data;for(var m=we(),v=m;m!==null&&(m.nodeType!==je||m.data!=="");)v=m,m=Be(m);if(m===null)throw He(),Le;pe(ye,v),x=Re(m);return}var f=u+"";i?f=`<svg>${f}</svg>`:k&&(f=`<math>${f}</math>`);var h=Me(f);if((i||k)&&(h=te(h)),pe(te(h),h.lastChild),i||k)for(;te(h);)x.before(te(h));else x.before(h)}})}var et=z('<button type="button" class="h-8 w-8 rounded-full border border-zinc-700 transition-transform hover:scale-110 focus:ring-2 focus:ring-zinc-400 focus:outline-none"></button>'),tt=z('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div><label for="title" class="mb-1 block text-sm font-medium text-zinc-400">Title</label> <input type="text" id="title" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="body" class="mb-1 block text-sm font-medium text-zinc-400">Body</label> <textarea id="body" rows="10" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div><label for="color" class="mb-1 block text-sm font-medium text-zinc-400">Color</label> <div class="flex flex-wrap gap-2"></div> <input type="hidden" name="color"/></div> <div class="sticky bottom-0 mt-6 flex justify-end gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700">Cancel</button> <button type="submit" class="rounded-md px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm transition-all hover:brightness-110 focus-visible:outline-2 focus-visible:outline-offset-2">Save</button></div></form></div></div>');function rt(B,c){Ne(c,!0);let i=j(qe({title:"",body:"",color:"#18181b"}));Pe(()=>{c.isOpen&&(c.entry?b(i,{title:c.entry.title||"",body:c.entry.body||"",color:c.entry.color||"#18181b"},!0):b(i,{title:"",body:"",color:"#18181b"},!0))});function k(v){v.preventDefault(),c.onSave(e(i))}function w(v){v.target===v.currentTarget&&c.onClose()}function x(v){v.key==="Escape"&&c.onClose()}var u=fe(),_=X(u);{var m=v=>{var f=tt();f.__click=w,f.__keydown=x;var h=s(f),H=s(h),L=s(H),ae=s(L,!0);o(L);var se=n(L,2);se.__click=function(...r){c.onClose?.apply(this,r)},o(H);var A=n(H,2),M=s(A),R=n(s(M),2);ke(R),o(M);var C=n(M,2),J=n(s(C),2);Fe(J),o(C);var q=n(C,2),P=n(s(q),2);be(P,21,()=>G.settings.notes_types,me,(r,d)=>{var l=et();l.__click=()=>e(i).color=e(d).color??"#18181b",D(()=>{oe(l,`background-color: ${e(d).color??""}; ${e(i).color===e(d).color?"border-color: white; transform: scale(1.1);":""}`),Ke(l,"aria-label",`Select color ${e(d).color??""}`)}),g(r,l)}),o(P);var Q=n(P,2);ke(Q),o(q);var U=n(q,2),t=s(U);t.__click=function(...r){c.onClose?.apply(this,r)};var a=n(t,2);o(U),o(A),o(h),o(f),D(r=>{Z(ae,c.entry?"Edit Note":"New Note"),oe(a,`background-color: ${r??""}`)},[()=>G.getAccentHex()]),Ye("submit",A,k),ue(R,()=>e(i).title,r=>e(i).title=r),ue(J,()=>e(i).body,r=>e(i).body=r),ue(Q,()=>e(i).color,r=>e(i).color=r),Ve(3,f,()=>Je,()=>({duration:G.getTransitionDuration()})),g(v,f)};S(_,v=>{c.isOpen&&v(m)})}g(B,u),Ce()}Ee(["click","keydown"]);var ot=z('<button class="fixed right-8 bottom-8 z-50 rounded-full p-4 shadow-lg/30 drop-shadow-lg backdrop-blur-md transition-all hover:scale-105 hover:brightness-110 md:right-16 md:bottom-16" aria-label="New Note"><!></button>'),at=z('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">Sign in to view notes.</div>'),st=z('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">No notes yet.</div>'),it=z('<button><span class="capitalize"> </span> <!></button>'),nt=z('<div class="prose prose-sm max-w-none wrap-break-word text-zinc-300 prose-invert"><!></div>'),lt=z('<li class="group relative flex flex-col gap-4 rounded-lg border border-zinc-800 p-4 transition-all hover:border-zinc-700 hover:shadow-lg"><div class="flex flex-col gap-3"><h3 class="wrap-break-words text-lg font-bold text-zinc-100"> </h3> <!></div> <div class="mt-auto flex items-center justify-between gap-4 border-t border-zinc-800/50 pt-3"><div class="text-xs text-zinc-400/70"> </div> <div class="flex items-center gap-2"><button class="rounded-md p-2 text-indigo-400 transition-colors hover:bg-black/20 hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="rounded-md p-2 text-red-400 transition-colors hover:bg-black/20 hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div></li>'),ct=z('<div class="mb-4 flex flex-wrap items-center gap-4 text-sm"><span class="text-zinc-500">Sort by:</span> <!> <span class="ml-auto text-xs text-zinc-500"> </span></div> <ul class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"></ul>',1),dt=z('<!> <section class="space-y-6"><div class="flex flex-wrap items-center justify-between gap-4"><!></div> <!></section>',1);function zt(B,c){Ne(c,!0);let i=j(null),k=ze(()=>re.notes),w=j(!1),x=j(null),u=j("created"),_=j("desc"),m=ze(()=>[...e(k)].sort((t,a)=>{const r=e(_)==="asc"?1:-1;if(e(u)==="title")return(t.title||"").localeCompare(a.title||"")*r;if(e(u)==="created"){const d=new Date(t.created_at).getTime(),l=new Date(a.created_at).getTime();return(d-l)*r}return 0}));function v(t){e(u)===t?b(_,e(_)==="asc"?"desc":"asc",!0):(b(u,t,!0),b(_,"desc"))}Ie(()=>{W.auth.getSession().then(({data:{session:a}})=>{b(i,a,!0)});const{data:{subscription:t}}=W.auth.onAuthStateChange((a,r)=>{b(i,r,!0)});return()=>t.unsubscribe()});function f(){b(x,null),b(w,!0)}function h(t){b(x,t,!0),b(w,!0)}async function H(t){if(!await Ze("Are you sure you want to delete this note?","Delete Note",{confirmText:"Delete",isDestructive:!0}))return;const{error:r}=await W.from("notes").delete().eq("id",t);r?(console.error("Error deleting note:",r),T("Error deleting: "+r.message,"Error")):(T("Note deleted successfully!","Success"),re.deleteNote(t))}async function L(t){const{id:a,...r}=t;if(e(x)){const{data:d,error:l}=await W.from("notes").update(r).eq("id",e(x).id).select().single();l?(console.error("Error updating note:",l),T("Error updating: "+l.message,"Error")):(T("Note updated successfully!","Success"),b(w,!1),d&&re.updateNote(d))}else{const{data:d,error:l}=await W.from("notes").insert(r).select().single();l?(console.error("Error saving note:",l),T("Error saving: "+l.message,"Error")):(T("Note saved successfully!","Success"),b(w,!1),d&&re.addNote(d))}}function ae(t){return t?t.replace(/\n/g,"<br>"):""}function se(t,a=50){return t?t.length>a?t.slice(0,a)+"...":t:""}var A=dt(),M=X(A);rt(M,{get isOpen(){return e(w)},get entry(){return e(x)},onClose:()=>b(w,!1),onSave:L});var R=n(M,2),C=s(R),J=s(C);{var q=t=>{var a=ot();a.__click=f;var r=s(a);Ge(r,{class:"h-6 w-6 text-(--accent-color)"}),o(a),D((d,l)=>oe(a,`--accent-color: ${d??""}; background-color: ${l??""}/50`),[()=>G.getAccentLightHex(),()=>G.getAccentHex()]),g(t,a)};S(J,t=>{e(i)&&!e(w)&&!We.isOpen&&t(q)})}o(C);var P=n(C,2);{var Q=t=>{var a=at();g(t,a)},U=t=>{var a=fe(),r=X(a);{var d=O=>{var $=st();g(O,$)},l=O=>{var $=ct(),ie=X($),ge=n(s(ie),2);be(ge,16,()=>["created","title"],me,(ne,p)=>{var y=it();y.__click=()=>v(p);var E=s(y),F=s(E,!0);o(E);var le=n(E,2);{var ce=I=>{var Y=fe(),K=X(Y);{var de=N=>{Qe(N,{class:"h-3 w-3"})},ee=N=>{Ue(N,{class:"h-3 w-3"})};S(K,N=>{e(_)==="asc"?N(de):N(ee,!1)})}g(I,Y)};S(le,I=>{e(u)===p&&I(ce)})}o(y),D(()=>{Xe(y,1,`flex items-center gap-1 rounded-md px-3 py-1.5 transition-colors ${e(u)===p?"bg-indigo-500/20 text-indigo-300":"bg-zinc-800/50 text-zinc-400 hover:bg-zinc-800"}`),Z(F,p)}),g(ne,y)});var _e=n(ge,2),Se=s(_e);o(_e),o(ie);var he=n(ie,2);be(he,21,()=>e(m),me,(ne,p)=>{var y=lt(),E=s(y),F=s(E),le=s(F,!0);o(F);var ce=n(F,2);{var I=V=>{var ve=nt(),Ae=s(ve);$e(Ae,()=>ae(se(e(p).body))),o(ve),g(V,ve)};S(ce,V=>{e(p).body&&V(I)})}o(E);var Y=n(E,2),K=s(Y),de=s(K,!0);o(K);var ee=n(K,2),N=s(ee);N.__click=()=>h(e(p));var De=n(N,2);De.__click=()=>H(e(p).id),o(ee),o(Y),o(y),D(V=>{oe(y,`background-color: ${(e(p).color||"#18181b")??""}`),Z(le,e(p).title),Z(de,V)},[()=>new Date(e(p).created_at).toLocaleDateString()]),g(ne,y)}),o(he),D(()=>Z(Se,`Amount of notes: ${e(k).length??""}`)),g(O,$)};S(r,O=>{e(k).length===0?O(d):O(l,!1)},!0)}g(t,a)};S(P,t=>{e(i)?t(U,!1):t(Q)})}o(R),g(B,A),Ce()}Ee(["click"]);export{zt as component};
