import{c as kt,a as c,f as u}from"../chunks/DfBUW2EX.js";import{k as K,p as qe,l as nt,m as Ge,z as Je,t as w,a as Ue,A as r,B as e,D as a,G as Qe,F as P,n as t,I as Xe,o as Ze,K as _t,J as He}from"../chunks/CWKX6I-G.js";import{d as We,s as M,e as ye}from"../chunks/CYGYm-mD.js";import{l as $e,s as tr,i as y}from"../chunks/dtqBgZjR.js";import{r as xt,e as it,i as st,s as ot,b as Be,a as A,c as er,d as Ie}from"../chunks/KZ_UlTxQ.js";import{s as Jt}from"../chunks/Bkout0r_.js";import{s as Dt}from"../chunks/DK3I1aua.js";import{t as rr,f as ar}from"../chunks/BPxw6sm7.js";import{b as at}from"../chunks/BTcorzso.js";import{T as Oe}from"../chunks/BgaTYqli.js";import{G as nr,S as ir,E as sr,L as or,a as lr}from"../chunks/JaV54Xw5.js";import{P as Re}from"../chunks/D54pIDuW.js";import{S as cr}from"../chunks/BfiE4ywc.js";import{I as dr,s as vr,a as Qt,b as ur,c as gr}from"../chunks/CTvbdkQS.js";import{L as fr}from"../chunks/bHIvvzCn.js";import{L as mr}from"../chunks/lbHAIo4T.js";import"../chunks/C4eGRuLY.js";import{A as pr,a as br}from"../chunks/DScW-YBI.js";function _r(Xt,g){const i=$e(g,["children","$$slots","$$events","$$legacy"]);const N=[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}]];dr(Xt,tr({name:"calendar"},()=>i,{get iconNode(){return N},children:(lt,ht)=>{var W=kt(),ct=K(W);vr(ct,g,"default",{}),c(lt,W)},$$slots:{default:!0}}))}var xr=u("<option> </option>"),hr=u("<div></div>"),wr=u('<div class="flex items-center gap-2"><button type="button" class="text-zinc-400 hover:text-zinc-200"><!></button> <input type="text" placeholder="Item description..."/> <div class="flex items-center gap-1"><div role="button" tabindex="0" class="cursor-grab p-1 text-zinc-600 hover:text-zinc-400 active:cursor-grabbing" draggable="true"><!></div> <button type="button" class="p-1 text-zinc-500 hover:text-red-400"><!></button></div></div>'),zr=u('<div class="rounded-lg border border-zinc-800 bg-zinc-800/30 p-4"><div class="mb-3 flex items-center justify-between gap-2"><input type="text" placeholder="Checklist Title" class="w-full bg-transparent text-sm font-bold text-zinc-200 placeholder-zinc-600 focus:outline-none"/> <button type="button" class="text-zinc-600 hover:text-red-400" title="Remove Checklist"><!></button></div> <div class="space-y-2"><!> <button type="button" class="mt-2 flex items-center gap-1 text-xs text-zinc-500 hover:text-zinc-300"><!> Add Item</button></div></div>'),yr=u('<div class="space-y-6"></div>'),kr=u('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No checklists yet</p></div>'),Dr=u('<div class="flex items-center gap-2"><div class="grid flex-1 grid-cols-1 gap-2 md:grid-cols-2"><input type="text" placeholder="Label (optional)" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/> <input type="text" placeholder="URL" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <button type="button" class="p-2 text-zinc-400 hover:text-indigo-400" title="Open Link"><!></button> <button type="button" class="p-2 text-zinc-400 hover:text-red-400" title="Remove Link"><!></button></div>'),Cr=u('<div class="space-y-2"></div>'),Sr=u('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No links yet</p></div>'),Tr=u('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div><label for="name" class="mb-1 block text-sm font-medium text-zinc-400">Name</label> <input type="text" id="name" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="description" class="mb-1 block text-sm font-medium text-zinc-400">Description</label> <textarea id="description" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="status" class="mb-1 block text-sm font-medium text-zinc-400">Status</label> <select id="status" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Not Started</option><option>In Progress</option><option>Postponed</option><option>Completed</option><option>Cancelled</option></select></div> <div><label for="funds" class="mb-1 block text-sm font-medium text-zinc-400">Funds (€)</label> <input type="number" id="funds" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="percentage" class="mb-1 block text-sm font-medium text-zinc-400"> </label> <input type="range" id="percentage" min="0" max="100" class="h-2 w-full cursor-pointer appearance-none rounded-lg bg-zinc-700 accent-indigo-500"/></div> <div><label for="type" class="mb-1 block text-sm font-medium text-zinc-400">Type</label> <div class="flex items-center gap-2"><select id="type" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Select Type</option><!></select> <!></div></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="start_at" class="mb-1 block text-sm font-medium text-zinc-400">Start Date</label> <input type="date" id="start_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="end_at" class="mb-1 block text-sm font-medium text-zinc-400">End Date</label> <input type="date" id="end_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Checklists</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Checklist</button></div> <!></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Links</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Link</button></div> <!></div> <div class="sticky bottom-0 mt-6 flex justify-end gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700">Cancel</button> <button type="submit" class="rounded-md px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm transition-all hover:brightness-110 focus-visible:outline-2 focus-visible:outline-offset-2">Save</button></div></form></div></div>');function Lr(Xt,g){qe(g,!0);let i=nt(Ge({name:"",description:"",funds:null,status:0,type:null,percentage:0,start_at:"",end_at:"",colour:"bg-indigo-600",checklist:[],links:[]})),N=nt(null);Je(()=>{g.isOpen&&(g.entry?w(i,{name:g.entry.name||"",description:g.entry.description||"",funds:g.entry.funds,status:g.entry.status??0,type:g.entry.type??null,percentage:g.entry.percentage??0,start_at:g.entry.start_at?new Date(g.entry.start_at).toISOString().split("T")[0]:"",end_at:g.entry.end_at?new Date(g.entry.end_at).toISOString().split("T")[0]:"",colour:g.entry.colour||"bg-indigo-600",checklist:Array.isArray(g.entry.checklist)?g.entry.checklist:[],links:Array.isArray(g.entry.links)?g.entry.links:[]},!0):w(i,{name:"",description:"",funds:null,status:0,type:null,percentage:0,start_at:"",end_at:"",colour:"bg-indigo-600",checklist:[],links:[]},!0))});function lt(){if(t(i).type){const d=Dt.getProjectType(t(i).type);d&&d.color&&(t(i).colour=d.color)}}function ht(d){d.preventDefault(),g.onSave(t(i))}function W(d){d.target===d.currentTarget&&g.onClose()}function ct(d){d.key==="Escape"&&g.onClose()}function Ct(){t(i).checklist=[...t(i).checklist,{id:crypto.randomUUID(),title:"New Checklist",items:[]}]}function dt(d){t(i).checklist=t(i).checklist.filter((f,z)=>z!==d)}function St(d){const f=t(i).checklist[d];f.items=[...f.items,{text:"",completed:!1}],t(i).checklist[d]=f}function Zt(d,f){const z=t(i).checklist[d];z.items=z.items.filter((J,$)=>$!==f),t(i).checklist[d]=z}function ke(d,f){const z=t(i).checklist[d];z.items[f].completed=!z.items[f].completed,t(i).checklist[d]=z}function me(d,f,z){w(N,{listIndex:f,itemIndex:z},!0),d.dataTransfer&&(d.dataTransfer.effectAllowed="move",d.dataTransfer.dropEffect="move")}function De(d,f,z){if(d.preventDefault(),!t(N)||t(N).listIndex!==f||t(N).itemIndex===z)return;const J=t(i).checklist[f],$=t(N).itemIndex,Ht=z,Bt=J.items[$],tt=[...J.items];tt.splice($,1),tt.splice(Ht,0,Bt),J.items=tt,t(i).checklist[f]=J,t(N).itemIndex=Ht}function F(){w(N,null)}function Ce(){t(i).links=[...t(i).links,{url:"",label:""}]}function Se(d){t(i).links=t(i).links.filter((f,z)=>z!==d)}function Tt(d){if(!d)return;let f=d;/^https?:\/\//i.test(f)||(f="https://"+f),window.open(f,"_blank","noopener,noreferrer")}var pe=kt(),Te=K(pe);{var Le=d=>{var f=Tr();f.__click=W,f.__keydown=ct;var z=r(f),J=r(z),$=r(J),Ht=r($,!0);e($);var Bt=a($,2);Bt.__click=function(...s){g.onClose?.apply(this,s)},e(J);var tt=a(J,2),It=r(tt),qt=a(r(It),2);xt(qt),e(It);var $t=a(It,2),be=a(r($t),2);Qe(be),e($t);var te=a($t,2),ee=r(te),re=a(r(ee),2),n=r(re);n.value=n.__value=0;var l=a(n);l.value=l.__value=1;var m=a(l);m.value=m.__value=2;var b=a(m);b.value=b.__value=3;var S=a(b);S.value=S.__value=4,e(re),e(ee);var E=a(ee,2),H=a(r(E),2);xt(H),e(E),e(te);var B=a(te,2),T=r(B),ae=r(T),wt=r(ae);e(ae);var Lt=a(ae,2);xt(Lt),e(T);var Gt=a(T,2),Ut=a(r(Gt),2),At=r(Ut);At.__change=lt;var Wt=r(At);Wt.value=(Wt.__value=null)??"";var ne=a(Wt);it(ne,17,()=>Dt.settings.project_types,st,(s,v)=>{var k=xr(),D=r(k,!0);e(k);var O={};P(()=>{M(D,t(v).label),O!==(O=t(v).id)&&(k.value=(k.__value=t(v).id)??"")}),c(s,k)}),e(At);var Ae=a(At,2);{var _e=s=>{var v=hr();let k;P(D=>{k=A(v,1,"h-8 w-8 flex-shrink-0 rounded-full border border-zinc-600 shadow-sm",null,k,{"bg-zinc-500":t(i).colour==="bg-zinc-500","bg-red-600":t(i).colour==="bg-red-600","bg-orange-600":t(i).colour==="bg-orange-600","bg-amber-500":t(i).colour==="bg-amber-500","bg-green-600":t(i).colour==="bg-green-600","bg-emerald-500":t(i).colour==="bg-emerald-500","bg-teal-500":t(i).colour==="bg-teal-500","bg-cyan-500":t(i).colour==="bg-cyan-500","bg-blue-600":t(i).colour==="bg-blue-600","bg-indigo-600":t(i).colour==="bg-indigo-600","bg-violet-600":t(i).colour==="bg-violet-600","bg-purple-600":t(i).colour==="bg-purple-600","bg-fuchsia-600":t(i).colour==="bg-fuchsia-600","bg-pink-600":t(i).colour==="bg-pink-600","bg-rose-600":t(i).colour==="bg-rose-600"}),ot(v,D)},[()=>t(i).colour.startsWith("#")?`background-color: ${t(i).colour}`:""]),c(s,v)};y(Ae,s=>{t(i).colour&&s(_e)})}e(Ut),e(Gt),e(B);var vt=a(B,2),ie=r(vt),Pt=a(r(ie),2);xt(Pt),e(ie);var xe=a(ie,2),he=a(r(xe),2);xt(he),e(xe),e(vt);var se=a(vt,2),oe=r(se),Q=a(r(oe),2);Q.__click=Ct,e(oe);var I=a(oe,2);{var q=s=>{var v=yr();it(v,21,()=>t(i).checklist,st,(k,D,O)=>{var Z=zr(),V=r(Z),U=r(V);xt(U);var rt=a(U,2);rt.__click=()=>dt(O);var ut=r(rt);Oe(ut,{class:"h-4 w-4"}),e(rt),e(V);var zt=a(V,2),gt=r(zt);it(gt,17,()=>t(D).items,st,(Rt,Mt,Nt)=>{var Vt=wr(),yt=r(Vt);yt.__click=()=>ke(O,Nt);var le=r(yt);{var ce=p=>{cr(p,{class:"h-5 w-5 text-emerald-500"})},Pe=p=>{ir(p,{class:"h-5 w-5"})};y(le,p=>{t(Mt).completed?p(ce):p(Pe,!1)})}e(yt);var Yt=a(yt,2);xt(Yt);var we=a(Yt,2),mt=r(we),ze=r(mt);nr(ze,{class:"h-4 w-4"}),e(mt);var de=a(mt,2);de.__click=()=>Zt(O,Nt);var L=r(de);Oe(L,{class:"h-3 w-3"}),e(de),e(we),e(Vt),P(()=>A(Yt,1,`w-full rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 ${t(Mt).completed?"text-zinc-500 line-through":""}`)),at(Yt,()=>t(Mt).text,p=>t(Mt).text=p),ye("dragstart",mt,p=>me(p,O,Nt)),ye("dragover",mt,p=>De(p,O,Nt)),ye("dragend",mt,F),c(Rt,Vt)});var ft=a(gt,2);ft.__click=()=>St(O);var Et=r(ft);Re(Et,{class:"h-3 w-3"}),Xe(),e(ft),e(zt),e(Z),at(U,()=>t(D).title,Rt=>t(D).title=Rt),c(k,Z)}),e(v),c(s,v)},G=s=>{var v=kr();c(s,v)};y(I,s=>{t(i).checklist&&t(i).checklist.length>0?s(q):s(G,!1)})}e(se);var X=a(se,2),et=r(X),j=a(r(et),2);j.__click=Ce,e(et);var o=a(et,2);{var h=s=>{var v=Cr();it(v,21,()=>t(i).links,st,(k,D,O)=>{var Z=Dr(),V=r(Z),U=r(V);xt(U);var rt=a(U,2);xt(rt),e(V);var ut=a(V,2);ut.__click=()=>Tt(t(D).url);var zt=r(ut);sr(zt,{class:"h-4 w-4"}),e(ut);var gt=a(ut,2);gt.__click=()=>Se(O);var ft=r(gt);Oe(ft,{class:"h-4 w-4"}),e(gt),e(Z),P(()=>ut.disabled=!t(D).url),at(U,()=>t(D).label,Et=>t(D).label=Et),at(rt,()=>t(D).url,Et=>t(D).url=Et),c(k,Z)}),e(v),c(s,v)},R=s=>{var v=Sr();c(s,v)};y(o,s=>{t(i).links&&t(i).links.length>0?s(h):s(R,!1)})}e(X);var C=a(X,2),x=r(C);x.__click=function(...s){g.onClose?.apply(this,s)};var _=a(x,2);e(C),e(tt),e(z),e(f),P((s,v,k)=>{M(Ht,g.entry?"Edit Project":"New Project"),M(wt,`Progress (${t(i).percentage??""}%)`),ot(Q,`color: ${s??""}`),ot(j,`color: ${v??""}`),ot(_,`background-color: ${k??""}`)},[()=>Dt.getAccentLightHex(),()=>Dt.getAccentLightHex(),()=>Dt.getAccentHex()]),ye("submit",tt,ht),at(qt,()=>t(i).name,s=>t(i).name=s),at(be,()=>t(i).description,s=>t(i).description=s),Be(re,()=>t(i).status,s=>t(i).status=s),at(H,()=>t(i).funds,s=>t(i).funds=s),at(Lt,()=>t(i).percentage,s=>t(i).percentage=s),Be(At,()=>t(i).type,s=>t(i).type=s),at(Pt,()=>t(i).start_at,s=>t(i).start_at=s),at(he,()=>t(i).end_at,s=>t(i).end_at=s),rr(3,f,()=>ar,()=>({duration:Dt.getTransitionDuration()})),c(d,f)};y(Te,d=>{g.isOpen&&d(Le)})}c(Xt,pe),Ue()}We(["click","keydown","change"]);var Ar=u('<button class="fixed right-8 bottom-8 z-50 rounded-full p-4 text-white shadow-lg transition-all hover:scale-105 hover:brightness-110" aria-label="New Project"><!></button>'),Pr=u('<div class="flex h-48 items-center justify-center"><!></div>'),Er=u('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">Sign in to view projects.</div>'),Mr=u('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">No projects yet.</div>'),Nr=u('<button><span class="capitalize"> </span> <!></button>'),jr=u("<p> </p>"),Or=u('<div class="flex items-center gap-2 text-xs text-zinc-500"><span> </span></div>'),Fr=u('<div class="flex items-center gap-1"><!> <span> </span></div>'),Hr=u('<div class="flex items-center gap-1"><!> <span> </span></div>'),Br=u('<div class="flex items-center gap-3 text-xs text-zinc-500"><!> <!></div>'),Ir=u('<div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Dates</span> <span> </span></div>'),qr=u('<li><div class="flex flex-col gap-4 md:flex-row md:items-start md:justify-between"><div class="flex min-w-0 flex-1 flex-col gap-2"><h3> </h3> <!> <!></div> <div class="flex w-full shrink-0 flex-col gap-2 md:w-56"><div class="flex justify-end"><span> </span></div> <div class="flex items-center justify-between"><span>Progress</span> <span> </span></div> <div class="h-2 w-full overflow-hidden rounded-full bg-zinc-800"><div></div></div></div></div> <div class="flex flex-wrap items-end justify-between gap-4 border-t border-zinc-800/50 pt-3"><div class="flex items-center gap-6"><div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Funds</span> <span> </span></div> <!></div> <div class="flex items-center gap-2"><button class="rounded-md p-2 text-indigo-400 transition-colors hover:bg-zinc-800 hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="rounded-md p-2 text-red-400 transition-colors hover:bg-zinc-800 hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div></li>'),Gr=u('<div class="my-8 flex items-center gap-4"><div class="h-px flex-1 bg-zinc-800"></div> <span class="text-sm font-medium tracking-wider text-zinc-500 uppercase">Archived</span> <div class="h-px flex-1 bg-zinc-800"></div></div> <ul class="grid grid-cols-1 gap-4"></ul>',1),Ur=u('<ul class="grid grid-cols-1 gap-4"></ul> <!>',1),Wr=u('<div class="absolute top-8 bottom-0 border-l border-dashed border-zinc-800"></div>'),Rr=u('<div class="absolute -translate-x-1/2 transform text-center"> </div>'),Vr=u('<div class="group relative h-10 w-full rounded transition-colors hover:bg-zinc-800/30"><div class="absolute top-1 flex flex-col gap-1"><div></div> <span class="px-0.5 text-[10px] font-medium whitespace-nowrap text-zinc-400"> </span></div></div>'),Yr=u('<div class="p-4 text-center text-zinc-500">No projects with dates to display.</div>'),Kr=u('<div class="w-full overflow-x-auto rounded-lg border border-zinc-800 bg-zinc-900/60 p-4"><div class="relative min-w-[800px]"><div class="pointer-events-none absolute inset-0"></div> <div class="relative z-10 mb-4 flex border-b border-zinc-800 pb-2 text-xs font-medium text-zinc-500"><div class="relative h-6 flex-1"></div></div> <div class="space-y-3"><!> <!></div></div></div>'),Jr=u('<div class="mb-4 flex flex-wrap items-center justify-between gap-4 text-sm"><div class="flex flex-wrap items-center gap-4"><span class="text-zinc-500">Sort by:</span> <!></div> <div class="flex items-center gap-4"><span class="text-xs text-zinc-500"> </span> <div class="flex items-center rounded-lg bg-zinc-800/50 p-1"><button aria-label="List View"><!></button> <button aria-label="Gantt View"><!></button></div></div></div> <!>',1),Qr=u('<!> <section class="space-y-6"><div class="flex flex-wrap items-center justify-between gap-4"><h2 class="text-lg font-bold text-zinc-100">Projects</h2> <!></div> <!></section>',1);function ma(Xt,g){qe(g,!0);const i={0:"Not Started",1:"In Progress",2:"Postponed",3:"Completed",4:"Cancelled"};let N=nt(null),lt=nt(!0),ht=nt(Ge([])),W=nt(!1),ct=nt(null),Ct=nt("list"),dt=nt("date"),St=nt("desc"),Zt=_t(()=>[...t(ht)].sort((n,l)=>{const m=t(St)==="asc"?1:-1;if(t(dt)==="name")return n.name.localeCompare(l.name)*m;if(t(dt)==="date"){const b=new Date(n.created_at).getTime(),S=new Date(l.created_at).getTime();return(b-S)*m}else if(t(dt)==="progress")return((n.percentage||0)-(l.percentage||0))*m;return 0})),ke=_t(()=>t(Zt).filter(n=>n.status!==3&&n.status!==4)),me=_t(()=>t(Zt).filter(n=>n.status===3||n.status===4)),De=_t(()=>t(ht).filter(n=>n.status===3).length),F=_t(()=>{const n=t(Zt).filter(T=>T.start_at&&T.end_at);if(n.length===0){const T=new Date;return{start:new Date(T.getFullYear(),0,1),end:new Date(T.getFullYear(),11,31),projects:[],months:[]}}const l=n.flatMap(T=>[new Date(T.start_at),new Date(T.end_at)]),m=new Date(Math.min(...l.map(T=>T.getTime()))),b=new Date(Math.max(...l.map(T=>T.getTime()))),S=new Date(m);S.setDate(S.getDate()-7);const E=new Date(b);E.setDate(E.getDate()+7);const H=[],B=new Date(S);for(B.setDate(1);B<=E;)H.push(new Date(B)),B.setMonth(B.getMonth()+1);return H.length===0&&H.push(new Date(S.getFullYear(),S.getMonth(),1)),{start:S,end:E,projects:n,months:H}});function Ce(n,l,m){if(!n.start_at||!n.end_at)return"";const b=m.getTime()-l.getTime(),S=new Date(n.start_at).getTime(),E=new Date(n.end_at).getTime(),H=(S-l.getTime())/b*100,B=(E-S)/b*100;return`left: ${Math.max(0,H)}%; width: ${Math.min(100,B)}%;`}function Se(n){t(dt)===n?w(St,t(St)==="asc"?"desc":"asc",!0):(w(dt,n,!0),w(St,"asc"))}Ze(()=>{Jt.auth.getSession().then(({data:{session:l}})=>{w(N,l,!0),l?Tt():w(lt,!1)});const{data:{subscription:n}}=Jt.auth.onAuthStateChange((l,m)=>{w(N,m,!0),m?Tt():w(lt,!1)});return()=>n.unsubscribe()});async function Tt(){w(lt,!0);const{data:n,error:l}=await Jt.from("projects").select("*").order("created_at",{ascending:!1});!l&&n?w(ht,n,!0):l&&console.error("Error fetching projects:",l),w(lt,!1)}function pe(){w(ct,null),w(W,!0)}function Te(n){w(ct,n,!0),w(W,!0)}async function Le(n){if(!await gr("Are you sure you want to delete this project?","Delete Project",{confirmText:"Delete",isDestructive:!0}))return;const{error:m}=await Jt.from("projects").delete().eq("id",n);m?(console.error("Error deleting project:",m),Qt("Error deleting: "+m.message,"Error")):(Qt("Project deleted successfully!","Success"),Tt())}async function d(n){const{id:l,...m}=n;if(t(ct)){const{error:b}=await Jt.from("projects").update(m).eq("id",t(ct).id);b?(console.error("Error updating project:",b),Qt("Error updating: "+b.message,"Error")):(Qt("Project updated successfully!","Success"),w(W,!1),Tt())}else{const{error:b}=await Jt.from("projects").insert(m);b?(console.error("Error saving project:",b),Qt("Error saving: "+b.message,"Error")):(Qt("Project saved successfully!","Success"),w(W,!1),Tt())}}const f=n=>n===null?"—":`€${n}`,z=n=>n?new Date(n).toLocaleDateString():"—",J=n=>i[n]??"Unknown",$=n=>{switch(n){case 1:return"bg-amber-500/10 text-amber-400";case 2:return"bg-purple-500/10 text-purple-400";case 3:return"bg-emerald-500/10 text-emerald-400";case 4:return"bg-red-500/10 text-red-400";default:return"bg-zinc-800 text-zinc-400"}};function Ht(n){if(!n)return{total:0,completed:0};if(Array.isArray(n)&&n.length>0&&"items"in n[0]){let l=0,m=0;return n.forEach(b=>{b.items&&(l+=b.items.length,m+=b.items.filter(S=>S.completed).length)}),{total:l,completed:m}}return Array.isArray(n)&&n.length>0?{total:n.length,completed:n.filter(l=>l.completed).length}:{total:0,completed:0}}var Bt=Qr(),tt=K(Bt);Lr(tt,{get isOpen(){return t(W)},get entry(){return t(ct)},onClose:()=>w(W,!1),onSave:d});var It=a(tt,2),qt=r(It),$t=a(r(qt),2);{var be=n=>{var l=Ar();l.__click=pe;var m=r(l);Re(m,{class:"h-6 w-6"}),e(l),P(b=>ot(l,`background-color: ${b??""}`),[()=>Dt.getAccentHex()]),c(n,l)};y($t,n=>{t(N)&&!t(W)&&!ur.isOpen&&n(be)})}e(qt);var te=a(qt,2);{var ee=n=>{var l=Pr(),m=r(l);fr(m,{class:"h-6 w-6 animate-spin text-indigo-400"}),e(l),c(n,l)},re=n=>{var l=kt(),m=K(l);{var b=E=>{var H=Er();c(E,H)},S=E=>{var H=kt(),B=K(H);{var T=wt=>{var Lt=Mr();c(wt,Lt)},ae=wt=>{var Lt=Jr(),Gt=K(Lt),Ut=r(Gt),At=a(r(Ut),2);it(At,16,()=>["name","date","progress"],st,(Q,I)=>{var q=Nr();q.__click=()=>Se(I);var G=r(q),X=r(G,!0);e(G);var et=a(G,2);{var j=o=>{var h=kt(),R=K(h);{var C=_=>{pr(_,{class:"h-3 w-3"})},x=_=>{br(_,{class:"h-3 w-3"})};y(R,_=>{t(St)==="asc"?_(C):_(x,!1)})}c(o,h)};y(et,o=>{t(dt)===I&&o(j)})}e(q),P(()=>{A(q,1,`flex items-center gap-1 rounded-md px-3 py-1.5 transition-colors ${t(dt)===I?"bg-indigo-500/20 text-indigo-300":"bg-zinc-800/50 text-zinc-400 hover:bg-zinc-800"}`),M(X,I)}),c(Q,q)}),e(Ut);var Wt=a(Ut,2),ne=r(Wt),Ae=r(ne);e(ne);var _e=a(ne,2),vt=r(_e);vt.__click=()=>w(Ct,"list");var ie=r(vt);mr(ie,{class:"h-4 w-4"}),e(vt);var Pt=a(vt,2);Pt.__click=()=>w(Ct,"gantt");var xe=r(Pt);_r(xe,{class:"h-4 w-4"}),e(Pt),e(_e),e(Wt),e(Gt);var he=a(Gt,2);{var se=Q=>{const I=(j,o=He,h=He)=>{var R=qr(),C=r(R),x=r(C),_=r(x),s=r(_,!0);e(_);var v=a(_,2);{var k=L=>{var p=jr(),Y=r(p,!0);e(p),P(()=>{A(p,1,`text-sm ${h()?"text-zinc-600":"text-zinc-400"}`),M(Y,o().description)}),c(L,p)};y(v,L=>{o().description&&L(k)})}var D=a(v,2);{var O=L=>{const p=_t(()=>Dt.getProjectType(o().type));var Y=kt(),jt=K(Y);{var pt=bt=>{var Kt=Or(),ve=r(Kt),Ee=r(ve,!0);e(ve),e(Kt),P(()=>{A(ve,1,`font-medium ${h()?"text-zinc-600":"text-zinc-400"}`),M(Ee,t(p).label)}),c(bt,Kt)};y(jt,bt=>{t(p)&&bt(pt)})}c(L,Y)},Z=L=>{var p=kt(),Y=K(p);{var jt=pt=>{var bt=Br(),Kt=r(bt);{var ve=Ot=>{const Ft=_t(()=>Ht(o().checklist));var ue=kt(),ge=K(ue);{var Me=fe=>{var Ne=Fr(),Fe=r(Ne);{let Ke=_t(()=>`h-3.5 w-3.5 ${h()?"text-zinc-600":"text-zinc-400"}`);lr(Fe,{get class(){return t(Ke)}})}var je=a(Fe,2),Ye=r(je);e(je),e(Ne),P(()=>{A(je,1,Ie(h()?"text-zinc-600":"text-zinc-500")),M(Ye,`${t(Ft).completed??""}/${t(Ft).total??""}`)}),c(fe,Ne)};y(ge,fe=>{t(Ft).total>0&&fe(Me)})}c(Ot,ue)};y(Kt,Ot=>{o().checklist&&Ot(ve)})}var Ee=a(Kt,2);{var Ve=Ot=>{var Ft=Hr(),ue=r(Ft);{let fe=_t(()=>`h-3.5 w-3.5 ${h()?"text-zinc-600":"text-zinc-400"}`);or(ue,{get class(){return t(fe)}})}var ge=a(ue,2),Me=r(ge,!0);e(ge),e(Ft),P(()=>{A(ge,1,Ie(h()?"text-zinc-600":"text-zinc-500")),M(Me,o().links.length)}),c(Ot,Ft)};y(Ee,Ot=>{o().links&&o().links.length>0&&Ot(Ve)})}e(bt),c(pt,bt)};y(Y,pt=>{(o().checklist||o().links&&o().links.length>0)&&pt(jt)},!0)}c(L,p)};y(D,L=>{o().type?L(O):L(Z,!1)})}e(x);var V=a(x,2),U=r(V),rt=r(U),ut=r(rt,!0);e(rt),e(U);var zt=a(U,2),gt=r(zt),ft=a(gt,2),Et=r(ft);e(ft),e(zt);var Rt=a(zt,2),Mt=r(Rt);let Nt;e(Rt),e(V),e(C);var Vt=a(C,2),yt=r(Vt),le=r(yt),ce=a(r(le),2),Pe=r(ce,!0);e(ce),e(le);var Yt=a(le,2);{var we=L=>{var p=Ir(),Y=a(r(p),2),jt=r(Y);e(Y),e(p),P((pt,bt)=>{A(Y,1,`text-sm ${h()?"text-zinc-500":"text-zinc-300"}`),M(jt,`${pt??""} - ${bt??""}`)},[()=>z(o().start_at),()=>z(o().end_at)]),c(L,p)};y(Yt,L=>{(o().start_at||o().end_at)&&L(we)})}e(yt);var mt=a(yt,2),ze=r(mt);ze.__click=()=>Te(o());var de=a(ze,2);de.__click=()=>Le(o().id),e(mt),e(Vt),e(R),P((L,p,Y,jt,pt)=>{A(R,1,`group relative flex flex-col gap-4 rounded-lg border p-4 transition-all ${h()?"border-zinc-800/60 bg-zinc-900/30 text-zinc-500 hover:border-zinc-700/60 hover:bg-zinc-900/40":"border-zinc-800 bg-zinc-900/60 hover:border-zinc-700 hover:bg-zinc-900/80"}`),A(_,1,`truncate text-base font-bold ${h()?"text-zinc-500":"text-zinc-100"}`),er(_,"title",o().name),M(s,o().name),A(rt,1,L),M(ut,p),A(gt,1,`text-xs font-medium ${h()?"text-zinc-600":"text-zinc-400"}`),A(ft,1,`text-xs ${h()?"text-zinc-600":"text-zinc-500"}`),M(Et,`${(o().percentage||0)??""}%`),A(Mt,1,`h-full rounded-full transition-all duration-500 ${Y??""}`),Nt=ot(Mt,"",Nt,jt),A(ce,1,`text-sm font-medium ${h()?"text-zinc-500":"text-emerald-400"}`),M(Pe,pt)},[()=>`rounded-full px-2 py-0.5 text-xs ${$(o().status)}`,()=>J(o().status),()=>o().colour&&!o().colour.startsWith("#")?o().colour:"",()=>({width:`${(o().percentage||0)??""}%`,"background-color":o().colour&&o().colour.startsWith("#")?o().colour:"",opacity:h()?.5:1}),()=>f(o().funds)]),c(j,R)};var q=Ur(),G=K(q);it(G,21,()=>t(ke),st,(j,o)=>{I(j,()=>t(o),()=>!1)}),e(G);var X=a(G,2);{var et=j=>{var o=Gr(),h=a(K(o),2);it(h,21,()=>t(me),st,(R,C)=>{I(R,()=>t(C),()=>!0)}),e(h),c(j,o)};y(X,j=>{t(me).length>0&&j(et)})}c(Q,q)},oe=Q=>{var I=Kr(),q=r(I),G=r(q);it(G,21,()=>t(F).months,st,(C,x)=>{var _=Wr();let s;P(v=>s=ot(_,"",s,v),[()=>({left:`${(t(x).getTime()-t(F).start.getTime())/(t(F).end.getTime()-t(F).start.getTime())*100}%`})]),c(C,_)}),e(G);var X=a(G,2),et=r(X);it(et,21,()=>t(F).months,st,(C,x)=>{var _=Rr();let s;var v=r(_,!0);e(_),P((k,D)=>{s=ot(_,"",s,k),M(v,D)},[()=>({left:`${(t(x).getTime()-t(F).start.getTime())/(t(F).end.getTime()-t(F).start.getTime())*100}%`}),()=>t(x).toLocaleDateString("en-US",{month:"long"})]),c(C,_)}),e(et),e(X);var j=a(X,2),o=r(j);it(o,17,()=>t(F).projects,st,(C,x)=>{var _=Vr(),s=r(_),v=r(s);let k;var D=a(v,2),O=r(D,!0);e(D),e(s),e(_),P((Z,V,U)=>{ot(s,Z),A(v,1,`h-2 w-full rounded-full shadow-sm transition-all hover:brightness-110 ${V??""}`),k=ot(v,"",k,U),M(O,t(x).name)},[()=>Ce(t(x),t(F).start,t(F).end),()=>t(x).colour&&!t(x).colour.startsWith("#")?t(x).colour:"bg-indigo-600",()=>({"background-color":t(x).colour&&t(x).colour.startsWith("#")?t(x).colour:void 0})]),c(C,_)});var h=a(o,2);{var R=C=>{var x=Yr();c(C,x)};y(h,C=>{t(F).projects.length===0&&C(R)})}e(j),e(q),e(I),c(Q,I)};y(he,Q=>{t(Ct)==="list"?Q(se):Q(oe,!1)})}P(()=>{M(Ae,`Completed ${t(De)??""} / ${t(ht).length??""}`),A(vt,1,`rounded-md p-1.5 transition-all ${t(Ct)==="list"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`),A(Pt,1,`rounded-md p-1.5 transition-all ${t(Ct)==="gantt"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`)}),c(wt,Lt)};y(B,wt=>{t(ht).length===0?wt(T):wt(ae,!1)},!0)}c(E,H)};y(m,E=>{t(N)?E(S,!1):E(b)},!0)}c(n,l)};y(te,n=>{t(lt)&&t(N)!==null?n(ee):n(re,!1)})}e(It),c(Xt,Bt),Ue()}We(["click"]);export{ma as component};
