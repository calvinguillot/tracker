import{c as rt,a as c,f}from"../chunks/Blua9Muq.js";import{k as te,p as yr,v as Z,w as zr,x as Or,y as b,a as wr,z as r,A as t,B as o,D as E,m as e,F as Ir,G as Nr,o as Mr,I as F,J as _r,aV as pr}from"../chunks/BWAAnFQE.js";import{d as kr,s as N,e as ze}from"../chunks/B5UJqv3b.js";import{l as sr,s as lr,i as w}from"../chunks/hg7ngHtp.js";import{e as le,i as we,s as Pe,c as Hr}from"../chunks/wCmp37z_.js";import{I as cr,s as dr,r as bt,a as J,b as Yt,t as nr,f as C,c as Pr,d as Me,e as Wr,L as qr,i as br,g as Vt}from"../chunks/FJNRq2ku.js";import{s as He}from"../chunks/BW5xtwr9.js";import{f as or}from"../chunks/BsCRBkET.js";import{b as tt,P as Dr}from"../chunks/DWGvfTVC.js";import{T as ir}from"../chunks/CEwrSky2.js";import{G as Ur,S as Fr,E as Br,C as mr,L as Rr,a as Vr}from"../chunks/RUEBC1Bd.js";import{S as Yr}from"../chunks/s9r3oyya.js";import{L as xr}from"../chunks/CEAcGbZi.js";import{A as Gr}from"../chunks/C6BYduXv.js";import{A as Zr}from"../chunks/f6ai2VFN.js";import{C as Jr,a as Kr}from"../chunks/DoXZkVyT.js";import"../chunks/B5eWTv3U.js";function Xr(S,l){const i=sr(l,["children","$$slots","$$events","$$legacy"]);const j=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m9 12 2 2 4-4"}]];cr(S,lr({name:"circle-check"},()=>i,{get iconNode(){return j},children:(B,$)=>{var O=rt(),W=te(O);dr(W,l,"default",{}),c(B,O)},$$slots:{default:!0}}))}function Qr(S,l){const i=sr(l,["children","$$slots","$$events","$$legacy"]);const j=[["circle",{cx:"12",cy:"12",r:"10"}],["circle",{cx:"12",cy:"12",r:"1"}]];cr(S,lr({name:"circle-dot"},()=>i,{get iconNode(){return j},children:(B,$)=>{var O=rt(),W=te(O);dr(W,l,"default",{}),c(B,O)},$$slots:{default:!0}}))}function ea(S,l){const i=sr(l,["children","$$slots","$$events","$$legacy"]);const j=[["circle",{cx:"12",cy:"12",r:"10"}]];cr(S,lr({name:"circle"},()=>i,{get iconNode(){return j},children:(B,$)=>{var O=rt(),W=te(O);dr(W,l,"default",{}),c(B,O)},$$slots:{default:!0}}))}function ta(S){const l=S-1;return l*l*l+1}function hr(S,{from:l,to:i},j={}){var{delay:B=0,duration:$=Se=>Math.sqrt(Se)*120,easing:O=ta}=j,W=getComputedStyle(S),R=W.transform==="none"?"":W.transform,[We,K]=W.transformOrigin.split(" ").map(parseFloat);We/=S.clientWidth,K/=S.clientHeight;var fe=ra(S),ke=S.clientWidth/i.width/fe,qe=S.clientHeight/i.height/fe,re=l.left+l.width*We,_e=l.top+l.height*K,mt=i.left+i.width*We,at=i.top+i.height*K,De=(re-mt)*ke,Te=(_e-at)*qe,Ue=l.width/i.width,Ce=l.height/i.height;return{delay:B,duration:typeof $=="function"?$(Math.sqrt(De*De+Te*Te)):$,easing:O,css:(Se,u)=>{var p=u*De,k=u*Te,X=Se+u*Ue,ae=Se+u*Ce;return`transform: ${R} translate(${p}px, ${k}px) scale(${X}, ${ae});`}}}function ra(S){if("currentCSSZoom"in S)return S.currentCSSZoom;for(var l=S,i=1;l!==null;)i*=+getComputedStyle(l).zoom,l=l.parentElement;return i}var aa=f("<option> </option>"),ia=f("<div></div>"),na=f("<option> </option>"),oa=f('<div class="flex items-center gap-2"><button type="button" class="text-zinc-400 hover:text-zinc-200"><!></button> <input type="text" placeholder="Item description..."/> <div class="flex items-center gap-1"><div role="button" tabindex="0" class="cursor-grab p-1 text-zinc-600 hover:text-zinc-400 active:cursor-grabbing" draggable="true"><!></div> <button type="button" class="p-1 text-zinc-500 hover:text-red-400"><!></button></div></div>'),sa=f('<div class="rounded-lg border border-zinc-800 bg-zinc-800/30 p-4"><div class="mb-3 flex items-center justify-between gap-2"><input type="text" placeholder="Checklist Title" class="w-full bg-transparent text-sm font-bold text-zinc-200 placeholder-zinc-600 focus:outline-none"/> <button type="button" class="text-zinc-600 hover:text-red-400" title="Remove Checklist"><!></button></div> <div class="space-y-2"><!> <button type="button" class="mt-2 flex items-center gap-1 text-xs text-zinc-500 hover:text-zinc-300"><!> Add Item</button></div></div>'),la=f('<div class="space-y-6"></div>'),ca=f('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No checklists yet</p></div>'),da=f('<div class="flex items-center gap-2"><div class="grid flex-1 grid-cols-1 gap-2 md:grid-cols-2"><input type="text" placeholder="Label (optional)" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/> <input type="text" placeholder="URL" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <button type="button" class="p-2 text-zinc-400 hover:text-indigo-400" title="Open Link"><!></button> <button type="button" class="p-2 text-zinc-400 hover:text-red-400" title="Remove Link"><!></button></div>'),va=f('<div class="space-y-2"></div>'),ua=f('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No links yet</p></div>'),ga=f('<button type="button" class="rounded-md bg-red-500/10 px-3.5 py-2.5 text-sm font-semibold text-red-400 shadow-sm ring-1 ring-red-500/20 transition-colors ring-inset hover:bg-red-500/20">Delete</button>'),fa=f('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div><label for="title" class="mb-1 block text-sm font-medium text-zinc-400">Title</label> <input type="text" id="title" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="type" class="mb-1 block text-sm font-medium text-zinc-400">Type</label> <div class="flex items-center gap-2"><select id="type" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Select Type</option><!></select> <!></div></div> <div><label for="status" class="mb-1 block text-sm font-medium text-zinc-400">Status</label> <select id="status" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></select></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="deadline_at" class="mb-1 block text-sm font-medium text-zinc-400">Deadline</label> <input type="date" id="deadline_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div><label for="body" class="mb-1 block text-sm font-medium text-zinc-400">Description</label> <textarea id="body" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Checklists</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Checklist</button></div> <!></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Links</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Link</button></div> <!></div> <div class="sticky bottom-0 mt-6 flex justify-between gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><div><!></div> <div class="flex gap-3"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700">Cancel</button> <button type="submit" class="rounded-md px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm transition-all hover:brightness-110 focus-visible:outline-2 focus-visible:outline-offset-2">Save</button></div></div></form></div></div>');function _a(S,l){yr(l,!0);let i=Z(zr({title:"",type:"",status:"todo",body:"",deadline_at:"",completed_at:null,color:"#000000",checklist:[],links:[]})),j=Z(null);const B=[{value:"todo",label:"To Do"},{value:"in_progress",label:"In Progress"},{value:"done",label:"Done"}];Or(()=>{l.isOpen&&(l.entry?b(i,{title:l.entry.title||"",type:l.entry.type||"",status:l.entry.status||"todo",body:l.entry.body||"",deadline_at:l.entry.deadline_at||"",completed_at:l.entry.completed_at||null,color:l.entry.color||"#000000",checklist:Array.isArray(l.entry.checklist)&&l.entry.checklist.length>0?"items"in l.entry.checklist[0]?l.entry.checklist:[{id:crypto.randomUUID(),title:"Checklist",items:l.entry.checklist}]:[],links:Array.isArray(l.entry.links)?l.entry.links:[]},!0):b(i,{title:"",type:"",status:"todo",body:"",deadline_at:"",completed_at:null,color:"#000000",checklist:[],links:[]},!0))});function $(u){u.preventDefault(),e(i).status==="done"?e(i).completed_at||(e(i).completed_at=new Date().toISOString()):e(i).completed_at=null;const p={...e(i),deadline_at:e(i).deadline_at||null};l.onSave(p)}function O(u){u.target===u.currentTarget&&l.onClose()}function W(u){u.key==="Escape"&&l.onClose()}function R(){e(i).checklist=[...e(i).checklist,{id:crypto.randomUUID(),title:"New Checklist",items:[]}]}function We(u){e(i).checklist=e(i).checklist.filter((p,k)=>k!==u)}function K(u){const p=e(i).checklist[u];p.items=[...p.items,{text:"",completed:!1}],e(i).checklist[u]=p}function fe(u,p){const k=e(i).checklist[u];k.items=k.items.filter((X,ae)=>ae!==p),e(i).checklist[u]=k}function ke(u,p){const k=e(i).checklist[u];k.items[p].completed=!k.items[p].completed,e(i).checklist[u]=k}function qe(u,p,k){b(j,{listIndex:p,itemIndex:k},!0),u.dataTransfer&&(u.dataTransfer.effectAllowed="move",u.dataTransfer.dropEffect="move")}function re(u,p,k){if(u.preventDefault(),!e(j)||e(j).listIndex!==p||e(j).itemIndex===k)return;const X=e(i).checklist[p],ae=e(j).itemIndex,it=k,xt=X.items[ae],pe=[...X.items];pe.splice(ae,1),pe.splice(it,0,xt),X.items=pe,e(i).checklist[p]=X,e(j).itemIndex=it}function _e(){b(j,null)}function mt(){if(e(i).type){const u=J.getTaskType(e(i).type);u&&u.color&&(e(i).color=u.color)}}function at(){e(i).links=[...e(i).links,{url:"",label:""}]}function De(u){e(i).links=e(i).links.filter((p,k)=>k!==u)}function Te(u){if(!u)return;let p=u;/^https?:\/\//i.test(p)||(p="https://"+p),window.open(p,"_blank","noopener,noreferrer")}var Ue=rt(),Ce=te(Ue);{var Se=u=>{var p=fa();p.__click=O,p.__keydown=W;var k=r(p),X=r(k),ae=r(X),it=r(ae,!0);t(ae);var xt=o(ae,2);xt.__click=function(...g){l.onClose?.apply(this,g)},t(X);var pe=o(X,2),ht=r(pe),ce=o(r(ht),2);bt(ce),t(ht);var yt=o(ht,2),Fe=r(yt),It=o(r(Fe),2),Be=r(It);Be.__change=mt;var Re=r(Be);Re.value=Re.__value="";var Nt=o(Re);le(Nt,17,()=>J.settings.task_types,we,(g,m)=>{var L=aa(),M=r(L,!0);t(L);var H={};E(()=>{N(M,e(m).label),H!==(H=e(m).id)&&(L.value=(L.__value=e(m).id)??"")}),c(g,L)}),t(Be);var Gt=o(Be,2);{var Mt=g=>{var m=ia();let L;E(M=>{L=C(m,1,"h-8 w-8 shrink-0 rounded-full border border-zinc-600 shadow-sm",null,L,{"bg-zinc-500":e(i).color==="bg-zinc-500","bg-red-600":e(i).color==="bg-red-600","bg-orange-600":e(i).color==="bg-orange-600","bg-amber-500":e(i).color==="bg-amber-500","bg-green-600":e(i).color==="bg-green-600","bg-emerald-500":e(i).color==="bg-emerald-500","bg-teal-500":e(i).color==="bg-teal-500","bg-cyan-500":e(i).color==="bg-cyan-500","bg-blue-600":e(i).color==="bg-blue-600","bg-indigo-600":e(i).color==="bg-indigo-600","bg-violet-600":e(i).color==="bg-violet-600","bg-purple-600":e(i).color==="bg-purple-600","bg-fuchsia-600":e(i).color==="bg-fuchsia-600","bg-pink-600":e(i).color==="bg-pink-600","bg-rose-600":e(i).color==="bg-rose-600"}),Pe(m,M)},[()=>e(i).color.startsWith("#")?`background-color: ${e(i).color}`:""]),c(g,m)};w(Gt,g=>{e(i).color&&g(Mt)})}t(It),t(Fe);var zt=o(Fe,2),nt=o(r(zt),2);le(nt,21,()=>B,we,(g,m)=>{var L=na(),M=r(L,!0);t(L);var H={};E(()=>{N(M,e(m).label),H!==(H=e(m).value)&&(L.value=(L.__value=e(m).value)??"")}),c(g,L)}),t(nt),t(zt),t(yt);var ot=o(yt,2),st=r(ot),Ht=o(r(st),2);bt(Ht),t(st),t(ot);var wt=o(ot,2),Pt=o(r(wt),2);Ir(Pt),t(wt);var kt=o(wt,2),Dt=r(kt),a=o(r(Dt),2);a.__click=R,t(Dt);var n=o(Dt,2);{var s=g=>{var m=la();le(m,21,()=>e(i).checklist,we,(L,M,H)=>{var ne=sa(),be=r(ne),de=r(be);bt(de);var Le=o(de,2);Le.__click=()=>We(H);var ve=r(Le);ir(ve,{class:"h-4 w-4"}),t(Le),t(be);var Ee=o(be,2),je=r(Ee);le(je,17,()=>e(M).items,we,(Lt,me,dt)=>{var Ge=oa(),Oe=r(Ge);Oe.__click=()=>ke(H,dt);var Zt=r(Oe);{var Wt=G=>{Yr(G,{class:"h-5 w-5 text-emerald-500"})},Ze=G=>{Fr(G,{class:"h-5 w-5"})};w(Zt,G=>{e(me).completed?G(Wt):G(Ze,!1)})}t(Oe);var vt=o(Oe,2);bt(vt);var Je=o(vt,2),Ie=r(Je),qt=r(Ie);Ur(qt,{class:"h-4 w-4"}),t(Ie);var Et=o(Ie,2);Et.__click=()=>fe(H,dt);var Jt=r(Et);ir(Jt,{class:"h-3 w-3"}),t(Et),t(Je),t(Ge),E(()=>C(vt,1,`w-full rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 ${e(me).completed?"text-zinc-500 line-through":""}`)),tt(vt,()=>e(me).text,G=>e(me).text=G),ze("dragstart",Ie,G=>qe(G,H,dt)),ze("dragover",Ie,G=>re(G,H,dt)),ze("dragend",Ie,_e),c(Lt,Ge)});var $e=o(je,2);$e.__click=()=>K(H);var oe=r($e);Dr(oe,{class:"h-3 w-3"}),Nr(),t($e),t(Ee),t(ne),tt(de,()=>e(M).title,Lt=>e(M).title=Lt),c(L,ne)}),t(m),c(g,m)},v=g=>{var m=ca();c(g,m)};w(n,g=>{e(i).checklist&&e(i).checklist.length>0?g(s):g(v,!1)})}t(kt);var x=o(kt,2),A=r(x),D=o(r(A),2);D.__click=at,t(A);var lt=o(A,2);{var Tt=g=>{var m=va();le(m,21,()=>e(i).links,we,(L,M,H)=>{var ne=da(),be=r(ne),de=r(be);bt(de);var Le=o(de,2);bt(Le),t(be);var ve=o(be,2);ve.__click=()=>Te(e(M).url);var Ee=r(ve);Br(Ee,{class:"h-4 w-4"}),t(ve);var je=o(ve,2);je.__click=()=>De(H);var $e=r(je);ir($e,{class:"h-4 w-4"}),t(je),t(ne),E(()=>ve.disabled=!e(M).url),tt(de,()=>e(M).label,oe=>e(M).label=oe),tt(Le,()=>e(M).url,oe=>e(M).url=oe),c(L,ne)}),t(m),c(g,m)},Ve=g=>{var m=ua();c(g,m)};w(lt,g=>{e(i).links&&e(i).links.length>0?g(Tt):g(Ve,!1)})}t(x);var ie=o(x,2),Ae=r(ie),Ct=r(Ae);{var St=g=>{var m=ga();m.__click=()=>l.onDelete(l.entry.id),c(g,m)};w(Ct,g=>{l.entry&&l.onDelete&&g(St)})}t(Ae);var ct=o(Ae,2),Ye=r(ct);Ye.__click=function(...g){l.onClose?.apply(this,g)};var At=o(Ye,2);t(ct),t(ie),t(pe),t(k),t(p),E((g,m,L)=>{N(it,l.entry?"Edit Task":"New Task"),Pe(a,`color: ${g??""}`),Pe(D,`color: ${m??""}`),Pe(At,`background-color: ${L??""}`)},[()=>J.getAccentLightHex(),()=>J.getAccentLightHex(),()=>J.getAccentHex()]),ze("submit",pe,$),tt(ce,()=>e(i).title,g=>e(i).title=g),Yt(Be,()=>e(i).type,g=>e(i).type=g),Yt(nt,()=>e(i).status,g=>e(i).status=g),tt(Ht,()=>e(i).deadline_at,g=>e(i).deadline_at=g),tt(Pt,()=>e(i).body,g=>e(i).body=g),nr(3,p,()=>or,()=>({duration:J.getTransitionDuration()})),c(u,p)};w(Ce,u=>{l.isOpen&&u(Se)})}c(S,Ue),wr()}kr(["click","keydown","change"]);var pa=f('<div class="flex items-center gap-2"><button aria-label="Previous week" class="flex items-center justify-center rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-zinc-400 shadow-sm transition-colors hover:bg-zinc-700 hover:text-zinc-100"><!></button> <div class="text-center"><span class="text-sm font-medium text-zinc-300"> </span> <span class="ml-1 text-xs text-zinc-500"> </span></div> <button aria-label="Next week" class="flex items-center justify-center rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-zinc-400 shadow-sm transition-colors hover:bg-zinc-700 hover:text-zinc-100"><!></button></div>'),ba=f('<button class="fixed right-8 bottom-24 z-50 rounded-full p-4 shadow-lg/30 drop-shadow-lg backdrop-blur-md transition-all hover:scale-105 hover:brightness-110 md:right-16 md:bottom-16" aria-label="New Task"><!></button>'),ma=f('<div class="flex h-48 items-center justify-center"><!></div>'),xa=f('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">Sign in to view tasks.</div>'),ha=f('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">No tasks yet.</div>'),ya=f("<option> </option>"),za=f("<option> </option>"),wa=f('<div class="hidden flex-1 md:flex md:justify-center"><!></div>'),ka=f('<div class="mb-4 flex items-center justify-center md:hidden"><!></div>'),Da=f('<div title="Task Color"></div>'),Ta=f("<span> </span>"),Ca=f('<span class="text-zinc-500">•</span>'),Sa=f("<!> <!> <span> </span>",1),Aa=f('<span class="text-zinc-500">•</span>'),La=f("<!> <!> <span> </span>",1),Ea=f("<p> </p>"),ja=f('<div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Completed</span> <span> </span></div>'),$a=f('<div role="button"><div class="flex flex-col gap-3"><div class="flex items-start justify-between gap-3"><div class="min-w-0 flex-1"><div class="flex flex-wrap items-center gap-2"><!> <h3> </h3></div> <div class="mt-1 flex items-center gap-2 text-xs"><!> <!> <!></div></div> <div class="flex items-center gap-0.5 rounded-lg bg-zinc-800/60 p-0.5"><button type="button" title="To Do" aria-label="Set status to To Do"><!></button> <button type="button" title="In Progress" aria-label="Set status to In Progress"><!></button> <button type="button" title="Done" aria-label="Set status to Done"><!></button></div></div> <!> <div class="mt-2 flex items-center gap-4 border-t border-zinc-800/50 pt-3"><div class="flex gap-4"><div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Deadline</span> <span> </span></div> <!></div></div></div></div>'),Oa=f("<div><!></div>"),Ia=f("<div><!></div>"),Na=f('<div class="my-8 flex items-center gap-4"><div class="h-px flex-1 bg-zinc-800"></div> <span class="text-sm font-medium tracking-wider text-zinc-500 uppercase">Archived</span> <div class="h-px flex-1 bg-zinc-800"></div></div> <div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"></div>',1),Ma=f('<div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"></div> <!>',1),Ha=f("<div></div>"),Pa=f('<span class="text-[10px] text-zinc-500 uppercase"> </span>'),Wa=f('<button><div class="flex items-center gap-2"><!> <span class="truncate text-xs font-medium text-zinc-300"> </span></div> <div class="flex items-center gap-2"><!></div></button>'),qa=f('<div><div class="flex items-center justify-between border-b border-zinc-800 pb-2"><span> </span> <span> </span></div> <div class="flex flex-1 flex-col gap-2"></div></div>'),Ua=f('<div class="flex flex-col gap-4 md:grid md:grid-cols-7"></div>'),Fa=f('<div class="mb-4 flex flex-col gap-3 text-sm md:flex-row md:items-center"><div class="flex flex-wrap items-center justify-between gap-2 md:gap-2"><div class="flex flex-wrap items-center gap-2"><select class="cursor-pointer rounded-md border border-zinc-700 bg-zinc-800 px-3 py-1.5 text-sm text-zinc-100 shadow-sm outline-none focus:border-indigo-500 focus:ring-indigo-500"></select> <button class="flex items-center justify-center rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-zinc-400 shadow-sm transition-colors hover:bg-zinc-700 hover:text-zinc-100" aria-label="Toggle sort order"><!></button></div> <div class="flex items-center gap-2"><select class="cursor-pointer rounded-md border border-zinc-700 bg-zinc-800 px-3 py-1.5 text-sm text-zinc-100 shadow-sm outline-none focus:border-indigo-500 focus:ring-indigo-500"><option>All Tasks</option><!></select></div></div> <!> <div class="hidden md:ml-auto md:flex md:items-center md:gap-4"><span class="text-xs text-zinc-500"> </span> <div class="flex items-center rounded-lg bg-zinc-800/50 p-1"><button aria-label="List View"><!></button> <button aria-label="Week View"><!></button></div></div></div> <div class="mb-4 flex items-center justify-between md:hidden"><span class="text-xs text-zinc-500"> </span> <div class="flex items-center rounded-lg bg-zinc-800/50 p-1"><button aria-label="List View"><!></button> <button aria-label="Week View"><!></button></div></div> <!> <!>',1),Ba=f('<!> <section><div class="flex flex-wrap items-center justify-between gap-4"><!></div> <!></section>',1);function li(S,l){yr(l,!0);const i=a=>{var n=pa(),s=r(n);s.__click=p;var v=r(s);Jr(v,{class:"h-4 w-4"}),t(s);var x=o(s,2),A=r(x),D=r(A);t(A);var lt=o(A,2),Tt=r(lt,!0);t(lt),t(x);var Ve=o(x,2);Ve.__click=k;var ie=r(Ve);Kr(ie,{class:"h-4 w-4"}),t(Ve),t(n),E(()=>{N(D,`Week ${e(Se)??""}`),N(Tt,e(u))}),c(a,n)};let j=Z(null),B=Z(!0),$=Z(zr([])),O=Z(!1),W=Z(null),R=Z("list");const We=40;let K=Z("deadline"),fe=Z("asc"),ke=Z("all"),qe=Z(0),re=Z(null),_e=Z(null),mt=F(()=>e(ke)==="all"?e($):e($).filter(a=>a.type===e(ke))),at=F(()=>[...e(mt)].sort((a,n)=>{const s=e(fe)==="asc"?1:-1;if(e(K)==="title")return(a.title||"").localeCompare(n.title||"")*s;if(e(K)==="deadline"){const v=a.deadline_at?new Date(a.deadline_at).getTime():s===1?1/0:-1/0,x=n.deadline_at?new Date(n.deadline_at).getTime():s===1?1/0:-1/0;return(v-x)*s}else if(e(K)==="completed"){const v=a.completed_at?new Date(a.completed_at).getTime():0,x=n.completed_at?new Date(n.completed_at).getTime():0;return(v-x)*s}else if(e(K)==="created"){const v=new Date(a.created_at).getTime(),x=new Date(n.created_at).getTime();return(v-x)*s}else if(e(K)==="status")return(a.status||"").localeCompare(n.status||"")*s;return 0})),De=F(()=>e(at).filter(a=>a.status!=="done")),Te=F(()=>e(at).filter(a=>a.status==="done")),Ue=F(()=>e($).filter(a=>a.status==="done").length),Ce=F(()=>{const a=new Date,n=a.getDay(),s=a.getDate()-n+(n===0?-6:1),v=new Date(a);v.setDate(s+e(qe)*7),v.setHours(0,0,0,0);const x=[];for(let A=0;A<7;A++){const D=new Date(v);D.setDate(v.getDate()+A),x.push(D)}return x}),Se=F(()=>{const a=e(Ce)[0],n=new Date(a.getFullYear(),0,1),s=Math.floor((a.getTime()-n.getTime())/864e5);return Math.ceil((s+n.getDay()+1)/7)}),u=F(()=>{const a=e(Ce)[0],n=e(Ce)[6],s={month:"short",day:"numeric"};return`${a.toLocaleDateString("en-US",s)} - ${n.toLocaleDateString("en-US",s)}`});function p(){pr(qe,-1)}function k(){pr(qe)}function X(a){return e(De).filter(n=>{if(!n.deadline_at)return!1;const s=new Date(n.deadline_at);return s.getFullYear()===a.getFullYear()&&s.getMonth()===a.getMonth()&&s.getDate()===a.getDate()})}function ae(a,n){b(re,n.id,!0),a.dataTransfer&&(a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("text/plain",n.id.toString()))}function it(a){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="move")}function xt(a,n){a.preventDefault(),b(_e,n,!0)}function pe(a){const n=a.currentTarget.getBoundingClientRect(),s=a.clientX,v=a.clientY;(s<n.left||s>n.right||v<n.top||v>n.bottom)&&b(_e,null)}async function ht(a,n){if(a.preventDefault(),b(_e,null),e(re)===null)return;const s=e($).find(D=>D.id===e(re));if(!s){b(re,null);return}let v;if(s.deadline_at){const D=new Date(s.deadline_at);v=new Date(n),v.setHours(D.getHours(),D.getMinutes(),D.getSeconds(),D.getMilliseconds())}else v=new Date(n);const x=v.toISOString();b($,e($).map(D=>D.id===e(re)?{...D,deadline_at:x}:D),!0);const{error:A}=await He.from("tasks").update({deadline_at:x}).eq("id",e(re));A&&(console.error("Error updating task deadline:",A),Me("Error updating deadline: "+A.message,"Error"),ce()),b(re,null)}Mr(()=>{He.auth.getSession().then(({data:{session:n}})=>{b(j,n,!0),n?ce():b(B,!1)});const{data:{subscription:a}}=He.auth.onAuthStateChange((n,s)=>{b(j,s,!0),s?ce():b(B,!1)});return()=>a.unsubscribe()});async function ce(){b(B,!0),console.log("Fetching tasks...");const{data:a,error:n}=await He.from("tasks").select("*").order("deadline_at",{ascending:!0});!n&&a?b($,a,!0):n&&console.error("Error fetching tasks:",n),b(B,!1)}function yt(){b(W,null),b(O,!0)}function Fe(a){b(W,a,!0),b(O,!0)}async function It(a){if(!await Pr("Are you sure you want to delete this task?","Delete Task",{confirmText:"Delete",isDestructive:!0}))return;const{error:s}=await He.from("tasks").delete().eq("id",a);s?(console.error("Error deleting task:",s),Me("Error deleting: "+s.message,"Error")):(Me("Task deleted successfully!","Success"),b(O,!1),ce())}async function Be(a){const{id:n,...s}=a;if(e(W)){const{error:v}=await He.from("tasks").update(s).eq("id",e(W).id);v?(console.error("Error updating task:",v),Me("Error updating: "+v.message,"Error")):(Me("Task updated successfully!","Success"),b(O,!1),ce())}else{const{error:v}=await He.from("tasks").insert(s);v?(console.error("Error saving task:",v),Me("Error saving: "+v.message,"Error")):(Me("Task saved successfully!","Success"),b(O,!1),ce())}}async function Re(a,n){const s={status:n};n==="done"?s.completed_at=new Date().toISOString():s.completed_at=null,b($,e($).map(x=>x.id===a.id?{...x,status:n,completed_at:s.completed_at}:x),!0);const{error:v}=await He.from("tasks").update(s).eq("id",a.id);v&&(console.error("Error updating task status:",v),Me("Error updating status: "+v.message,"Error"),ce())}const Nt=a=>a?new Date(a).toLocaleDateString():"—";function Gt(a,n=We){return a?a.length>n?a.slice(0,n)+"...":a:""}function Mt(a){if(!a)return{total:0,completed:0};if(Array.isArray(a)&&a.length>0&&"items"in a[0]){let n=0,s=0;return a.forEach(v=>{v.items&&(n+=v.items.length,s+=v.items.filter(x=>x.completed).length)}),{total:n,completed:s}}return Array.isArray(a)&&a.length>0?{total:a.length,completed:a.filter(n=>n.completed).length}:{total:0,completed:0}}var zt=Ba(),nt=te(zt);_a(nt,{get isOpen(){return e(O)},get entry(){return e(W)},onClose:()=>b(O,!1),onSave:Be,onDelete:It});var ot=o(nt,2),st=r(ot),Ht=r(st);{var wt=a=>{var n=ba();n.__click=yt;var s=r(n);Dr(s,{class:"h-6 w-6 text-(--accent-color)"}),t(n),E((v,x)=>Pe(n,`--accent-color: ${v??""}; background-color: ${x??""}/50`),[()=>J.getAccentLightHex(),()=>J.getAccentHex()]),c(a,n)};w(Ht,a=>{e(j)&&!e(O)&&!Wr.isOpen&&a(wt)})}t(st);var Pt=o(st,2);{var kt=a=>{var n=ma(),s=r(n);{let v=F(()=>J.getAccentHex());qr(s,{class:"h-6 w-6 animate-spin",get style(){return`color: ${e(v)??""}`}})}t(n),c(a,n)},Dt=a=>{var n=rt(),s=te(n);{var v=A=>{var D=xa();c(A,D)},x=A=>{var D=rt(),lt=te(D);{var Tt=ie=>{var Ae=ha();c(ie,Ae)},Ve=ie=>{var Ae=Fa(),Ct=te(Ae),St=r(Ct),ct=r(St),Ye=r(ct);le(Ye,20,()=>["title","deadline","created","status","completed"],we,(h,T)=>{var I=ya(),V=r(I,!0);t(I);var xe={};E(Ke=>{N(V,Ke),xe!==(xe=T)&&(I.value=(I.__value=T)??"")},[()=>T.charAt(0).toUpperCase()+T.slice(1)]),c(h,I)}),t(Ye);var At=o(Ye,2);At.__click=()=>b(fe,e(fe)==="asc"?"desc":"asc",!0);var g=r(At);{var m=h=>{Gr(h,{class:"h-4 w-4"})},L=h=>{Zr(h,{class:"h-4 w-4"})};w(g,h=>{e(fe)==="asc"?h(m):h(L,!1)})}t(At),t(ct);var M=o(ct,2),H=r(M),ne=r(H);ne.value=ne.__value="all";var be=o(ne);le(be,17,()=>J.settings.task_types,we,(h,T)=>{var I=za(),V=r(I,!0);t(I);var xe={};E(()=>{N(V,e(T).label),xe!==(xe=e(T).id)&&(I.value=(I.__value=e(T).id)??"")}),c(h,I)}),t(H),t(M),t(St);var de=o(St,2);{var Le=h=>{var T=wa(),I=r(T);i(I),t(T),c(h,T)};w(de,h=>{e(R)==="week"&&h(Le)})}var ve=o(de,2),Ee=r(ve),je=r(Ee);t(Ee);var $e=o(Ee,2),oe=r($e);oe.__click=()=>b(R,"list");var Lt=r(oe);xr(Lt,{class:"h-4 w-4"}),t(oe);var me=o(oe,2);me.__click=()=>b(R,"week");var dt=r(me);mr(dt,{class:"h-4 w-4"}),t(me),t($e),t(ve),t(Ct);var Ge=o(Ct,2),Oe=r(Ge),Zt=r(Oe);t(Oe);var Wt=o(Oe,2),Ze=r(Wt);Ze.__click=()=>b(R,"list");var vt=r(Ze);xr(vt,{class:"h-4 w-4"}),t(Ze);var Je=o(Ze,2);Je.__click=()=>b(R,"week");var Ie=r(Je);mr(Ie,{class:"h-4 w-4"}),t(Je),t(Wt),t(Ge);var qt=o(Ge,2);{var Et=h=>{var T=ka(),I=r(T);i(I),t(T),c(h,T)};w(qt,h=>{e(R)==="week"&&h(Et)})}var Jt=o(qt,2);{var G=h=>{const T=(se,d=_r,z=_r)=>{var P=$a();P.__click=()=>Fe(d()),Vt(P,"tabindex",0),P.__keydown=_=>{(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),Fe(d()))};var ut=r(P),Q=r(ut),Xe=r(Q),gt=r(Xe),ue=r(gt);{var q=_=>{var y=Da();E((U,ee)=>{C(y,1,U),Pe(y,ee)},[()=>`h-3 w-3 rounded-full ${z()?"opacity-50":""} ${d().color.startsWith("bg-")?d().color:""}`,()=>d().color.startsWith("bg-")?"":`background-color: ${d().color}`]),c(_,y)};w(ue,_=>{d().color&&_(q)})}var Qe=o(ue,2),he=r(Qe,!0);t(Qe),t(gt);var ft=o(gt,2),jt=r(ft);{var Kt=_=>{var y=Ta(),U=r(y,!0);t(y),E(ee=>{C(y,1,Hr(z()?"text-zinc-600":"text-zinc-400")),N(U,ee)},[()=>J.getTaskType(d().type)?.label??d().type]),c(_,y)};w(jt,_=>{d().type&&_(Kt)})}var _t=o(jt,2);{var Xt=_=>{const y=F(()=>Mt(d().checklist));var U=rt(),ee=te(U);{var pt=et=>{var Rt=Sa(),Ne=te(Rt);{var rr=Ot=>{var $r=Ca();c(Ot,$r)};w(Ne,Ot=>{d().type&&Ot(rr)})}var fr=o(Ne,2);{let Ot=F(()=>`h-4 w-4 ${z()?"text-zinc-600":"text-zinc-400"}`);Vr(fr,{get class(){return e(Ot)}})}var ar=o(fr,2),jr=r(ar);t(ar),E(()=>{C(ar,1,`text-xs ${z()?"text-zinc-600":"text-zinc-500"}`),N(jr,`${e(y).completed??""}/${e(y).total??""}`)}),c(et,Rt)};w(ee,et=>{e(y).total>0&&et(pt)})}c(_,U)};w(_t,_=>{d().checklist&&_(Xt)})}var Ut=o(_t,2);{var Qt=_=>{var y=La(),U=te(y);{var ee=Ne=>{var rr=Aa();c(Ne,rr)};w(U,Ne=>{(d().type||d().checklist&&Mt(d().checklist).total>0)&&Ne(ee)})}var pt=o(U,2);{let Ne=F(()=>`h-4 w-4 ${z()?"text-zinc-600":"text-zinc-400"}`);Rr(pt,{get class(){return e(Ne)}})}var et=o(pt,2),Rt=r(et,!0);t(et),E(()=>{C(et,1,`text-xs ${z()?"text-zinc-600":"text-zinc-500"}`),N(Rt,d().links.length)}),c(_,y)};w(Ut,_=>{d().links&&d().links.length>0&&_(Qt)})}t(ft),t(Xe);var Ft=o(Xe,2),Y=r(Ft);Y.__click=_=>{_.stopPropagation(),Re(d(),"todo")};var ye=r(Y);ea(ye,{class:"h-3.5 w-3.5"}),t(Y);var ge=o(Y,2);ge.__click=_=>{_.stopPropagation(),Re(d(),"in_progress")};var $t=r(ge);Qr($t,{class:"h-3.5 w-3.5"}),t(ge);var Bt=o(ge,2);Bt.__click=_=>{_.stopPropagation(),Re(d(),"done")};var Cr=r(Bt);Xr(Cr,{class:"h-3.5 w-3.5"}),t(Bt),t(Ft),t(Q);var vr=o(Q,2);{var Sr=_=>{var y=Ea(),U=r(y,!0);t(y),E(ee=>{C(y,1,`text-sm ${z()?"text-zinc-600":"text-zinc-400"}`),N(U,ee)},[()=>Gt(d().body)]),c(_,y)};w(vr,_=>{d().body&&_(Sr)})}var ur=o(vr,2),gr=r(ur),er=r(gr),tr=o(r(er),2),Ar=r(tr,!0);t(tr),t(er);var Lr=o(er,2);{var Er=_=>{var y=ja(),U=o(r(y),2),ee=r(U,!0);t(U),t(y),E(pt=>{C(U,1,`text-xs ${z()?"text-zinc-500":"text-emerald-400"}`),N(ee,pt)},[()=>Nt(d().completed_at)]),c(_,y)};w(Lr,_=>{d().completed_at&&_(Er)})}t(gr),t(ur),t(ut),t(P),E((_,y)=>{C(P,1,`group relative flex w-full cursor-pointer flex-col justify-between rounded-lg border p-4 text-left transition-all ${z()?"border-zinc-800/60 bg-zinc-900/30 text-zinc-500 hover:border-zinc-700/60 hover:bg-zinc-900/40":"border-zinc-800 bg-zinc-900/60 hover:border-zinc-700 hover:bg-zinc-900/80"}`),C(Qe,1,`truncate text-base font-bold ${z()?"text-zinc-500":"text-zinc-100"}`),Vt(Qe,"title",d().title),N(he,d().title),C(Y,1,`flex items-center justify-center rounded px-1.5 py-1 transition-all ${d().status==="todo"?"bg-zinc-700 text-zinc-100 shadow-sm":z()?"text-zinc-600 hover:text-zinc-500":"text-zinc-400 hover:text-zinc-300"}`),C(ge,1,`flex items-center justify-center rounded px-1.5 py-1 shadow-sm transition-all ${d().status==="in_progress"?"":z()?"text-zinc-600 hover:text-zinc-500":"text-zinc-400 hover:text-zinc-300"}`),Pe(ge,_),C(Bt,1,`flex items-center justify-center rounded px-1.5 py-1 transition-all ${d().status==="done"?"bg-emerald-500/20 text-emerald-400 shadow-sm":z()?"text-zinc-600 hover:text-zinc-500":"text-zinc-400 hover:text-zinc-300"}`),C(tr,1,`text-xs ${z()?"text-zinc-500":"text-zinc-300"}`),N(Ar,y)},[()=>d().status==="in_progress"?(()=>{const _=J.getAccentHex(),y=parseInt(_.slice(1,3),16),U=parseInt(_.slice(3,5),16),ee=parseInt(_.slice(5,7),16);return`background-color: rgba(${y}, ${U}, ${ee}, 0.2); color: ${J.getAccentLightHex()}`})():"",()=>Nt(d().deadline_at)]),c(se,P)};var I=Ma(),V=te(I);le(V,29,()=>e(De),se=>se.id,(se,d)=>{var z=Oa(),P=r(z);T(P,()=>e(d),()=>!1),t(z),br(z,()=>hr,()=>({duration:300})),nr(3,z,()=>or,()=>({duration:200})),c(se,z)}),t(V);var xe=o(V,2);{var Ke=se=>{var d=Na(),z=o(te(d),2);le(z,29,()=>e(Te),P=>P.id,(P,ut)=>{var Q=Ia(),Xe=r(Q);T(Xe,()=>e(ut),()=>!0),t(Q),br(Q,()=>hr,()=>({duration:300})),nr(3,Q,()=>or,()=>({duration:200})),c(P,Q)}),t(z),c(se,d)};w(xe,se=>{e(Te).length>0&&se(Ke)})}c(h,I)},Tr=h=>{var T=Ua();le(T,21,()=>e(Ce),we,(I,V)=>{const xe=F(()=>X(e(V))),Ke=F(()=>new Date().toDateString()===e(V).toDateString()),se=F(()=>e(_e)&&e(_e).toDateString()===e(V).toDateString());var d=qa(),z=r(d),P=r(z),ut=r(P,!0);t(P);var Q=o(P,2),Xe=r(Q,!0);t(Q),t(z);var gt=o(z,2);le(gt,21,()=>e(xe),we,(ue,q)=>{const Qe=F(()=>e(re)===e(q).id);var he=Wa();Vt(he,"draggable",!0),he.__click=()=>{e(Qe)||Fe(e(q))};var ft=r(he),jt=r(ft);{var Kt=Y=>{var ye=Ha();E((ge,$t)=>{C(ye,1,ge),Pe(ye,$t)},[()=>`h-2 w-2 shrink-0 rounded-full ${e(q).color.startsWith("bg-")?e(q).color:""}`,()=>e(q).color.startsWith("bg-")?"":`background-color: ${e(q).color}`]),c(Y,ye)};w(jt,Y=>{e(q).color&&Y(Kt)})}var _t=o(jt,2),Xt=r(_t,!0);t(_t),t(ft);var Ut=o(ft,2),Qt=r(Ut);{var Ft=Y=>{var ye=Pa(),ge=r(ye,!0);t(ye),E($t=>N(ge,$t),[()=>J.getTaskType(e(q).type)?.label??e(q).type]),c(Y,ye)};w(Qt,Y=>{e(q).type&&Y(Ft)})}t(Ut),t(he),E(()=>{C(he,1,`group flex flex-col gap-1 rounded border border-zinc-800 bg-zinc-900/60 p-2 text-left transition-all ${e(Qe)?"cursor-grabbing opacity-50":"cursor-grab hover:bg-zinc-800/80"}`),Vt(_t,"title",e(q).title),N(Xt,e(q).title)}),ze("dragstart",he,Y=>ae(Y,e(q))),c(ue,he)}),t(gt),t(d),E((ue,q)=>{C(d,1,`flex min-h-[200px] flex-col gap-2 rounded-lg border p-2 transition-colors ${e(Ke)?"border-zinc-700 bg-zinc-900/40":e(se)?"border-indigo-500/50 bg-zinc-800/50":"border-transparent"}`),C(P,1,`text-sm font-medium ${e(Ke)?"text-indigo-400":"text-zinc-400"}`),N(ut,ue),C(Q,1,`text-xs ${e(Ke)?"text-indigo-400":"text-zinc-600"}`),N(Xe,q)},[()=>e(V).toLocaleDateString("en-US",{weekday:"short"}),()=>e(V).getDate()]),ze("dragover",d,it),ze("dragenter",d,ue=>xt(ue,e(V))),ze("dragleave",d,pe),ze("drop",d,ue=>ht(ue,e(V))),c(I,d)}),t(T),c(h,T)};w(Jt,h=>{e(R)==="list"?h(G):h(Tr,!1)})}E(()=>{N(je,`Completed ${e(Ue)??""} / ${e($).length??""}`),C(oe,1,`rounded-md p-1.5 transition-all ${e(R)==="list"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`),C(me,1,`rounded-md p-1.5 transition-all ${e(R)==="week"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`),N(Zt,`Completed ${e(Ue)??""} / ${e($).length??""}`),C(Ze,1,`rounded-md p-1.5 transition-all ${e(R)==="list"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`),C(Je,1,`rounded-md p-1.5 transition-all ${e(R)==="week"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`)}),Yt(Ye,()=>e(K),h=>b(K,h)),Yt(H,()=>e(ke),h=>b(ke,h)),c(ie,Ae)};w(lt,ie=>{e($).length===0?ie(Tt):ie(Ve,!1)},!0)}c(A,D)};w(s,A=>{e(j)?A(x,!1):A(v)},!0)}c(a,n)};w(Pt,a=>{e(B)&&e(j)!==null?a(kt):a(Dt,!1)})}t(ot),c(S,zt),wr()}kr(["click","keydown"]);export{li as component};
