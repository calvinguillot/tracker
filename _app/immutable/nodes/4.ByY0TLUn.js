import{c as $,a as d,f as v,t as ce}from"../chunks/B0eItxIr.js";import{p as ve,f as ee,a as ue,c as t,s,d as e,t as k,g as V,h as be,u as ye,o as we,i as o,j as c}from"../chunks/X2kIab3P.js";import{s as b}from"../chunks/YV7zpaQ-.js";import{i as y}from"../chunks/CgBGxdej.js";import{e as G,i as I,s as ke}from"../chunks/D_mzoAGq.js";import{d as pe}from"../chunks/CRy_Kd7G.js";import{s as A}from"../chunks/Bkout0r_.js";import{E as ze,P as Ce,L as Me}from"../chunks/CyyHCCnT.js";var je=v('<div><h3 class="text-sm font-medium text-zinc-400">Weight</h3> <p class="text-lg text-zinc-100"> </p></div>'),De=v('<div class="bg-zinc-800/50 p-3 rounded-lg border border-zinc-800"><h3 class="text-xs font-medium text-zinc-400 uppercase tracking-wider mb-1"> </h3> <p class="text-xl font-semibold text-indigo-400"> </p></div>'),Ee=v('<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-900/30 text-red-400 border border-red-900/50">Sickness</span>'),Te=v('<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-900/30 text-indigo-400 border border-indigo-900/50">Calvin Day</span>'),Le=v('<div><h3 class="text-sm font-medium text-zinc-400 capitalize mb-1"> </h3> <p class="text-zinc-200 bg-zinc-800/30 p-2 rounded-md border border-zinc-800/50"> </p></div>'),Be=v('<div class="border-t border-zinc-800 pt-4"><h3 class="text-sm font-medium text-zinc-400 mb-2">Notes</h3> <p class="text-zinc-300 whitespace-pre-wrap bg-zinc-800/30 p-4 rounded-lg border border-zinc-800/50"> </p></div>'),Oe=v('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="bg-zinc-900 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto flex flex-col border border-zinc-800"><div class="p-6 border-b border-zinc-800 flex justify-between items-center sticky top-0 bg-zinc-900 z-10"><h2 class="text-xl font-bold text-zinc-100">Entry Details</h2> <button class="text-zinc-400 hover:text-zinc-200 transition-colors" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 space-y-6"><div><h3 class="text-sm font-medium text-zinc-400">Date</h3> <p class="text-lg text-zinc-100"> </p></div> <!> <div class="grid grid-cols-2 sm:grid-cols-3 gap-4"></div> <div class="flex flex-wrap gap-2"><!> <!></div> <div class="grid grid-cols-1 sm:grid-cols-2 gap-6"></div> <!></div> <div class="p-6 border-t border-zinc-800 bg-zinc-900 rounded-b-xl sticky bottom-0"><button class="w-full rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-inset ring-zinc-700 hover:bg-zinc-700 transition-colors">Close</button></div></div></div>');function Se(te,l){ve(l,!0);function J(u){u.target===u.currentTarget&&l.onClose()}function j(u){u.key==="Escape"&&l.onClose()}var E=$(),z=ee(E);{var T=u=>{var m=Oe();m.__click=J,m.__keydown=j;var Q=t(m),N=t(Q),ae=s(t(N),2);ae.__click=function(...a){l.onClose?.apply(this,a)},e(N);var H=s(N,2),P=t(H),q=s(t(P),2),F=t(q,!0);e(q),e(P);var L=s(P,2);{var re=a=>{var n=je(),p=s(t(n),2),g=t(p);e(p),e(n),k(()=>b(g,`${l.entry.weight??""} kg`)),d(a,n)};y(L,a=>{l.entry.weight&&a(re)})}var K=s(L,2);G(K,20,()=>["mood","energy","physical","sleep","meals"],I,(a,n)=>{var p=$(),g=ee(p);{var O=C=>{var w=De(),h=t(w),f=t(h,!0);e(h);var x=s(h,2),M=t(x,!0);e(x),e(w),k(()=>{b(f,n),b(M,l.entry[n])}),d(C,w)};y(g,C=>{l.entry[n]!==null&&l.entry[n]!==void 0&&C(O)})}d(a,p)}),e(K);var B=s(K,2),R=t(B);{var ie=a=>{var n=Ee();d(a,n)};y(R,a=>{l.entry.sickness&&a(ie)})}var U=s(R,2);{var ne=a=>{var n=Te();d(a,n)};y(U,a=>{l.entry.calvin_day&&a(ne)})}e(B);var r=s(B,2);G(r,20,()=>["work_type","study_type","culture_type","music_type","exercise_type","leisure_type","family_type","dreams_type","reminder_type"],I,(a,n)=>{var p=$(),g=ee(p);{var O=C=>{var w=Le(),h=t(w),f=t(h,!0);e(h);var x=s(h,2),M=t(x,!0);e(x),e(w),k(W=>{b(f,W),b(M,l.entry[n])},[()=>n.replace("_type","")]),d(C,w)};y(g,C=>{l.entry[n]&&C(O)})}d(a,p)}),e(r);var i=s(r,2);{var _=a=>{var n=Be(),p=s(t(n),2),g=t(p,!0);e(p),e(n),k(()=>b(g,l.entry.notes)),d(a,n)};y(i,a=>{l.entry.notes&&a(_)})}e(H);var D=s(H,2),se=t(D);se.__click=function(...a){l.onClose?.apply(this,a)},e(D),e(Q),e(m),k(()=>b(F,l.entry.created_at)),d(u,m)};y(z,u=>{l.isOpen&&l.entry&&u(T)})}d(te,E),ue()}pe(["click","keydown"]);var Ve=v('<button class="fixed right-8 bottom-8 z-50 rounded-full bg-indigo-600 p-4 text-white shadow-lg transition-transform hover:scale-105 hover:bg-indigo-500" aria-label="New Entry"><!></button>'),Ae=v('<div class="flex h-64 items-center justify-center"><!></div>'),Ne=v('<th class="hidden px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase md:table-cell"> </th>'),He=v('<td class="hidden max-w-xs truncate px-6 py-4 text-sm whitespace-nowrap text-zinc-400 md:table-cell"><!></td>'),Pe=v('<tr class="transition-colors hover:bg-zinc-800/50"><td class="sticky left-0 z-10 bg-zinc-900 px-6 py-4 font-medium whitespace-nowrap text-zinc-200"> </td><td class="sticky left-[100px] z-10 space-x-2 border-r border-zinc-800 bg-zinc-900 px-6 py-4 whitespace-nowrap shadow-[4px_0_8px_-4px_rgba(0,0,0,0.3)]"><button class="text-zinc-400 transition-colors hover:text-zinc-200 md:hidden" aria-label="View Details"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></button> <button class="text-indigo-400 transition-colors hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="text-red-400 transition-colors hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></td><!></tr>'),qe=v('<div class="overflow-x-auto rounded-lg border border-zinc-800 shadow"><table class="min-w-full divide-y divide-zinc-800"><thead class="bg-zinc-800"><tr><th class="sticky left-0 z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Date</th><th class="sticky left-[100px] z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Actions</th><!></tr></thead><tbody class="divide-y divide-zinc-800 bg-zinc-900"></tbody></table></div>'),Fe=v('<p class="text-center text-zinc-500">Please sign in to view tracking data.</p>'),Ke=v('<div><div class="mb-6 flex items-center justify-between"><h2 class="text-xl font-bold text-zinc-100">Full Table</h2> <!></div> <!> <!> <!></div>');function Xe(te,l){ve(l,!0);let J=V(be(ye(()=>l.data.dailyTracking))),j=V(!1),E=V(!1),z=V(null),T=V(null),u=V(!0);we(()=>{A.auth.getSession().then(({data:{session:i}})=>{c(T,i,!0),i?m():c(u,!1)});const{data:{subscription:r}}=A.auth.onAuthStateChange((i,_)=>{c(T,_,!0),_?m():c(u,!1)});return()=>r.unsubscribe()});async function m(){c(u,!0);const{data:r,error:i}=await A.from("dailyTracking").select().order("created_at",{ascending:!1});!i&&r&&c(J,r,!0),c(u,!1)}function Q(){c(z,null),c(j,!0)}function N(r){c(z,r,!0),c(j,!0)}function ae(r){c(z,r,!0),c(E,!0)}async function H(r){if(!confirm("Are you sure you want to delete this entry?"))return;const{error:i}=await A.from("dailyTracking").delete().eq("id",r);i?alert(i.message):m()}async function P(r){if(o(z)){const{id:i,..._}=r,{error:D}=await A.from("dailyTracking").update(_).eq("id",o(z).id);D?alert(D.message):(c(j,!1),m())}else{const{error:i}=await A.from("dailyTracking").insert(r);i?alert(i.message):(c(j,!1),m())}}const q=["mood","energy","physical","sleep","meals","weight","sickness","work_type","study_type","culture_type","music_type","exercise_type","leisure_type","family_type","calvin_day","dreams_type","reminder_type","notes"];var F=Ke(),L=t(F),re=s(t(L),2);{var K=r=>{var i=Ve();i.__click=Q;var _=t(i);Ce(_,{class:"h-6 w-6"}),e(i),d(r,i)};y(re,r=>{o(T)&&r(K)})}e(L);var B=s(L,2);{var R=r=>{var i=Ae(),_=t(i);Me(_,{class:"h-8 w-8 animate-spin text-indigo-500"}),e(i),d(r,i)},ie=r=>{var i=$(),_=ee(i);{var D=a=>{var n=qe(),p=t(n),g=t(p),O=t(g),C=s(t(O),2);G(C,17,()=>q,I,(h,f)=>{var x=Ne(),M=t(x,!0);e(x),k(W=>b(M,W),[()=>o(f).replace("_"," ")]),d(h,x)}),e(O),e(g);var w=s(g);G(w,21,()=>o(J),I,(h,f)=>{var x=Pe(),M=t(x),W=t(M,!0);e(M);var oe=s(M),le=t(oe);le.__click=()=>ae(o(f));var de=s(le,2);de.__click=()=>N(o(f));var fe=s(de,2);fe.__click=()=>H(o(f).id),e(oe);var xe=s(oe);G(xe,17,()=>q,I,(_e,X)=>{var Z=He(),me=t(Z);{var ge=S=>{var Y=ce();k(()=>b(Y,o(f)[o(X)]?"Yes":"No")),d(S,Y)},he=S=>{var Y=ce();k(()=>b(Y,o(f)[o(X)]??"-")),d(S,Y)};y(me,S=>{typeof o(f)[o(X)]=="boolean"?S(ge):S(he,!1)})}e(Z),k(()=>ke(Z,"title",o(f)[o(X)])),d(_e,Z)}),e(x),k(()=>b(W,o(f).created_at)),d(h,x)}),e(w),e(p),e(n),d(a,n)},se=a=>{var n=Fe();d(a,n)};y(_,a=>{o(T)?a(D):a(se,!1)},!0)}d(r,i)};y(B,r=>{o(u)?r(R):r(ie,!1)})}var U=s(B,2);ze(U,{get isOpen(){return o(j)},get entry(){return o(z)},onClose:()=>c(j,!1),onSave:P});var ne=s(U,2);Se(ne,{get isOpen(){return o(E)},get entry(){return o(z)},onClose:()=>c(E,!1)}),e(F),d(te,F),ue()}pe(["click"]);export{Xe as component};
