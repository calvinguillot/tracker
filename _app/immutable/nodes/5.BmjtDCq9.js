import{c as De,a as l,f as u,t as rt}from"../chunks/Blua9Muq.js";import{k as ce,p as We,v as V,x as it,y as o,z as r,B as i,A as t,D as C,a as Xe,m as e,I as _e,w as st,G as Le,F as _t,u as xt,o as yt}from"../chunks/BWAAnFQE.js";import{d as Ze,s as j,e as lt,r as bt}from"../chunks/B5UJqv3b.js";import{l as ot,s as dt,i as y}from"../chunks/hg7ngHtp.js";import{e as oe,i as de,s as ct}from"../chunks/wCmp37z_.js";import{I as vt,s as ut,L as gt,g as Ke,f as Ye,a as Me,r as ae,i as nt,t as ft,d as fe,e as pt,b as ht,c as wt}from"../chunks/PIMEx5Fs.js";import{s as me}from"../chunks/BW5xtwr9.js";import"../chunks/B5eWTv3U.js";import{b as Qe,a as Fe,P as zt}from"../chunks/CzIvXD_s.js";import{f as mt}from"../chunks/BsCRBkET.js";import{L as kt}from"../chunks/Dvrau0F1.js";import{A as Ct}from"../chunks/DquZEZ0H.js";import{A as Dt}from"../chunks/ZpvRQldu.js";function Et(H,a){const b=ot(a,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]];vt(H,dt({name:"eye"},()=>b,{get iconNode(){return f},children:(p,n)=>{var _=De(),D=ce(_);ut(D,a,"default",{}),l(p,_)},$$slots:{default:!0}}))}function jt(H,a){const b=ot(a,["children","$$slots","$$events","$$legacy"]);const f=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}]];vt(H,dt({name:"layout-grid"},()=>b,{get iconNode(){return f},children:(p,n)=>{var _=De(),D=ce(_);ut(D,a,"default",{}),l(p,_)},$$slots:{default:!0}}))}var St=u('<div class="absolute inset-0 z-10 flex items-center justify-center bg-zinc-900"><!></div>'),It=u('<img alt="Daily entry"/>'),Tt=u("<!> <!>",1),At=u('<div class="flex h-full w-full flex-col items-center justify-center gap-2 text-zinc-700"><span class="text-xs">No Image</span> <span class="text-xs font-medium text-zinc-600"> </span></div>'),Lt=u('<div class="group relative aspect-square overflow-hidden rounded-lg border border-zinc-800 bg-zinc-900"><!> <div class="absolute inset-0 flex flex-col items-center justify-center gap-3 bg-black/60 opacity-0 transition-opacity duration-300 group-hover:opacity-100"><span class="font-bold text-white shadow-black drop-shadow-md"> </span> <button class="rounded-full bg-white/20 p-3 text-white backdrop-blur-sm transition-all hover:scale-110 hover:bg-white/40" aria-label="View Details"><!></button></div></div>');function Mt(H,a){We(a,!0);let b=V(null),f=V(!!a.entry?.image);it(()=>{a.entry?.image?(o(f,!0),p(a.entry.image)):(o(b,null),o(f,!1))});async function p(M){const{data:d,error:x}=await me.storage.from("dailyPicture").createSignedUrl(M,3600);d?o(b,d.signedUrl,!0):o(f,!1)}function n(){o(f,!1)}var _=Lt(),D=r(_);{var R=M=>{var d=Tt(),x=ce(d);{var N=U=>{var S=St(),re=r(S);{let xe=_e(()=>Me.getAccentHex());gt(re,{class:"h-6 w-6 animate-spin",get style(){return`color: ${e(xe)??""}`}})}t(S),l(U,S)};y(x,U=>{e(f)&&U(N)})}var L=i(x,2);{var Y=U=>{var S=It();C(()=>{Ke(S,"src",e(b)),Ye(S,1,`h-full w-full object-cover transition-all duration-700 ${e(f)?"scale-105 opacity-0":"scale-100 opacity-100"} group-hover:scale-110`)}),lt("load",S,n),bt(S),l(U,S)};y(L,U=>{e(b)&&U(Y)})}l(M,d)},z=M=>{var d=At(),x=i(r(d),2),N=r(x,!0);t(x),t(d),C(()=>j(N,a.entry.created_at)),l(M,d)};y(D,M=>{a.entry.image?M(R):M(z,!1)})}var T=i(D,2),W=r(T),K=r(W,!0);t(W);var ve=i(W,2);ve.__click=()=>a.onView(a.entry);var Ee=r(ve);Et(Ee,{class:"h-6 w-6"}),t(ve),t(T),t(_),C(()=>j(K,a.entry.created_at)),l(H,_),Xe()}Ze(["click"]);async function Nt(H,a=1200){return new Promise((b,f)=>{if(!H){f(new Error("No file provided"));return}const p=new Image;p.onload=()=>{const n=document.createElement("canvas");let _=p.width,D=p.height;_>a&&(D=Math.round(D*a/_),_=a),n.width=_,n.height=D;const R=n.getContext("2d");if(!R){f(new Error("Could not get canvas context"));return}R.drawImage(p,0,0,_,D),n.toBlob(z=>{z?b(z):f(new Error("Canvas to Blob conversion failed"))},"image/webp",.8)},p.onerror=()=>{f(new Error("Failed to load image"))},p.src=URL.createObjectURL(H)})}var Ut=u('<div><label class="mb-1 block text-sm font-medium text-zinc-400 capitalize"> </label> <input type="number" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div>'),Bt=u('<label><input type="checkbox" class="sr-only"/> <span> </span> <span class="text-xs text-amber-400">(current)</span></label>'),Ot=u('<label><input type="checkbox" class="sr-only"/> <span> </span></label>'),Pt=u('<div class="flex flex-wrap gap-2"><!> <!></div>'),Ft=u('<p class="text-sm text-zinc-500 italic">No options configured in settings</p>'),Vt=u('<div><span class="mb-2 block text-sm font-medium text-zinc-400 capitalize"> </span> <!></div>'),Ht=u('<p class="text-sm text-green-400">New image selected</p>'),Rt=u('<div class="flex items-center gap-2"><p class="text-sm text-zinc-400">Current image set</p> <button type="button" class="text-xs text-red-400 hover:text-red-300">Remove</button></div>'),qt=u('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-4xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="created_at" class="mb-1 block text-sm font-medium text-zinc-400">Date</label> <input type="date" id="created_at" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="weight" class="mb-1 block text-sm font-medium text-zinc-400">Weight (kg)</label> <input type="number" step="0.1" id="weight" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div class="grid grid-cols-2 gap-4 md:grid-cols-5"></div> <div class="flex flex-wrap gap-6"><div class="flex items-center"><input type="checkbox" id="calvin_day" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"/> <label for="calvin_day" class="ml-2 block text-sm text-zinc-300">Calvin Day</label></div> <div class="flex items-center"><input type="checkbox" id="ihana" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"/> <label for="ihana" class="ml-2 block text-sm text-zinc-300">Ihana</label></div> <div class="flex items-center"><input type="checkbox" id="call_family" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"/> <label for="call_family" class="ml-2 block text-sm text-zinc-300">Call Family</label></div> <div class="flex items-center"><input type="checkbox" id="cry" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"/> <label for="cry" class="ml-2 block text-sm text-zinc-300">Cry</label></div> <div class="flex items-center"><input type="checkbox" id="loving" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"/> <label for="loving" class="ml-2 block text-sm text-zinc-300">Loving</label></div> <div class="flex items-center"><input type="checkbox" id="friends" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"/> <label for="friends" class="ml-2 block text-sm text-zinc-300">Friends</label></div> <div class="flex items-center"><input type="checkbox" id="sickness" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"/> <label for="sickness" class="ml-2 block text-sm text-zinc-300">Sickness</label></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"></div> <div><label for="image" class="mb-1 block text-sm font-medium text-zinc-400">Image</label> <div class="flex items-center gap-4"><input type="file" id="image" accept="image/*" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/> <!></div></div> <div><label for="notes" class="mb-1 block text-sm font-medium text-zinc-400">Notes</label> <textarea id="notes" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div class="sticky bottom-0 mt-6 flex justify-end gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700 disabled:opacity-50">Cancel</button> <button type="submit" class="rounded-md px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm transition-all hover:brightness-110 focus-visible:outline-2 focus-visible:outline-offset-2 disabled:opacity-50"> </button></div></form></div></div>');function Gt(H,a){We(a,!0);let b=V(!1),f=V(null),p=V(null),n=V(st({created_at:new Date().toISOString().split("T")[0],mood:null,energy:null,physical:null,sleep:null,meals:null,weight:null,sickness:!1,work_type:[],study_type:[],culture_type:[],art_type:[],music_type:[],exercise_type:[],leisure_type:[],calvin_day:!1,ihana:!1,call_family:!1,cry:!1,loving:!1,friends:!1,notes:"",image:null}));function _(d){return d?Array.isArray(d)?d:d.split(",").map(x=>x.trim()).filter(Boolean):[]}function D(d,x){const N=e(n)[d];N.includes(x)?e(n)[d]=N.filter(L=>L!==x):e(n)[d]=[...N,x]}it(()=>{a.isOpen&&(a.entry?(o(n,{created_at:a.entry.created_at||new Date().toISOString().split("T")[0],mood:a.entry.mood,energy:a.entry.energy,physical:a.entry.physical,sleep:a.entry.sleep,meals:a.entry.meals,weight:a.entry.weight,sickness:a.entry.sickness??!1,work_type:_(a.entry.work_type),study_type:_(a.entry.study_type),culture_type:_(a.entry.culture_type),art_type:_(a.entry.art_type),music_type:_(a.entry.music_type),exercise_type:_(a.entry.exercise_type),leisure_type:_(a.entry.leisure_type),calvin_day:a.entry.calvin_day??!1,ihana:a.entry.ihana??!1,call_family:a.entry.call_family??!1,cry:a.entry.cry??!1,loving:a.entry.loving??!1,friends:a.entry.friends??!1,notes:a.entry.notes??"",image:a.entry.image??null},!0),o(f,null),o(p,null)):(o(n,{created_at:new Date().toISOString().split("T")[0],mood:null,energy:null,physical:null,sleep:null,meals:null,weight:null,sickness:!1,work_type:[],study_type:[],culture_type:[],art_type:[],music_type:[],exercise_type:[],leisure_type:[],calvin_day:!1,ihana:!1,call_family:!1,cry:!1,loving:!1,friends:!1,notes:"",image:null},!0),o(f,null),o(p,null)))});async function R(d){const x=d.target;x.files&&x.files.length>0&&(o(f,x.files[0],!0),o(p,URL.createObjectURL(e(f)),!0))}async function z(){if(e(n).image){const{error:d}=await me.storage.from("dailyPicture").remove([e(n).image]);if(d){fe("Failed to delete image: "+d.message,"Error");return}e(n).image=null,o(f,null),o(p,null),fe("Image deleted successfully","Success")}}async function T(d){d.preventDefault();let x=e(n).image;if(e(f)){if(!a.userId){fe("User ID is missing, cannot upload image","Error");return}o(b,!0);try{const L=await Nt(e(f)),Y=`${a.userId}/${e(n).created_at}.webp`,{data:U,error:S}=await me.storage.from("dailyPicture").upload(Y,L,{contentType:"image/webp",upsert:!0});if(S)throw S;x=U.path}catch(L){fe(`Image upload failed: ${L.message}`,"Error"),o(b,!1);return}o(b,!1)}const N={...e(n),image:x,work_type:e(n).work_type.join(", "),study_type:e(n).study_type.join(", "),culture_type:e(n).culture_type.join(", "),art_type:e(n).art_type.join(", "),music_type:e(n).music_type.join(", "),exercise_type:e(n).exercise_type.join(", "),leisure_type:e(n).leisure_type.join(", ")};a.onSave(N)}function W(d){d.target===d.currentTarget&&a.onClose()}function K(d){d.key==="Escape"&&a.onClose()}var ve=De(),Ee=ce(ve);{var M=d=>{var x=qt();x.__click=W,x.__keydown=K;var N=r(x),L=r(N),Y=r(L),U=r(Y,!0);t(Y);var S=i(Y,2);S.__click=function(...v){a.onClose?.apply(this,v)},t(L);var re=i(L,2),xe=r(re),je=r(xe),Ne=i(r(je),2);ae(Ne),t(je);var Ue=i(je,2),g=i(r(Ue),2);ae(g),t(Ue),t(xe);var m=i(xe,2);oe(m,20,()=>["mood","energy","physical","sleep","meals"],de,(v,w)=>{var P=Ut(),F=r(P),Q=r(F,!0);t(F);var B=i(F,2);ae(B),t(P),C(()=>{Ke(F,"for",w),j(Q,w),Ke(B,"id",w)}),Qe(B,()=>e(n)[w],ze=>e(n)[w]=ze),l(v,P)}),t(m);var E=i(m,2),A=r(E),X=r(A);ae(X),Le(2),t(A);var J=i(A,2),ye=r(J);ae(ye),Le(2),t(J);var be=i(J,2),Se=r(be);ae(Se),Le(2),t(be);var ue=i(be,2),pe=r(ue);ae(pe),Le(2),t(ue);var he=i(ue,2),Ve=r(he);ae(Ve),Le(2),t(he);var Be=i(he,2),s=r(Be);ae(s),Le(2),t(Be);var c=i(Be,2),k=r(c);ae(k),Le(2),t(c),t(E);var O=i(E,2);oe(O,20,()=>["work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type"],de,(v,w)=>{const P=_e(()=>w.replace("_type","")),F=_e(()=>Me.settings.daily_type[e(P)]||[]),Q=_e(()=>w),B=_e(()=>e(n)[e(Q)]),ze=_e(()=>e(B).filter(ge=>!e(F).includes(ge)));var Re=Vt(),Ge=r(Re),$e=r(Ge,!0);t(Ge);var et=i(Ge,2);{var Te=ge=>{var Pe=Pt(),Je=r(Pe);oe(Je,17,()=>e(ze),de,(ke,ne)=>{var se=Bt(),le=r(se);ae(le),le.__change=()=>D(e(Q),e(ne));var te=i(le,2),Ce=r(te,!0);t(te),Le(2),t(se),C((tt,at)=>{Ye(se,1,`flex cursor-pointer items-center gap-1.5 rounded-md border px-2.5 py-1.5 text-sm transition-colors ${tt??""}`),nt(le,at),j(Ce,e(ne))},[()=>e(B).includes(e(ne))?"border-amber-500 bg-amber-500/20 text-amber-300":"border-zinc-600 bg-zinc-800 text-zinc-300 hover:border-zinc-500",()=>e(B).includes(e(ne))]),l(ke,se)});var Ae=i(Je,2);oe(Ae,17,()=>e(F),de,(ke,ne)=>{var se=Ot(),le=r(se);ae(le),le.__change=()=>D(e(Q),e(ne));var te=i(le,2),Ce=r(te,!0);t(te),t(se),C((tt,at)=>{Ye(se,1,`flex cursor-pointer items-center gap-1.5 rounded-md border px-2.5 py-1.5 text-sm transition-colors ${tt??""}`),nt(le,at),j(Ce,e(ne))},[()=>e(B).includes(e(ne))?"border-indigo-500 bg-indigo-500/20 text-indigo-300":"border-zinc-600 bg-zinc-800 text-zinc-300 hover:border-zinc-500",()=>e(B).includes(e(ne))]),l(ke,se)}),t(Pe),l(ge,Pe)},qe=ge=>{var Pe=Ft();l(ge,Pe)};y(et,ge=>{e(F).length>0||e(ze).length>0?ge(Te):ge(qe,!1)})}t(Re),C(()=>j($e,e(P))),l(v,Re)}),t(O);var q=i(O,2),Z=i(r(q),2),$=r(Z);$.__change=R;var ie=i($,2);{var Oe=v=>{var w=Ht();l(v,w)},h=v=>{var w=De(),P=ce(w);{var F=Q=>{var B=Rt(),ze=i(r(B),2);ze.__click=z,t(B),l(Q,B)};y(P,Q=>{e(n).image&&Q(F)},!0)}l(v,w)};y(ie,v=>{e(p)?v(Oe):v(h,!1)})}t(Z),t(q);var I=i(q,2),ee=i(r(I),2);_t(ee),t(I);var G=i(I,2),Ie=r(G);Ie.__click=function(...v){a.onClose?.apply(this,v)};var we=i(Ie,2),He=r(we,!0);t(we),t(G),t(re),t(N),t(x),C(v=>{j(U,a.entry?"Edit Entry":"New Entry"),Ie.disabled=e(b),we.disabled=e(b),ct(we,`background-color: ${v??""}`),j(He,e(b)?"Uploading...":"Save")},[()=>Me.getAccentHex()]),lt("submit",re,T),Qe(Ne,()=>e(n).created_at,v=>e(n).created_at=v),Qe(g,()=>e(n).weight,v=>e(n).weight=v),Fe(X,()=>e(n).calvin_day,v=>e(n).calvin_day=v),Fe(ye,()=>e(n).ihana,v=>e(n).ihana=v),Fe(Se,()=>e(n).call_family,v=>e(n).call_family=v),Fe(pe,()=>e(n).cry,v=>e(n).cry=v),Fe(Ve,()=>e(n).loving,v=>e(n).loving=v),Fe(s,()=>e(n).friends,v=>e(n).friends=v),Fe(k,()=>e(n).sickness,v=>e(n).sickness=v),Qe(ee,()=>e(n).notes,v=>e(n).notes=v),ft(3,x,()=>mt,()=>({duration:Me.getTransitionDuration()})),l(d,x)};y(Ee,d=>{a.isOpen&&d(M)})}l(H,ve),Xe()}Ze(["click","keydown","change"]);var Kt=u('<div><h3 class="text-sm font-medium text-zinc-400">Weight</h3> <p class="text-lg text-zinc-100"> </p></div>'),Yt=u('<div class="rounded-lg border border-zinc-800 bg-zinc-800/50 p-3"><h3 class="mb-1 text-xs font-medium tracking-wider text-zinc-400 uppercase"> </h3> <p class="text-xl font-semibold text-indigo-400"> </p></div>'),Jt=u('<span class="inline-flex items-center rounded-full border border-red-900/50 bg-red-900/30 px-2.5 py-0.5 text-xs font-medium text-red-400">Sickness</span>'),Qt=u('<span class="inline-flex items-center rounded-full border border-indigo-900/50 bg-indigo-900/30 px-2.5 py-0.5 text-xs font-medium text-indigo-400">Calvin Day</span>'),Wt=u('<span class="inline-flex items-center rounded-full border border-pink-900/50 bg-pink-900/30 px-2.5 py-0.5 text-xs font-medium text-pink-400">Ihana</span>'),Xt=u('<span class="inline-flex items-center rounded-full border border-green-900/50 bg-green-900/30 px-2.5 py-0.5 text-xs font-medium text-green-400">Call Family</span>'),Zt=u('<span class="inline-flex items-center rounded-full border border-blue-900/50 bg-blue-900/30 px-2.5 py-0.5 text-xs font-medium text-blue-400">Cry</span>'),$t=u('<span class="inline-flex items-center rounded-full border border-red-900/50 bg-red-900/30 px-2.5 py-0.5 text-xs font-medium text-red-400">Loving</span>'),ea=u('<span class="inline-flex items-center rounded-full border border-purple-900/50 bg-purple-900/30 px-2.5 py-0.5 text-xs font-medium text-purple-400">Friends</span>'),ta=u('<div><h3 class="mb-1 text-sm font-medium text-zinc-400 capitalize"> </h3> <p class="rounded-md border border-zinc-800/50 bg-zinc-800/30 p-2 text-zinc-200"> </p></div>'),aa=u('<div class="border-t border-zinc-800 pt-4"><h3 class="mb-2 text-sm font-medium text-zinc-400">Notes</h3> <p class="rounded-lg border border-zinc-800/50 bg-zinc-800/30 p-4 whitespace-pre-wrap text-zinc-300"> </p></div>'),ra=u('<div class="flex-1 lg:max-w-md"><div class="sticky top-24"><h3 class="mb-2 text-sm font-medium text-zinc-400">Daily Picture</h3> <div class="relative overflow-hidden rounded-lg border border-zinc-800 bg-zinc-950"><img alt="Daily entry" class="w-full object-contain"/></div></div></div>'),ia=u('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-6xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100">Entry Details</h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex flex-col gap-6 p-4 md:p-6 lg:flex-row"><div class="flex-1 space-y-6"><div><h3 class="text-sm font-medium text-zinc-400">Date</h3> <p class="text-lg text-zinc-100"> </p></div> <!> <div class="grid grid-cols-2 gap-4 sm:grid-cols-3"></div> <div class="flex flex-wrap gap-2"><!> <!> <!> <!> <!> <!> <!></div> <div class="grid grid-cols-1 gap-6 sm:grid-cols-2"></div> <!></div> <!></div></div></div>');function na(H,a){We(a,!0);let b=V(null);it(()=>{a.isOpen&&a.entry?.image?f(a.entry.image):o(b,null)});async function f(z){const{data:T,error:W}=await me.storage.from("dailyPicture").createSignedUrl(z,3600);T&&o(b,T.signedUrl,!0)}function p(z){z.target===z.currentTarget&&a.onClose()}function n(z){z.key==="Escape"&&a.onClose()}var _=De(),D=ce(_);{var R=z=>{var T=ia();T.__click=p,T.__keydown=n;var W=r(T),K=r(W),ve=i(r(K),2);ve.__click=function(...s){a.onClose?.apply(this,s)},t(K);var Ee=i(K,2),M=r(Ee),d=r(M),x=i(r(d),2),N=r(x,!0);t(x),t(d);var L=i(d,2);{var Y=s=>{var c=Kt(),k=i(r(c),2),O=r(k);t(k),t(c),C(()=>j(O,`${a.entry.weight??""} kg`)),l(s,c)};y(L,s=>{a.entry.weight&&s(Y)})}var U=i(L,2);oe(U,20,()=>["mood","energy","physical","sleep","meals"],de,(s,c)=>{var k=De(),O=ce(k);{var q=Z=>{var $=Yt(),ie=r($),Oe=r(ie,!0);t(ie);var h=i(ie,2),I=r(h,!0);t(h),t($),C(()=>{j(Oe,c),j(I,a.entry[c])}),l(Z,$)};y(O,Z=>{a.entry[c]!==null&&a.entry[c]!==void 0&&Z(q)})}l(s,k)}),t(U);var S=i(U,2),re=r(S);{var xe=s=>{var c=Jt();l(s,c)};y(re,s=>{a.entry.sickness&&s(xe)})}var je=i(re,2);{var Ne=s=>{var c=Qt();l(s,c)};y(je,s=>{a.entry.calvin_day&&s(Ne)})}var Ue=i(je,2);{var g=s=>{var c=Wt();l(s,c)};y(Ue,s=>{a.entry.ihana&&s(g)})}var m=i(Ue,2);{var E=s=>{var c=Xt();l(s,c)};y(m,s=>{a.entry.call_family&&s(E)})}var A=i(m,2);{var X=s=>{var c=Zt();l(s,c)};y(A,s=>{a.entry.cry&&s(X)})}var J=i(A,2);{var ye=s=>{var c=$t();l(s,c)};y(J,s=>{a.entry.loving&&s(ye)})}var be=i(J,2);{var Se=s=>{var c=ea();l(s,c)};y(be,s=>{a.entry.friends&&s(Se)})}t(S);var ue=i(S,2);oe(ue,20,()=>["work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type"],de,(s,c)=>{var k=De(),O=ce(k);{var q=Z=>{var $=ta(),ie=r($),Oe=r(ie,!0);t(ie);var h=i(ie,2),I=r(h,!0);t(h),t($),C(ee=>{j(Oe,ee),j(I,a.entry[c])},[()=>c.replace("_type","")]),l(Z,$)};y(O,Z=>{a.entry[c]&&Z(q)})}l(s,k)}),t(ue);var pe=i(ue,2);{var he=s=>{var c=aa(),k=i(r(c),2),O=r(k,!0);t(k),t(c),C(()=>j(O,a.entry.notes)),l(s,c)};y(pe,s=>{a.entry.notes&&s(he)})}t(M);var Ve=i(M,2);{var Be=s=>{var c=ra(),k=r(c),O=i(r(k),2),q=r(O);t(O),t(k),t(c),C(()=>Ke(q,"src",e(b))),l(s,c)};y(Ve,s=>{e(b)&&s(Be)})}t(Ee),t(W),t(T),C(()=>j(N,a.entry.created_at)),ft(3,T,()=>mt,()=>({duration:Me.getTransitionDuration()})),l(z,T)};y(D,z=>{a.isOpen&&a.entry&&z(R)})}l(H,_),Xe()}Ze(["click","keydown"]);var sa=u('<button class="fixed right-8 bottom-24 z-50 rounded-full p-4 shadow-lg/30 drop-shadow-lg backdrop-blur-md transition-all hover:scale-110 hover:brightness-110 md:right-16 md:bottom-16" aria-label="New Entry"><!></button>'),la=u('<div class="flex h-64 items-center justify-center"><!></div>'),oa=u("<option> </option>"),da=u('<th class="hidden px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase md:table-cell"> </th>'),ca=u('<td class="hidden max-w-xs truncate px-6 py-4 text-sm whitespace-nowrap text-zinc-400 md:table-cell"><!></td>'),va=u('<tr class="transition-colors hover:bg-zinc-800/50"><td class="sticky left-0 z-10 bg-zinc-900 px-6 py-4 font-medium whitespace-nowrap text-zinc-200"> </td><td class="sticky left-[100px] z-10 space-x-2 border-r border-zinc-800 bg-zinc-900 px-6 py-4 whitespace-nowrap shadow-[4px_0_8px_-4px_rgba(0,0,0,0.3)]"><button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="View Details"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></button> <button class="text-indigo-400 transition-colors hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="text-red-400 transition-colors hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></td><!></tr>'),ua=u('<div class="overflow-x-auto rounded-lg border border-zinc-800 shadow"><table class="min-w-full divide-y divide-zinc-800"><thead class="bg-zinc-800"><tr><th class="sticky left-0 z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Date</th><th class="sticky left-[100px] z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Actions</th><!></tr></thead><tbody class="divide-y divide-zinc-800 bg-zinc-900"></tbody></table></div>'),ga=u('<div class="grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6"></div>'),fa=u('<div class="mb-4 flex flex-wrap items-center justify-between gap-4 text-sm"><div class="flex flex-wrap items-center gap-4"><div class="flex items-center gap-2"><select class="cursor-pointer rounded-md border border-zinc-700 bg-zinc-800 px-3 py-1.5 text-sm text-zinc-100 shadow-sm outline-none focus:border-indigo-500 focus:ring-indigo-500"></select> <button class="flex items-center justify-center rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-zinc-400 shadow-sm transition-colors hover:bg-zinc-700 hover:text-zinc-100" aria-label="Toggle sort order"><!></button></div></div> <div class="flex items-center rounded-lg bg-zinc-800/50 p-1"><button aria-label="List View"><!></button> <button aria-label="Grid View"><!></button></div></div> <!>',1),ma=u('<p class="text-center text-zinc-500">Please sign in to view tracking data.</p>'),_a=u('<section><div class="flex flex-wrap items-center justify-between gap-4"><h2 class="hidden text-lg font-bold text-zinc-100 md:block">Daily</h2> <!></div> <!> <!> <!></section>');function Ia(H,a){We(a,!0);let b=V(st(xt(()=>a.data.dailyTracking))),f=V(!1),p=V(!1),n=V(null),_=V(null),D=V(!0),R=V("grid"),z=V("created_at"),T=V("desc"),W=_e(()=>[...e(b)].sort((g,m)=>{const E=e(T)==="asc"?1:-1;if(e(z)==="created_at"){const A=new Date(g.created_at).getTime(),X=new Date(m.created_at).getTime();return(A-X)*E}else{const A=g[e(z)]??-999,X=m[e(z)]??-999;return(A-X)*E}}));yt(()=>{me.auth.getSession().then(({data:{session:m}})=>{o(_,m,!0),m?K():o(D,!1)});const{data:{subscription:g}}=me.auth.onAuthStateChange((m,E)=>{o(_,E,!0),E?K():o(D,!1)});return()=>g.unsubscribe()});async function K(){o(D,!0);const{data:g,error:m}=await me.from("dailyTracking").select().order("created_at",{ascending:!1});!m&&g&&o(b,g,!0),o(D,!1)}function ve(){o(n,null),o(f,!0)}function Ee(g){o(n,g,!0),o(f,!0)}function M(g){o(n,g,!0),o(p,!0)}async function d(g){if(!await wt("Are you sure you want to delete this entry?","Delete Entry",{confirmText:"Delete",isDestructive:!0}))return;const{error:E}=await me.from("dailyTracking").delete().eq("id",g);E?fe(E.message,"Error"):(fe("Entry deleted successfully","Success"),K())}async function x(g){if(e(n)){const{id:m,...E}=g,{error:A}=await me.from("dailyTracking").update(E).eq("id",e(n).id);A?fe(A.message,"Error"):(fe("Entry updated successfully","Success"),o(f,!1),K())}else{const{error:m}=await me.from("dailyTracking").insert(g);m?fe(m.message,"Error"):(fe("Entry created successfully","Success"),o(f,!1),K())}}const N=["mood","energy","physical","sleep","meals","weight","sickness","work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type","calvin_day","ihana","call_family","cry","loving","friends","notes","image"];var L=_a(),Y=r(L),U=i(r(Y),2);{var S=g=>{var m=sa();m.__click=ve;var E=r(m);zt(E,{class:"h-6 w-6 text-(--accent-color)"}),t(m),C((A,X)=>ct(m,`--accent-color: ${A??""}; background-color: ${X??""}/50`),[()=>Me.getAccentLightHex(),()=>Me.getAccentHex()]),l(g,m)};y(U,g=>{e(_)&&!e(f)&&!e(p)&&!pt.isOpen&&g(S)})}t(Y);var re=i(Y,2);{var xe=g=>{var m=la(),E=r(m);{let A=_e(()=>Me.getAccentHex());gt(E,{class:"h-8 w-8 animate-spin",get style(){return`color: ${e(A)??""}`}})}t(m),l(g,m)},je=g=>{var m=De(),E=ce(m);{var A=J=>{var ye=fa(),be=ce(ye),Se=r(be),ue=r(Se),pe=r(ue);oe(pe,20,()=>["date","mood","energy","physical","sleep","meals","weight"],de,(h,I)=>{const ee=_e(()=>I==="date"?"created_at":I);var G=oa(),Ie=r(G,!0);t(G);var we={};C(He=>{j(Ie,He),we!==(we=e(ee))&&(G.value=(G.__value=e(ee))??"")},[()=>I.charAt(0).toUpperCase()+I.slice(1)]),l(h,G)}),t(pe);var he=i(pe,2);he.__click=()=>o(T,e(T)==="asc"?"desc":"asc",!0);var Ve=r(he);{var Be=h=>{Ct(h,{class:"h-4 w-4"})},s=h=>{Dt(h,{class:"h-4 w-4"})};y(Ve,h=>{e(T)==="asc"?h(Be):h(s,!1)})}t(he),t(ue),t(Se);var c=i(Se,2),k=r(c);k.__click=()=>o(R,"list");var O=r(k);kt(O,{class:"h-4 w-4"}),t(k);var q=i(k,2);q.__click=()=>o(R,"grid");var Z=r(q);jt(Z,{class:"h-4 w-4"}),t(q),t(c),t(be);var $=i(be,2);{var ie=h=>{var I=ua(),ee=r(I),G=r(ee),Ie=r(G),we=i(r(Ie),2);oe(we,17,()=>N,de,(v,w)=>{var P=da(),F=r(P,!0);t(P),C(Q=>j(F,Q),[()=>e(w).replace("_"," ")]),l(v,P)}),t(Ie),t(G);var He=i(G);oe(He,21,()=>e(W),de,(v,w)=>{var P=va(),F=r(P),Q=r(F,!0);t(F);var B=i(F),ze=r(B);ze.__click=()=>M(e(w));var Re=i(ze,2);Re.__click=()=>Ee(e(w));var Ge=i(Re,2);Ge.__click=()=>d(e(w).id),t(B);var $e=i(B);oe($e,17,()=>N,de,(et,Te)=>{var qe=ca(),ge=r(qe);{var Pe=Ae=>{var ke=rt();C(()=>j(ke,e(w)[e(Te)]?"Yes":"No")),l(Ae,ke)},Je=Ae=>{var ke=De(),ne=ce(ke);{var se=te=>{var Ce=rt();C(()=>j(Ce,e(w)[e(Te)]?"Yes":"No")),l(te,Ce)},le=te=>{var Ce=rt();C(()=>j(Ce,e(w)[e(Te)]??"-")),l(te,Ce)};y(ne,te=>{e(Te)==="image"?te(se):te(le,!1)},!0)}l(Ae,ke)};y(ge,Ae=>{typeof e(w)[e(Te)]=="boolean"?Ae(Pe):Ae(Je,!1)})}t(qe),C(()=>Ke(qe,"title",e(w)[e(Te)])),l(et,qe)}),t(P),C(()=>j(Q,e(w).created_at)),l(v,P)}),t(He),t(ee),t(I),l(h,I)},Oe=h=>{var I=ga();oe(I,21,()=>e(W),de,(ee,G)=>{Mt(ee,{get entry(){return e(G)},onView:M})}),t(I),l(h,I)};y($,h=>{e(R)==="list"?h(ie):h(Oe,!1)})}C(()=>{Ye(k,1,`rounded-md p-1.5 transition-all ${e(R)==="list"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`),Ye(q,1,`rounded-md p-1.5 transition-all ${e(R)==="grid"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`)}),ht(pe,()=>e(z),h=>o(z,h)),l(J,ye)},X=J=>{var ye=ma();l(J,ye)};y(E,J=>{e(_)?J(A):J(X,!1)},!0)}l(g,m)};y(re,g=>{e(D)?g(xe):g(je,!1)})}var Ne=i(re,2);{let g=_e(()=>e(_)?.user?.id);Gt(Ne,{get isOpen(){return e(f)},get entry(){return e(n)},get userId(){return e(g)},onClose:()=>o(f,!1),onSave:x})}var Ue=i(Ne,2);na(Ue,{get isOpen(){return e(p)},get entry(){return e(n)},onClose:()=>o(p,!1)}),t(L),l(H,L),Xe()}Ze(["click"]);export{Ia as component};
