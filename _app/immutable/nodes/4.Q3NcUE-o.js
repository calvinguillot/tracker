import{c as re,a as d,f as v,t as ve}from"../chunks/CsfJ7JEx.js";import{p as ue,f as ie,a as xe,c as a,s,d as t,t as k,g as N,h as he,u as ye,o as we,i as l,j as c}from"../chunks/C2GeKLD_.js";import{d as pe,s as w}from"../chunks/ybp99G09.js";import{i as g}from"../chunks/qgtactrx.js";import{e as U,i as X,s as ke}from"../chunks/CeFX5roH.js";import{s as H}from"../chunks/Bkout0r_.js";import{E as ze,P as Ce,L as Me}from"../chunks/B16hRj8l.js";var je=v('<div><h3 class="text-sm font-medium text-zinc-400">Weight</h3> <p class="text-lg text-zinc-100"> </p></div>'),De=v('<div class="rounded-lg border border-zinc-800 bg-zinc-800/50 p-3"><h3 class="mb-1 text-xs font-medium tracking-wider text-zinc-400 uppercase"> </h3> <p class="text-xl font-semibold text-indigo-400"> </p></div>'),Ee=v('<span class="inline-flex items-center rounded-full border border-red-900/50 bg-red-900/30 px-2.5 py-0.5 text-xs font-medium text-red-400">Sickness</span>'),Te=v('<span class="inline-flex items-center rounded-full border border-indigo-900/50 bg-indigo-900/30 px-2.5 py-0.5 text-xs font-medium text-indigo-400">Calvin Day</span>'),Le=v('<span class="inline-flex items-center rounded-full border border-pink-900/50 bg-pink-900/30 px-2.5 py-0.5 text-xs font-medium text-pink-400">Ihana</span>'),Be=v('<span class="inline-flex items-center rounded-full border border-green-900/50 bg-green-900/30 px-2.5 py-0.5 text-xs font-medium text-green-400">Call Family</span>'),Oe=v('<div><h3 class="mb-1 text-sm font-medium text-zinc-400 capitalize"> </h3> <p class="rounded-md border border-zinc-800/50 bg-zinc-800/30 p-2 text-zinc-200"> </p></div>'),Se=v('<div class="border-t border-zinc-800 pt-4"><h3 class="mb-2 text-sm font-medium text-zinc-400">Notes</h3> <p class="rounded-lg border border-zinc-800/50 bg-zinc-800/30 p-4 whitespace-pre-wrap text-zinc-300"> </p></div>'),Ve=v('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4 backdrop-blur-sm" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[90vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-6"><h2 class="text-xl font-bold text-zinc-100">Entry Details</h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="space-y-6 p-6"><div><h3 class="text-sm font-medium text-zinc-400">Date</h3> <p class="text-lg text-zinc-100"> </p></div> <!> <div class="grid grid-cols-2 gap-4 sm:grid-cols-3"></div> <div class="flex flex-wrap gap-2"><!> <!> <!> <!></div> <div class="grid grid-cols-1 gap-6 sm:grid-cols-2"></div> <!></div> <div class="sticky bottom-0 rounded-b-xl border-t border-zinc-800 bg-zinc-900 p-6"><button class="w-full rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 transition-colors ring-inset hover:bg-zinc-700">Close</button></div></div></div>');function Ae(ne,o){ue(o,!0);function Z(x){x.target===x.currentTarget&&o.onClose()}function C(x){x.key==="Escape"&&o.onClose()}var T=re(),z=ie(T);{var L=x=>{var b=Ve();b.__click=Z,b.__keydown=C;var $=a(b),P=a($),se=s(a(P),2);se.__click=function(...e){o.onClose?.apply(this,e)},t(P);var q=s(P,2),F=a(q),I=s(a(F),2),K=a(I,!0);t(I),t(F);var B=s(F,2);{var oe=e=>{var n=je(),p=s(a(n),2),h=a(p);t(p),t(n),k(()=>w(h,`${o.entry.weight??""} kg`)),d(e,n)};g(B,e=>{o.entry.weight&&e(oe)})}var W=s(B,2);U(W,20,()=>["mood","energy","physical","sleep","meals"],X,(e,n)=>{var p=re(),h=ie(p);{var f=u=>{var _=De(),y=a(_),E=a(y,!0);t(y);var j=s(y,2),V=a(j,!0);t(j),t(_),k(()=>{w(E,n),w(V,o.entry[n])}),d(u,_)};g(h,u=>{o.entry[n]!==null&&o.entry[n]!==void 0&&u(f)})}d(e,p)}),t(W);var O=s(W,2),ee=a(O);{var le=e=>{var n=Ee();d(e,n)};g(ee,e=>{o.entry.sickness&&e(le)})}var Y=s(ee,2);{var de=e=>{var n=Te();d(e,n)};g(Y,e=>{o.entry.calvin_day&&e(de)})}var r=s(Y,2);{var i=e=>{var n=Le();d(e,n)};g(r,e=>{o.entry.ihana&&e(i)})}var m=s(r,2);{var S=e=>{var n=Be();d(e,n)};g(m,e=>{o.entry.call_family&&e(S)})}t(O);var G=s(O,2);U(G,20,()=>["work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type","dreams_type"],X,(e,n)=>{var p=re(),h=ie(p);{var f=u=>{var _=Oe(),y=a(_),E=a(y,!0);t(y);var j=s(y,2),V=a(j,!0);t(j),t(_),k(ce=>{w(E,ce),w(V,o.entry[n])},[()=>n.replace("_type","")]),d(u,_)};g(h,u=>{o.entry[n]&&u(f)})}d(e,p)}),t(G);var M=s(G,2);{var D=e=>{var n=Se(),p=s(a(n),2),h=a(p,!0);t(p),t(n),k(()=>w(h,o.entry.notes)),d(e,n)};g(M,e=>{o.entry.notes&&e(D)})}t(q);var J=s(q,2),Q=a(J);Q.__click=function(...e){o.onClose?.apply(this,e)},t(J),t($),t(b),k(()=>w(K,o.entry.created_at)),d(x,b)};g(z,x=>{o.isOpen&&o.entry&&x(L)})}d(ne,T),xe()}pe(["click","keydown"]);var Ne=v('<button class="fixed right-8 bottom-8 z-50 rounded-full bg-indigo-600 p-4 text-white shadow-lg transition-transform hover:scale-105 hover:bg-indigo-500" aria-label="New Entry"><!></button>'),He=v('<div class="flex h-64 items-center justify-center"><!></div>'),Pe=v('<th class="hidden px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase md:table-cell"> </th>'),qe=v('<td class="hidden max-w-xs truncate px-6 py-4 text-sm whitespace-nowrap text-zinc-400 md:table-cell"><!></td>'),Fe=v('<tr class="transition-colors hover:bg-zinc-800/50"><td class="sticky left-0 z-10 bg-zinc-900 px-6 py-4 font-medium whitespace-nowrap text-zinc-200"> </td><td class="sticky left-[100px] z-10 space-x-2 border-r border-zinc-800 bg-zinc-900 px-6 py-4 whitespace-nowrap shadow-[4px_0_8px_-4px_rgba(0,0,0,0.3)]"><button class="text-zinc-400 transition-colors hover:text-zinc-200 md:hidden" aria-label="View Details"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></button> <button class="text-indigo-400 transition-colors hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="text-red-400 transition-colors hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></td><!></tr>'),Ie=v('<div class="overflow-x-auto rounded-lg border border-zinc-800 shadow"><table class="min-w-full divide-y divide-zinc-800"><thead class="bg-zinc-800"><tr><th class="sticky left-0 z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Date</th><th class="sticky left-[100px] z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Actions</th><!></tr></thead><tbody class="divide-y divide-zinc-800 bg-zinc-900"></tbody></table></div>'),Ke=v('<p class="text-center text-zinc-500">Please sign in to view tracking data.</p>'),We=v('<div><div class="mb-6 flex items-center justify-between"><h2 class="text-lg font-bold text-zinc-100">Full Table</h2> <!></div> <!> <!> <!></div>');function Ze(ne,o){ue(o,!0);let Z=N(he(ye(()=>o.data.dailyTracking))),C=N(!1),T=N(!1),z=N(null),L=N(null),x=N(!0);we(()=>{H.auth.getSession().then(({data:{session:i}})=>{c(L,i,!0),i?b():c(x,!1)});const{data:{subscription:r}}=H.auth.onAuthStateChange((i,m)=>{c(L,m,!0),m?b():c(x,!1)});return()=>r.unsubscribe()});async function b(){c(x,!0);const{data:r,error:i}=await H.from("dailyTracking").select().order("created_at",{ascending:!1});!i&&r&&c(Z,r,!0),c(x,!1)}function $(){c(z,null),c(C,!0)}function P(r){c(z,r,!0),c(C,!0)}function se(r){c(z,r,!0),c(T,!0)}async function q(r){if(!confirm("Are you sure you want to delete this entry?"))return;const{error:i}=await H.from("dailyTracking").delete().eq("id",r);i?alert(i.message):b()}async function F(r){if(l(z)){const{id:i,...m}=r,{error:S}=await H.from("dailyTracking").update(m).eq("id",l(z).id);S?alert(S.message):(c(C,!1),b())}else{const{error:i}=await H.from("dailyTracking").insert(r);i?alert(i.message):(c(C,!1),b())}}const I=["mood","energy","physical","sleep","meals","weight","sickness","work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type","calvin_day","ihana","call_family","dreams_type","notes"];var K=We(),B=a(K),oe=s(a(B),2);{var W=r=>{var i=Ne();i.__click=$;var m=a(i);Ce(m,{class:"h-6 w-6"}),t(i),d(r,i)};g(oe,r=>{l(L)&&r(W)})}t(B);var O=s(B,2);{var ee=r=>{var i=He(),m=a(i);Me(m,{class:"h-8 w-8 animate-spin text-indigo-500"}),t(i),d(r,i)},le=r=>{var i=re(),m=ie(i);{var S=M=>{var D=Ie(),J=a(D),Q=a(J),e=a(Q),n=s(a(e),2);U(n,17,()=>I,X,(h,f)=>{var u=Pe(),_=a(u,!0);t(u),k(y=>w(_,y),[()=>l(f).replace("_"," ")]),d(h,u)}),t(e),t(Q);var p=s(Q);U(p,21,()=>l(Z),X,(h,f)=>{var u=Fe(),_=a(u),y=a(_,!0);t(_);var E=s(_),j=a(E);j.__click=()=>se(l(f));var V=s(j,2);V.__click=()=>P(l(f));var ce=s(V,2);ce.__click=()=>q(l(f).id),t(E);var fe=s(E);U(fe,17,()=>I,X,(_e,te)=>{var ae=qe(),ge=a(ae);{var me=A=>{var R=ve();k(()=>w(R,l(f)[l(te)]?"Yes":"No")),d(A,R)},be=A=>{var R=ve();k(()=>w(R,l(f)[l(te)]??"-")),d(A,R)};g(ge,A=>{typeof l(f)[l(te)]=="boolean"?A(me):A(be,!1)})}t(ae),k(()=>ke(ae,"title",l(f)[l(te)])),d(_e,ae)}),t(u),k(()=>w(y,l(f).created_at)),d(h,u)}),t(p),t(J),t(D),d(M,D)},G=M=>{var D=Ke();d(M,D)};g(m,M=>{l(L)?M(S):M(G,!1)},!0)}d(r,i)};g(O,r=>{l(x)?r(ee):r(le,!1)})}var Y=s(O,2);ze(Y,{get isOpen(){return l(C)},get entry(){return l(z)},onClose:()=>c(C,!1),onSave:F});var de=s(Y,2);Ae(de,{get isOpen(){return l(T)},get entry(){return l(z)},onClose:()=>c(T,!1)}),t(K),d(ne,K),xe()}pe(["click"]);export{Ze as component};
