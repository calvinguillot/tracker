import{c as we,a as m,f as x}from"../chunks/wK1Vbmlk.js";import{p as Xe,s as T,c as Ye,d as mt,f as b,g as J,a as Ze,h as i,i as a,j as n,l as bt,n as Be,t as P,k as e,o as gt,m as xt,v as ue}from"../chunks/BYhnerF1.js";import{d as $e,s as O,e as _t}from"../chunks/DJuLYhV6.js";import{i as _}from"../chunks/D8lGRnAB.js";import{r as q,b as ht,c as wt,d as Y,e as Ie,f as C,i as Ne,s as Qe,g as zt}from"../chunks/Bwlg0huN.js";import{s as Z}from"../chunks/Bkout0r_.js";import{b as $,a as We,P as yt,L as kt}from"../chunks/Kn-75_P5.js";import{A as Ct,a as Ot}from"../chunks/CpuzINp4.js";var At=x('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div><label for="name" class="mb-1 block text-sm font-medium text-zinc-400">Name</label> <input type="text" id="name" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="location" class="mb-1 block text-sm font-medium text-zinc-400">Location</label> <input type="text" id="location" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="type" class="mb-1 block text-sm font-medium text-zinc-400">Type</label> <select id="type" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Select Type</option><option>Open Call</option><option>Residency</option><option>Grant</option><option>Job Offer</option><option>Other</option></select></div> <div><label for="funds" class="mb-1 block text-sm font-medium text-zinc-400">Funds (€)</label> <input type="number" id="funds" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div><label for="deadline" class="mb-1 block text-sm font-medium text-zinc-400">Deadline</label> <input type="date" id="deadline" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="link" class="mb-1 block text-sm font-medium text-zinc-400">Link</label> <input type="url" id="link" placeholder="https://" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="idea" class="mb-1 block text-sm font-medium text-zinc-400">Idea</label> <textarea id="idea" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div class="flex gap-6"><div class="flex items-center"><input type="checkbox" id="applied" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"/> <label for="applied" class="ml-2 block text-sm font-medium text-zinc-300">Applied</label></div> <div class="flex items-center"><input type="checkbox" id="group" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-yellow-500 focus:ring-yellow-500"/> <label for="group" class="ml-2 block text-sm font-medium text-zinc-300">Group</label></div></div> <div class="sticky bottom-0 mt-6 flex justify-end gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700">Cancel</button> <button type="submit" class="rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Save</button></div></form></div></div>');function Dt(ze,c){Xe(c,!0);let d=T(Ye({name:"",location:"",type:null,funds:null,deadline:"",link:"",applied:!1,group:!1,idea:""}));mt(()=>{c.isOpen&&(c.entry?b(d,{name:c.entry.name||"",location:c.entry.location||"",type:c.entry.type,funds:c.entry.funds,deadline:c.entry.deadline?new Date(c.entry.deadline).toISOString().split("T")[0]:"",link:c.entry.link||"",applied:c.entry.applied||!1,group:c.entry.group||!1,idea:c.entry.idea||""},!0):b(d,{name:"",location:"",type:null,funds:null,deadline:"",link:"",applied:!1,group:!1,idea:""},!0))});function M(v){v.preventDefault(),c.onSave(e(d))}function B(v){v.target===v.currentTarget&&c.onClose()}function I(v){v.key==="Escape"&&c.onClose()}var w=we(),N=J(w);{var ye=v=>{var h=At();h.__click=B,h.__keydown=I;var ee=i(h),te=i(ee),R=i(te),ke=i(R,!0);a(R);var F=n(R,2);F.__click=function(...l){c.onClose?.apply(this,l)},a(te);var ae=n(te,2),ie=i(ae),pe=n(i(ie),2);q(pe),a(ie);var ne=n(ie,2),fe=n(i(ne),2);q(fe),a(ne);var re=n(ne,2),se=i(re),A=n(i(se),2),V=i(A);V.value=(V.__value=null)??"";var K=n(V);K.value=K.__value=1;var U=n(K);U.value=U.__value=2;var H=n(U);H.value=H.__value=3;var oe=n(H);oe.value=oe.__value=4;var me=n(oe);me.value=me.__value=5,a(A),a(se);var be=n(se,2),ge=n(i(be),2);q(ge),a(be),a(re);var le=n(re,2),t=n(i(le),2);q(t),a(le);var r=n(le,2),s=n(i(r),2);q(s),a(r);var u=n(r,2),z=n(i(u),2);bt(z),a(u);var y=n(u,2),E=i(y),xe=i(E);q(xe),Be(2),a(E);var _e=n(E,2),he=i(_e);q(he),Be(2),a(_e),a(y);var D=n(y,2),Q=i(D);Q.__click=function(...l){c.onClose?.apply(this,l)},Be(2),a(D),a(ae),a(ee),a(h),P(()=>O(ke,c.entry?"Edit Art Call":"New Art Call")),_t("submit",ae,M),$(pe,()=>e(d).name,l=>e(d).name=l),$(fe,()=>e(d).location,l=>e(d).location=l),ht(A,()=>e(d).type,l=>e(d).type=l),$(ge,()=>e(d).funds,l=>e(d).funds=l),$(t,()=>e(d).deadline,l=>e(d).deadline=l),$(s,()=>e(d).link,l=>e(d).link=l),$(z,()=>e(d).idea,l=>e(d).idea=l),We(xe,()=>e(d).applied,l=>e(d).applied=l),We(he,()=>e(d).group,l=>e(d).group=l),m(v,h)};_(N,v=>{c.isOpen&&v(ye)})}m(ze,w),Ze()}$e(["click","keydown"]);var St=x('<button class="fixed right-8 bottom-8 z-50 rounded-full bg-indigo-600 p-4 text-white shadow-lg transition-transform hover:scale-105 hover:bg-indigo-500" aria-label="New Art Call"><!></button>'),Et=x('<div class="flex h-48 items-center justify-center"><!></div>'),jt=x('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">Sign in to view art calls.</div>'),Lt=x('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">No art calls yet.</div>'),Tt=x('<div class="shrink-0 rounded-full border border-transparent bg-yellow-500/10 px-2 py-0.5 text-center text-[10px] font-medium text-yellow-500">Group</div>'),Mt=x('<span class="text-base font-normal text-emerald-400">Applied</span>'),Bt=x("<span>Not applied</span>"),It=x('<div class="mt-1 border-t border-zinc-800/50 pt-3"><p> </p></div>'),Nt=x('<a target="_blank" rel="noreferrer">Visit Link &rarr;</a>'),Ft=x('<li><div class="flex flex-col gap-3"><div class="flex items-start justify-between gap-3"><div class="min-w-0 flex-1"><div class="flex flex-wrap items-center gap-2"><h3> </h3> <div> </div> <!></div> <div><span class="truncate"> </span> <span class="text-zinc-600">•</span> <span> </span></div></div> <div class="flex items-center self-center"><!></div></div> <!> <div class="mt-1 flex items-center justify-between gap-4 border-t border-zinc-800/50 pt-3"><div class="flex gap-6"><div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Funds</span> <span> </span></div> <div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Deadline</span> <span> </span></div></div> <div class="flex items-center gap-2"><!> <button class="rounded-md p-2 text-indigo-400 transition-colors hover:bg-zinc-800 hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="rounded-md p-2 text-red-400 transition-colors hover:bg-zinc-800 hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div></div></li>'),Ht=x('<button><span class="capitalize"> </span> <!></button>'),Gt=x('<div class="my-8 flex items-center gap-4"><div class="h-px flex-1 bg-zinc-800"></div> <span class="text-sm font-medium tracking-wider text-zinc-500 uppercase">Archived</span> <div class="h-px flex-1 bg-zinc-800"></div></div> <ul class="grid grid-cols-1 gap-3"></ul>',1),qt=x('<div class="mb-4 flex flex-wrap items-center gap-4 text-sm"><span class="text-zinc-500">Sort by:</span> <!> <span class="ml-auto text-xs text-zinc-500"> </span></div> <ul class="grid grid-cols-1 gap-3"></ul> <!>',1),Jt=x('<!> <section class="space-y-6"><div class="flex flex-wrap items-center justify-between gap-4"><h2 class="text-lg font-bold text-zinc-100">Art Calls</h2> <!></div> <!></section>',1);function Yt(ze,c){Xe(c,!0);const d={1:"Open Call",2:"Residency",3:"Grant",4:"Job Offer",5:"Other"};let M=T(null),B=T(!0),I=T(Ye([])),w=T(!1),N=T(null),ye=ue(()=>e(I).filter(t=>t.applied).length),v=T("deadline"),h=T("asc"),ee=ue(()=>[...e(I)].sort((t,r)=>{const s=e(h)==="asc"?1:-1;if(e(v)==="name")return t.name.localeCompare(r.name)*s;if(e(v)==="funds")return((t.funds??0)-(r.funds??0))*s;if(e(v)==="deadline"){const u=t.deadline?new Date(t.deadline).getTime():s===1?1/0:-1/0,z=r.deadline?new Date(r.deadline).getTime():s===1?1/0:-1/0;return(u-z)*s}else if(e(v)==="created"){const u=new Date(t.created_at).getTime(),z=new Date(r.created_at).getTime();return(u-z)*s}else if(e(v)==="status"){const u=A(t.deadline).isOpen?0:1,z=A(r.deadline).isOpen?0:1;return(u-z)*s}return 0})),te=ue(()=>e(ee).filter(t=>A(t.deadline).isOpen&&!t.applied)),R=ue(()=>e(ee).filter(t=>!A(t.deadline).isOpen||t.applied));function ke(t){e(v)===t?b(h,e(h)==="asc"?"desc":"asc",!0):(b(v,t,!0),b(h,"asc"))}gt(()=>{Z.auth.getSession().then(({data:{session:r}})=>{b(M,r,!0),r?F():b(B,!1)});const{data:{subscription:t}}=Z.auth.onAuthStateChange((r,s)=>{b(M,s,!0),s?F():b(B,!1)});return()=>t.unsubscribe()});async function F(){b(B,!0),console.log("Fetching art calls...");const{data:t,error:r}=await Z.from("artCalls").select("id, created_at, name, location, type, funds, deadline, link, applied, group, idea").order("deadline",{ascending:!0});!r&&t?b(I,t,!0):r&&console.error("Error fetching art calls:",r),b(B,!1)}function ae(){b(N,null),b(w,!0)}function ie(t){b(N,t,!0),b(w,!0)}async function pe(t){if(!await zt("Are you sure you want to delete this art call?","Delete Art Call",{confirmText:"Delete",isDestructive:!0}))return;const{error:s}=await Z.from("artCalls").delete().eq("id",t);s?(console.error("Error deleting art call:",s),Y("Error deleting: "+s.message,"Error")):(Y("Art call deleted successfully!","Success"),F())}async function ne(t){const{id:r,...s}=t;if(e(N)){const{error:u}=await Z.from("artCalls").update(s).eq("id",e(N).id);u?(console.error("Error updating art call:",u),Y("Error updating: "+u.message,"Error")):(Y("Art call updated successfully!","Success"),b(w,!1),F())}else{const{error:u}=await Z.from("artCalls").insert(s);u?(console.error("Error saving art call:",u),Y("Error saving: "+u.message,"Error")):(Y("Art call saved successfully!","Success"),b(w,!1),F())}}const fe=t=>d[t??0]??"Unknown",re=t=>t===null?"—":`€${t}`,se=t=>t?new Date(t).toLocaleDateString():"—";function A(t){if(!t)return{label:"Open",color:"bg-emerald-500",bg:"bg-emerald-500/10",text:"text-emerald-400",isOpen:!0};const r=new Date(t),s=new Date;return s.setHours(0,0,0,0),r.setHours(0,0,0,0),r>=s?{label:"Open",color:"bg-emerald-500",bg:"bg-emerald-500/10",text:"text-emerald-400",isOpen:!0}:{label:"Closed",color:"bg-red-500",bg:"bg-red-500/10",text:"text-red-400",isOpen:!1}}var V=Jt(),K=J(V);Dt(K,{get isOpen(){return e(w)},get entry(){return e(N)},onClose:()=>b(w,!1),onSave:ne});var U=n(K,2),H=i(U),oe=n(i(H),2);{var me=t=>{var r=St();r.__click=ae;var s=i(r);yt(s,{class:"h-6 w-6"}),a(r),m(t,r)};_(oe,t=>{e(M)&&!e(w)&&!wt.isOpen&&t(me)})}a(H);var be=n(H,2);{var ge=t=>{var r=Et(),s=i(r);kt(s,{class:"h-6 w-6 animate-spin text-indigo-400"}),a(r),m(t,r)},le=t=>{var r=we(),s=J(r);{var u=y=>{var E=jt();m(y,E)},z=y=>{var E=we(),xe=J(E);{var _e=D=>{var Q=Lt();m(D,Q)},he=D=>{var Q=qt();const l=(S,o=xt)=>{const p=ue(()=>A(o().deadline));var k=Ft(),W=i(k),de=i(W),ce=i(de),G=i(ce),j=i(G),Ae=i(j,!0);a(j);var X=n(j,2),De=i(X,!0);a(X);var L=n(X,2);{var it=f=>{var g=Tt();m(f,g)};_(L,f=>{o().group&&f(it)})}a(G);var Se=n(G,2),Ee=i(Se),nt=i(Ee,!0);a(Ee);var Ge=n(Ee,4),rt=i(Ge,!0);a(Ge),a(Se),a(ce);var qe=n(ce,2),st=i(qe);{var ot=f=>{var g=Mt();m(f,g)},lt=f=>{var g=Bt();P(()=>C(g,1,`text-base font-normal ${e(p).isOpen?"text-zinc-400":"text-zinc-500"}`)),m(f,g)};_(st,f=>{o().applied?f(ot):f(lt,!1)})}a(qe),a(de);var Je=n(de,2);{var dt=f=>{var g=It(),ve=i(g),ft=i(ve,!0);a(ve),a(g),P(()=>{C(ve,1,`text-sm ${e(p).isOpen&&!o().applied?"text-zinc-300":"text-zinc-500"}`),O(ft,o().idea)}),m(f,g)};_(Je,f=>{o().idea&&f(dt)})}var Pe=n(Je,2),je=i(Pe),Le=i(je),Te=n(i(Le),2),ct=i(Te,!0);a(Te),a(Le);var Re=n(Le,2),Me=n(i(Re),2),vt=i(Me,!0);a(Me),a(Re),a(je);var Ve=n(je,2),Ke=i(Ve);{var ut=f=>{var g=Nt();P(()=>{C(g,1,`rounded-md px-3 py-1.5 text-xs font-medium transition-colors ${e(p).isOpen?"bg-indigo-500/10 text-indigo-400 hover:bg-indigo-500/20 hover:text-indigo-300":"bg-zinc-800/60 text-zinc-500 hover:bg-zinc-800"}`),Qe(g,"href",o().link)}),m(f,g)};_(Ke,f=>{o().link&&f(ut)})}var Ue=n(Ke,2);Ue.__click=()=>ie(o());var pt=n(Ue,2);pt.__click=()=>pe(o().id),a(Ve),a(Pe),a(W),a(k),P((f,g,ve)=>{C(k,1,`group relative flex flex-col justify-between rounded-lg border p-4 transition-all ${e(p).isOpen?"border-zinc-800 bg-zinc-900/60 hover:border-zinc-700 hover:bg-zinc-900/80":"border-zinc-800/60 bg-zinc-900/30 hover:border-zinc-700/60 hover:bg-zinc-900/40"}`),C(j,1,`truncate text-base font-bold ${e(p).isOpen?"text-zinc-100":"text-zinc-500"}`),Qe(j,"title",o().name),O(Ae,o().name),C(X,1,`shrink-0 rounded-full border px-2 py-0.5 text-[10px] font-medium ${e(p).bg} ${e(p).text} border-transparent text-center`),O(De,e(p).label),C(Se,1,`mt-1 flex flex-wrap items-center gap-x-2 gap-y-1 text-xs ${e(p).isOpen?"text-zinc-400":"text-zinc-500"}`),O(nt,o().location),O(rt,f),C(Te,1,`text-sm font-medium ${e(p).isOpen?"text-emerald-400":"text-zinc-500"}`),O(ct,g),C(Me,1,`text-sm ${e(p).isOpen?"text-zinc-300":"text-zinc-500"}`),O(vt,ve)},[()=>fe(o().type),()=>re(o().funds),()=>se(o().deadline)]),m(S,k)};var Ce=J(Q),Fe=n(i(Ce),2);Ie(Fe,16,()=>["name","funds","deadline","created","status"],Ne,(S,o)=>{var p=Ht();p.__click=()=>ke(o);var k=i(p),W=i(k,!0);a(k);var de=n(k,2);{var ce=G=>{var j=we(),Ae=J(j);{var X=L=>{Ct(L,{class:"h-3 w-3"})},De=L=>{Ot(L,{class:"h-3 w-3"})};_(Ae,L=>{e(h)==="asc"?L(X):L(De,!1)})}m(G,j)};_(de,G=>{e(v)===o&&G(ce)})}a(p),P(()=>{C(p,1,`flex items-center gap-1 rounded-md px-3 py-1.5 transition-colors ${e(v)===o?"bg-indigo-500/20 text-indigo-300":"bg-zinc-800/50 text-zinc-400 hover:bg-zinc-800"}`),O(W,o)}),m(S,p)});var He=n(Fe,2),et=i(He);a(He),a(Ce);var Oe=n(Ce,2);Ie(Oe,21,()=>e(te),Ne,(S,o)=>{l(S,()=>e(o))}),a(Oe);var tt=n(Oe,2);{var at=S=>{var o=Gt(),p=n(J(o),2);Ie(p,21,()=>e(R),Ne,(k,W)=>{l(k,()=>e(W))}),a(p),m(S,o)};_(tt,S=>{e(R).length>0&&S(at)})}P(()=>O(et,`Applied ${e(ye)??""} / ${e(I).length??""}`)),m(D,Q)};_(xe,D=>{e(I).length===0?D(_e):D(he,!1)},!0)}m(y,E)};_(s,y=>{e(M)?y(z,!1):y(u)},!0)}m(t,r)};_(be,t=>{e(B)&&e(M)!==null?t(ge):t(le,!1)})}a(U),m(ze,V),Ze()}$e(["click"]);export{Yt as component};
