import{c as ie,a as d,f as v,t as ue}from"../chunks/o5v50Yvo.js";import{p as fe,g as ne,a as pe,h as r,j as n,i as t,t as k,s as N,c as ye,u as we,o as ke,k as s,f as c}from"../chunks/5_FoE8hS.js";import{d as xe,s as w}from"../chunks/vZxgl7By.js";import{i as g}from"../chunks/CRVHY2kJ.js";import{e as X,i as Z,a as ze,c as H,s as Ce,f as Ee}from"../chunks/BJLCFyu5.js";import{s as P}from"../chunks/Bkout0r_.js";import{E as De}from"../chunks/BZdWFnwL.js";import{P as Me,L as je}from"../chunks/CcyWMRgG.js";var Se=v('<div><h3 class="text-sm font-medium text-zinc-400">Weight</h3> <p class="text-lg text-zinc-100"> </p></div>'),Te=v('<div class="rounded-lg border border-zinc-800 bg-zinc-800/50 p-3"><h3 class="mb-1 text-xs font-medium tracking-wider text-zinc-400 uppercase"> </h3> <p class="text-xl font-semibold text-indigo-400"> </p></div>'),Le=v('<span class="inline-flex items-center rounded-full border border-red-900/50 bg-red-900/30 px-2.5 py-0.5 text-xs font-medium text-red-400">Sickness</span>'),Oe=v('<span class="inline-flex items-center rounded-full border border-indigo-900/50 bg-indigo-900/30 px-2.5 py-0.5 text-xs font-medium text-indigo-400">Calvin Day</span>'),Ae=v('<span class="inline-flex items-center rounded-full border border-pink-900/50 bg-pink-900/30 px-2.5 py-0.5 text-xs font-medium text-pink-400">Ihana</span>'),Be=v('<span class="inline-flex items-center rounded-full border border-green-900/50 bg-green-900/30 px-2.5 py-0.5 text-xs font-medium text-green-400">Call Family</span>'),Ve=v('<div><h3 class="mb-1 text-sm font-medium text-zinc-400 capitalize"> </h3> <p class="rounded-md border border-zinc-800/50 bg-zinc-800/30 p-2 text-zinc-200"> </p></div>'),Ne=v('<div class="border-t border-zinc-800 pt-4"><h3 class="mb-2 text-sm font-medium text-zinc-400">Notes</h3> <p class="rounded-lg border border-zinc-800/50 bg-zinc-800/30 p-4 whitespace-pre-wrap text-zinc-300"> </p></div>'),He=v('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100">Entry Details</h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="space-y-6 p-4 md:p-6"><div><h3 class="text-sm font-medium text-zinc-400">Date</h3> <p class="text-lg text-zinc-100"> </p></div> <!> <div class="grid grid-cols-2 gap-4 sm:grid-cols-3"></div> <div class="flex flex-wrap gap-2"><!> <!> <!> <!></div> <div class="grid grid-cols-1 gap-6 sm:grid-cols-2"></div> <!></div> <div class="sticky bottom-0 rounded-b-xl border-t border-zinc-800 bg-zinc-900 p-4 md:p-6"><button class="w-full rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 transition-colors ring-inset hover:bg-zinc-700">Close</button></div></div></div>');function Pe(se,o){fe(o,!0);function $(p){p.target===p.currentTarget&&o.onClose()}function z(p){p.key==="Escape"&&o.onClose()}var M=ie(),C=ne(M);{var T=p=>{var h=He();h.__click=$,h.__keydown=z;var ee=r(h),q=r(ee),oe=n(r(q),2);oe.__click=function(...e){o.onClose?.apply(this,e)},t(q);var F=n(q,2),I=r(F),K=n(r(I),2),W=r(K,!0);t(K),t(I);var L=n(I,2);{var le=e=>{var i=Se(),x=n(r(i),2),b=r(x);t(x),t(i),k(()=>w(b,`${o.entry.weight??""} kg`)),d(e,i)};g(L,e=>{o.entry.weight&&e(le)})}var Y=n(L,2);X(Y,20,()=>["mood","energy","physical","sleep","meals"],Z,(e,i)=>{var x=ie(),b=ne(x);{var _=f=>{var m=Te(),y=r(m),S=r(y,!0);t(y);var D=n(y,2),B=r(D,!0);t(D),t(m),k(()=>{w(S,i),w(B,o.entry[i])}),d(f,m)};g(b,f=>{o.entry[i]!==null&&o.entry[i]!==void 0&&f(_)})}d(e,x)}),t(Y);var O=n(Y,2),te=r(O);{var de=e=>{var i=Le();d(e,i)};g(te,e=>{o.entry.sickness&&e(de)})}var G=n(te,2);{var ce=e=>{var i=Oe();d(e,i)};g(G,e=>{o.entry.calvin_day&&e(ce)})}var a=n(G,2);{var l=e=>{var i=Ae();d(e,i)};g(a,e=>{o.entry.ihana&&e(l)})}var u=n(a,2);{var A=e=>{var i=Be();d(e,i)};g(u,e=>{o.entry.call_family&&e(A)})}t(O);var J=n(O,2);X(J,20,()=>["work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type","dreams_type"],Z,(e,i)=>{var x=ie(),b=ne(x);{var _=f=>{var m=Ve(),y=r(m),S=r(y,!0);t(y);var D=n(y,2),B=r(D,!0);t(D),t(m),k(ve=>{w(S,ve),w(B,o.entry[i])},[()=>i.replace("_type","")]),d(f,m)};g(b,f=>{o.entry[i]&&f(_)})}d(e,x)}),t(J);var E=n(J,2);{var j=e=>{var i=Ne(),x=n(r(i),2),b=r(x,!0);t(x),t(i),k(()=>w(b,o.entry.notes)),d(e,i)};g(E,e=>{o.entry.notes&&e(j)})}t(F);var Q=n(F,2),R=r(Q);R.__click=function(...e){o.onClose?.apply(this,e)},t(Q),t(ee),t(h),k(()=>w(W,o.entry.created_at)),d(p,h)};g(C,p=>{o.isOpen&&o.entry&&p(T)})}d(se,M),pe()}xe(["click","keydown"]);var qe=v('<button class="fixed right-8 bottom-8 z-50 rounded-full bg-indigo-600 p-4 text-white shadow-lg transition-transform hover:scale-105 hover:bg-indigo-500" aria-label="New Entry"><!></button>'),Fe=v('<div class="flex h-64 items-center justify-center"><!></div>'),Ie=v('<th class="hidden px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase md:table-cell"> </th>'),Ke=v('<td class="hidden max-w-xs truncate px-6 py-4 text-sm whitespace-nowrap text-zinc-400 md:table-cell"><!></td>'),We=v('<tr class="transition-colors hover:bg-zinc-800/50"><td class="sticky left-0 z-10 bg-zinc-900 px-6 py-4 font-medium whitespace-nowrap text-zinc-200"> </td><td class="sticky left-[100px] z-10 space-x-2 border-r border-zinc-800 bg-zinc-900 px-6 py-4 whitespace-nowrap shadow-[4px_0_8px_-4px_rgba(0,0,0,0.3)]"><button class="text-zinc-400 transition-colors hover:text-zinc-200 md:hidden" aria-label="View Details"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></button> <button class="text-indigo-400 transition-colors hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="text-red-400 transition-colors hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></td><!></tr>'),Ye=v('<div class="overflow-x-auto rounded-lg border border-zinc-800 shadow"><table class="min-w-full divide-y divide-zinc-800"><thead class="bg-zinc-800"><tr><th class="sticky left-0 z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Date</th><th class="sticky left-[100px] z-10 bg-zinc-800 px-6 py-3 text-left text-xs font-medium tracking-wider text-zinc-400 uppercase">Actions</th><!></tr></thead><tbody class="divide-y divide-zinc-800 bg-zinc-900"></tbody></table></div>'),Ge=v('<p class="text-center text-zinc-500">Please sign in to view tracking data.</p>'),Je=v('<div><div class="mb-6 flex items-center justify-between"><h2 class="text-lg font-bold text-zinc-100">Full Table</h2> <!></div> <!> <!> <!></div>');function rt(se,o){fe(o,!0);let $=N(ye(we(()=>o.data.dailyTracking))),z=N(!1),M=N(!1),C=N(null),T=N(null),p=N(!0);ke(()=>{P.auth.getSession().then(({data:{session:l}})=>{c(T,l,!0),l?h():c(p,!1)});const{data:{subscription:a}}=P.auth.onAuthStateChange((l,u)=>{c(T,u,!0),u?h():c(p,!1)});return()=>a.unsubscribe()});async function h(){c(p,!0);const{data:a,error:l}=await P.from("dailyTracking").select().order("created_at",{ascending:!1});!l&&a&&c($,a,!0),c(p,!1)}function ee(){c(C,null),c(z,!0)}function q(a){c(C,a,!0),c(z,!0)}function oe(a){c(C,a,!0),c(M,!0)}async function F(a){if(!await Ee("Are you sure you want to delete this entry?","Delete Entry",{confirmText:"Delete",isDestructive:!0}))return;const{error:u}=await P.from("dailyTracking").delete().eq("id",a);u?H(u.message,"Error"):(H("Entry deleted successfully","Success"),h())}async function I(a){if(s(C)){const{id:l,...u}=a,{error:A}=await P.from("dailyTracking").update(u).eq("id",s(C).id);A?H(A.message,"Error"):(H("Entry updated successfully","Success"),c(z,!1),h())}else{const{error:l}=await P.from("dailyTracking").insert(a);l?H(l.message,"Error"):(H("Entry created successfully","Success"),c(z,!1),h())}}const K=["mood","energy","physical","sleep","meals","weight","sickness","work_type","study_type","culture_type","art_type","music_type","exercise_type","leisure_type","calvin_day","ihana","call_family","dreams_type","notes"];var W=Je(),L=r(W),le=n(r(L),2);{var Y=a=>{var l=qe();l.__click=ee;var u=r(l);Me(u,{class:"h-6 w-6"}),t(l),d(a,l)};g(le,a=>{s(T)&&!s(z)&&!s(M)&&!ze.isOpen&&a(Y)})}t(L);var O=n(L,2);{var te=a=>{var l=Fe(),u=r(l);je(u,{class:"h-8 w-8 animate-spin text-indigo-500"}),t(l),d(a,l)},de=a=>{var l=ie(),u=ne(l);{var A=E=>{var j=Ye(),Q=r(j),R=r(Q),e=r(R),i=n(r(e),2);X(i,17,()=>K,Z,(b,_)=>{var f=Ie(),m=r(f,!0);t(f),k(y=>w(m,y),[()=>s(_).replace("_"," ")]),d(b,f)}),t(e),t(R);var x=n(R);X(x,21,()=>s($),Z,(b,_)=>{var f=We(),m=r(f),y=r(m,!0);t(m);var S=n(m),D=r(S);D.__click=()=>oe(s(_));var B=n(D,2);B.__click=()=>q(s(_));var ve=n(B,2);ve.__click=()=>F(s(_).id),t(S);var _e=n(S);X(_e,17,()=>K,Z,(me,re)=>{var ae=Ke(),ge=r(ae);{var he=V=>{var U=ue();k(()=>w(U,s(_)[s(re)]?"Yes":"No")),d(V,U)},be=V=>{var U=ue();k(()=>w(U,s(_)[s(re)]??"-")),d(V,U)};g(ge,V=>{typeof s(_)[s(re)]=="boolean"?V(he):V(be,!1)})}t(ae),k(()=>Ce(ae,"title",s(_)[s(re)])),d(me,ae)}),t(f),k(()=>w(y,s(_).created_at)),d(b,f)}),t(x),t(Q),t(j),d(E,j)},J=E=>{var j=Ge();d(E,j)};g(u,E=>{s(T)?E(A):E(J,!1)},!0)}d(a,l)};g(O,a=>{s(p)?a(te):a(de,!1)})}var G=n(O,2);De(G,{get isOpen(){return s(z)},get entry(){return s(C)},onClose:()=>c(z,!1),onSave:I});var ce=n(G,2);Pe(ce,{get isOpen(){return s(M)},get entry(){return s(C)},onClose:()=>c(M,!1)}),t(W),d(se,W),pe()}xe(["click"]);export{rt as component};
