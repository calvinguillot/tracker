import{c as Se,a as f,f as x}from"../chunks/o5v50Yvo.js";import{p as Ge,s as N,c as Ke,d as et,f as u,g as ae,a as Qe,h as r,i as a,j as t,l as Re,n as tt,t as re,k as e,o as at,m as rt}from"../chunks/5_FoE8hS.js";import{d as Ue,s as C,e as ot}from"../chunks/vZxgl7By.js";import{i as S}from"../chunks/CRVHY2kJ.js";import{r as _e,b as He,a as ee,e as Ve,c as Le,i as We,s as nt,f as it,d as st}from"../chunks/DtXYkt4S.js";import{s as te}from"../chunks/Bkout0r_.js";import{b as K,P as lt,L as dt}from"../chunks/yjZnqevh.js";import{A as ct,a as ut}from"../chunks/Us6NLS3s.js";var vt=x('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div><label for="name" class="mb-1 block text-sm font-medium text-zinc-400">Name</label> <input type="text" id="name" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="description" class="mb-1 block text-sm font-medium text-zinc-400">Description</label> <textarea id="description" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div><label for="requirements" class="mb-1 block text-sm font-medium text-zinc-400">Requirements</label> <textarea id="requirements" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="status" class="mb-1 block text-sm font-medium text-zinc-400">Status</label> <select id="status" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Not Started</option><option>In Progress</option><option>Postponed</option><option>Completed</option><option>Cancelled</option></select></div> <div><label for="funds" class="mb-1 block text-sm font-medium text-zinc-400">Funds (€)</label> <input type="number" id="funds" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="percentage" class="mb-1 block text-sm font-medium text-zinc-400"> </label> <input type="range" id="percentage" min="0" max="100" class="h-2 w-full cursor-pointer appearance-none rounded-lg bg-zinc-700 accent-indigo-500"/></div> <div><label for="colour" class="mb-1 block text-sm font-medium text-zinc-400">Color</label> <select id="colour" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Zinc</option><option>Red</option><option>Orange</option><option>Amber</option><option>Green</option><option>Emerald</option><option>Teal</option><option>Cyan</option><option>Blue</option><option>Indigo</option><option>Violet</option><option>Purple</option><option>Fuchsia</option><option>Pink</option><option>Rose</option></select></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="start_at" class="mb-1 block text-sm font-medium text-zinc-400">Start Date</label> <input type="date" id="start_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="end_at" class="mb-1 block text-sm font-medium text-zinc-400">End Date</label> <input type="date" id="end_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div class="sticky bottom-0 mt-6 flex justify-end gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700">Cancel</button> <button type="submit" class="rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Save</button></div></form></div></div>');function ft(Ce,l){Ge(l,!0);let s=N(Ke({name:"",description:"",requirements:"",funds:null,status:0,percentage:0,start_at:"",end_at:"",colour:"bg-indigo-600"}));et(()=>{l.isOpen&&(l.entry?u(s,{name:l.entry.name||"",description:l.entry.description||"",requirements:l.entry.requirements||"",funds:l.entry.funds,status:l.entry.status??0,percentage:l.entry.percentage??0,start_at:l.entry.start_at?new Date(l.entry.start_at).toISOString().split("T")[0]:"",end_at:l.entry.end_at?new Date(l.entry.end_at).toISOString().split("T")[0]:"",colour:l.entry.colour||"bg-indigo-600"},!0):u(s,{name:"",description:"",requirements:"",funds:null,status:0,percentage:0,start_at:"",end_at:"",colour:"bg-indigo-600"},!0))});function O(v){v.preventDefault(),l.onSave(e(s))}function T(v){v.target===v.currentTarget&&l.onClose()}function oe(v){v.key==="Escape"&&l.onClose()}var D=Se(),B=ae(D);{var P=v=>{var F=vt();F.__click=T,F.__keydown=oe;var xe=r(F),E=r(xe),ne=r(E),De=r(ne,!0);a(ne);var Pe=t(ne,2);Pe.__click=function(...d){l.onClose?.apply(this,d)},a(E);var ie=t(E,2),se=r(ie),le=t(r(se),2);_e(le),a(se);var de=t(se,2),he=t(r(de),2);Re(he),a(de);var Q=t(de,2),ce=t(r(Q),2);Re(ce),a(Q);var U=t(Q,2),I=r(U),ue=t(r(I),2),ve=r(ue);ve.value=ve.__value=0;var fe=t(ve);fe.value=fe.__value=1;var pe=t(fe);pe.value=pe.__value=2;var me=t(pe);me.value=me.__value=3;var o=t(me);o.value=o.__value=4,a(ue),a(I);var i=t(I,2),c=t(r(i),2);_e(c),a(i),a(U);var p=t(U,2),R=r(p),w=r(R),Z=r(w);a(w);var we=t(w,2);_e(we),a(R);var ze=t(R,2),ge=t(r(ze),2),z=r(ge);z.value=z.__value="bg-zinc-500";var j=t(z);j.value=j.__value="bg-red-600";var H=t(j);H.value=H.__value="bg-orange-600";var be=t(H);be.value=be.__value="bg-amber-500";var J=t(be);J.value=J.__value="bg-green-600";var V=t(J);V.value=V.__value="bg-emerald-500";var n=t(V);n.value=n.__value="bg-teal-500";var m=t(n);m.value=m.__value="bg-cyan-500";var h=t(m);h.value=h.__value="bg-blue-600";var q=t(h);q.value=q.__value="bg-indigo-600";var y=t(q);y.value=y.__value="bg-violet-600";var W=t(y);W.value=W.__value="bg-purple-600";var k=t(W);k.value=k.__value="bg-fuchsia-600";var A=t(k);A.value=A.__value="bg-pink-600";var X=t(A);X.value=X.__value="bg-rose-600",a(ge),a(ze),a(p);var G=t(p,2),L=r(G),g=t(r(L),2);_e(g),a(L);var Y=t(L,2),ye=t(r(Y),2);_e(ye),a(Y),a(G);var $=t(G,2),ke=r($);ke.__click=function(...d){l.onClose?.apply(this,d)},tt(2),a($),a(ie),a(xe),a(F),re(()=>{C(De,l.entry?"Edit Project":"New Project"),C(Z,`Progress (${e(s).percentage??""}%)`)}),ot("submit",ie,O),K(le,()=>e(s).name,d=>e(s).name=d),K(he,()=>e(s).description,d=>e(s).description=d),K(ce,()=>e(s).requirements,d=>e(s).requirements=d),He(ue,()=>e(s).status,d=>e(s).status=d),K(c,()=>e(s).funds,d=>e(s).funds=d),K(we,()=>e(s).percentage,d=>e(s).percentage=d),He(ge,()=>e(s).colour,d=>e(s).colour=d),K(g,()=>e(s).start_at,d=>e(s).start_at=d),K(ye,()=>e(s).end_at,d=>e(s).end_at=d),f(v,F)};S(B,v=>{l.isOpen&&v(P)})}f(Ce,D),Qe()}Ue(["click","keydown"]);var pt=x('<button class="fixed right-8 bottom-8 z-50 rounded-full bg-indigo-600 p-4 text-white shadow-lg transition-transform hover:scale-105 hover:bg-indigo-500" aria-label="New Project"><!></button>'),mt=x('<div class="flex h-48 items-center justify-center"><!></div>'),gt=x('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">Sign in to view projects.</div>'),bt=x('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">No projects yet.</div>'),_t=x('<button><span class="capitalize"> </span> <!></button>'),xt=x('<p class="text-sm text-zinc-400"> </p>'),ht=x('<p class="mt-1 font-mono text-xs break-words whitespace-normal text-zinc-500 md:max-w-[50%]"><span class="font-bold text-zinc-600">REQ:</span> </p>'),wt=x('<div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Dates</span> <span class="text-sm text-zinc-300"> </span></div>'),zt=x('<li class="group relative flex flex-col gap-4 rounded-lg border border-zinc-800 bg-zinc-900/60 p-4 transition-all hover:border-zinc-700 hover:bg-zinc-900/80"><div class="flex flex-col gap-4 md:flex-row md:items-start md:justify-between"><div class="flex min-w-0 flex-1 flex-col gap-2"><h3 class="truncate text-base font-bold text-zinc-100"> </h3> <!> <!></div> <div class="flex w-full shrink-0 flex-col gap-2 md:w-56"><div class="flex justify-end"><span> </span></div> <div class="flex items-center justify-between"><span class="text-xs font-medium text-zinc-400">Progress</span> <span class="text-xs text-zinc-500"> </span></div> <div class="h-2 w-full overflow-hidden rounded-full bg-zinc-800"><div></div></div></div></div> <div class="flex flex-wrap items-end justify-between gap-4 border-t border-zinc-800/50 pt-3"><div class="flex items-center gap-6"><div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Funds</span> <span class="text-sm font-medium text-emerald-400"> </span></div> <!></div> <div class="flex items-center gap-2"><button class="rounded-md p-2 text-indigo-400 transition-colors hover:bg-zinc-800 hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="rounded-md p-2 text-red-400 transition-colors hover:bg-zinc-800 hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div></li>'),yt=x('<div class="mb-4 flex flex-wrap items-center gap-4 text-sm"><span class="text-zinc-500">Sort by:</span> <!></div> <ul class="grid grid-cols-1 gap-4"></ul>',1),kt=x('<!> <section class="space-y-6"><div class="flex flex-wrap items-center justify-between gap-4"><h2 class="text-lg font-bold text-zinc-100">Projects</h2> <!></div> <!></section>',1);function Lt(Ce,l){Ge(l,!0);const s={0:"Not Started",1:"In Progress",2:"Postponed",3:"Completed",4:"Cancelled"};let O=N(null),T=N(!0),oe=N(Ke([])),D=N(!1),B=N(null),P=N("date"),v=N("desc"),F=rt(()=>[...e(oe)].sort((o,i)=>{const c=e(v)==="asc"?1:-1;if(e(P)==="name")return o.name.localeCompare(i.name)*c;if(e(P)==="date"){const p=new Date(o.created_at).getTime(),R=new Date(i.created_at).getTime();return(p-R)*c}else if(e(P)==="progress")return((o.percentage||0)-(i.percentage||0))*c;return 0}));function xe(o){e(P)===o?u(v,e(v)==="asc"?"desc":"asc",!0):(u(P,o,!0),u(v,"asc"))}at(()=>{te.auth.getSession().then(({data:{session:i}})=>{u(O,i,!0),i?E():u(T,!1)});const{data:{subscription:o}}=te.auth.onAuthStateChange((i,c)=>{u(O,c,!0),c?E():u(T,!1)});return()=>o.unsubscribe()});async function E(){u(T,!0);const{data:o,error:i}=await te.from("projects").select("*").order("created_at",{ascending:!1});!i&&o?u(oe,o,!0):i&&console.error("Error fetching projects:",i),u(T,!1)}function ne(){u(B,null),u(D,!0)}function De(o){u(B,o,!0),u(D,!0)}async function Pe(o){if(!await st("Are you sure you want to delete this project?","Delete Project",{confirmText:"Delete",isDestructive:!0}))return;const{error:c}=await te.from("projects").delete().eq("id",o);c?(console.error("Error deleting project:",c),ee("Error deleting: "+c.message,"Error")):(ee("Project deleted successfully!","Success"),E())}async function ie(o){const{id:i,...c}=o;if(e(B)){const{error:p}=await te.from("projects").update(c).eq("id",e(B).id);p?(console.error("Error updating project:",p),ee("Error updating: "+p.message,"Error")):(ee("Project updated successfully!","Success"),u(D,!1),E())}else{const{error:p}=await te.from("projects").insert(c);p?(console.error("Error saving project:",p),ee("Error saving: "+p.message,"Error")):(ee("Project saved successfully!","Success"),u(D,!1),E())}}const se=o=>o===null?"—":`€${o}`,le=o=>o?new Date(o).toLocaleDateString():"—",de=o=>s[o]??"Unknown",he=o=>{switch(o){case 1:return"bg-amber-500/10 text-amber-400";case 2:return"bg-purple-500/10 text-purple-400";case 3:return"bg-emerald-500/10 text-emerald-400";case 4:return"bg-red-500/10 text-red-400";default:return"bg-zinc-800 text-zinc-400"}};var Q=kt(),ce=ae(Q);ft(ce,{get isOpen(){return e(D)},get entry(){return e(B)},onClose:()=>u(D,!1),onSave:ie});var U=t(ce,2),I=r(U),ue=t(r(I),2);{var ve=o=>{var i=pt();i.__click=ne;var c=r(i);lt(c,{class:"h-6 w-6"}),a(i),f(o,i)};S(ue,o=>{e(O)&&o(ve)})}a(I);var fe=t(I,2);{var pe=o=>{var i=mt(),c=r(i);dt(c,{class:"h-6 w-6 animate-spin text-indigo-400"}),a(i),f(o,i)},me=o=>{var i=Se(),c=ae(i);{var p=w=>{var Z=gt();f(w,Z)},R=w=>{var Z=Se(),we=ae(Z);{var ze=z=>{var j=bt();f(z,j)},ge=z=>{var j=yt(),H=ae(j),be=t(r(H),2);Ve(be,16,()=>["name","date","progress"],We,(V,n)=>{var m=_t();m.__click=()=>xe(n);var h=r(m),q=r(h,!0);a(h);var y=t(h,2);{var W=k=>{var A=Se(),X=ae(A);{var G=g=>{ct(g,{class:"h-3 w-3"})},L=g=>{ut(g,{class:"h-3 w-3"})};S(X,g=>{e(v)==="asc"?g(G):g(L,!1)})}f(k,A)};S(y,k=>{e(P)===n&&k(W)})}a(m),re(()=>{Le(m,1,`flex items-center gap-1 rounded-md px-3 py-1.5 transition-colors ${e(P)===n?"bg-indigo-500/20 text-indigo-300":"bg-zinc-800/50 text-zinc-400 hover:bg-zinc-800"}`),C(q,n)}),f(V,m)}),a(H);var J=t(H,2);Ve(J,21,()=>e(F),We,(V,n)=>{var m=zt(),h=r(m),q=r(h),y=r(q),W=r(y,!0);a(y);var k=t(y,2);{var A=b=>{var _=xt(),M=r(_,!0);a(_),re(()=>C(M,e(n).description)),f(b,_)};S(k,b=>{e(n).description&&b(A)})}var X=t(k,2);{var G=b=>{var _=ht(),M=t(r(_));a(_),re(()=>C(M,` ${e(n).requirements??""}`)),f(b,_)};S(X,b=>{e(n).requirements&&b(G)})}a(q);var L=t(q,2),g=r(L),Y=r(g),ye=r(Y,!0);a(Y),a(g);var $=t(g,2),ke=t(r($),2),d=r(ke);a(ke),a($);var Me=t($,2),Ne=r(Me);let Oe;a(Me),a(L),a(h);var Te=t(h,2),Ee=r(Te),qe=r(Ee),Be=t(r(qe),2),Ze=r(Be,!0);a(Be),a(qe);var Je=t(qe,2);{var Xe=b=>{var _=wt(),M=t(r(_),2),je=r(M);a(M),a(_),re((Ae,$e)=>C(je,`${Ae??""} - ${$e??""}`),[()=>le(e(n).start_at),()=>le(e(n).end_at)]),f(b,_)};S(Je,b=>{(e(n).start_at||e(n).end_at)&&b(Xe)})}a(Ee);var Fe=t(Ee,2),Ie=r(Fe);Ie.__click=()=>De(e(n));var Ye=t(Ie,2);Ye.__click=()=>Pe(e(n).id),a(Fe),a(Te),a(m),re((b,_,M,je,Ae)=>{nt(y,"title",e(n).name),C(W,e(n).name),Le(Y,1,b),C(ye,_),C(d,`${(e(n).percentage||0)??""}%`),Le(Ne,1,`h-full rounded-full transition-all duration-500 ${M??""}`),Oe=it(Ne,"",Oe,je),C(Ze,Ae)},[()=>`rounded-full px-2 py-0.5 text-xs ${he(e(n).status)}`,()=>de(e(n).status),()=>e(n).colour&&!e(n).colour.startsWith("#")?e(n).colour:"",()=>({width:`${(e(n).percentage||0)??""}%`,"background-color":e(n).colour&&e(n).colour.startsWith("#")?e(n).colour:""}),()=>se(e(n).funds)]),f(V,m)}),a(J),f(z,j)};S(we,z=>{e(oe).length===0?z(ze):z(ge,!1)},!0)}f(w,Z)};S(c,w=>{e(O)?w(R,!1):w(p)},!0)}f(o,i)};S(fe,o=>{e(T)&&e(O)!==null?o(pe):o(me,!1)})}a(U),f(Ce,Q),Qe()}Ue(["click"]);export{Lt as component};
