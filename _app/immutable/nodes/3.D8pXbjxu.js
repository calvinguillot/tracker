import{c as fe,a as u,f as b}from"../chunks/o5v50Yvo.js";import{p as Ne,s as O,c as Fe,d as We,f as c,g as H,a as Ie,h as n,i as a,j as i,n as Oe,t as pe,k as e,o as Xe,m as De}from"../chunks/5_FoE8hS.js";import{d as Me,s as D,e as Ye}from"../chunks/vZxgl7By.js";import{i as z}from"../chunks/CRVHY2kJ.js";import{r as G,b as Ze,a as ue,e as je,c as Ee,i as Le,s as Te}from"../chunks/DtXYkt4S.js";import{s as ae}from"../chunks/Bkout0r_.js";import{b as ne,a as $e,P as et,L as tt}from"../chunks/yjZnqevh.js";import{A as at,a as nt}from"../chunks/Us6NLS3s.js";var it=b('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div><label for="name" class="mb-1 block text-sm font-medium text-zinc-400">Name</label> <input type="text" id="name" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="location" class="mb-1 block text-sm font-medium text-zinc-400">Location</label> <input type="text" id="location" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="type" class="mb-1 block text-sm font-medium text-zinc-400">Type</label> <select id="type" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Select Type</option><option>Open Call</option><option>Residency</option><option>Grant</option><option>Job Offer</option><option>Other</option></select></div> <div><label for="funds" class="mb-1 block text-sm font-medium text-zinc-400">Funds (€)</label> <input type="number" id="funds" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div><label for="deadline" class="mb-1 block text-sm font-medium text-zinc-400">Deadline</label> <input type="date" id="deadline" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="link" class="mb-1 block text-sm font-medium text-zinc-400">Link</label> <input type="url" id="link" placeholder="https://" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div class="flex items-center"><input type="checkbox" id="applied" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"/> <label for="applied" class="ml-2 block text-sm font-medium text-zinc-300">Applied</label></div> <div class="sticky bottom-0 mt-6 flex justify-end gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700">Cancel</button> <button type="submit" class="rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Save</button></div></form></div></div>');function rt(me,l){Ne(l,!0);let d=O(Fe({name:"",location:"",type:null,funds:null,deadline:"",link:"",applied:!1}));We(()=>{l.isOpen&&(l.entry?c(d,{name:l.entry.name||"",location:l.entry.location||"",type:l.entry.type,funds:l.entry.funds,deadline:l.entry.deadline?new Date(l.entry.deadline).toISOString().split("T")[0]:"",link:l.entry.link||"",applied:l.entry.applied||!1},!0):c(d,{name:"",location:"",type:null,funds:null,deadline:"",link:"",applied:!1},!0))});function j(v){v.preventDefault(),l.onSave(e(d))}function E(v){v.target===v.currentTarget&&l.onClose()}function J(v){v.key==="Escape"&&l.onClose()}var w=fe(),I=H(w);{var g=v=>{var L=it();L.__click=E,L.__keydown=J;var ie=n(L),k=n(ie),P=n(k),be=n(P,!0);a(P);var ge=i(P,2);ge.__click=function(...o){l.onClose?.apply(this,o)},a(k);var R=i(k,2),K=n(R),re=i(n(K),2);G(re),a(K);var M=i(K,2),U=i(n(M),2);G(U),a(M);var B=i(M,2),T=n(B),V=i(n(T),2),Q=n(V);Q.value=(Q.__value=null)??"";var W=i(Q);W.value=W.__value=1;var X=i(W);X.value=X.__value=2;var Y=i(X);Y.value=Y.__value=3;var t=i(Y);t.value=t.__value=4;var r=i(t);r.value=r.__value=5,a(V),a(T);var s=i(T,2),f=i(n(s),2);G(f),a(s),a(B);var N=i(B,2),x=i(n(N),2);G(x),a(N);var C=i(N,2),se=i(n(C),2);G(se),a(C);var Z=i(C,2),oe=n(Z);G(oe),Oe(2),a(Z);var _=i(Z,2),q=n(_);q.__click=function(...o){l.onClose?.apply(this,o)},Oe(2),a(_),a(R),a(ie),a(L),pe(()=>D(be,l.entry?"Edit Art Call":"New Art Call")),Ye("submit",R,j),ne(re,()=>e(d).name,o=>e(d).name=o),ne(U,()=>e(d).location,o=>e(d).location=o),Ze(V,()=>e(d).type,o=>e(d).type=o),ne(f,()=>e(d).funds,o=>e(d).funds=o),ne(x,()=>e(d).deadline,o=>e(d).deadline=o),ne(se,()=>e(d).link,o=>e(d).link=o),$e(oe,()=>e(d).applied,o=>e(d).applied=o),u(v,L)};z(I,v=>{l.isOpen&&v(g)})}u(me,w),Ie()}Me(["click","keydown"]);var st=b('<button class="fixed right-8 bottom-8 z-50 rounded-full bg-indigo-600 p-4 text-white shadow-lg transition-transform hover:scale-105 hover:bg-indigo-500" aria-label="New Art Call"><!></button>'),ot=b('<div class="flex h-48 items-center justify-center"><!></div>'),lt=b('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">Sign in to view art calls.</div>'),dt=b('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">No art calls yet.</div>'),ct=b('<button><span class="capitalize"> </span> <!></button>'),vt=b('<span class="text-xs font-medium text-emerald-400">Applied</span>'),ut=b('<span class="text-xs text-zinc-500">Not applied</span>'),ft=b('<a class="rounded-md bg-indigo-500/10 px-3 py-1.5 text-xs font-medium text-indigo-400 transition-colors hover:bg-indigo-500/20 hover:text-indigo-300" target="_blank" rel="noreferrer">Visit Link &rarr;</a>'),pt=b('<li class="group relative flex flex-col justify-between rounded-lg border border-zinc-800 bg-zinc-900/60 p-4 transition-all hover:border-zinc-700 hover:bg-zinc-900/80"><div class="flex flex-col gap-3"><div class="flex items-start justify-between gap-3"><div class="min-w-0 flex-1"><h3 class="truncate text-base font-bold text-zinc-100"> </h3> <div class="mt-1 flex flex-wrap items-center gap-x-2 gap-y-1 text-xs text-zinc-400"><span class="truncate"> </span> <span class="text-zinc-600">•</span> <span> </span></div></div> <div class="flex flex-col items-end gap-1"><div> </div> <!></div></div> <div class="mt-1 flex items-center justify-between gap-4 border-t border-zinc-800/50 pt-3"><div class="flex gap-6"><div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Funds</span> <span class="text-sm font-medium text-emerald-400"> </span></div> <div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Deadline</span> <span class="text-sm text-zinc-300"> </span></div></div> <!></div></div></li>'),mt=b('<div class="mb-4 flex flex-wrap items-center gap-4 text-sm"><span class="text-zinc-500">Sort by:</span> <!></div> <ul class="grid grid-cols-1 gap-3"></ul>',1),bt=b('<!> <section class="space-y-6"><div class="flex flex-wrap items-center justify-between gap-4"><h2 class="text-lg font-bold text-zinc-100">Art Calls</h2> <!></div> <!></section>',1);function Ct(me,l){Ne(l,!0);const d={1:"Open Call",2:"Residency",3:"Grant",4:"Job Offer",5:"Other"};let j=O(null),E=O(!0),J=O(Fe([])),w=O(!1),I=O(null),g=O("deadline"),v=O("asc"),L=De(()=>[...e(J)].sort((t,r)=>{const s=e(v)==="asc"?1:-1;if(e(g)==="name")return t.name.localeCompare(r.name)*s;if(e(g)==="funds")return((t.funds??0)-(r.funds??0))*s;if(e(g)==="deadline"){const f=t.deadline?new Date(t.deadline).getTime():s===1?1/0:-1/0,N=r.deadline?new Date(r.deadline).getTime():s===1?1/0:-1/0;return(f-N)*s}return 0}));function ie(t){e(g)===t?c(v,e(v)==="asc"?"desc":"asc",!0):(c(g,t,!0),c(v,"asc"))}Xe(()=>{ae.auth.getSession().then(({data:{session:r}})=>{c(j,r,!0),r?k():c(E,!1)});const{data:{subscription:t}}=ae.auth.onAuthStateChange((r,s)=>{c(j,s,!0),s?k():c(E,!1)});return()=>t.unsubscribe()});async function k(){c(E,!0),console.log("Fetching art calls...");const{data:t,error:r}=await ae.from("artCalls").select("id, created_at, name, location, type, funds, deadline, link, applied").order("deadline",{ascending:!0});!r&&t?c(J,t,!0):r&&console.error("Error fetching art calls:",r),c(E,!1)}function P(){c(I,null),c(w,!0)}async function be(t){const{id:r,...s}=t;if(e(I)){const{error:f}=await ae.from("artCalls").update(s).eq("id",e(I).id);f?(console.error("Error updating art call:",f),ue("Error updating: "+f.message,"Error")):(ue("Art call updated successfully!","Success"),c(w,!1),k())}else{const{error:f}=await ae.from("artCalls").insert(s);f?(console.error("Error saving art call:",f),ue("Error saving: "+f.message,"Error")):(ue("Art call saved successfully!","Success"),c(w,!1),k())}}const ge=t=>d[t??0]??"Unknown",R=t=>t===null?"—":`€${t}`,K=t=>t?new Date(t).toLocaleDateString():"—";function re(t){if(!t)return{label:"Open",color:"bg-emerald-500",bg:"bg-emerald-500/10",text:"text-emerald-400"};const r=new Date(t),s=new Date;return s.setHours(0,0,0,0),r.setHours(0,0,0,0),r>=s?{label:"Open",color:"bg-emerald-500",bg:"bg-emerald-500/10",text:"text-emerald-400"}:{label:"Closed",color:"bg-red-500",bg:"bg-red-500/10",text:"text-red-400"}}var M=bt(),U=H(M);rt(U,{get isOpen(){return e(w)},get entry(){return e(I)},onClose:()=>c(w,!1),onSave:be});var B=i(U,2),T=n(B),V=i(n(T),2);{var Q=t=>{var r=st();r.__click=P;var s=n(r);et(s,{class:"h-6 w-6"}),a(r),u(t,r)};z(V,t=>{e(j)&&t(Q)})}a(T);var W=i(T,2);{var X=t=>{var r=ot(),s=n(r);tt(s,{class:"h-6 w-6 animate-spin text-indigo-400"}),a(r),u(t,r)},Y=t=>{var r=fe(),s=H(r);{var f=x=>{var C=lt();u(x,C)},N=x=>{var C=fe(),se=H(C);{var Z=_=>{var q=dt();u(_,q)},oe=_=>{var q=mt(),o=H(q),Be=i(n(o),2);je(Be,16,()=>["name","funds","deadline"],Le,(xe,p)=>{var h=ct();h.__click=()=>ie(p);var F=n(h),le=n(F,!0);a(F);var $=i(F,2);{var ee=S=>{var de=fe(),ce=H(de);{var te=y=>{at(y,{class:"h-3 w-3"})},_e=y=>{nt(y,{class:"h-3 w-3"})};z(ce,y=>{e(v)==="asc"?y(te):y(_e,!1)})}u(S,de)};z($,S=>{e(g)===p&&S(ee)})}a(h),pe(()=>{Ee(h,1,`flex items-center gap-1 rounded-md px-3 py-1.5 transition-colors ${e(g)===p?"bg-indigo-500/20 text-indigo-300":"bg-zinc-800/50 text-zinc-400 hover:bg-zinc-800"}`),D(le,p)}),u(xe,h)}),a(o);var ze=i(o,2);je(ze,21,()=>e(L),Le,(xe,p)=>{const h=De(()=>re(e(p).deadline));var F=pt(),le=n(F),$=n(le),ee=n($),S=n(ee),de=n(S,!0);a(S);var ce=i(S,2),te=n(ce),_e=n(te,!0);a(te);var y=i(te,4),qe=n(y,!0);a(y),a(ce),a(ee);var we=i(ee,2),ve=n(we),Ge=n(ve,!0);a(ve);var He=i(ve,2);{var Je=m=>{var A=vt();u(m,A)},Pe=m=>{var A=ut();u(m,A)};z(He,m=>{e(p).applied?m(Je):m(Pe,!1)})}a(we),a($);var ke=i($,2),he=n(ke),ye=n(he),Ce=i(n(ye),2),Re=n(Ce,!0);a(Ce),a(ye);var Se=i(ye,2),Ae=i(n(Se),2),Ke=n(Ae,!0);a(Ae),a(Se),a(he);var Ue=i(he,2);{var Ve=m=>{var A=ft();pe(()=>Te(A,"href",e(p).link)),u(m,A)};z(Ue,m=>{e(p).link&&m(Ve)})}a(ke),a(le),a(F),pe((m,A,Qe)=>{Te(S,"title",e(p).name),D(de,e(p).name),D(_e,e(p).location),D(qe,m),Ee(ve,1,`shrink-0 rounded-full border px-2 py-0.5 text-[10px] font-medium ${e(h).bg} ${e(h).text} border-transparent text-center`),D(Ge,e(h).label),D(Re,A),D(Ke,Qe)},[()=>ge(e(p).type),()=>R(e(p).funds),()=>K(e(p).deadline)]),u(xe,F)}),a(ze),u(_,q)};z(se,_=>{e(J).length===0?_(Z):_(oe,!1)},!0)}u(x,C)};z(s,x=>{e(j)?x(N,!1):x(f)},!0)}u(t,r)};z(W,t=>{e(E)&&e(j)!==null?t(X):t(Y,!1)})}a(B),u(me,M),Ie()}Me(["click"]);export{Ct as component};
