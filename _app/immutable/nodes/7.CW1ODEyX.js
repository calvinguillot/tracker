import{c as ct,a as c,f as m}from"../chunks/BqEl5C80.js";import{f as B,p as Be,s as lt,c as We,d as $e,g as w,a as Ue,h as a,i as e,j as s,l as ta,k as t,t as N,n as ea,o as aa,v as I,m as Ne}from"../chunks/DVg-wcBP.js";import{d as Ve,s as L,e as ra}from"../chunks/Bj2CMk_O.js";import{l as sa,s as na,i as z}from"../chunks/C66CeOwb.js";import{I as ia,s as oa,r as St,e as dt,i as vt,a as Ut,b as ut,c as Fe,g as S,d as la,f as Bt,h as ca,j as da,m as Oe}from"../chunks/DZ1IOtyI.js";import{s as Wt}from"../chunks/Bkout0r_.js";import{b as _t,P as Ye,L as va}from"../chunks/CX2Dg3vE.js";import{T as He}from"../chunks/BWQHzTPj.js";import{A as Ge,a as Ke}from"../chunks/DEyrxmCn.js";import{S as ua}from"../chunks/BhKNGBf3.js";import{S as ga,L as qe}from"../chunks/BR_62rVb.js";import{L as fa}from"../chunks/BzdIDQeg.js";import"../chunks/DyB6Jsl2.js";function ma(Vt,u){const n=sa(u,["children","$$slots","$$events","$$legacy"]);const $=[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}]];ia(Vt,na({name:"calendar"},()=>n,{get iconNode(){return $},children:(tt,gt)=>{var U=ct(),et=B(U);oa(et,u,"default",{}),c(tt,U)},$$slots:{default:!0}}))}var pa=m('<div class="flex items-center gap-2"><button type="button" class="text-zinc-400 hover:text-zinc-200"><!></button> <input type="text" placeholder="Item description..."/> <div class="flex items-center gap-1"><button type="button" class="p-1 text-zinc-500 hover:text-zinc-300 disabled:opacity-30"><!></button> <button type="button" class="p-1 text-zinc-500 hover:text-zinc-300 disabled:opacity-30"><!></button> <button type="button" class="p-1 text-zinc-500 hover:text-red-400"><!></button></div></div>'),_a=m('<div class="rounded-lg border border-zinc-800 bg-zinc-800/30 p-4"><div class="mb-3 flex items-center justify-between gap-2"><input type="text" placeholder="Checklist Title" class="w-full bg-transparent text-sm font-bold text-zinc-200 placeholder-zinc-600 focus:outline-none"/> <button type="button" class="text-zinc-600 hover:text-red-400" title="Remove Checklist"><!></button></div> <div class="space-y-2"><!> <button type="button" class="mt-2 flex items-center gap-1 text-xs text-zinc-500 hover:text-zinc-300"><!> Add Item</button></div></div>'),ba=m('<div class="space-y-6"></div>'),xa=m('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No checklists yet</p></div>'),ha=m("<option> </option>"),wa=m("<div></div>"),za=m('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div><label for="name" class="mb-1 block text-sm font-medium text-zinc-400">Name</label> <input type="text" id="name" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="description" class="mb-1 block text-sm font-medium text-zinc-400">Description</label> <textarea id="description" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Checklists</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Checklist</button></div> <!></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="status" class="mb-1 block text-sm font-medium text-zinc-400">Status</label> <select id="status" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Not Started</option><option>In Progress</option><option>Postponed</option><option>Completed</option><option>Cancelled</option></select></div> <div><label for="funds" class="mb-1 block text-sm font-medium text-zinc-400">Funds (€)</label> <input type="number" id="funds" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="percentage" class="mb-1 block text-sm font-medium text-zinc-400"> </label> <input type="range" id="percentage" min="0" max="100" class="h-2 w-full cursor-pointer appearance-none rounded-lg bg-zinc-700 accent-indigo-500"/></div> <div><label for="type" class="mb-1 block text-sm font-medium text-zinc-400">Type</label> <div class="flex items-center gap-2"><select id="type" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Select Type</option><!></select> <!></div></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="start_at" class="mb-1 block text-sm font-medium text-zinc-400">Start Date</label> <input type="date" id="start_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="end_at" class="mb-1 block text-sm font-medium text-zinc-400">End Date</label> <input type="date" id="end_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div class="sticky bottom-0 mt-6 flex justify-end gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700">Cancel</button> <button type="submit" class="rounded-md px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm transition-all hover:brightness-110 focus-visible:outline-2 focus-visible:outline-offset-2">Save</button></div></form></div></div>');function ya(Vt,u){Be(u,!0);let n=lt(We({name:"",description:"",funds:null,status:0,type:null,percentage:0,start_at:"",end_at:"",colour:"bg-indigo-600",checklist:[]}));$e(()=>{u.isOpen&&(u.entry?w(n,{name:u.entry.name||"",description:u.entry.description||"",funds:u.entry.funds,status:u.entry.status??0,type:u.entry.type??null,percentage:u.entry.percentage??0,start_at:u.entry.start_at?new Date(u.entry.start_at).toISOString().split("T")[0]:"",end_at:u.entry.end_at?new Date(u.entry.end_at).toISOString().split("T")[0]:"",colour:u.entry.colour||"bg-indigo-600",checklist:Array.isArray(u.entry.checklist)?u.entry.checklist:[]},!0):w(n,{name:"",description:"",funds:null,status:0,type:null,percentage:0,start_at:"",end_at:"",colour:"bg-indigo-600",checklist:[]},!0))});function $(){if(t(n).type){const d=Ut.getProjectType(t(n).type);d&&d.color&&(t(n).colour=d.color)}}function tt(d){d.preventDefault(),u.onSave(t(n))}function gt(d){d.target===d.currentTarget&&u.onClose()}function U(d){d.key==="Escape"&&u.onClose()}function et(){t(n).checklist=[...t(n).checklist,{id:crypto.randomUUID(),title:"New Checklist",items:[]}]}function bt(d){t(n).checklist=t(n).checklist.filter((x,y)=>y!==d)}function at(d){const x=t(n).checklist[d];x.items=[...x.items,{text:"",completed:!1}],t(n).checklist[d]=x}function xt(d,x){const y=t(n).checklist[d];y.items=y.items.filter((V,R)=>R!==x),t(n).checklist[d]=y}function Yt(d,x){const y=t(n).checklist[d];y.items[x].completed=!y.items[x].completed,t(n).checklist[d]=y}function le(d,x,y){const V=t(n).checklist[d],R=y==="up"?x-1:x+1;if(R<0||R>=V.items.length)return;const Kt=V.items[x],ht=[...V.items];ht.splice(x,1),ht.splice(R,0,Kt),V.items=ht,t(n).checklist[d]=V}var Gt=ct(),_e=B(Gt);{var O=d=>{var x=za();x.__click=gt,x.__keydown=U;var y=a(x),V=a(y),R=a(V),Kt=a(R,!0);e(R);var ht=s(R,2);ht.__click=function(...i){u.onClose?.apply(this,i)},e(V);var Rt=s(V,2),Tt=a(Rt),ce=s(a(Tt),2);St(ce),e(Tt);var Jt=s(Tt,2),Qt=s(a(Jt),2);ta(Qt),e(Jt);var Pt=s(Jt,2),At=a(Pt),Xt=s(a(At),2);Xt.__click=et,e(At);var Zt=s(At,2);{var be=i=>{var g=ba();dt(g,21,()=>t(n).checklist,vt,(h,P,A)=>{var M=_a(),o=a(M),_=a(o);St(_);var q=s(_,2);q.__click=()=>bt(A);var k=a(q);He(k,{class:"h-4 w-4"}),e(q),e(o);var b=s(o,2),f=a(b);dt(f,17,()=>t(P).items,vt,(X,J,Z)=>{var kt=pa(),st=a(kt);st.__click=()=>Yt(A,Z);var Dt=a(st);{var se=G=>{ua(G,{class:"h-5 w-5 text-emerald-500"})},we=G=>{ga(G,{class:"h-5 w-5"})};z(Dt,G=>{t(J).completed?G(se):G(we,!1)})}e(st);var mt=s(st,2);St(mt);var ne=s(mt,2),nt=a(ne);nt.__click=()=>le(A,Z,"up"),nt.disabled=Z===0;var ze=a(nt);Ge(ze,{class:"h-3 w-3"}),e(nt);var pt=s(nt,2);pt.__click=()=>le(A,Z,"down");var me=a(pt);Ke(me,{class:"h-3 w-3"}),e(pt);var Lt=s(pt,2);Lt.__click=()=>xt(A,Z);var pe=a(Lt);He(pe,{class:"h-3 w-3"}),e(Lt),e(ne),e(kt),N(()=>{S(mt,1,`w-full rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 ${t(J).completed?"text-zinc-500 line-through":""}`),pt.disabled=Z===t(P).items.length-1}),_t(mt,()=>t(J).text,G=>t(J).text=G),c(X,kt)});var F=s(f,2);F.__click=()=>at(A);var Y=a(F);Ye(Y,{class:"h-3 w-3"}),ea(),e(F),e(b),e(M),_t(_,()=>t(P).title,X=>t(P).title=X),c(h,M)}),e(g),c(i,g)},xe=i=>{var g=xa();c(i,g)};z(Zt,i=>{t(n).checklist&&t(n).checklist.length>0?i(be):i(xe,!1)})}e(Pt);var It=s(Pt,2),$t=a(It),te=s(a($t),2),r=a(te);r.value=r.__value=0;var l=s(r);l.value=l.__value=1;var v=s(l);v.value=v.__value=2;var p=s(v);p.value=p.__value=3;var D=s(p);D.value=D.__value=4,e(te),e($t);var T=s($t,2),H=s(a(T),2);St(H),e(T),e(It);var W=s(It,2),C=a(W),ee=a(C),ft=a(ee);e(ee);var wt=s(ee,2);St(wt),e(C);var Mt=s(C,2),Et=s(a(Mt),2),zt=a(Et);zt.__change=$;var jt=a(zt);jt.value=(jt.__value=null)??"";var ae=s(jt);dt(ae,17,()=>Ut.settings.project_types,vt,(i,g)=>{var h=ha(),P=a(h,!0);e(h);var A={};N(()=>{L(P,t(g).label),A!==(A=t(g).id)&&(h.value=(h.__value=t(g).id)??"")}),c(i,h)}),e(zt);var he=s(zt,2);{var de=i=>{var g=wa();let h;N(P=>{h=S(g,1,"h-8 w-8 flex-shrink-0 rounded-full border border-zinc-600 shadow-sm",null,h,{"bg-zinc-500":t(n).colour==="bg-zinc-500","bg-red-600":t(n).colour==="bg-red-600","bg-orange-600":t(n).colour==="bg-orange-600","bg-amber-500":t(n).colour==="bg-amber-500","bg-green-600":t(n).colour==="bg-green-600","bg-emerald-500":t(n).colour==="bg-emerald-500","bg-teal-500":t(n).colour==="bg-teal-500","bg-cyan-500":t(n).colour==="bg-cyan-500","bg-blue-600":t(n).colour==="bg-blue-600","bg-indigo-600":t(n).colour==="bg-indigo-600","bg-violet-600":t(n).colour==="bg-violet-600","bg-purple-600":t(n).colour==="bg-purple-600","bg-fuchsia-600":t(n).colour==="bg-fuchsia-600","bg-pink-600":t(n).colour==="bg-pink-600","bg-rose-600":t(n).colour==="bg-rose-600"}),ut(g,P)},[()=>t(n).colour.startsWith("#")?`background-color: ${t(n).colour}`:""]),c(i,g)};z(he,i=>{t(n).colour&&i(de)})}e(Et),e(Mt),e(W);var rt=s(W,2),re=a(rt),yt=s(a(re),2);St(yt),e(re);var ve=s(re,2),ue=s(a(ve),2);St(ue),e(ve),e(rt);var ge=s(rt,2),fe=a(ge);fe.__click=function(...i){u.onClose?.apply(this,i)};var Q=s(fe,2);e(ge),e(Rt),e(y),e(x),N((i,g)=>{L(Kt,u.entry?"Edit Project":"New Project"),ut(Xt,`color: ${i??""}`),L(ft,`Progress (${t(n).percentage??""}%)`),ut(Q,`background-color: ${g??""}`)},[()=>Ut.getAccentLightHex(),()=>Ut.getAccentHex()]),ra("submit",Rt,tt),_t(ce,()=>t(n).name,i=>t(n).name=i),_t(Qt,()=>t(n).description,i=>t(n).description=i),Fe(te,()=>t(n).status,i=>t(n).status=i),_t(H,()=>t(n).funds,i=>t(n).funds=i),_t(wt,()=>t(n).percentage,i=>t(n).percentage=i),Fe(zt,()=>t(n).type,i=>t(n).type=i),_t(yt,()=>t(n).start_at,i=>t(n).start_at=i),_t(ue,()=>t(n).end_at,i=>t(n).end_at=i),c(d,x)};z(_e,d=>{u.isOpen&&d(O)})}c(Vt,Gt),Ue()}Ve(["click","keydown","change"]);var ka=m('<button class="fixed right-8 bottom-8 z-50 rounded-full p-4 text-white shadow-lg transition-all hover:scale-105 hover:brightness-110" aria-label="New Project"><!></button>'),Da=m('<div class="flex h-48 items-center justify-center"><!></div>'),Ca=m('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">Sign in to view projects.</div>'),Sa=m('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">No projects yet.</div>'),Ta=m('<button><span class="capitalize"> </span> <!></button>'),Pa=m("<p> </p>"),Aa=m('<span class="text-zinc-600">•</span> <div class="flex items-center gap-1"><!> <span> </span></div>',1),Ma=m('<div class="flex items-center gap-2 text-xs text-zinc-500"><span> </span> <!></div>'),Ea=m('<div class="flex items-center gap-2 text-xs text-zinc-500"><div class="flex items-center gap-1"><!> <span> </span></div></div>'),ja=m('<div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Dates</span> <span> </span></div>'),La=m('<li><div class="flex flex-col gap-4 md:flex-row md:items-start md:justify-between"><div class="flex min-w-0 flex-1 flex-col gap-2"><h3> </h3> <!> <!></div> <div class="flex w-full shrink-0 flex-col gap-2 md:w-56"><div class="flex justify-end"><span> </span></div> <div class="flex items-center justify-between"><span>Progress</span> <span> </span></div> <div class="h-2 w-full overflow-hidden rounded-full bg-zinc-800"><div></div></div></div></div> <div class="flex flex-wrap items-end justify-between gap-4 border-t border-zinc-800/50 pt-3"><div class="flex items-center gap-6"><div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Funds</span> <span> </span></div> <!></div> <div class="flex items-center gap-2"><button class="rounded-md p-2 text-indigo-400 transition-colors hover:bg-zinc-800 hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="rounded-md p-2 text-red-400 transition-colors hover:bg-zinc-800 hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div></li>'),Na=m('<div class="my-8 flex items-center gap-4"><div class="h-px flex-1 bg-zinc-800"></div> <span class="text-sm font-medium tracking-wider text-zinc-500 uppercase">Archived</span> <div class="h-px flex-1 bg-zinc-800"></div></div> <ul class="grid grid-cols-1 gap-4"></ul>',1),Fa=m('<ul class="grid grid-cols-1 gap-4"></ul> <!>',1),Oa=m('<div class="absolute top-8 bottom-0 border-l border-dashed border-zinc-800"></div>'),Ha=m('<div class="absolute -translate-x-1/2 transform text-center"> </div>'),qa=m('<div class="group relative h-10 w-full rounded transition-colors hover:bg-zinc-800/30"><div class="absolute top-1 flex flex-col gap-1"><div></div> <span class="px-0.5 text-[10px] font-medium whitespace-nowrap text-zinc-400"> </span></div></div>'),Ba=m('<div class="p-4 text-center text-zinc-500">No projects with dates to display.</div>'),Wa=m('<div class="w-full overflow-x-auto rounded-lg border border-zinc-800 bg-zinc-900/60 p-4"><div class="relative min-w-[800px]"><div class="pointer-events-none absolute inset-0"></div> <div class="relative z-10 mb-4 flex border-b border-zinc-800 pb-2 text-xs font-medium text-zinc-500"><div class="relative h-6 flex-1"></div></div> <div class="space-y-3"><!> <!></div></div></div>'),Ua=m('<div class="mb-4 flex flex-wrap items-center justify-between gap-4 text-sm"><div class="flex flex-wrap items-center gap-4"><span class="text-zinc-500">Sort by:</span> <!></div> <div class="flex items-center gap-4"><span class="text-xs text-zinc-500"> </span> <div class="flex items-center rounded-lg bg-zinc-800/50 p-1"><button aria-label="List View"><!></button> <button aria-label="Gantt View"><!></button></div></div></div> <!>',1),Va=m('<!> <section class="space-y-6"><div class="flex flex-wrap items-center justify-between gap-4"><h2 class="text-lg font-bold text-zinc-100">Projects</h2> <!></div> <!></section>',1);function rr(Vt,u){Be(u,!0);const n={0:"Not Started",1:"In Progress",2:"Postponed",3:"Completed",4:"Cancelled"};let $=lt(null),tt=lt(!0),gt=lt(We([])),U=lt(!1),et=lt(null),bt=lt("list"),at=lt("date"),xt=lt("desc"),Yt=I(()=>[...t(gt)].sort((r,l)=>{const v=t(xt)==="asc"?1:-1;if(t(at)==="name")return r.name.localeCompare(l.name)*v;if(t(at)==="date"){const p=new Date(r.created_at).getTime(),D=new Date(l.created_at).getTime();return(p-D)*v}else if(t(at)==="progress")return((r.percentage||0)-(l.percentage||0))*v;return 0})),le=I(()=>t(Yt).filter(r=>r.status!==3&&r.status!==4)),Gt=I(()=>t(Yt).filter(r=>r.status===3||r.status===4)),_e=I(()=>t(gt).filter(r=>r.status===3).length),O=I(()=>{const r=t(Yt).filter(C=>C.start_at&&C.end_at);if(r.length===0){const C=new Date;return{start:new Date(C.getFullYear(),0,1),end:new Date(C.getFullYear(),11,31),projects:[],months:[]}}const l=r.flatMap(C=>[new Date(C.start_at),new Date(C.end_at)]),v=new Date(Math.min(...l.map(C=>C.getTime()))),p=new Date(Math.max(...l.map(C=>C.getTime()))),D=new Date(v);D.setDate(D.getDate()-7);const T=new Date(p);T.setDate(T.getDate()+7);const H=[],W=new Date(D);for(W.setDate(1);W<=T;)H.push(new Date(W)),W.setMonth(W.getMonth()+1);return H.length===0&&H.push(new Date(D.getFullYear(),D.getMonth(),1)),{start:D,end:T,projects:r,months:H}});function d(r,l,v){if(!r.start_at||!r.end_at)return"";const p=v.getTime()-l.getTime(),D=new Date(r.start_at).getTime(),T=new Date(r.end_at).getTime(),H=(D-l.getTime())/p*100,W=(T-D)/p*100;return`left: ${Math.max(0,H)}%; width: ${Math.min(100,W)}%;`}function x(r){t(at)===r?w(xt,t(xt)==="asc"?"desc":"asc",!0):(w(at,r,!0),w(xt,"asc"))}aa(()=>{Wt.auth.getSession().then(({data:{session:l}})=>{w($,l,!0),l?y():w(tt,!1)});const{data:{subscription:r}}=Wt.auth.onAuthStateChange((l,v)=>{w($,v,!0),v?y():w(tt,!1)});return()=>r.unsubscribe()});async function y(){w(tt,!0);const{data:r,error:l}=await Wt.from("projects").select("*").order("created_at",{ascending:!1});!l&&r?w(gt,r,!0):l&&console.error("Error fetching projects:",l),w(tt,!1)}function V(){w(et,null),w(U,!0)}function R(r){w(et,r,!0),w(U,!0)}async function Kt(r){if(!await da("Are you sure you want to delete this project?","Delete Project",{confirmText:"Delete",isDestructive:!0}))return;const{error:v}=await Wt.from("projects").delete().eq("id",r);v?(console.error("Error deleting project:",v),Bt("Error deleting: "+v.message,"Error")):(Bt("Project deleted successfully!","Success"),y())}async function ht(r){const{id:l,...v}=r;if(t(et)){const{error:p}=await Wt.from("projects").update(v).eq("id",t(et).id);p?(console.error("Error updating project:",p),Bt("Error updating: "+p.message,"Error")):(Bt("Project updated successfully!","Success"),w(U,!1),y())}else{const{error:p}=await Wt.from("projects").insert(v);p?(console.error("Error saving project:",p),Bt("Error saving: "+p.message,"Error")):(Bt("Project saved successfully!","Success"),w(U,!1),y())}}const Rt=r=>r===null?"—":`€${r}`,Tt=r=>r?new Date(r).toLocaleDateString():"—",ce=r=>n[r]??"Unknown",Jt=r=>{switch(r){case 1:return"bg-amber-500/10 text-amber-400";case 2:return"bg-purple-500/10 text-purple-400";case 3:return"bg-emerald-500/10 text-emerald-400";case 4:return"bg-red-500/10 text-red-400";default:return"bg-zinc-800 text-zinc-400"}};function Qt(r){if(!r)return{total:0,completed:0};if(Array.isArray(r)&&r.length>0&&"items"in r[0]){let l=0,v=0;return r.forEach(p=>{p.items&&(l+=p.items.length,v+=p.items.filter(D=>D.completed).length)}),{total:l,completed:v}}return Array.isArray(r)&&r.length>0?{total:r.length,completed:r.filter(l=>l.completed).length}:{total:0,completed:0}}var Pt=Va(),At=B(Pt);ya(At,{get isOpen(){return t(U)},get entry(){return t(et)},onClose:()=>w(U,!1),onSave:ht});var Xt=s(At,2),Zt=a(Xt),be=s(a(Zt),2);{var xe=r=>{var l=ka();l.__click=V;var v=a(l);Ye(v,{class:"h-6 w-6"}),e(l),N(p=>ut(l,`background-color: ${p??""}`),[()=>Ut.getAccentHex()]),c(r,l)};z(be,r=>{t($)&&!t(U)&&!la.isOpen&&r(xe)})}e(Zt);var It=s(Zt,2);{var $t=r=>{var l=Da(),v=a(l);va(v,{class:"h-6 w-6 animate-spin text-indigo-400"}),e(l),c(r,l)},te=r=>{var l=ct(),v=B(l);{var p=T=>{var H=Ca();c(T,H)},D=T=>{var H=ct(),W=B(H);{var C=ft=>{var wt=Sa();c(ft,wt)},ee=ft=>{var wt=Ua(),Mt=B(wt),Et=a(Mt),zt=s(a(Et),2);dt(zt,16,()=>["name","date","progress"],vt,(Q,i)=>{var g=Ta();g.__click=()=>x(i);var h=a(g),P=a(h,!0);e(h);var A=s(h,2);{var M=o=>{var _=ct(),q=B(_);{var k=f=>{Ge(f,{class:"h-3 w-3"})},b=f=>{Ke(f,{class:"h-3 w-3"})};z(q,f=>{t(xt)==="asc"?f(k):f(b,!1)})}c(o,_)};z(A,o=>{t(at)===i&&o(M)})}e(g),N(()=>{S(g,1,`flex items-center gap-1 rounded-md px-3 py-1.5 transition-colors ${t(at)===i?"bg-indigo-500/20 text-indigo-300":"bg-zinc-800/50 text-zinc-400 hover:bg-zinc-800"}`),L(P,i)}),c(Q,g)}),e(Et);var jt=s(Et,2),ae=a(jt),he=a(ae);e(ae);var de=s(ae,2),rt=a(de);rt.__click=()=>w(bt,"list");var re=a(rt);fa(re,{class:"h-4 w-4"}),e(rt);var yt=s(rt,2);yt.__click=()=>w(bt,"gantt");var ve=a(yt);ma(ve,{class:"h-4 w-4"}),e(yt),e(de),e(jt),e(Mt);var ue=s(Mt,2);{var ge=Q=>{var i=Fa();const g=(M,o=Ne,_=Ne)=>{var q=La(),k=a(q),b=a(k),f=a(b),F=a(f,!0);e(f);var Y=s(f,2);{var X=E=>{var j=Pa(),K=a(j,!0);e(j),N(()=>{S(j,1,`text-sm ${_()?"text-zinc-600":"text-zinc-400"}`),L(K,o().description)}),c(E,j)};z(Y,E=>{o().description&&E(X)})}var J=s(Y,2);{var Z=E=>{const j=I(()=>Ut.getProjectType(o().type));var K=ct(),Ct=B(K);{var it=ot=>{var Nt=Ma(),Ft=a(Nt),De=a(Ft,!0);e(Ft);var ie=s(Ft,2);{var oe=Ot=>{const Ht=I(()=>Qt(o().checklist));var qt=ct(),Ce=B(qt);{var Se=Te=>{var Ee=Aa(),je=s(B(Ee),2),Le=a(je);{let Ie=I(()=>`h-3.5 w-3.5 ${_()?"text-zinc-600":"text-zinc-400"}`);qe(Le,{get class(){return t(Ie)}})}var Pe=s(Le,2),Ze=a(Pe);e(Pe),e(je),N(()=>{S(Pe,1,Oe(_()?"text-zinc-600":"text-zinc-500")),L(Ze,`${t(Ht).completed??""}/${t(Ht).total??""}`)}),c(Te,Ee)};z(Ce,Te=>{t(Ht).total>0&&Te(Se)})}c(Ot,qt)};z(ie,Ot=>{o().checklist&&Ot(oe)})}e(Nt),N(()=>{S(Ft,1,`font-medium ${_()?"text-zinc-600":"text-zinc-400"}`),L(De,t(j).label)}),c(ot,Nt)};z(Ct,ot=>{t(j)&&ot(it)})}c(E,K)},kt=E=>{var j=ct(),K=B(j);{var Ct=it=>{const ot=I(()=>Qt(o().checklist));var Nt=ct(),Ft=B(Nt);{var De=ie=>{var oe=Ea(),Ot=a(oe),Ht=a(Ot);{let Se=I(()=>`h-3.5 w-3.5 ${_()?"text-zinc-600":"text-zinc-400"}`);qe(Ht,{get class(){return t(Se)}})}var qt=s(Ht,2),Ce=a(qt);e(qt),e(Ot),e(oe),N(()=>{S(qt,1,Oe(_()?"text-zinc-600":"text-zinc-500")),L(Ce,`${t(ot).completed??""}/${t(ot).total??""}`)}),c(ie,oe)};z(Ft,ie=>{t(ot).total>0&&ie(De)})}c(it,Nt)};z(K,it=>{o().checklist&&it(Ct)},!0)}c(E,j)};z(J,E=>{o().type?E(Z):E(kt,!1)})}e(b);var st=s(b,2),Dt=a(st),se=a(Dt),we=a(se,!0);e(se),e(Dt);var mt=s(Dt,2),ne=a(mt),nt=s(ne,2),ze=a(nt);e(nt),e(mt);var pt=s(mt,2),me=a(pt);let Lt;e(pt),e(st),e(k);var pe=s(k,2),G=a(pe),ye=a(G),ke=s(a(ye),2),Re=a(ke,!0);e(ke),e(ye);var Je=s(ye,2);{var Qe=E=>{var j=ja(),K=s(a(j),2),Ct=a(K);e(K),e(j),N((it,ot)=>{S(K,1,`text-sm ${_()?"text-zinc-500":"text-zinc-300"}`),L(Ct,`${it??""} - ${ot??""}`)},[()=>Tt(o().start_at),()=>Tt(o().end_at)]),c(E,j)};z(Je,E=>{(o().start_at||o().end_at)&&E(Qe)})}e(G);var Ae=s(G,2),Me=a(Ae);Me.__click=()=>R(o());var Xe=s(Me,2);Xe.__click=()=>Kt(o().id),e(Ae),e(pe),e(q),N((E,j,K,Ct,it)=>{S(q,1,`group relative flex flex-col gap-4 rounded-lg border p-4 transition-all ${_()?"border-zinc-800/60 bg-zinc-900/30 text-zinc-500 hover:border-zinc-700/60 hover:bg-zinc-900/40":"border-zinc-800 bg-zinc-900/60 hover:border-zinc-700 hover:bg-zinc-900/80"}`),S(f,1,`truncate text-base font-bold ${_()?"text-zinc-500":"text-zinc-100"}`),ca(f,"title",o().name),L(F,o().name),S(se,1,E),L(we,j),S(ne,1,`text-xs font-medium ${_()?"text-zinc-600":"text-zinc-400"}`),S(nt,1,`text-xs ${_()?"text-zinc-600":"text-zinc-500"}`),L(ze,`${(o().percentage||0)??""}%`),S(me,1,`h-full rounded-full transition-all duration-500 ${K??""}`),Lt=ut(me,"",Lt,Ct),S(ke,1,`text-sm font-medium ${_()?"text-zinc-500":"text-emerald-400"}`),L(Re,it)},[()=>`rounded-full px-2 py-0.5 text-xs ${Jt(o().status)}`,()=>ce(o().status),()=>o().colour&&!o().colour.startsWith("#")?o().colour:"",()=>({width:`${(o().percentage||0)??""}%`,"background-color":o().colour&&o().colour.startsWith("#")?o().colour:"",opacity:_()?.5:1}),()=>Rt(o().funds)]),c(M,q)};var h=B(i);dt(h,21,()=>t(le),vt,(M,o)=>{g(M,()=>t(o),()=>!1)}),e(h);var P=s(h,2);{var A=M=>{var o=Na(),_=s(B(o),2);dt(_,21,()=>t(Gt),vt,(q,k)=>{g(q,()=>t(k),()=>!0)}),e(_),c(M,o)};z(P,M=>{t(Gt).length>0&&M(A)})}c(Q,i)},fe=Q=>{var i=Wa(),g=a(i),h=a(g);dt(h,21,()=>t(O).months,vt,(k,b)=>{var f=Oa();let F;N(Y=>F=ut(f,"",F,Y),[()=>({left:`${(t(b).getTime()-t(O).start.getTime())/(t(O).end.getTime()-t(O).start.getTime())*100}%`})]),c(k,f)}),e(h);var P=s(h,2),A=a(P);dt(A,21,()=>t(O).months,vt,(k,b)=>{var f=Ha();let F;var Y=a(f,!0);e(f),N((X,J)=>{F=ut(f,"",F,X),L(Y,J)},[()=>({left:`${(t(b).getTime()-t(O).start.getTime())/(t(O).end.getTime()-t(O).start.getTime())*100}%`}),()=>t(b).toLocaleDateString("en-US",{month:"long"})]),c(k,f)}),e(A),e(P);var M=s(P,2),o=a(M);dt(o,17,()=>t(O).projects,vt,(k,b)=>{var f=qa(),F=a(f),Y=a(F);let X;var J=s(Y,2),Z=a(J,!0);e(J),e(F),e(f),N((kt,st,Dt)=>{ut(F,kt),S(Y,1,`h-2 w-full rounded-full shadow-sm transition-all hover:brightness-110 ${st??""}`),X=ut(Y,"",X,Dt),L(Z,t(b).name)},[()=>d(t(b),t(O).start,t(O).end),()=>t(b).colour&&!t(b).colour.startsWith("#")?t(b).colour:"bg-indigo-600",()=>({"background-color":t(b).colour&&t(b).colour.startsWith("#")?t(b).colour:void 0})]),c(k,f)});var _=s(o,2);{var q=k=>{var b=Ba();c(k,b)};z(_,k=>{t(O).projects.length===0&&k(q)})}e(M),e(g),e(i),c(Q,i)};z(ue,Q=>{t(bt)==="list"?Q(ge):Q(fe,!1)})}N(()=>{L(he,`Completed ${t(_e)??""} / ${t(gt).length??""}`),S(rt,1,`rounded-md p-1.5 transition-all ${t(bt)==="list"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`),S(yt,1,`rounded-md p-1.5 transition-all ${t(bt)==="gantt"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`)}),c(ft,wt)};z(W,ft=>{t(gt).length===0?ft(C):ft(ee,!1)},!0)}c(T,H)};z(v,T=>{t($)?T(D,!1):T(p)},!0)}c(r,l)};z(It,r=>{t(tt)&&t($)!==null?r($t):r(te,!1)})}e(Xt),c(Vt,Pt),Ue()}Ve(["click"]);export{rr as component};
