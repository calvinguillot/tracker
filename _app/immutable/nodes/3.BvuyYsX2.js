import{c as ze,a as p,f as x}from"../chunks/CQkslu6P.js";import{p as Ye,v as H,w as Ze,x as xt,y as m,k as V,a as $e,z as r,A as a,B as i,D as j,m as e,F as _t,G as Ue,o as ht,I as wt,J as ue}from"../chunks/CzM_H10X.js";import{d as et,s as w,e as zt}from"../chunks/C_B3uCM3.js";import{i as _}from"../chunks/DVrx_Uw8.js";import{e as ye,i as ke,s as tt}from"../chunks/CGOCP0_5.js";import{r as P,a as fe,b as yt,c as X,d as kt,e as A,f as We,g as Ct}from"../chunks/BlwmmlO5.js";import{s as Y}from"../chunks/BW5xtwr9.js";import{t as At,f as Ot}from"../chunks/BL1b-Wf3.js";import{b as Z,a as Xe,L as Dt}from"../chunks/DzRLBAai.js";import{P as St}from"../chunks/BC-pPyRz.js";import{A as Et,a as Tt}from"../chunks/DafGPu0x.js";var jt=x("<option> </option>"),Lt=x('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div><label for="name" class="mb-1 block text-sm font-medium text-zinc-400">Name</label> <input type="text" id="name" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="location" class="mb-1 block text-sm font-medium text-zinc-400">Location</label> <input type="text" id="location" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="type" class="mb-1 block text-sm font-medium text-zinc-400">Type</label> <select id="type" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Select Type</option><!></select></div> <div><label for="funds" class="mb-1 block text-sm font-medium text-zinc-400">Funds (€)</label> <input type="number" id="funds" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div><label for="deadline" class="mb-1 block text-sm font-medium text-zinc-400">Deadline</label> <input type="date" id="deadline" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="link" class="mb-1 block text-sm font-medium text-zinc-400">Link</label> <input type="url" id="link" placeholder="https://" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="idea" class="mb-1 block text-sm font-medium text-zinc-400">Idea</label> <textarea id="idea" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div class="flex gap-6"><div class="flex items-center"><input type="checkbox" id="applied" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"/> <label for="applied" class="ml-2 block text-sm font-medium text-zinc-300">Applied</label></div> <div class="flex items-center"><input type="checkbox" id="group" class="h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-yellow-500 focus:ring-yellow-500"/> <label for="group" class="ml-2 block text-sm font-medium text-zinc-300">Group</label></div></div> <div class="sticky bottom-0 mt-6 flex justify-end gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700">Cancel</button> <button type="submit" class="rounded-md px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm transition-all hover:brightness-110 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2">Save</button></div></form></div></div>');function Bt(Ce,c){Ye(c,!0);let o=H(Ze({name:"",location:"",type:null,funds:null,deadline:"",link:"",applied:!1,group:!1,idea:""}));xt(()=>{c.isOpen&&(c.entry?m(o,{name:c.entry.name||"",location:c.entry.location||"",type:c.entry.type,funds:c.entry.funds,deadline:c.entry.deadline?new Date(c.entry.deadline).toISOString().split("T")[0]:"",link:c.entry.link||"",applied:c.entry.applied||!1,group:c.entry.group||!1,idea:c.entry.idea||""},!0):m(o,{name:"",location:"",type:null,funds:null,deadline:"",link:"",applied:!1,group:!1,idea:""},!0))});function I(b){b.preventDefault(),c.onSave(e(o))}function F(b){b.target===b.currentTarget&&c.onClose()}function O(b){b.key==="Escape"&&c.onClose()}var L=ze(),Ae=V(L);{var h=b=>{var D=Lt();D.__click=F,D.__keydown=O;var pe=r(D),J=r(pe),$=r(J),N=r($,!0);a($);var Oe=i($,2);Oe.__click=function(...l){c.onClose?.apply(this,l)},a(J);var ee=i(J,2),te=r(ee),me=i(r(te),2);P(me),a(te);var ae=i(te,2),be=i(r(ae),2);P(be),a(ae);var re=i(ae,2),ie=r(re),S=i(r(ie),2),K=r(S);K.value=(K.__value=null)??"";var ge=i(K);ye(ge,17,()=>fe.settings.calls_types,ke,(l,y)=>{var k=jt(),we=r(k,!0);a(k);var R={};j(()=>{w(we,e(y).label),R!==(R=e(y).id)&&(k.value=(k.__value=e(y).id)??"")}),p(l,k)}),a(S),a(ie);var ne=i(ie,2),Q=i(r(ne),2);P(Q),a(ne),a(re);var se=i(re,2),xe=i(r(se),2);P(xe),a(se);var oe=i(se,2),_e=i(r(oe),2);P(_e),a(oe);var le=i(oe,2),t=i(r(le),2);_t(t),a(le);var n=i(le,2),s=r(n),v=r(s);P(v),Ue(2),a(s);var z=i(s,2),E=r(z);P(E),Ue(2),a(z),a(n);var q=i(n,2),he=r(q);he.__click=function(...l){c.onClose?.apply(this,l)};var De=i(he,2);a(q),a(ee),a(pe),a(D),j(l=>{w(N,c.entry?"Edit Art Call":"New Art Call"),tt(De,`background-color: ${l??""}`)},[()=>fe.getAccentHex()]),zt("submit",ee,I),Z(me,()=>e(o).name,l=>e(o).name=l),Z(be,()=>e(o).location,l=>e(o).location=l),yt(S,()=>e(o).type,l=>e(o).type=l),Z(Q,()=>e(o).funds,l=>e(o).funds=l),Z(xe,()=>e(o).deadline,l=>e(o).deadline=l),Z(_e,()=>e(o).link,l=>e(o).link=l),Z(t,()=>e(o).idea,l=>e(o).idea=l),Xe(v,()=>e(o).applied,l=>e(o).applied=l),Xe(E,()=>e(o).group,l=>e(o).group=l),At(3,D,()=>Ot,()=>({duration:fe.getTransitionDuration()})),p(b,D)};_(Ae,b=>{c.isOpen&&b(h)})}p(Ce,L),$e()}et(["click","keydown"]);var Mt=x('<button class="fixed right-8 bottom-8 z-50 rounded-full p-4 text-white shadow-lg transition-all hover:scale-105 hover:brightness-110" aria-label="New Art Call"><!></button>'),Ht=x('<div class="flex h-48 items-center justify-center"><!></div>'),It=x('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">Sign in to view art calls.</div>'),Ft=x('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">No art calls yet.</div>'),Nt=x('<div class="shrink-0 rounded-full border border-transparent bg-yellow-500/10 px-2 py-0.5 text-center text-[10px] font-medium text-yellow-500">Group</div>'),qt=x('<span class="text-base font-normal text-emerald-400">Applied</span>'),Gt=x("<span>Not applied</span>"),Pt=x('<div class="mt-1 border-t border-zinc-800/50 pt-3"><p> </p></div>'),Vt=x('<a target="_blank" rel="noreferrer">Visit Link &rarr;</a>'),Jt=x('<li><div class="flex flex-col gap-3"><div class="flex items-start justify-between gap-3"><div class="min-w-0 flex-1"><div class="flex flex-wrap items-center gap-2"><h3> </h3> <div> </div> <!></div> <div><span class="truncate"> </span> <span class="text-zinc-600">•</span> <span> </span></div></div> <div class="flex items-center self-center"><!></div></div> <!> <div class="mt-1 flex items-center justify-between gap-4 border-t border-zinc-800/50 pt-3"><div class="flex gap-6"><div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Funds</span> <span> </span></div> <div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Deadline</span> <span> </span></div></div> <div class="flex items-center gap-2"><!> <button class="rounded-md p-2 text-indigo-400 transition-colors hover:bg-zinc-800 hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="rounded-md p-2 text-red-400 transition-colors hover:bg-zinc-800 hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div></div></li>'),Kt=x('<button><span class="capitalize"> </span> <!></button>'),Qt=x('<div class="my-8 flex items-center gap-4"><div class="h-px flex-1 bg-zinc-800"></div> <span class="text-sm font-medium tracking-wider text-zinc-500 uppercase">Archived</span> <div class="h-px flex-1 bg-zinc-800"></div></div> <ul class="grid grid-cols-1 gap-3"></ul>',1),Rt=x('<div class="mb-4 flex flex-wrap items-center gap-4 text-sm"><span class="text-zinc-500">Sort by:</span> <!> <span class="ml-auto text-xs text-zinc-500"> </span></div> <ul class="grid grid-cols-1 gap-3"></ul> <!>',1),Ut=x('<!> <section class="space-y-6"><div class="flex flex-wrap items-center justify-between gap-4"><h2 class="hidden text-lg font-bold text-zinc-100 md:block">Art Calls</h2> <!></div> <!></section>',1);function sa(Ce,c){Ye(c,!0);let o=H(null),I=H(!0),F=H(Ze([])),O=H(!1),L=H(null),Ae=ue(()=>e(F).filter(t=>t.applied).length),h=H("deadline"),b=H("asc"),D=ue(()=>[...e(F)].sort((t,n)=>{const s=e(b)==="asc"?1:-1;if(e(h)==="name")return t.name.localeCompare(n.name)*s;if(e(h)==="funds")return((t.funds??0)-(n.funds??0))*s;if(e(h)==="deadline"){const v=t.deadline?new Date(t.deadline).getTime():s===1?1/0:-1/0,z=n.deadline?new Date(n.deadline).getTime():s===1?1/0:-1/0;return(v-z)*s}else if(e(h)==="created"){const v=new Date(t.created_at).getTime(),z=new Date(n.created_at).getTime();return(v-z)*s}else if(e(h)==="status"){const v=S(t.deadline).isOpen?0:1,z=S(n.deadline).isOpen?0:1;return(v-z)*s}return 0})),pe=ue(()=>e(D).filter(t=>S(t.deadline).isOpen&&!t.applied)),J=ue(()=>e(D).filter(t=>!S(t.deadline).isOpen||t.applied));function $(t){e(h)===t?m(b,e(b)==="asc"?"desc":"asc",!0):(m(h,t,!0),m(b,"asc"))}ht(()=>{Y.auth.getSession().then(({data:{session:n}})=>{m(o,n,!0),n?N():m(I,!1)});const{data:{subscription:t}}=Y.auth.onAuthStateChange((n,s)=>{m(o,s,!0),s?N():m(I,!1)});return()=>t.unsubscribe()});async function N(){m(I,!0),console.log("Fetching art calls...");const{data:t,error:n}=await Y.from("artCalls").select("id, created_at, name, location, type, funds, deadline, link, applied, group, idea").order("deadline",{ascending:!0});!n&&t?m(F,t,!0):n&&console.error("Error fetching art calls:",n),m(I,!1)}function Oe(){m(L,null),m(O,!0)}function ee(t){m(L,t,!0),m(O,!0)}async function te(t){if(!await Ct("Are you sure you want to delete this art call?","Delete Art Call",{confirmText:"Delete",isDestructive:!0}))return;const{error:s}=await Y.from("artCalls").delete().eq("id",t);s?(console.error("Error deleting art call:",s),X("Error deleting: "+s.message,"Error")):(X("Art call deleted successfully!","Success"),N())}async function me(t){const{id:n,...s}=t;if(e(L)){const{error:v}=await Y.from("artCalls").update(s).eq("id",e(L).id);v?(console.error("Error updating art call:",v),X("Error updating: "+v.message,"Error")):(X("Art call updated successfully!","Success"),m(O,!1),N())}else{const{error:v}=await Y.from("artCalls").insert(s);v?(console.error("Error saving art call:",v),X("Error saving: "+v.message,"Error")):(X("Art call saved successfully!","Success"),m(O,!1),N())}}const ae=t=>fe.getCallTypeLabel(t),be=t=>t===null?"—":`€${t}`,re=t=>t?new Date(t).toLocaleDateString():"—";function ie(t,n=50){return t?t.length>n?t.slice(0,n)+"...":t:""}function S(t){if(!t)return{label:"Open",color:"bg-emerald-500",bg:"bg-emerald-500/10",text:"text-emerald-400",isOpen:!0};const n=new Date(t),s=new Date;return s.setHours(0,0,0,0),n.setHours(0,0,0,0),n>=s?{label:"Open",color:"bg-emerald-500",bg:"bg-emerald-500/10",text:"text-emerald-400",isOpen:!0}:{label:"Closed",color:"bg-red-500",bg:"bg-red-500/10",text:"text-red-400",isOpen:!1}}var K=Ut(),ge=V(K);Bt(ge,{get isOpen(){return e(O)},get entry(){return e(L)},onClose:()=>m(O,!1),onSave:me});var ne=i(ge,2),Q=r(ne),se=i(r(Q),2);{var xe=t=>{var n=Mt();n.__click=Oe;var s=r(n);St(s,{class:"h-6 w-6"}),a(n),j(v=>tt(n,`background-color: ${v??""}`),[()=>fe.getAccentHex()]),p(t,n)};_(se,t=>{e(o)&&!e(O)&&!kt.isOpen&&t(xe)})}a(Q);var oe=i(Q,2);{var _e=t=>{var n=Ht(),s=r(n);Dt(s,{class:"h-6 w-6 animate-spin text-indigo-400"}),a(n),p(t,n)},le=t=>{var n=ze(),s=V(n);{var v=E=>{var q=It();p(E,q)},z=E=>{var q=ze(),he=V(q);{var De=y=>{var k=Ft();p(y,k)},l=y=>{const k=(T,d=wt)=>{const u=ue(()=>S(d().deadline));var C=Jt(),U=r(C),de=r(U),ce=r(de),G=r(ce),B=r(G),Ee=r(B,!0);a(B);var W=i(B,2),Te=r(W,!0);a(W);var M=i(W,2);{var nt=f=>{var g=Nt();p(f,g)};_(M,f=>{d().group&&f(nt)})}a(G);var je=i(G,2),Le=r(je),st=r(Le,!0);a(Le);var qe=i(Le,4),ot=r(qe,!0);a(qe),a(je),a(ce);var Ge=i(ce,2),lt=r(Ge);{var dt=f=>{var g=qt();p(f,g)},ct=f=>{var g=Gt();j(()=>A(g,1,`text-base font-normal ${e(u).isOpen?"text-zinc-400":"text-zinc-500"}`)),p(f,g)};_(lt,f=>{d().applied?f(dt):f(ct,!1)})}a(Ge),a(de);var Pe=i(de,2);{var vt=f=>{var g=Pt(),ve=r(g),bt=r(ve,!0);a(ve),a(g),j(gt=>{A(ve,1,`text-sm ${e(u).isOpen&&!d().applied?"text-zinc-300":"text-zinc-500"}`),w(bt,gt)},[()=>ie(d().idea)]),p(f,g)};_(Pe,f=>{d().idea&&f(vt)})}var Ve=i(Pe,2),Be=r(Ve),Me=r(Be),He=i(r(Me),2),ut=r(He,!0);a(He),a(Me);var Je=i(Me,2),Ie=i(r(Je),2),ft=r(Ie,!0);a(Ie),a(Je),a(Be);var Ke=i(Be,2),Qe=r(Ke);{var pt=f=>{var g=Vt();j(()=>{A(g,1,`rounded-md px-3 py-1.5 text-xs font-medium transition-colors ${e(u).isOpen?"bg-indigo-500/10 text-indigo-400 hover:bg-indigo-500/20 hover:text-indigo-300":"bg-zinc-800/60 text-zinc-500 hover:bg-zinc-800"}`),We(g,"href",d().link)}),p(f,g)};_(Qe,f=>{d().link&&f(pt)})}var Re=i(Qe,2);Re.__click=()=>ee(d());var mt=i(Re,2);mt.__click=()=>te(d().id),a(Ke),a(Ve),a(U),a(C),j((f,g,ve)=>{A(C,1,`group relative flex flex-col justify-between rounded-lg border p-4 transition-all ${e(u).isOpen?"border-zinc-800 bg-zinc-900/60 hover:border-zinc-700 hover:bg-zinc-900/80":"border-zinc-800/60 bg-zinc-900/30 hover:border-zinc-700/60 hover:bg-zinc-900/40"}`),A(B,1,`truncate text-base font-bold ${e(u).isOpen?"text-zinc-100":"text-zinc-500"}`),We(B,"title",d().name),w(Ee,d().name),A(W,1,`shrink-0 rounded-full border px-2 py-0.5 text-[10px] font-medium ${e(u).bg} ${e(u).text} border-transparent text-center`),w(Te,e(u).label),A(je,1,`mt-1 flex flex-wrap items-center gap-x-2 gap-y-1 text-xs ${e(u).isOpen?"text-zinc-400":"text-zinc-500"}`),w(st,d().location),w(ot,f),A(He,1,`text-sm font-medium ${e(u).isOpen?"text-emerald-400":"text-zinc-500"}`),w(ut,g),A(Ie,1,`text-sm ${e(u).isOpen?"text-zinc-300":"text-zinc-500"}`),w(ft,ve)},[()=>ae(d().type),()=>be(d().funds),()=>re(d().deadline)]),p(T,C)};var we=Rt(),R=V(we),Fe=i(r(R),2);ye(Fe,16,()=>["name","funds","deadline","created","status"],ke,(T,d)=>{var u=Kt();u.__click=()=>$(d);var C=r(u),U=r(C,!0);a(C);var de=i(C,2);{var ce=G=>{var B=ze(),Ee=V(B);{var W=M=>{Et(M,{class:"h-3 w-3"})},Te=M=>{Tt(M,{class:"h-3 w-3"})};_(Ee,M=>{e(b)==="asc"?M(W):M(Te,!1)})}p(G,B)};_(de,G=>{e(h)===d&&G(ce)})}a(u),j(()=>{A(u,1,`flex items-center gap-1 rounded-md px-3 py-1.5 transition-colors ${e(h)===d?"bg-indigo-500/20 text-indigo-300":"bg-zinc-800/50 text-zinc-400 hover:bg-zinc-800"}`),w(U,d)}),p(T,u)});var Ne=i(Fe,2),at=r(Ne);a(Ne),a(R);var Se=i(R,2);ye(Se,21,()=>e(pe),ke,(T,d)=>{k(T,()=>e(d))}),a(Se);var rt=i(Se,2);{var it=T=>{var d=Qt(),u=i(V(d),2);ye(u,21,()=>e(J),ke,(C,U)=>{k(C,()=>e(U))}),a(u),p(T,d)};_(rt,T=>{e(J).length>0&&T(it)})}j(()=>w(at,`Applied ${e(Ae)??""} / ${e(F).length??""}`)),p(y,we)};_(he,y=>{e(F).length===0?y(De):y(l,!1)},!0)}p(E,q)};_(s,E=>{e(o)?E(z,!1):E(v)},!0)}p(t,n)};_(oe,t=>{e(I)&&e(o)!==null?t(_e):t(le,!1)})}a(ne),p(Ce,K),$e()}et(["click"]);export{sa as component};
