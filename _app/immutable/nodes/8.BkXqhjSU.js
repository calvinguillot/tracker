import{c as Yt,a as c,f as u}from"../chunks/Blua9Muq.js";import{p as Fe,v as nt,w as Oe,x as We,y,k as it,a as He,z as r,A as e,B as i,F as Ie,D as E,m as t,G as Re,o as Ye,I as X,J as je}from"../chunks/BWAAnFQE.js";import{d as Ue,s as H,e as me}from"../chunks/B5UJqv3b.js";import{i as k}from"../chunks/hg7ngHtp.js";import{e as st,i as ot,s as lt,c as Ne}from"../chunks/wCmp37z_.js";import{r as ht,a as ct,b as Ee,t as Ve,f as j,c as Je,d as It,e as Ke,L as Qe,g as Xe}from"../chunks/FJNRq2ku.js";import{s as Rt}from"../chunks/BW5xtwr9.js";import{b as ft,P as qe}from"../chunks/DWGvfTVC.js";import{f as Ze}from"../chunks/BsCRBkET.js";import{T as Pe}from"../chunks/CEwrSky2.js";import{G as $e,S as tr,E as er,C as rr,L as ar,a as ir}from"../chunks/RUEBC1Bd.js";import{S as nr}from"../chunks/s9r3oyya.js";import{L as sr}from"../chunks/CEAcGbZi.js";import{A as or}from"../chunks/C6BYduXv.js";import{A as lr}from"../chunks/f6ai2VFN.js";var cr=u("<option> </option>"),dr=u("<div></div>"),vr=u('<div class="flex items-center gap-2"><button type="button" class="text-zinc-400 hover:text-zinc-200"><!></button> <input type="text" placeholder="Item description..."/> <div class="flex items-center gap-1"><div role="button" tabindex="0" class="cursor-grab p-1 text-zinc-600 hover:text-zinc-400 active:cursor-grabbing" draggable="true"><!></div> <button type="button" class="p-1 text-zinc-500 hover:text-red-400"><!></button></div></div>'),ur=u('<div class="rounded-lg border border-zinc-800 bg-zinc-800/30 p-4"><div class="mb-3 flex items-center justify-between gap-2"><input type="text" placeholder="Checklist Title" class="w-full bg-transparent text-sm font-bold text-zinc-200 placeholder-zinc-600 focus:outline-none"/> <button type="button" class="text-zinc-600 hover:text-red-400" title="Remove Checklist"><!></button></div> <div class="space-y-2"><!> <button type="button" class="mt-2 flex items-center gap-1 text-xs text-zinc-500 hover:text-zinc-300"><!> Add Item</button></div></div>'),fr=u('<div class="space-y-6"></div>'),gr=u('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No checklists yet</p></div>'),mr=u('<div class="flex items-center gap-2"><div class="grid flex-1 grid-cols-1 gap-2 md:grid-cols-2"><input type="text" placeholder="Label (optional)" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/> <input type="text" placeholder="URL" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <button type="button" class="p-2 text-zinc-400 hover:text-indigo-400" title="Open Link"><!></button> <button type="button" class="p-2 text-zinc-400 hover:text-red-400" title="Remove Link"><!></button></div>'),br=u('<div class="space-y-2"></div>'),_r=u('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No links yet</p></div>'),pr=u('<button type="button" class="rounded-md bg-red-500/10 px-3.5 py-2.5 text-sm font-semibold text-red-400 shadow-sm ring-1 ring-red-500/20 transition-colors ring-inset hover:bg-red-500/20">Delete</button>'),xr=u('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div><label for="name" class="mb-1 block text-sm font-medium text-zinc-400">Name</label> <input type="text" id="name" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="description" class="mb-1 block text-sm font-medium text-zinc-400">Description</label> <textarea id="description" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="status" class="mb-1 block text-sm font-medium text-zinc-400">Status</label> <select id="status" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Not Started</option><option>In Progress</option><option>Postponed</option><option>Completed</option><option>Cancelled</option></select></div> <div><label for="funds" class="mb-1 block text-sm font-medium text-zinc-400">Funds (€)</label> <input type="number" id="funds" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div><label for="type" class="mb-1 block text-sm font-medium text-zinc-400">Type</label> <div class="flex items-center gap-2"><select id="type" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Select Type</option><!></select> <!></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="start_at" class="mb-1 block text-sm font-medium text-zinc-400">Start Date</label> <input type="date" id="start_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div><label for="end_at" class="mb-1 block text-sm font-medium text-zinc-400">End Date</label> <input type="date" id="end_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Checklists</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Checklist</button></div> <!></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Links</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Link</button></div> <!></div> <div class="sticky bottom-0 mt-6 flex justify-between gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><div><!></div> <div class="flex gap-3"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700">Cancel</button> <button type="submit" class="rounded-md px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm transition-all hover:brightness-110 focus-visible:outline-2 focus-visible:outline-offset-2">Save</button></div></div></form></div></div>');function hr(be,g){Fe(g,!0);let n=nt(Oe({name:"",description:"",funds:null,status:0,type:null,start_at:"",end_at:"",colour:"bg-indigo-600",checklist:[],links:[]})),B=nt(null);We(()=>{g.isOpen&&(g.entry?y(n,{name:g.entry.name||"",description:g.entry.description||"",funds:g.entry.funds,status:g.entry.status??0,type:g.entry.type??null,start_at:g.entry.start_at?new Date(g.entry.start_at).toISOString().split("T")[0]:"",end_at:g.entry.end_at?new Date(g.entry.end_at).toISOString().split("T")[0]:"",colour:g.entry.colour||"bg-indigo-600",checklist:Array.isArray(g.entry.checklist)?g.entry.checklist:[],links:Array.isArray(g.entry.links)?g.entry.links:[]},!0):y(n,{name:"",description:"",funds:null,status:0,type:null,start_at:"",end_at:"",colour:"bg-indigo-600",checklist:[],links:[]},!0))});function zt(){if(t(n).type){const d=ct.getProjectType(t(n).type);d&&d.color&&(t(n).colour=d.color)}}function wt(d){d.preventDefault(),g.onSave(t(n))}function Z(d){d.target===d.currentTarget&&g.onClose()}function yt(d){d.key==="Escape"&&g.onClose()}function kt(){t(n).checklist=[...t(n).checklist,{id:crypto.randomUUID(),title:"New Checklist",items:[]}]}function Dt(d){t(n).checklist=t(n).checklist.filter((m,C)=>C!==d)}function Ot(d){const m=t(n).checklist[d];m.items=[...m.items,{text:"",completed:!1}],t(n).checklist[d]=m}function ce(d,m){const C=t(n).checklist[d];C.items=C.items.filter((Y,$)=>$!==m),t(n).checklist[d]=C}function Ht(d,m){const C=t(n).checklist[d];C.items[m].completed=!C.items[m].completed,t(n).checklist[d]=C}function Vt(d,m,C){y(B,{listIndex:m,itemIndex:C},!0),d.dataTransfer&&(d.dataTransfer.effectAllowed="move",d.dataTransfer.dropEffect="move")}function _e(d,m,C){if(d.preventDefault(),!t(B)||t(B).listIndex!==m||t(B).itemIndex===C)return;const Y=t(n).checklist[m],$=t(B).itemIndex,Ut=C,Jt=Y.items[$],tt=[...Y.items];tt.splice($,1),tt.splice(Ut,0,Jt),Y.items=tt,t(n).checklist[m]=Y,t(B).itemIndex=Ut}function de(){y(B,null)}function pe(){t(n).links=[...t(n).links,{url:"",label:""}]}function U(d){t(n).links=t(n).links.filter((m,C)=>C!==d)}function xe(d){if(!d)return;let m=d;/^https?:\/\//i.test(m)||(m="https://"+m),window.open(m,"_blank","noopener,noreferrer")}var gt=Yt(),he=it(gt);{var ze=d=>{var m=xr();m.__click=Z,m.__keydown=yt;var C=r(m),Y=r(C),$=r(Y),Ut=r($,!0);e($);var Jt=i($,2);Jt.__click=function(...o){g.onClose?.apply(this,o)},e(Y);var tt=i(Y,2),qt=r(tt),Kt=i(r(qt),2);ht(Kt),e(qt);var Ct=i(qt,2),ve=i(r(Ct),2);Ie(ve),e(Ct);var Qt=i(Ct,2),Xt=r(Qt),Zt=i(r(Xt),2),$t=r(Zt);$t.value=$t.__value=0;var a=i($t);a.value=a.__value=1;var l=i(a);l.value=l.__value=2;var f=i(l);f.value=f.__value=3;var b=i(f);b.value=b.__value=4,e(Zt),e(Xt);var D=i(Xt,2),N=i(r(D),2);ht(N),e(D),e(Qt);var F=i(Qt,2),V=i(r(F),2),A=r(V);A.__change=zt;var te=r(A);te.value=(te.__value=null)??"";var mt=i(te);st(mt,17,()=>ct.settings.project_types,ot,(o,s)=>{var v=cr(),z=r(v,!0);e(v);var _={};E(()=>{H(z,t(s).label),_!==(_=t(s).id)&&(v.value=(v.__value=t(s).id)??"")}),c(o,v)}),e(A);var Bt=i(A,2);{var ee=o=>{var s=dr();let v;E(z=>{v=j(s,1,"h-8 w-8 shrink-0 rounded-full border border-zinc-600 shadow-sm",null,v,{"bg-zinc-500":t(n).colour==="bg-zinc-500","bg-red-600":t(n).colour==="bg-red-600","bg-orange-600":t(n).colour==="bg-orange-600","bg-amber-500":t(n).colour==="bg-amber-500","bg-green-600":t(n).colour==="bg-green-600","bg-emerald-500":t(n).colour==="bg-emerald-500","bg-teal-500":t(n).colour==="bg-teal-500","bg-cyan-500":t(n).colour==="bg-cyan-500","bg-blue-600":t(n).colour==="bg-blue-600","bg-indigo-600":t(n).colour==="bg-indigo-600","bg-violet-600":t(n).colour==="bg-violet-600","bg-purple-600":t(n).colour==="bg-purple-600","bg-fuchsia-600":t(n).colour==="bg-fuchsia-600","bg-pink-600":t(n).colour==="bg-pink-600","bg-rose-600":t(n).colour==="bg-rose-600"}),lt(s,z)},[()=>t(n).colour.startsWith("#")?`background-color: ${t(n).colour}`:""]),c(o,s)};k(Bt,o=>{t(n).colour&&o(ee)})}e(V),e(F);var Tt=i(F,2),Gt=r(Tt),St=i(r(Gt),2);ht(St),e(Gt);var Wt=i(Gt,2),ue=i(r(Wt),2);ht(ue),e(Wt),e(Tt);var re=i(Tt,2),ae=r(re),ie=i(r(ae),2);ie.__click=kt,e(ae);var ne=i(ae,2);{var we=o=>{var s=fr();st(s,21,()=>t(n).checklist,ot,(v,z,_)=>{var p=ur(),x=r(p),P=r(x);ht(P);var M=i(P,2);M.__click=()=>Dt(_);var q=r(M);Pe(q,{class:"h-4 w-4"}),e(M),e(x);var Q=i(x,2),et=r(Q);st(et,17,()=>t(z).items,ot,(Lt,Pt,Et)=>{var Mt=vr(),_t=r(Mt);_t.__click=()=>Ht(_,Et);var Ce=r(_t);{var Te=w=>{nr(w,{class:"h-5 w-5 text-emerald-500"})},Se=w=>{tr(w,{class:"h-5 w-5"})};k(Ce,w=>{t(Pt).completed?w(Te):w(Se,!1)})}e(_t);var h=i(_t,2);ht(h);var L=i(h,2),S=r(L),I=r(S);$e(I,{class:"h-4 w-4"}),e(S);var O=i(S,2);O.__click=()=>ce(_,Et);var R=r(O);Pe(R,{class:"h-3 w-3"}),e(O),e(L),e(Mt),E(()=>j(h,1,`w-full rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 ${t(Pt).completed?"text-zinc-500 line-through":""}`)),ft(h,()=>t(Pt).text,w=>t(Pt).text=w),me("dragstart",S,w=>Vt(w,_,Et)),me("dragover",S,w=>_e(w,_,Et)),me("dragend",S,de),c(Lt,Mt)});var vt=i(et,2);vt.__click=()=>Ot(_);var ut=r(vt);qe(ut,{class:"h-3 w-3"}),Re(),e(vt),e(Q),e(p),ft(P,()=>t(z).title,Lt=>t(z).title=Lt),c(v,p)}),e(s),c(o,s)},fe=o=>{var s=gr();c(o,s)};k(ne,o=>{t(n).checklist&&t(n).checklist.length>0?o(we):o(fe,!1)})}e(re);var dt=i(re,2),se=r(dt),At=i(r(se),2);At.__click=pe,e(se);var ye=i(se,2);{var ke=o=>{var s=br();st(s,21,()=>t(n).links,ot,(v,z,_)=>{var p=mr(),x=r(p),P=r(x);ht(P);var M=i(P,2);ht(M),e(x);var q=i(x,2);q.__click=()=>xe(t(z).url);var Q=r(q);er(Q,{class:"h-4 w-4"}),e(q);var et=i(q,2);et.__click=()=>U(_);var vt=r(et);Pe(vt,{class:"h-4 w-4"}),e(et),e(p),E(()=>q.disabled=!t(z).url),ft(P,()=>t(z).label,ut=>t(z).label=ut),ft(M,()=>t(z).url,ut=>t(z).url=ut),c(v,p)}),e(s),c(o,s)},De=o=>{var s=_r();c(o,s)};k(ye,o=>{t(n).links&&t(n).links.length>0?o(ke):o(De,!1)})}e(dt);var ge=i(dt,2),T=r(ge),G=r(T);{var W=o=>{var s=pr();s.__click=()=>g.onDelete(g.entry.id),c(o,s)};k(G,o=>{g.entry&&g.onDelete&&o(W)})}e(T);var J=i(T,2),K=r(J);K.__click=function(...o){g.onClose?.apply(this,o)};var bt=i(K,2);e(J),e(ge),e(tt),e(C),e(m),E((o,s,v)=>{H(Ut,g.entry?"Edit Project":"New Project"),lt(ie,`color: ${o??""}`),lt(At,`color: ${s??""}`),lt(bt,`background-color: ${v??""}`)},[()=>ct.getAccentLightHex(),()=>ct.getAccentLightHex(),()=>ct.getAccentHex()]),me("submit",tt,wt),ft(Kt,()=>t(n).name,o=>t(n).name=o),ft(ve,()=>t(n).description,o=>t(n).description=o),Ee(Zt,()=>t(n).status,o=>t(n).status=o),ft(N,()=>t(n).funds,o=>t(n).funds=o),Ee(A,()=>t(n).type,o=>t(n).type=o),ft(St,()=>t(n).start_at,o=>t(n).start_at=o),ft(ue,()=>t(n).end_at,o=>t(n).end_at=o),Ve(3,m,()=>Ze,()=>({duration:ct.getTransitionDuration()})),c(d,m)};k(he,d=>{g.isOpen&&d(ze)})}c(be,gt),He()}Ue(["click","keydown","change"]);var zr=u('<button class="fixed right-8 bottom-24 z-50 rounded-full p-4 shadow-lg/30 drop-shadow-lg backdrop-blur-md transition-all hover:scale-105 hover:brightness-110 md:right-16 md:bottom-16" aria-label="New Project"><!></button>'),wr=u('<div class="flex h-48 items-center justify-center"><!></div>'),yr=u('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">Sign in to view projects.</div>'),kr=u('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">No projects yet.</div>'),Dr=u("<option> </option>"),Cr=u("<p> </p>"),Tr=u('<div class="flex items-center gap-2 text-xs text-zinc-500"><span> </span></div>'),Sr=u('<div class="flex items-center gap-1"><!> <span> </span></div>'),Ar=u('<div class="flex items-center gap-1"><!> <span> </span></div>'),Lr=u('<div class="flex items-center gap-3 text-xs text-zinc-500"><!> <!></div>'),Pr=u('<div class="flex w-full shrink-0 flex-col gap-2 md:w-56"><div class="flex justify-end"><span> </span></div> <div class="flex items-center justify-between"><span>Progress</span> <span> </span></div> <div class="h-2 w-full overflow-hidden rounded-full bg-zinc-800"><div></div></div></div>'),Er=u('<div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Dates</span> <span> </span></div>'),Mr=u('<button type="button"><div class="flex flex-col gap-4 md:flex-row md:items-start md:justify-between"><div class="flex min-w-0 flex-1 flex-col gap-2"><h3> </h3> <!> <!></div> <!></div> <div class="flex flex-wrap items-end gap-4 border-t border-zinc-800/50 pt-3"><div class="flex items-center gap-6"><div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Funds</span> <span> </span></div> <!></div></div></button>'),jr=u('<div class="my-8 flex items-center gap-4"><div class="h-px flex-1 bg-zinc-800"></div> <span class="text-sm font-medium tracking-wider text-zinc-500 uppercase">Archived</span> <div class="h-px flex-1 bg-zinc-800"></div></div> <div class="grid grid-cols-1 gap-4"></div>',1),Nr=u('<div class="grid grid-cols-1 gap-4"></div> <!>',1),Fr=u('<div class="absolute top-8 bottom-0 border-l border-dashed border-zinc-800"></div>'),Or=u('<div class="absolute -translate-x-1/2 transform text-center"> </div>'),Hr=u('<div class="group relative h-10 w-full rounded transition-colors hover:bg-zinc-800/30"><div class="absolute top-1 flex flex-col gap-1"><div></div> <span class="px-0.5 text-[10px] font-medium whitespace-nowrap text-zinc-400"> </span></div></div>'),Ur=u('<div class="p-4 text-center text-zinc-500">No projects with dates to display.</div>'),qr=u('<div class="w-full overflow-x-auto rounded-lg border border-zinc-800 bg-zinc-900/60 p-4"><div class="relative min-w-[800px]"><div class="pointer-events-none absolute inset-0"></div> <div class="relative z-10 mb-4 flex border-b border-zinc-800 pb-2 text-xs font-medium text-zinc-500"><div class="relative h-6 flex-1"></div></div> <div class="space-y-3"><!> <!></div></div></div>'),Br=u('<div class="mb-4 flex flex-wrap items-center justify-between gap-4 text-sm"><div class="flex flex-wrap items-center gap-4"><div class="flex items-center gap-2"><select class="cursor-pointer rounded-md border border-zinc-700 bg-zinc-800 px-3 py-1.5 text-sm text-zinc-100 shadow-sm outline-none focus:border-indigo-500 focus:ring-indigo-500"></select> <button class="flex items-center justify-center rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-zinc-400 shadow-sm transition-colors hover:bg-zinc-700 hover:text-zinc-100" aria-label="Toggle sort order"><!></button></div></div> <div class="flex items-center gap-4"><span class="text-xs text-zinc-500"> </span> <div class="flex items-center rounded-lg bg-zinc-800/50 p-1"><button aria-label="List View"><!></button> <button aria-label="Gantt View"><!></button></div></div></div> <!>',1),Gr=u('<!> <section><div class="flex flex-wrap items-center justify-between gap-4"><!></div> <!></section>',1);function ia(be,g){Fe(g,!0);const n={0:"Not Started",1:"In Progress",2:"Postponed",3:"Completed",4:"Cancelled"};let B=nt(null),zt=nt(!0),wt=nt(Oe([])),Z=nt(!1),yt=nt(null),kt=nt("list"),Dt=nt("date"),Ot=nt("desc");function ce(a){if(!a)return{total:0,completed:0};if(Array.isArray(a)&&a.length>0&&"items"in a[0]){let l=0,f=0;return a.forEach(b=>{b.items&&(l+=b.items.length,f+=b.items.filter(D=>D.completed).length)}),{total:l,completed:f}}return Array.isArray(a)&&a.length>0?{total:a.length,completed:a.filter(l=>l.completed).length}:{total:0,completed:0}}function Ht(a){const l=ce(a);return l.total===0?0:Math.round(l.completed/l.total*100)}let Vt=X(()=>[...t(wt)].sort((a,l)=>{const f=t(Ot)==="asc"?1:-1;if(t(Dt)==="name")return a.name.localeCompare(l.name)*f;if(t(Dt)==="date"){const b=new Date(a.created_at).getTime(),D=new Date(l.created_at).getTime();return(b-D)*f}else if(t(Dt)==="progress"){const b=Ht(a.checklist),D=Ht(l.checklist);return(b-D)*f}return 0})),_e=X(()=>t(Vt).filter(a=>a.status!==3&&a.status!==4)),de=X(()=>t(Vt).filter(a=>a.status===3||a.status===4)),pe=X(()=>t(wt).filter(a=>a.status===3).length),U=X(()=>{const a=t(Vt).filter(A=>A.start_at&&A.end_at);if(a.length===0){const A=new Date;return{start:new Date(A.getFullYear(),0,1),end:new Date(A.getFullYear(),11,31),projects:[],months:[]}}const l=a.flatMap(A=>[new Date(A.start_at),new Date(A.end_at)]),f=new Date(Math.min(...l.map(A=>A.getTime()))),b=new Date(Math.max(...l.map(A=>A.getTime()))),D=new Date(f);D.setDate(D.getDate()-7);const N=new Date(b);N.setDate(N.getDate()+7);const F=[],V=new Date(D);for(V.setDate(1);V<=N;)F.push(new Date(V)),V.setMonth(V.getMonth()+1);return F.length===0&&F.push(new Date(D.getFullYear(),D.getMonth(),1)),{start:D,end:N,projects:a,months:F}});function xe(a,l,f){if(!a.start_at||!a.end_at)return"";const b=f.getTime()-l.getTime(),D=new Date(a.start_at).getTime(),N=new Date(a.end_at).getTime(),F=(D-l.getTime())/b*100,V=(N-D)/b*100;return`left: ${Math.max(0,F)}%; width: ${Math.min(100,V)}%;`}Ye(()=>{Rt.auth.getSession().then(({data:{session:l}})=>{y(B,l,!0),l?gt():y(zt,!1)});const{data:{subscription:a}}=Rt.auth.onAuthStateChange((l,f)=>{y(B,f,!0),f?gt():y(zt,!1)});return()=>a.unsubscribe()});async function gt(){y(zt,!0);const{data:a,error:l}=await Rt.from("projects").select("*").order("created_at",{ascending:!1});!l&&a?y(wt,a,!0):l&&console.error("Error fetching projects:",l),y(zt,!1)}function he(){y(yt,null),y(Z,!0)}function ze(a){y(yt,a,!0),y(Z,!0)}async function d(a){if(!await Je("Are you sure you want to delete this project?","Delete Project",{confirmText:"Delete",isDestructive:!0}))return;const{error:f}=await Rt.from("projects").delete().eq("id",a);f?(console.error("Error deleting project:",f),It("Error deleting: "+f.message,"Error")):(It("Project deleted successfully!","Success"),y(Z,!1),gt())}async function m(a){const{id:l,...f}=a;if(f.percentage=Ht(f.checklist),t(yt)){const{error:b}=await Rt.from("projects").update(f).eq("id",t(yt).id);b?(console.error("Error updating project:",b),It("Error updating: "+b.message,"Error")):(It("Project updated successfully!","Success"),y(Z,!1),gt())}else{const{error:b}=await Rt.from("projects").insert(f);b?(console.error("Error saving project:",b),It("Error saving: "+b.message,"Error")):(It("Project saved successfully!","Success"),y(Z,!1),gt())}}const C=a=>a===null?"—":`€${a}`,Y=a=>a?new Date(a).toLocaleDateString():"—";function $(a,l=50){return a?a.length>l?a.slice(0,l)+"...":a:""}const Ut=a=>n[a]??"Unknown",Jt=a=>{switch(a){case 1:return"bg-amber-500/10 text-amber-400";case 2:return"bg-purple-500/10 text-purple-400";case 3:return"bg-emerald-500/10 text-emerald-400";case 4:return"bg-red-500/10 text-red-400";default:return"bg-zinc-800 text-zinc-400"}};var tt=Gr(),qt=it(tt);hr(qt,{get isOpen(){return t(Z)},get entry(){return t(yt)},onClose:()=>y(Z,!1),onSave:m,onDelete:d});var Kt=i(qt,2),Ct=r(Kt),ve=r(Ct);{var Qt=a=>{var l=zr();l.__click=he;var f=r(l);qe(f,{class:"h-6 w-6 text-(--accent-color)"}),e(l),E((b,D)=>lt(l,`--accent-color: ${b??""}; background-color: ${D??""}/50`),[()=>ct.getAccentLightHex(),()=>ct.getAccentHex()]),c(a,l)};k(ve,a=>{t(B)&&!t(Z)&&!Ke.isOpen&&a(Qt)})}e(Ct);var Xt=i(Ct,2);{var Zt=a=>{var l=wr(),f=r(l);{let b=X(()=>ct.getAccentHex());Qe(f,{class:"h-6 w-6 animate-spin",get style(){return`color: ${t(b)??""}`}})}e(l),c(a,l)},$t=a=>{var l=Yt(),f=it(l);{var b=N=>{var F=yr();c(N,F)},D=N=>{var F=Yt(),V=it(F);{var A=mt=>{var Bt=kr();c(mt,Bt)},te=mt=>{var Bt=Br(),ee=it(Bt),Tt=r(ee),Gt=r(Tt),St=r(Gt);st(St,20,()=>["name","date","progress"],ot,(T,G)=>{var W=Dr(),J=r(W,!0);e(W);var K={};E(bt=>{H(J,bt),K!==(K=G)&&(W.value=(W.__value=G)??"")},[()=>G.charAt(0).toUpperCase()+G.slice(1)]),c(T,W)}),e(St);var Wt=i(St,2);Wt.__click=()=>y(Ot,t(Ot)==="asc"?"desc":"asc",!0);var ue=r(Wt);{var re=T=>{or(T,{class:"h-4 w-4"})},ae=T=>{lr(T,{class:"h-4 w-4"})};k(ue,T=>{t(Ot)==="asc"?T(re):T(ae,!1)})}e(Wt),e(Gt),e(Tt);var ie=i(Tt,2),ne=r(ie),we=r(ne);e(ne);var fe=i(ne,2),dt=r(fe);dt.__click=()=>y(kt,"list");var se=r(dt);sr(se,{class:"h-4 w-4"}),e(dt);var At=i(dt,2);At.__click=()=>y(kt,"gantt");var ye=r(At);rr(ye,{class:"h-4 w-4"}),e(At),e(fe),e(ie),e(ee);var ke=i(ee,2);{var De=T=>{const G=(o,s=je,v=je)=>{var z=Mr();z.__click=()=>ze(s());var _=r(z),p=r(_),x=r(p),P=r(x,!0);e(x);var M=i(x,2);{var q=h=>{var L=Cr(),S=r(L,!0);e(L),E(I=>{j(L,1,`text-sm ${v()?"text-zinc-600":"text-zinc-400"}`),H(S,I)},[()=>$(s().description)]),c(h,L)};k(M,h=>{s().description&&h(q)})}var Q=i(M,2);{var et=h=>{const L=X(()=>ct.getProjectType(s().type));var S=Yt(),I=it(S);{var O=R=>{var w=Tr(),pt=r(w),jt=r(pt,!0);e(pt),e(w),E(()=>{j(pt,1,`font-medium ${v()?"text-zinc-600":"text-zinc-400"}`),H(jt,t(L).label)}),c(R,w)};k(I,R=>{t(L)&&R(O)})}c(h,S)},vt=h=>{var L=Yt(),S=it(L);{var I=O=>{var R=Lr(),w=r(R);{var pt=rt=>{const at=X(()=>ce(s().checklist));var xt=Yt(),Nt=it(xt);{var oe=Ft=>{var le=Sr(),Me=r(le);{let Ge=X(()=>`h-3.5 w-3.5 ${v()?"text-zinc-600":"text-zinc-400"}`);ir(Me,{get class(){return t(Ge)}})}var Le=i(Me,2),Be=r(Le);e(Le),e(le),E(()=>{j(Le,1,Ne(v()?"text-zinc-600":"text-zinc-500")),H(Be,`${t(at).completed??""}/${t(at).total??""}`)}),c(Ft,le)};k(Nt,Ft=>{t(at).total>0&&Ft(oe)})}c(rt,xt)};k(w,rt=>{s().checklist&&rt(pt)})}var jt=i(w,2);{var Ae=rt=>{var at=Ar(),xt=r(at);{let Ft=X(()=>`h-3.5 w-3.5 ${v()?"text-zinc-600":"text-zinc-400"}`);ar(xt,{get class(){return t(Ft)}})}var Nt=i(xt,2),oe=r(Nt,!0);e(Nt),e(at),E(()=>{j(Nt,1,Ne(v()?"text-zinc-600":"text-zinc-500")),H(oe,s().links.length)}),c(rt,at)};k(jt,rt=>{s().links&&s().links.length>0&&rt(Ae)})}e(R),c(O,R)};k(S,O=>{(s().checklist||s().links&&s().links.length>0)&&O(I)},!0)}c(h,L)};k(Q,h=>{s().type?h(et):h(vt,!1)})}e(p);var ut=i(p,2);{var Lt=h=>{const L=X(()=>Ht(s().checklist));var S=Pr(),I=r(S),O=r(I),R=r(O,!0);e(O),e(I);var w=i(I,2),pt=r(w),jt=i(pt,2),Ae=r(jt);e(jt),e(w);var rt=i(w,2),at=r(rt);let xt;e(rt),e(S),E((Nt,oe,Ft,le)=>{j(O,1,Nt),H(R,oe),j(pt,1,`text-xs font-medium ${v()?"text-zinc-600":"text-zinc-400"}`),j(jt,1,`text-xs ${v()?"text-zinc-600":"text-zinc-500"}`),H(Ae,`${t(L)??""}%`),j(at,1,`h-full rounded-full transition-all duration-500 ${Ft??""}`),xt=lt(at,"",xt,le)},[()=>`rounded-full px-2 py-0.5 text-xs ${Jt(s().status)}`,()=>Ut(s().status),()=>s().colour&&!s().colour.startsWith("#")?s().colour:"",()=>({width:`${t(L)??""}%`,"background-color":s().colour&&s().colour.startsWith("#")?s().colour:"",opacity:v()?.5:1})]),c(h,S)};k(ut,h=>{h(Lt)})}e(_);var Pt=i(_,2),Et=r(Pt),Mt=r(Et),_t=i(r(Mt),2),Ce=r(_t,!0);e(_t),e(Mt);var Te=i(Mt,2);{var Se=h=>{var L=Er(),S=i(r(L),2),I=r(S);e(S),e(L),E((O,R)=>{j(S,1,`text-sm ${v()?"text-zinc-500":"text-zinc-300"}`),H(I,`${O??""} - ${R??""}`)},[()=>Y(s().start_at),()=>Y(s().end_at)]),c(h,L)};k(Te,h=>{(s().start_at||s().end_at)&&h(Se)})}e(Et),e(Pt),e(z),E(h=>{j(z,1,`group relative flex w-full cursor-pointer flex-col gap-4 rounded-lg border p-4 text-left transition-all ${v()?"border-zinc-800/60 bg-zinc-900/30 text-zinc-500 hover:border-zinc-700/60 hover:bg-zinc-900/40":"border-zinc-800 bg-zinc-900/60 hover:border-zinc-700 hover:bg-zinc-900/80"}`),j(x,1,`truncate text-base font-bold ${v()?"text-zinc-500":"text-zinc-100"}`),Xe(x,"title",s().name),H(P,s().name),j(_t,1,`text-sm font-medium ${v()?"text-zinc-500":"text-emerald-400"}`),H(Ce,h)},[()=>C(s().funds)]),c(o,z)};var W=Nr(),J=it(W);st(J,21,()=>t(_e),ot,(o,s)=>{G(o,()=>t(s),()=>!1)}),e(J);var K=i(J,2);{var bt=o=>{var s=jr(),v=i(it(s),2);st(v,21,()=>t(de),ot,(z,_)=>{G(z,()=>t(_),()=>!0)}),e(v),c(o,s)};k(K,o=>{t(de).length>0&&o(bt)})}c(T,W)},ge=T=>{var G=qr(),W=r(G),J=r(W);st(J,21,()=>t(U).months,ot,(_,p)=>{var x=Fr();let P;E(M=>P=lt(x,"",P,M),[()=>({left:`${(t(p).getTime()-t(U).start.getTime())/(t(U).end.getTime()-t(U).start.getTime())*100}%`})]),c(_,x)}),e(J);var K=i(J,2),bt=r(K);st(bt,21,()=>t(U).months,ot,(_,p)=>{var x=Or();let P;var M=r(x,!0);e(x),E((q,Q)=>{P=lt(x,"",P,q),H(M,Q)},[()=>({left:`${(t(p).getTime()-t(U).start.getTime())/(t(U).end.getTime()-t(U).start.getTime())*100}%`}),()=>t(p).toLocaleDateString("en-US",{month:"long"})]),c(_,x)}),e(bt),e(K);var o=i(K,2),s=r(o);st(s,17,()=>t(U).projects,ot,(_,p)=>{var x=Hr(),P=r(x),M=r(P);let q;var Q=i(M,2),et=r(Q,!0);e(Q),e(P),e(x),E((vt,ut,Lt)=>{lt(P,vt),j(M,1,`h-2 w-full rounded-full shadow-sm transition-all hover:brightness-110 ${ut??""}`),q=lt(M,"",q,Lt),H(et,t(p).name)},[()=>xe(t(p),t(U).start,t(U).end),()=>t(p).colour&&!t(p).colour.startsWith("#")?t(p).colour:"bg-indigo-600",()=>({"background-color":t(p).colour&&t(p).colour.startsWith("#")?t(p).colour:void 0})]),c(_,x)});var v=i(s,2);{var z=_=>{var p=Ur();c(_,p)};k(v,_=>{t(U).projects.length===0&&_(z)})}e(o),e(W),e(G),c(T,G)};k(ke,T=>{t(kt)==="list"?T(De):T(ge,!1)})}E(()=>{H(we,`Completed ${t(pe)??""} / ${t(wt).length??""}`),j(dt,1,`rounded-md p-1.5 transition-all ${t(kt)==="list"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`),j(At,1,`rounded-md p-1.5 transition-all ${t(kt)==="gantt"?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-300"}`)}),Ee(St,()=>t(Dt),T=>y(Dt,T)),c(mt,Bt)};k(V,mt=>{t(wt).length===0?mt(A):mt(te,!1)},!0)}c(N,F)};k(f,N=>{t(B)?N(D,!1):N(b)},!0)}c(a,l)};k(Xt,a=>{t(zt)&&t(B)!==null?a(Zt):a($t,!1)})}e(Kt),c(be,tt),He()}Ue(["click"]);export{ia as component};
