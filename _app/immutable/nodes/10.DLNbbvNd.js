import{c as Ge,a as u,f as p}from"../chunks/DfBUW2EX.js";import{p as ht,l as W,m as zt,z as Dt,t as k,k as R,a as yt,A as a,B as t,D as o,F as D,n as e,G as At,I as St,o as Lt,J as xt,K as Y}from"../chunks/CWKX6I-G.js";import{d as kt,s as j,e as tt}from"../chunks/CYGYm-mD.js";import{i as T}from"../chunks/dtqBgZjR.js";import{r as Ae,e as $,i as ee,s as Ee,b as pt,a as H,c as Et,d as jt}from"../chunks/KZ_UlTxQ.js";import{s as Se}from"../chunks/Bkout0r_.js";import{t as Ot,f as Bt}from"../chunks/BPxw6sm7.js";import{b as pe}from"../chunks/BTcorzso.js";import{s as Z}from"../chunks/DK3I1aua.js";import{T as ft}from"../chunks/BgaTYqli.js";import{G as Mt,S as Ht,E as It,L as Nt,a as Ut}from"../chunks/JaV54Xw5.js";import{P as wt}from"../chunks/D54pIDuW.js";import{S as qt}from"../chunks/BfiE4ywc.js";import{a as Le,b as Ft,c as Gt}from"../chunks/CTvbdkQS.js";import{L as Pt}from"../chunks/bHIvvzCn.js";import{A as Rt,a as Wt}from"../chunks/DScW-YBI.js";var Kt=p("<option> </option>"),Jt=p("<div></div>"),Vt=p("<option> </option>"),Qt=p('<div class="flex items-center gap-2"><button type="button" class="text-zinc-400 hover:text-zinc-200"><!></button> <input type="text" placeholder="Item description..."/> <div class="flex items-center gap-1"><div role="button" tabindex="0" class="cursor-grab p-1 text-zinc-600 hover:text-zinc-400 active:cursor-grabbing" draggable="true"><!></div> <button type="button" class="p-1 text-zinc-500 hover:text-red-400"><!></button></div></div>'),Xt=p('<div class="rounded-lg border border-zinc-800 bg-zinc-800/30 p-4"><div class="mb-3 flex items-center justify-between gap-2"><input type="text" placeholder="Checklist Title" class="w-full bg-transparent text-sm font-bold text-zinc-200 placeholder-zinc-600 focus:outline-none"/> <button type="button" class="text-zinc-600 hover:text-red-400" title="Remove Checklist"><!></button></div> <div class="space-y-2"><!> <button type="button" class="mt-2 flex items-center gap-1 text-xs text-zinc-500 hover:text-zinc-300"><!> Add Item</button></div></div>'),Yt=p('<div class="space-y-6"></div>'),Zt=p('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No checklists yet</p></div>'),$t=p('<div class="flex items-center gap-2"><div class="grid flex-1 grid-cols-1 gap-2 md:grid-cols-2"><input type="text" placeholder="Label (optional)" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/> <input type="text" placeholder="URL" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <button type="button" class="p-2 text-zinc-400 hover:text-indigo-400" title="Open Link"><!></button> <button type="button" class="p-2 text-zinc-400 hover:text-red-400" title="Remove Link"><!></button></div>'),er=p('<div class="space-y-2"></div>'),tr=p('<div class="rounded-lg border border-dashed border-zinc-800 p-4 text-center"><p class="text-sm text-zinc-500">No links yet</p></div>'),rr=p('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-2 backdrop-blur-sm md:p-4" role="dialog" aria-modal="true" tabindex="-1"><div class="flex max-h-[95vh] w-full max-w-2xl flex-col overflow-y-auto rounded-xl border border-zinc-800 bg-zinc-900 shadow-xl md:max-h-[90vh]"><div class="sticky top-0 z-10 flex items-center justify-between border-b border-zinc-800 bg-zinc-900 p-4 md:p-6"><h2 class="text-xl font-bold text-zinc-100"> </h2> <button class="text-zinc-400 transition-colors hover:text-zinc-200" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="space-y-6 p-4 md:p-6"><div><label for="title" class="mb-1 block text-sm font-medium text-zinc-400">Title</label> <input type="text" id="title" required class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="type" class="mb-1 block text-sm font-medium text-zinc-400">Type</label> <div class="flex items-center gap-2"><select id="type" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"><option>Select Type</option><!></select> <!></div></div> <div><label for="status" class="mb-1 block text-sm font-medium text-zinc-400">Status</label> <select id="status" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></select></div></div> <div class="grid grid-cols-1 gap-6 md:grid-cols-2"><div><label for="deadline_at" class="mb-1 block text-sm font-medium text-zinc-400">Deadline</label> <input type="date" id="deadline_at" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"/></div></div> <div><label for="body" class="mb-1 block text-sm font-medium text-zinc-400">Description</label> <textarea id="body" rows="3" class="w-full rounded-md border border-zinc-700 bg-zinc-800 p-2 text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Checklists</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Checklist</button></div> <!></div> <div class="space-y-4"><div class="flex items-center justify-between"><span class="block text-sm font-medium text-zinc-400">Links</span> <button type="button" class="text-xs transition-colors hover:brightness-125">+ Add Link</button></div> <!></div> <div class="sticky bottom-0 mt-6 flex justify-end gap-3 border-t border-zinc-800 bg-zinc-900 pt-4"><button type="button" class="rounded-md bg-zinc-800 px-3.5 py-2.5 text-sm font-semibold text-zinc-200 shadow-sm ring-1 ring-zinc-700 ring-inset hover:bg-zinc-700">Cancel</button> <button type="submit" class="rounded-md px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm transition-all hover:brightness-110 focus-visible:outline-2 focus-visible:outline-offset-2">Save</button></div></form></div></div>');function ar(rt,m){ht(m,!0);let r=W(zt({title:"",type:"",status:"todo",body:"",deadline_at:"",completed_at:null,color:"#000000",checklist:[],links:[]})),O=W(null);const te=[{value:"todo",label:"To Do"},{value:"in_progress",label:"In Progress"},{value:"done",label:"Done"}];Dt(()=>{m.isOpen&&(m.entry?k(r,{title:m.entry.title||"",type:m.entry.type||"",status:m.entry.status||"todo",body:m.entry.body||"",deadline_at:m.entry.deadline_at||"",completed_at:m.entry.completed_at||null,color:m.entry.color||"#000000",checklist:Array.isArray(m.entry.checklist)&&m.entry.checklist.length>0?"items"in m.entry.checklist[0]?m.entry.checklist:[{id:crypto.randomUUID(),title:"Checklist",items:m.entry.checklist}]:[],links:Array.isArray(m.entry.links)?m.entry.links:[]},!0):k(r,{title:"",type:"",status:"todo",body:"",deadline_at:"",completed_at:null,color:"#000000",checklist:[],links:[]},!0))});function K(c){c.preventDefault(),e(r).status==="done"?e(r).completed_at||(e(r).completed_at=new Date().toISOString()):e(r).completed_at=null;const d={...e(r),deadline_at:e(r).deadline_at||null};m.onSave(d)}function ne(c){c.target===c.currentTarget&&m.onClose()}function U(c){c.key==="Escape"&&m.onClose()}function le(){e(r).checklist=[...e(r).checklist,{id:crypto.randomUUID(),title:"New Checklist",items:[]}]}function me(c){e(r).checklist=e(r).checklist.filter((d,y)=>y!==c)}function at(c){const d=e(r).checklist[c];d.items=[...d.items,{text:"",completed:!1}],e(r).checklist[c]=d}function Pe(c,d){const y=e(r).checklist[c];y.items=y.items.filter((I,q)=>q!==d),e(r).checklist[c]=y}function it(c,d){const y=e(r).checklist[c];y.items[d].completed=!y.items[d].completed,e(r).checklist[c]=y}function Re(c,d,y){k(O,{listIndex:d,itemIndex:y},!0),c.dataTransfer&&(c.dataTransfer.effectAllowed="move",c.dataTransfer.dropEffect="move")}function ot(c,d,y){if(c.preventDefault(),!e(O)||e(O).listIndex!==d||e(O).itemIndex===y)return;const I=e(r).checklist[d],q=e(O).itemIndex,re=y,je=I.items[q],J=[...I.items];J.splice(q,1),J.splice(re,0,je),I.items=J,e(r).checklist[d]=I,e(O).itemIndex=re}function st(){k(O,null)}function ce(){if(e(r).type){const c=Z.getTaskType(e(r).type);c&&c.color&&(e(r).color=c.color)}}function nt(){e(r).links=[...e(r).links,{url:"",label:""}]}function lt(c){e(r).links=e(r).links.filter((d,y)=>y!==c)}function ct(c){if(!c)return;let d=c;/^https?:\/\//i.test(d)||(d="https://"+d),window.open(d,"_blank","noopener,noreferrer")}var We=Ge(),Ke=R(We);{var dt=c=>{var d=rr();d.__click=ne,d.__keydown=U;var y=a(d),I=a(y),q=a(I),re=a(q,!0);t(q);var je=o(q,2);je.__click=function(...s){m.onClose?.apply(this,s)},t(I);var J=o(I,2),Oe=a(J),Je=o(a(Oe),2);Ae(Je),t(Oe);var Be=o(Oe,2),i=a(Be),n=o(a(i),2),v=a(n);v.__change=ce;var _=a(v);_.value=_.__value="";var F=o(_);$(F,17,()=>Z.settings.task_types,ee,(s,g)=>{var f=Kt(),z=a(f,!0);t(f);var w={};D(()=>{j(z,e(g).label),w!==(w=e(g).id)&&(f.value=(f.__value=e(g).id)??"")}),u(s,f)}),t(v);var ae=o(v,2);{var _e=s=>{var g=Jt();let f;D(z=>{f=H(g,1,"h-8 w-8 shrink-0 rounded-full border border-zinc-600 shadow-sm",null,f,{"bg-zinc-500":e(r).color==="bg-zinc-500","bg-red-600":e(r).color==="bg-red-600","bg-orange-600":e(r).color==="bg-orange-600","bg-amber-500":e(r).color==="bg-amber-500","bg-green-600":e(r).color==="bg-green-600","bg-emerald-500":e(r).color==="bg-emerald-500","bg-teal-500":e(r).color==="bg-teal-500","bg-cyan-500":e(r).color==="bg-cyan-500","bg-blue-600":e(r).color==="bg-blue-600","bg-indigo-600":e(r).color==="bg-indigo-600","bg-violet-600":e(r).color==="bg-violet-600","bg-purple-600":e(r).color==="bg-purple-600","bg-fuchsia-600":e(r).color==="bg-fuchsia-600","bg-pink-600":e(r).color==="bg-pink-600","bg-rose-600":e(r).color==="bg-rose-600"}),Ee(g,z)},[()=>e(r).color.startsWith("#")?`background-color: ${e(r).color}`:""]),u(s,g)};T(ae,s=>{e(r).color&&s(_e)})}t(n),t(i);var Ve=o(i,2),Me=o(a(Ve),2);$(Me,21,()=>te,ee,(s,g)=>{var f=Vt(),z=a(f,!0);t(f);var w={};D(()=>{j(z,e(g).label),w!==(w=e(g).value)&&(f.value=(f.__value=e(g).value)??"")}),u(s,f)}),t(Me),t(Ve),t(Be);var He=o(Be,2),V=a(He),de=o(a(V),2);Ae(de),t(V),t(He);var xe=o(He,2),he=o(a(xe),2);At(he),t(xe);var ve=o(xe,2),ue=a(ve),ze=o(a(ue),2);ze.__click=le,t(ue);var vt=o(ue,2);{var Qe=s=>{var g=Yt();$(g,21,()=>e(r).checklist,ee,(f,z,w)=>{var G=Xt(),L=a(G),A=a(L);Ae(A);var Q=o(A,2);Q.__click=()=>me(w);var N=a(Q);ft(N,{class:"h-4 w-4"}),t(Q),t(L);var ye=o(L,2),X=a(ye);$(X,17,()=>e(z).items,ee,(Ne,ke,we)=>{var Te=Qt(),Ce=a(Te);Ce.__click=()=>it(w,we);var Ze=a(Ce);{var Ue=E=>{qt(E,{class:"h-5 w-5 text-emerald-500"})},qe=E=>{Ht(E,{class:"h-5 w-5"})};T(Ze,E=>{e(ke).completed?E(Ue):E(qe,!1)})}t(Ce);var oe=o(Ce,2);Ae(oe);var $e=o(oe,2),se=a($e),gt=a(se);Mt(gt,{class:"h-4 w-4"}),t(se);var De=o(se,2);De.__click=()=>Pe(w,we);var et=a(De);ft(et,{class:"h-3 w-3"}),t(De),t($e),t(Te),D(()=>H(oe,1,`w-full rounded-md border border-zinc-700 bg-zinc-800 p-1.5 text-sm text-zinc-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 ${e(ke).completed?"text-zinc-500 line-through":""}`)),pe(oe,()=>e(ke).text,E=>e(ke).text=E),tt("dragstart",se,E=>Re(E,w,we)),tt("dragover",se,E=>ot(E,w,we)),tt("dragend",se,st),u(Ne,Te)});var be=o(X,2);be.__click=()=>at(w);var ie=a(be);wt(ie,{class:"h-3 w-3"}),St(),t(be),t(ye),t(G),pe(A,()=>e(z).title,Ne=>e(z).title=Ne),u(f,G)}),t(g),u(s,g)},Xe=s=>{var g=Zt();u(s,g)};T(vt,s=>{e(r).checklist&&e(r).checklist.length>0?s(Qe):s(Xe,!1)})}t(ve);var Ie=o(ve,2),ge=a(Ie),Ye=o(a(ge),2);Ye.__click=nt,t(ge);var ut=o(ge,2);{var S=s=>{var g=er();$(g,21,()=>e(r).links,ee,(f,z,w)=>{var G=$t(),L=a(G),A=a(L);Ae(A);var Q=o(A,2);Ae(Q),t(L);var N=o(L,2);N.__click=()=>ct(e(z).url);var ye=a(N);It(ye,{class:"h-4 w-4"}),t(N);var X=o(N,2);X.__click=()=>lt(w);var be=a(X);ft(be,{class:"h-4 w-4"}),t(X),t(G),D(()=>N.disabled=!e(z).url),pe(A,()=>e(z).label,ie=>e(z).label=ie),pe(Q,()=>e(z).url,ie=>e(z).url=ie),u(f,G)}),t(g),u(s,g)},l=s=>{var g=tr();u(s,g)};T(ut,s=>{e(r).links&&e(r).links.length>0?s(S):s(l,!1)})}t(Ie);var b=o(Ie,2),B=a(b);B.__click=function(...s){m.onClose?.apply(this,s)};var M=o(B,2);t(b),t(J),t(y),t(d),D((s,g,f)=>{j(re,m.entry?"Edit Task":"New Task"),Ee(ze,`color: ${s??""}`),Ee(Ye,`color: ${g??""}`),Ee(M,`background-color: ${f??""}`)},[()=>Z.getAccentLightHex(),()=>Z.getAccentLightHex(),()=>Z.getAccentHex()]),tt("submit",J,K),pe(Je,()=>e(r).title,s=>e(r).title=s),pt(v,()=>e(r).type,s=>e(r).type=s),pt(Me,()=>e(r).status,s=>e(r).status=s),pe(de,()=>e(r).deadline_at,s=>e(r).deadline_at=s),pe(he,()=>e(r).body,s=>e(r).body=s),Ot(3,d,()=>Bt,()=>({duration:Z.getTransitionDuration()})),u(c,d)};T(Ke,c=>{m.isOpen&&c(dt)})}u(rt,We),yt()}kt(["click","keydown","change"]);var ir=p('<button class="fixed right-8 bottom-8 z-50 rounded-full p-4 text-white shadow-lg transition-all hover:scale-105 hover:brightness-110" aria-label="New Task"><!></button>'),or=p('<div class="flex h-48 items-center justify-center"><!></div>'),sr=p('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">Sign in to view tasks.</div>'),nr=p('<div class="rounded-lg border border-zinc-800 bg-zinc-900/60 p-6 text-zinc-400">No tasks yet.</div>'),lr=p('<div title="Task Color"></div>'),cr=p('<span class="text-zinc-500">•</span> <span> </span>',1),dr=p('<span class="text-zinc-500">•</span> <!> <span> </span>',1),vr=p('<span class="text-zinc-500">•</span> <!> <span> </span>',1),ur=p("<p> </p>"),gr=p('<div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Completed</span> <span> </span></div>'),br=p('<li><div class="flex flex-col gap-3"><div class="flex items-start justify-between gap-3"><div class="min-w-0 flex-1"><div class="flex flex-wrap items-center gap-2"><!> <h3> </h3></div> <div class="mt-1 flex items-center gap-2 text-xs"><div> </div> <!> <!> <!></div></div></div> <!> <div class="mt-2 flex items-center justify-between gap-4 border-t border-zinc-800/50 pt-3"><div class="flex gap-4"><div class="flex flex-col gap-0.5"><span class="text-[10px] font-bold tracking-wider text-zinc-500 uppercase">Deadline</span> <span> </span></div> <!></div> <div class="flex items-center gap-2"><button class="rounded-md p-2 text-indigo-400 transition-colors hover:bg-zinc-800 hover:text-indigo-300" aria-label="Edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="rounded-md p-2 text-red-400 transition-colors hover:bg-zinc-800 hover:text-red-300" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div></div></li>'),fr=p("<option> </option>"),pr=p('<button><span class="capitalize"> </span> <!></button>'),mr=p('<div class="my-8 flex items-center gap-4"><div class="h-px flex-1 bg-zinc-800"></div> <span class="text-sm font-medium tracking-wider text-zinc-500 uppercase">Archived</span> <div class="h-px flex-1 bg-zinc-800"></div></div> <ul class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"></ul>',1),_r=p('<div class="mb-4 flex flex-wrap items-center gap-4 text-sm"><div class="flex items-center gap-2"><span class="text-zinc-500">Filter:</span> <select class="cursor-pointer rounded-md border border-zinc-700 bg-zinc-800 px-3 py-1.5 text-sm text-zinc-100 shadow-sm outline-none focus:border-indigo-500 focus:ring-indigo-500"><option>All Tasks</option><!></select></div> <div class="h-4 w-px bg-zinc-800"></div> <span class="text-zinc-500">Sort by:</span> <!> <span class="ml-auto text-xs text-zinc-500"> </span></div> <ul class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"></ul> <!>',1),xr=p('<!> <section class="space-y-6"><div class="flex flex-wrap items-center justify-between gap-4"><h2 class="text-lg font-bold text-zinc-100">Tasks</h2> <!></div> <!></section>',1);function Hr(rt,m){ht(m,!0);let r=W(null),O=W(!0),te=W(zt([])),K=W(!1),ne=W(null),U=W("deadline"),le=W("asc"),me=W("all"),at=Y(()=>e(me)==="all"?e(te):e(te).filter(i=>i.type===e(me))),Pe=Y(()=>[...e(at)].sort((i,n)=>{const v=e(le)==="asc"?1:-1;if(e(U)==="title")return(i.title||"").localeCompare(n.title||"")*v;if(e(U)==="deadline"){const _=i.deadline_at?new Date(i.deadline_at).getTime():v===1?1/0:-1/0,F=n.deadline_at?new Date(n.deadline_at).getTime():v===1?1/0:-1/0;return(_-F)*v}else if(e(U)==="completed"){const _=i.completed_at?new Date(i.completed_at).getTime():0,F=n.completed_at?new Date(n.completed_at).getTime():0;return(_-F)*v}else if(e(U)==="created"){const _=new Date(i.created_at).getTime(),F=new Date(n.created_at).getTime();return(_-F)*v}else if(e(U)==="status")return(i.status||"").localeCompare(n.status||"")*v;return 0})),it=Y(()=>e(Pe).filter(i=>i.status!=="done")),Re=Y(()=>e(Pe).filter(i=>i.status==="done")),ot=Y(()=>e(te).filter(i=>i.status==="done").length);function st(i){e(U)===i?k(le,e(le)==="asc"?"desc":"asc",!0):(k(U,i,!0),k(le,"asc"))}Lt(()=>{Se.auth.getSession().then(({data:{session:n}})=>{k(r,n,!0),n?ce():k(O,!1)});const{data:{subscription:i}}=Se.auth.onAuthStateChange((n,v)=>{k(r,v,!0),v?ce():k(O,!1)});return()=>i.unsubscribe()});async function ce(){k(O,!0),console.log("Fetching tasks...");const{data:i,error:n}=await Se.from("tasks").select("*").order("deadline_at",{ascending:!0});!n&&i?k(te,i,!0):n&&console.error("Error fetching tasks:",n),k(O,!1)}function nt(){k(ne,null),k(K,!0)}function lt(i){k(ne,i,!0),k(K,!0)}async function ct(i){if(!await Gt("Are you sure you want to delete this task?","Delete Task",{confirmText:"Delete",isDestructive:!0}))return;const{error:v}=await Se.from("tasks").delete().eq("id",i);v?(console.error("Error deleting task:",v),Le("Error deleting: "+v.message,"Error")):(Le("Task deleted successfully!","Success"),ce())}async function We(i){const{id:n,...v}=i;if(e(ne)){const{error:_}=await Se.from("tasks").update(v).eq("id",e(ne).id);_?(console.error("Error updating task:",_),Le("Error updating: "+_.message,"Error")):(Le("Task updated successfully!","Success"),k(K,!1),ce())}else{const{error:_}=await Se.from("tasks").insert(v);_?(console.error("Error saving task:",_),Le("Error saving: "+_.message,"Error")):(Le("Task saved successfully!","Success"),k(K,!1),ce())}}const Ke=i=>i?new Date(i).toLocaleDateString():"—";function dt(i){switch(i){case"todo":return{bg:"bg-zinc-500/10",text:"text-zinc-400",border:"border-zinc-500/20"};case"in_progress":return{bg:"bg-indigo-500/10",text:"text-indigo-400",border:"border-indigo-500/20"};case"done":return{bg:"bg-emerald-500/10",text:"text-emerald-400",border:"border-emerald-500/20"};case"archived":return{bg:"bg-zinc-800",text:"text-zinc-500",border:"border-zinc-700"};default:return{bg:"bg-zinc-500/10",text:"text-zinc-400",border:"border-zinc-500/20"}}}function c(i){return i?i.split("_").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"Unknown"}function d(i){if(!i)return{total:0,completed:0};if(Array.isArray(i)&&i.length>0&&"items"in i[0]){let n=0,v=0;return i.forEach(_=>{_.items&&(n+=_.items.length,v+=_.items.filter(F=>F.completed).length)}),{total:n,completed:v}}return Array.isArray(i)&&i.length>0?{total:i.length,completed:i.filter(n=>n.completed).length}:{total:0,completed:0}}var y=xr(),I=R(y);ar(I,{get isOpen(){return e(K)},get entry(){return e(ne)},onClose:()=>k(K,!1),onSave:We});var q=o(I,2),re=a(q),je=o(a(re),2);{var J=i=>{var n=ir();n.__click=nt;var v=a(n);wt(v,{class:"h-6 w-6"}),t(n),D(_=>Ee(n,`background-color: ${_??""}`),[()=>Z.getAccentHex()]),u(i,n)};T(je,i=>{e(r)&&!e(K)&&!Ft.isOpen&&i(J)})}t(re);var Oe=o(re,2);{var Je=i=>{var n=or(),v=a(n);Pt(v,{class:"h-6 w-6 animate-spin text-indigo-400"}),t(n),u(i,n)},Be=i=>{var n=Ge(),v=R(n);{var _=ae=>{var _e=sr();u(ae,_e)},F=ae=>{var _e=Ge(),Ve=R(_e);{var Me=V=>{var de=nr();u(V,de)},He=V=>{const de=(S,l=xt,b=xt)=>{const B=Y(()=>dt(l().status));var M=br(),s=a(M),g=a(s),f=a(g),z=a(f),w=a(z);{var G=x=>{var h=lr();D((C,P)=>{H(h,1,C),Ee(h,P)},[()=>`h-3 w-3 rounded-full ${b()?"opacity-50":""} ${l().color.startsWith("bg-")?l().color:""}`,()=>l().color.startsWith("bg-")?"":`background-color: ${l().color}`]),u(x,h)};T(w,x=>{l().color&&x(G)})}var L=o(w,2),A=a(L,!0);t(L),t(z);var Q=o(z,2),N=a(Q),ye=a(N,!0);t(N);var X=o(N,2);{var be=x=>{var h=cr(),C=o(R(h),2),P=a(C,!0);t(C),D(fe=>{H(C,1,jt(b()?"text-zinc-600":"text-zinc-400")),j(P,fe)},[()=>Z.getTaskType(l().type)?.label??l().type]),u(x,h)};T(X,x=>{l().type&&x(be)})}var ie=o(X,2);{var Ne=x=>{const h=Y(()=>d(l().checklist));var C=Ge(),P=R(C);{var fe=Fe=>{var mt=dr(),_t=o(R(mt),2);{let Ct=Y(()=>`h-4 w-4 ${b()?"text-zinc-600":"text-zinc-400"}`);Ut(_t,{get class(){return e(Ct)}})}var bt=o(_t,2),Tt=a(bt);t(bt),D(()=>{H(bt,1,`text-xs ${b()?"text-zinc-600":"text-zinc-500"}`),j(Tt,`${e(h).completed??""}/${e(h).total??""}`)}),u(Fe,mt)};T(P,Fe=>{e(h).total>0&&Fe(fe)})}u(x,C)};T(ie,x=>{l().checklist&&x(Ne)})}var ke=o(ie,2);{var we=x=>{var h=vr(),C=o(R(h),2);{let Fe=Y(()=>`h-4 w-4 ${b()?"text-zinc-600":"text-zinc-400"}`);Nt(C,{get class(){return e(Fe)}})}var P=o(C,2),fe=a(P,!0);t(P),D(()=>{H(P,1,`text-xs ${b()?"text-zinc-600":"text-zinc-500"}`),j(fe,l().links.length)}),u(x,h)};T(ke,x=>{l().links&&l().links.length>0&&x(we)})}t(Q),t(f),t(g);var Te=o(g,2);{var Ce=x=>{var h=ur(),C=a(h,!0);t(h),D(()=>{H(h,1,`line-clamp-3 text-sm ${b()?"text-zinc-600":"text-zinc-400"}`),j(C,l().body)}),u(x,h)};T(Te,x=>{l().body&&x(Ce)})}var Ze=o(Te,2),Ue=a(Ze),qe=a(Ue),oe=o(a(qe),2),$e=a(oe,!0);t(oe),t(qe);var se=o(qe,2);{var gt=x=>{var h=gr(),C=o(a(h),2),P=a(C,!0);t(C),t(h),D(fe=>{H(C,1,`text-xs ${b()?"text-zinc-500":"text-emerald-400"}`),j(P,fe)},[()=>Ke(l().completed_at)]),u(x,h)};T(se,x=>{l().completed_at&&x(gt)})}t(Ue);var De=o(Ue,2),et=a(De);et.__click=()=>lt(l());var E=o(et,2);E.__click=()=>ct(l().id),t(De),t(Ze),t(s),t(M),D((x,h)=>{H(M,1,`group relative flex flex-col justify-between rounded-lg border p-4 transition-all ${b()?"border-zinc-800/60 bg-zinc-900/30 text-zinc-500 hover:border-zinc-700/60 hover:bg-zinc-900/40":"border-zinc-800 bg-zinc-900/60 hover:border-zinc-700 hover:bg-zinc-900/80"}`),H(L,1,`truncate text-base font-bold ${b()?"text-zinc-500":"text-zinc-100"}`),Et(L,"title",l().title),j(A,l().title),H(N,1,`shrink-0 rounded-full px-2 py-0.5 font-medium ${e(B).bg} ${e(B).text}`),j(ye,x),H(oe,1,`text-xs ${b()?"text-zinc-500":"text-zinc-300"}`),j($e,h)},[()=>c(l().status),()=>Ke(l().deadline_at)]),u(S,M)};var xe=_r(),he=R(xe),ve=a(he),ue=o(a(ve),2),ze=a(ue);ze.value=ze.__value="all";var vt=o(ze);$(vt,17,()=>Z.settings.task_types,ee,(S,l)=>{var b=fr(),B=a(b,!0);t(b);var M={};D(()=>{j(B,e(l).label),M!==(M=e(l).id)&&(b.value=(b.__value=e(l).id)??"")}),u(S,b)}),t(ue),t(ve);var Qe=o(ve,6);$(Qe,16,()=>["title","deadline","created","status","completed"],ee,(S,l)=>{var b=pr();b.__click=()=>st(l);var B=a(b),M=a(B,!0);t(B);var s=o(B,2);{var g=f=>{var z=Ge(),w=R(z);{var G=A=>{Rt(A,{class:"h-3 w-3"})},L=A=>{Wt(A,{class:"h-3 w-3"})};T(w,A=>{e(le)==="asc"?A(G):A(L,!1)})}u(f,z)};T(s,f=>{e(U)===l&&f(g)})}t(b),D(()=>{H(b,1,`flex items-center gap-1 rounded-md px-3 py-1.5 transition-colors ${e(U)===l?"bg-indigo-500/20 text-indigo-300":"bg-zinc-800/50 text-zinc-400 hover:bg-zinc-800"}`),j(M,l)}),u(S,b)});var Xe=o(Qe,2),Ie=a(Xe);t(Xe),t(he);var ge=o(he,2);$(ge,21,()=>e(it),ee,(S,l)=>{de(S,()=>e(l),()=>!1)}),t(ge);var Ye=o(ge,2);{var ut=S=>{var l=mr(),b=o(R(l),2);$(b,21,()=>e(Re),ee,(B,M)=>{de(B,()=>e(M),()=>!0)}),t(b),u(S,l)};T(Ye,S=>{e(Re).length>0&&S(ut)})}D(()=>j(Ie,`Completed ${e(ot)??""} / ${e(te).length??""}`)),pt(ue,()=>e(me),S=>k(me,S)),u(V,xe)};T(Ve,V=>{e(te).length===0?V(Me):V(He,!1)},!0)}u(ae,_e)};T(v,ae=>{e(r)?ae(F,!1):ae(_)},!0)}u(i,n)};T(Oe,i=>{e(O)&&e(r)!==null?i(Je):i(Be,!1)})}t(q),u(rt,y),yt()}kt(["click"]);export{Hr as component};
